[{"content":"Serverless Devs æ˜¯ä¸€ä¸ªå¼€æºå¼€æ”¾çš„ Serverless å¼€å‘è€…å¹³å°ï¼Œè‡´åŠ›äºä¸ºå¼€å‘è€…æä¾›å¼ºå¤§çš„å·¥å…·é“¾ä½“ç³»ã€‚é€šè¿‡è¯¥å¹³å°ï¼Œå¼€å‘è€…ä¸ä»…å¯ä»¥ä¸€é”®ä½“éªŒå¤šäº‘ Serverless äº§å“ï¼Œæé€Ÿéƒ¨ç½² Serverless é¡¹ç›®ï¼Œè¿˜å¯ä»¥åœ¨ Serverless åº”ç”¨å…¨ç”Ÿå‘½å‘¨æœŸè¿›è¡Œé¡¹ç›®çš„ç®¡ç†ï¼Œå¹¶ä¸”éå¸¸ç®€å•å¿«é€Ÿçš„å°† Serverless Devs ä¸å…¶ä»–å·¥å…·/å¹³å°è¿›è¡Œç»“åˆï¼Œè¿›ä¸€æ­¥æå‡ç ”å‘ã€è¿ç»´æ•ˆèƒ½ã€‚\nå¹³å°/äº§å“æ”¯æŒ ç›®å‰ Serverless Devs é¡¹ç›®å·²ç»æ”¯æŒçš„ FaaS å¹³å°/äº§å“ï¼š\nHosted é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ï¼ˆFCï¼‰: é¡¹ç›®ä»“åº“ AWS Lambda: é¡¹ç›®ä»“åº“ ç™¾åº¦æ™ºèƒ½äº‘å‡½æ•°è®¡ç®—ï¼ˆCFCï¼‰: é¡¹ç›®ä»“åº“ åä¸ºäº‘å‡½æ•°å·¥ä½œæµï¼ˆFGï¼‰: é¡¹ç›®ä»“åº“ è…¾è®¯äº‘äº‘å‡½æ•°ï¼ˆSCFï¼‰: é¡¹ç›®ä»“åº“ Installable OpenFunctionï¼ˆofnï¼‰: é¡¹ç›®ä»“åº“ Laf: å¼€å‘ä¸­\u0026hellip; é¡¹ç›®æœŸæœ› Serverless Devs å¸Œæœ›å¯ä»¥ä¸º Serverless å¼€å‘è€…ä»¬æä¾›ä¸€æ¬¾å¯ä»¥æ— å‚å•†é”å®šçš„ï¼Œå¯ä»¥åœ¨ Serverless åº”ç”¨å…¨ç”Ÿå‘½å‘¨æœŸå‘æŒ¥ä½œç”¨çš„ Serverless å¼€å‘è€…å·¥å…·ï¼› Serverless Registry å¸Œæœ›å¯ä»¥ä¸º Serverless ç”Ÿæ€æä¾›ä¸€å¥—å®Œæ•´çš„åŒ…ç®¡ç†è§„èŒƒï¼Œä¸ Python ä¸­çš„ pypiï¼Œ Nodejs ä¸­çš„ npm ç­‰ç±»ä¼¼ï¼Œå°†ä»¥æ­¤æ¥å¼€æ”¾å’Œåˆ†äº« Serverless Packageï¼Œå»ºè®¾ Serverless ç”Ÿæ€ï¼› Serverless Developer Meetup å¸Œæœ›å¯ä»¥æ‰“é€ æœ€ç¬¦åˆ Serverless å¼€å‘è€…çš„ç¤¾åŒºæ´»åŠ¨ï¼Œé€šè¿‡è¿™ä¸ªæ´»åŠ¨ï¼Œå¸Œæœ›æ›´å¤šäººå¯ä»¥ä¸€èµ·äº¤æµã€å­¦ä¹  Serverless ç›¸å…³çš„äº§å“ï¼› å¿«é€Ÿä¸Šæ‰‹ æœ¬å¿«é€Ÿä¸Šæ‰‹æ¡ˆä¾‹ä»¥ é˜¿é‡Œäº‘å‡½æ•°è®¡ç®— ä¸ºä¾‹çš„å¿«é€Ÿä¸Šæ‰‹ Serverless Devs\nå·¥å…·å®‰è£… ç¬¬ä¸€æ­¥ï¼šå®‰è£… Node.js(\u0026gt;=12.0.0) ä¸ NPM åŒ…ç®¡ç†å·¥å…·ï¼› ç¬¬äºŒæ­¥ï¼šå®‰è£… Serverless Devs å¼€å‘è€…å·¥å…·ï¼› 1 $ npm install @serverless-devs/s -g ç¬¬ä¸‰æ­¥ï¼šå¯ä»¥é€šè¿‡s -våˆ¤æ–­å·¥å…·æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¦‚æœå®‰è£…æˆåŠŸå¯ä»¥çœ‹åˆ°ç›¸å¯¹åº”çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š 1 @serverless-devs/s: 2.1.2, core: 0.1.41, s-home: /Users/xxx/.s, darwin-x64, node-v17.7.1 å¯†é’¥é…ç½® ä»¥é˜¿é‡Œäº‘å¯†é’¥é…ç½®ä¸ºä¾‹ï¼š\nè·å–å¯†é’¥é¡µé¢ï¼šhttps://usercenter.console.aliyun.com/#/manage/ak æ‰“å¼€ è·å–å¯†é’¥é¡µé¢ è·å–å¯†é’¥ä¿¡æ¯ ï¼š\næ‰§è¡Œs config addï¼Œå¹¶é€‰æ‹©Alibaba Cloud (alibaba)ï¼š\n1 2 3 4 $ s config add ? Please select a provider: Alibaba Cloud (alibaba) ğŸ§­ Refer to the document for alibaba key: http://config.devsapp.net/account/alibaba ? AccessKeyID: æ­¤æ—¶ï¼Œå¯ä»¥æŒ‰ç…§å¼•å¯¼ï¼Œè¿›è¡Œå¯†é’¥çš„é…ç½®ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 ? Please select a template: Alibaba Cloud (alibaba) ğŸ§­ Refer to the document for alibaba key: http://config.devsapp.net/account/alibaba ? AccessKeyID æ­¤å¤„å¡«å†™AccessKeyID ? AccessKeySecret æ­¤å¤„å¡«å†™AccessKeySecret ? Please create alias for key pair. If not, please enter to skip alibaba-access Alias: alibaba-access AccountID: è‡ªåŠ¨è·å–AccountID AccessKeyID: æ­¤å¤„å¡«å†™AccessKeyID AccessKeySecret: æ­¤å¤„å¡«å†™AccessKeySecret âœ” Configuration successful ä¸ºäº†éªŒè¯å¯†é’¥æ˜¯å¦æ­£ç¡®é…ç½®ï¼Œå¯ä»¥é€šè¿‡s config get -a alibaba-accessè¿›è¡ŒæŒ‡å®šå¯†é’¥çš„æŸ¥çœ‹ï¼š\n1 2 3 4 5 $ s config get -a alibaba-access alibaba-access: AccountID: æ­¤å¤„å¡«*******tID AccessKeyID: æ­¤å¤„å¡«*********yID AccessKeySecret: æ­¤å¤„å¡«*************ret ä¸Šæ‰‹ä½“éªŒ Serverlessï¼šHello World æ‰§è¡Œså‘½ä»¤ï¼š\n1 2 $ s ? No Serverless-Devs project is currently detected. Do you want to create a new project? (Y/n) å¡«å†™yï¼Œå¹¶æŒ‰å›è½¦ï¼Œå¯ä»¥è¿›å…¥åˆ°åˆ›å»ºå¼•å¯¼éƒ¨åˆ†ï¼š\n1 2 3 4 5 6 7 8 9 ğŸš€ More applications: https://registry.serverless-devs.com ? Hello Serverless for Cloud Vendors (Use arrow keys or type to search) â¯ Alibaba Cloud Serverless AWS Cloud Serverless Baidu Cloud Serverless Huawei Cloud Serverless Tencent Cloud Serverless Dev Template for Serverless Devs æ­¤æ—¶åªéœ€è¦é€‰æ‹©å¯¹åº”çš„é€‰é¡¹ï¼ŒæŒ‰ç…§å¼•å¯¼è¿›è¡Œæ“ä½œï¼Œå³å¯ã€‚ä¾‹å¦‚é€‰æ‹©Alibaba Cloud Serverlessï¼Œå°±å¯ä»¥çœ‹åˆ°é˜¿é‡Œäº‘Serverlessäº§å“ä¸‹çš„åº”ç”¨æ¨¡æ¿åˆ†ç±»:\n1 2 3 4 5 6 ? Hello, serverlesser. Which template do you like? (Use arrow keys or type to search) â¯ Quick start [Deploy a Hello World function to FaaS] Container example [Deploy function to FaaS with custom-container] Web Framework [Deploy a web framework to FaaS] Static website [Deploy a static website] Best practice [Experience serverless project] æ­¤æ—¶å¯ä»¥ç»§ç»­é€‰æ‹©æŸåˆ†ç±»ä¸‹çš„å…·ä½“åº”ç”¨è¿›è¡Œåˆå§‹åŒ–ï¼Œä¾‹å¦‚é€‰æ‹©Quick startä¹‹åï¼Œå¯ä»¥çœ‹åˆ°è¯¥åˆ†ç±»ä¸‹çš„å…·ä½“æ¨¡æ¿åº”ç”¨ï¼š\n1 2 3 4 5 6 7 8 9 ? Which template do you like? (Use arrow keys or type to search) â¯ [HTTP] Node.js 14 - å¿«é€Ÿéƒ¨ç½²ä¸€ä¸ª nodejs14 httpå‡½æ•° [HTTP] Python3 - å¿«é€Ÿéƒ¨ç½²ä¸€ä¸ª python3 httpå‡½æ•° [HTTP] Java8 - å¿«é€Ÿéƒ¨ç½²ä¸€ä¸ª java8 httpå‡½æ•° [HTTP] PHP7 - å¿«é€Ÿéƒ¨ç½²ä¸€ä¸ª php httpå‡½æ•° [HTTP] C++ (custom)- å¿«é€Ÿéƒ¨ç½²ä¸€ä¸ª C++ httpå‡½æ•° [Event] Node.js 14 - å¿«é€Ÿéƒ¨ç½²ä¸€ä¸ª nodejs14 eventå‡½æ•° [Event] Python3 - å¿«é€Ÿéƒ¨ç½²ä¸€ä¸ª python3 eventå‡½æ•° ... ... é€‰æ‹©[HTTP] Node.js 14å³å¯å®Œæˆåˆ›å»ºï¼Œåœ¨å¼•å¯¼çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°å¡«å†™é¡¹ç›®åç§°ä»¥åŠé€‰æ‹©å¯†é’¥çš„è¿‡ç¨‹ï¼š\né¡¹ç›®åç§°å¯ä»¥æ˜¯ï¼šstart-fc-http-nodejs14 åœ°åŸŸå¯ä»¥æ˜¯ï¼šcn-hangzhou æœåŠ¡åå¯ä»¥æ˜¯ï¼š hello-world-service å‡½æ•°åå¯ä»¥æ˜¯ï¼š start-fc-http-nodejs14 å¯†é’¥å¯ä»¥é€‰æ‹©æˆ‘ä»¬ä¸Šæ–‡ä¸­åˆ›å»ºè¿‡çš„ï¼šalibaba-access ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 ğŸš€ More applications: https://registry.serverless-devs.com ? Hello Serverless for Cloud Vendors Alibaba Cloud Serverless ? Hello, serverlesser. Which template do you like? Quick start [Deploy a Hello World function to FaaS] ? Which template do you like? [HTTP] Node.js 14 ğŸ˜‹ Create application command: [s init devsapp/start-fc-http-nodejs14] ? Please input your project name (init dir) start-fc-http-nodejs14 âœ” file decompression completed Serverless Devs Application Case Cloud services requiredï¼š - FC : https://fc.console.aliyun.com/ Tipsï¼š - FC Component: https://www.serverless-devs.com/fc/readme åˆ›å»ºåº”ç”¨æ‰€åœ¨çš„åœ°åŒº ? åœ°åŸŸ cn-hangzhou æœåŠ¡åç§°ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œä¸­åˆ’çº¿ã€‚ä¸èƒ½ä»¥æ•°å­—ã€ä¸­åˆ’çº¿å¼€å¤´ã€‚é•¿åº¦åœ¨ 1-128 ä¹‹é—´ ? æœåŠ¡å hello-world-service å‡½æ•°åç§°ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œä¸­åˆ’çº¿ã€‚ä¸èƒ½ä»¥æ•°å­—ã€ä¸­åˆ’çº¿å¼€å¤´ã€‚é•¿åº¦åœ¨ 1-64 ä¹‹é—´ ? å‡½æ•°å start-fc-http-nodejs14 ? please select credential alias alibaba-access * Before using, please check whether the actions command in Yaml file is available * Carefully reading the notes in s.yaml is helpful for the use of the tool * If need help in the use process, please apply to join the Dingtalk Group: 33947367 ğŸ„â€ Thanks for using Serverless-Devs ğŸ‘‰ You could [cd /Users/nanxuanli/work/demo/devs/start-fc-http-nodejs14] and enjoy your serverless journey! ğŸ§­ï¸ If you need help for this example, you can use [s -h] after you enter folder. ğŸ’ Document â¤ Star: https://github.com/Serverless-Devs/Serverless-Devs ğŸš€ More applications: https://registry.serverless-devs.com ? Do you want to deploy the project immediately? (Y/n) å¯ä»¥çœ‹åˆ°ï¼Œç³»ç»Ÿåœ¨æœ€åæœ‰ä¸€ä¸ªæé†’ï¼Œæ˜¯å¦è¦éƒ¨ç½²è¯¥é¡¹ç›®ï¼Œæ­¤æ—¶å¯ä»¥è¾“å…¥yï¼Œç›´æ¥è¿›è¡Œé¡¹ç›®çš„éƒ¨ç½²ï¼Œç¨ç­‰ç‰‡åˆ»ï¼Œå¯ä»¥çœ‹åˆ°éƒ¨ç½²ç»“æœï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 helloworld: region: cn-hangzhou service: name: hello-world-service function: name: start-fc-http-nodejs14 runtime: nodejs14 handler: index.handler memorySize: 128 timeout: 60 url: system_url: https://start-fp-nodejs-hello-w-service-uxcvfbhdii.cn-hangzhou.fcapp.run custom_domain: - domain: http://start-fc-http-nodejs14.hello-world-service.1816647648916833.cn-hangzhou.fc.devsapp.net triggers: - type: http name: httpTrigger æ­¤æ—¶å¯ä»¥æ‰“å¼€domainè¿”å›ç»™æˆ‘ä»¬çš„åŸŸåï¼Œè¿›è¡Œæµ‹è¯•ã€‚\näººå·¥æ™ºèƒ½ï¼šç›®æ ‡æ£€æµ‹ åˆå§‹åŒ–ä¸€ä¸ªå·²æœ‰çš„äººå·¥æ™ºèƒ½ç›®æ ‡æ£€æµ‹é¡¹ç›®ï¼šs init devsapp/image-prediction-appï¼Œåˆå§‹åŒ–è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°å¡«å†™é¡¹ç›®åç§°ä»¥åŠé€‰æ‹©å¯†é’¥çš„è¿‡ç¨‹ï¼š\né¡¹ç›®åç§°å¯ä»¥æ˜¯ï¼šimage-prediction-app å¯†é’¥å¯ä»¥é€‰æ‹©æˆ‘ä»¬ä¸Šæ–‡ä¸­åˆ›å»ºè¿‡çš„ï¼šalibaba-access ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 $ s init devsapp/image-prediction-app ğŸš€ Serverless Awesome: https://github.com/Serverless-Devs/package-awesome ? Please input your project name (init dir) image-prediction-app âœ” file decompression completed ? please select credential alias alibaba-access ___ __ __ _______ _______ _______ | | | |_| || _ || || | | | | || |_| || ___|| ___| | | | || || | __ | |___ | | | || || || || ___| | | | ||_|| || _ || |_| || |___ |___| |_| |_||__| |__||_______||_______| Welcome to the image-prediction-app application This application requires to open these services: FC : https://fc.console.aliyun.com/ This application can help you quickly deploy the image-prediction-app project. The application uses FC componentï¼šhttps://github.com/devsapp/fc The application homepage: https://github.com/devsapp/image-prediction-app ğŸ„â€ Thanks for using Serverless-Devs ğŸ‘‰ You could [cd /Users/jiangyu/start-application/image-prediction-app] and enjoy your serverless journey! ğŸ§­ï¸ If you need help for this example, you can use [s -h] after you enter folder. ğŸ’ Document â¤ Starï¼šhttps://github.com/Serverless-Devs/Serverless-Devs è¿›å…¥é¡¹ç›®ç›®å½•ï¼šcd image-prediction-app\né€šè¿‡deployå‘½ä»¤è¿›è¡Œé¡¹ç›®çš„éƒ¨ç½²ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 Tips for next step ====================== * Display information of the deployed resource: s info * Display metrics: s metrics * Display logs: s logs * Invoke remote function: s invoke * Remove Service: s remove service * Remove Function: s remove function * Remove Trigger: s remove trigger * Remove CustomDomain: s remove domain imageAi: region: cn-hangzhou url: custom_domain: - domain: http://server.ai-cv-image-prediction.1583208943291465.cn-hangzhou.fc.devsapp.net æ­¤æ—¶å¯ä»¥æ‰“å¼€ç³»ç»Ÿåˆ†é…çš„æµ‹è¯•åŸŸåï¼Œå¹¶ä¸Šä¼ ä¸€å¼ å›¾ç‰‡è¿›è¡Œæµ‹è¯•ï¼š ä¼ ç»Ÿæ¡†æ¶ï¼šåŸºäºDjangoçš„åšå®¢é¡¹ç›® åˆå§‹åŒ–ä¸€ä¸ªå·²æœ‰çš„åŸºäºDjangoçš„åšå®¢é¡¹ç›®ï¼šs init django-blogï¼Œåˆå§‹åŒ–è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°å¡«å†™é¡¹ç›®åç§°ä»¥åŠé€‰æ‹©å¯†é’¥çš„è¿‡ç¨‹ï¼š\né¡¹ç›®åç§°å¯ä»¥æ˜¯ï¼šdjango-blog å¯†é’¥å¯ä»¥é€‰æ‹©æˆ‘ä»¬ä¸Šæ–‡ä¸­åˆ›å»ºè¿‡çš„ï¼šalibaba-access ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 $ s init django-blog ğŸš€ Serverless Awesome: https://github.com/Serverless-Devs/package-awesome ? Please input your project name (init dir) django-blog âœ” file decompression completed ? please select credential alias alibaba-access ______ ___ _______ __ _ _______ _______ _______ ___ _______ _______ | | | || _ || | | || || || _ || | | || | | _ | | || |_| || |_| || ___|| _ || |_| || | | _ || ___| | | | | | || || || | __ | | | || || | | | | || | __ | |_| | ___| || || _ || || || |_| || _ | | |___ | |_| || || | | || || _ || | | || |_| || || |_| || || || |_| | |______| |_______||__| |__||_| |__||_______||_______||_______||_______||_______||_______| Welcome to the django-blog application This application requires to open these services: FC : https://fc.console.aliyun.com/ This application can help you quickly deploy the django-blog project. The application uses Django componentï¼šhttps://github.com/devsapp/django The application homepage: https://github.com/devsapp/django-blog * Python 3.7 is recommended; * If the version is greater than Python 3.7: * Operation error: ImportError: cannot import name \u0026#39;metadata\u0026#39; from \u0026#39;importlib\u0026#39;, you can refer to: https://stackoverflow.com/questions/59216175/importerror-cannot-import-name-metadata-from-importlib * Default information: * Adminï¼š/admin * Default Admin Username: blog * Default Admin Password: myblog12345! ğŸ„â€ Thanks for using Serverless-Devs ğŸ‘‰ You could [cd /Users/jiangyu/django-blog] and enjoy your serverless journey! ğŸ§­ï¸ If you need help for this example, you can use [s -h] after you enter folder. ğŸ’ Document â¤ Starï¼šhttps://github.com/Serverless-Devs/Serverless-Devs è¿›å…¥é¡¹ç›®ç›®å½•ï¼šcd django-blog\né€šè¿‡deployå‘½ä»¤è¿›è¡Œé¡¹ç›®çš„éƒ¨ç½²ï¼š\n1 2 3 4 5 6 7 8 9 10 Tips for next step ====================== * Invoke remote function: s invoke âœ” Try container acceleration djangoBlog: region: cn-shenzhen serviceName: serverless-devs-django functionName: django customDomains: - http://django.serverless-devs-django.1583208943291465.cn-shenzhen.fc.devsapp.net æ­¤æ—¶å¯ä»¥æ‰“å¼€ç³»ç»Ÿåˆ†é…çš„æµ‹è¯•åŸŸåï¼Œå¹¶ä¸Šä¼ ä¸€å¼ å›¾ç‰‡è¿›è¡Œæµ‹è¯•ï¼š Resources Github: https://github.com/Serverless-Devs/Serverless-Devs ","permalink":"https://WFUing.github.io/posts/tech/architecture/serverless/serverless-dev/","summary":"Serverless Devs æ˜¯ä¸€ä¸ªå¼€æºå¼€æ”¾çš„ Serverless å¼€å‘è€…å¹³å°ï¼Œè‡´åŠ›äºä¸ºå¼€å‘è€…æä¾›å¼ºå¤§çš„å·¥å…·é“¾ä½“ç³»ã€‚é€šè¿‡è¯¥å¹³å°ï¼Œå¼€å‘è€…ä¸ä»…å¯ä»¥ä¸€é”®ä½“éªŒå¤šäº‘ Serverless äº§å“ï¼Œæé€Ÿéƒ¨ç½² Serverless é¡¹ç›®ï¼Œè¿˜å¯ä»¥åœ¨ Serverless åº”ç”¨å…¨ç”Ÿå‘½å‘¨æœŸè¿›è¡Œé¡¹ç›®çš„ç®¡ç†ï¼Œå¹¶ä¸”éå¸¸ç®€å•å¿«é€Ÿçš„å°† Serverless Devs ä¸å…¶ä»–å·¥å…·/å¹³å°è¿›è¡Œç»“åˆï¼Œè¿›ä¸€æ­¥æå‡ç ”å‘ã€è¿ç»´æ•ˆèƒ½ã€‚\nå¹³å°/äº§å“æ”¯æŒ ç›®å‰ Serverless Devs é¡¹ç›®å·²ç»æ”¯æŒçš„ FaaS å¹³å°/äº§å“ï¼š\nHosted é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ï¼ˆFCï¼‰: é¡¹ç›®ä»“åº“ AWS Lambda: é¡¹ç›®ä»“åº“ ç™¾åº¦æ™ºèƒ½äº‘å‡½æ•°è®¡ç®—ï¼ˆCFCï¼‰: é¡¹ç›®ä»“åº“ åä¸ºäº‘å‡½æ•°å·¥ä½œæµï¼ˆFGï¼‰: é¡¹ç›®ä»“åº“ è…¾è®¯äº‘äº‘å‡½æ•°ï¼ˆSCFï¼‰: é¡¹ç›®ä»“åº“ Installable OpenFunctionï¼ˆofnï¼‰: é¡¹ç›®ä»“åº“ Laf: å¼€å‘ä¸­\u0026hellip; é¡¹ç›®æœŸæœ› Serverless Devs å¸Œæœ›å¯ä»¥ä¸º Serverless å¼€å‘è€…ä»¬æä¾›ä¸€æ¬¾å¯ä»¥æ— å‚å•†é”å®šçš„ï¼Œå¯ä»¥åœ¨ Serverless åº”ç”¨å…¨ç”Ÿå‘½å‘¨æœŸå‘æŒ¥ä½œç”¨çš„ Serverless å¼€å‘è€…å·¥å…·ï¼› Serverless Registry å¸Œæœ›å¯ä»¥ä¸º Serverless ç”Ÿæ€æä¾›ä¸€å¥—å®Œæ•´çš„åŒ…ç®¡ç†è§„èŒƒï¼Œä¸ Python ä¸­çš„ pypiï¼Œ Nodejs ä¸­çš„ npm ç­‰ç±»ä¼¼ï¼Œå°†ä»¥æ­¤æ¥å¼€æ”¾å’Œåˆ†äº« Serverless Packageï¼Œå»ºè®¾ Serverless ç”Ÿæ€ï¼› Serverless Developer Meetup å¸Œæœ›å¯ä»¥æ‰“é€ æœ€ç¬¦åˆ Serverless å¼€å‘è€…çš„ç¤¾åŒºæ´»åŠ¨ï¼Œé€šè¿‡è¿™ä¸ªæ´»åŠ¨ï¼Œå¸Œæœ›æ›´å¤šäººå¯ä»¥ä¸€èµ·äº¤æµã€å­¦ä¹  Serverless ç›¸å…³çš„äº§å“ï¼› å¿«é€Ÿä¸Šæ‰‹ æœ¬å¿«é€Ÿä¸Šæ‰‹æ¡ˆä¾‹ä»¥ é˜¿é‡Œäº‘å‡½æ•°è®¡ç®— ä¸ºä¾‹çš„å¿«é€Ÿä¸Šæ‰‹ Serverless Devs","title":"Serverless Dev"},{"content":"Serverless æ˜¯ä¸€ç§è®¡ç®—æ¨¡å‹ï¼Œå®ƒä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿåœ¨æ— éœ€ç®¡ç†æœåŠ¡å™¨å’ŒåŸºç¡€æ¶æ„çš„æƒ…å†µä¸‹è¿è¡Œä»£ç ï¼ˆæˆ–ç§°å‡½æ•°ï¼‰ã€‚ä½¿ç”¨æ— æœåŠ¡å™¨è®¡ç®—ï¼Œå¼€å‘è€…å¯ä»¥å°†ä»£ç ä¸Šä¼ åˆ°äº‘å¹³å°ï¼Œå¹³å°ä¼šåœ¨éœ€è¦æ—¶æ ¹æ®æµé‡è‡ªåŠ¨è¿›è¡Œèµ„æºåˆ†é…å’Œå¤„ç†ã€‚\nServerless çš„ç‰¹ç‚¹\næŒ‰éœ€åˆ†é… æ— æœåŠ¡å™¨è®¡ç®—åŸºäºäº‹ä»¶é©±åŠ¨å’ŒæŒ‰éœ€è°ƒç”¨ï¼Œåªåœ¨éœ€è¦æ—¶æ‰ä¼šè¿›è¡Œè®¡ç®—èµ„æºçš„åˆ†é…å’Œç®¡ç† å¼¹æ€§ä¼¸ç¼© æ— æœåŠ¡å™¨è®¡ç®—å¹³å°ä¼šè‡ªåŠ¨æ ¹æ®è´Ÿè½½é‡çš„å˜åŒ–è¿›è¡Œèµ„æºçš„åŠ¨æ€åˆ†é…å’Œä¼˜åŒ–ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ ç®€åŒ–å¼€å‘ä¸éƒ¨ç½² å¼€å‘è€…ä¸“æ³¨äºç¼–å†™æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œç®€åŒ–åº”ç”¨å¼€å‘ä»¥åŠéƒ¨ç½²æµç¨‹ Concept Models Serverless æ ¸å¿ƒèµ„æº Service\né˜¿é‡Œäº‘æä¾›æœåŠ¡è¿™ä¸€æŠ½è±¡ æœåŠ¡æ˜¯å‡½æ•°è®¡ç®—èµ„æºç®¡ç†çš„å•ä½ï¼ŒåŒä¸€æœåŠ¡ä¸‹çš„æ‰€æœ‰å‡½æ•°å…±äº«ä¸€äº›è®¾ç½®ï¼Œå¦‚æœåŠ¡æˆæƒå’Œæ—¥å¿—é…ç½® ä¸€ä¸ªåº”ç”¨å¯æ‹†åˆ†ä¸ºå¤šä¸ªæœåŠ¡ï¼Œä¸€ä¸ªæœåŠ¡å¯ç”±å¤šä¸ªå‡½æ•°ç»„æˆ Function\näº‘å‡½æ•°ï¼Œäº‘å‡½æ•°ç”±ä»£ç å’Œè¿è¡Œç¯å¢ƒæè¿°ç»„æˆ äº‘å‡½æ•°å¯èƒ½ä¾èµ–äºå…¶ä»–äº‘å‡½æ•°ï¼Œæˆ–è€…å¤–éƒ¨æœåŠ¡ï¼Œå¦‚å¯¹è±¡å­˜å‚¨ï¼ŒAPI ç½‘å…³ï¼Œæ¶ˆæ¯é˜Ÿåˆ— Trigger\nè§¦å‘å™¨ï¼Œç”¨äºåœ¨æ»¡è¶³æŸäº›æ¡ä»¶æ—¶ï¼Œè§¦å‘ Function çš„æ‰§è¡Œ åŸºäºäº‹ä»¶é©±åŠ¨ å¸¸è§çš„è§¦å‘å™¨ç±»å‹ å®šæ—¶è§¦å‘å™¨ Cron Trigger API ç½‘å…³è§¦å‘å™¨ HTTP Trigger æ¶ˆæ¯é˜Ÿåˆ—è§¦å‘å™¨ MQ Trigger External Service\näº‘å‡½æ•°åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½è°ƒç”¨å¤–éƒ¨çš„æœåŠ¡å®Œæˆä»»åŠ¡ï¼Œå¦‚è°ƒç”¨ Redis æˆ– RDBMS å­˜å‚¨çŠ¶æ€ Function è¡¨ç¤º Serverless å‡½æ•°\nFunction åŸºæœ¬ä¿¡æ¯\nåŒ…æ‹¬å‡½æ•°çš„ä»£ç  URIï¼Œè¿è¡Œæ—¶ï¼Œå¤„ç†å‡½æ•°åç§°ç­‰\nFunction èµ„æºéœ€æ±‚\næŒ‡å®šå‡½æ•°è¿è¡Œæ—¶æ‰€éœ€çš„è®¡ç®—èµ„æºï¼Œå¦‚å†…å­˜ï¼ŒCPU ç­‰\nFunction è§¦å‘å™¨\n1 2 3 4 5 6 7 8 9 export interface Function { runtime: string; codeDir: string; // source code directory to bundle resource: { memory: string; cpu: string; }; triggers: {}[]; } Trigger å‡½æ•°è§¦å‘å™¨ï¼ŒåŸºäºäº‹ä»¶é©±åŠ¨æœºåˆ¶è§¦å‘å‡½æ•°æ‰§è¡Œ\n1 2 3 4 5 export interface Trigger { name: string; type: string; props: unknown; } Application Application è¡¨ç¤ºå½“å‰éƒ¨ç½²çš„ Serverless åº”ç”¨\nä¸€ä¸ª Application å¯èƒ½åŒ…å«å¤šä¸ª Function\nApplication éœ€è¦æŒ‡å®šé»˜è®¤çš„éƒ¨ç½²å‚æ•°ï¼Œæ¯”å¦‚ä½¿ç”¨çš„ Provider\n1 2 3 4 5 6 7 export interface Application { provider: { name: string; props: {}; }; functions: Function[]; } æ‰§è¡Œå™¨ä¼šè§£æå…¥å£æ¨¡å—çš„ Applicationï¼Œå¹¶æ‰§è¡Œå®é™…çš„éƒ¨ç½²\nFunction éƒ¨ç½²è¿‡ç¨‹æ¶‰åŠåˆ°çš„é˜¶æ®µ å‡½æ•°éƒ¨ç½²ä¼šæ¶‰åŠä»¥ä¸‹é˜¶æ®µ\nçŠ¶æ€æŸ¥è¯¢ï¼šå‘é›†ç¾¤æŸ¥è¯¢éƒ¨ç½²çŠ¶æ€ï¼Œåˆ¤æ–­æ˜¯å¦å·²æœ‰éƒ¨ç½² æ„å»ºï¼šæ‰“åŒ…ç”¨æˆ·ä»£ç å’Œä¾èµ–ï¼Œæ‰§è¡Œæ„å»ºï¼Œç”Ÿæˆ Artifact ä¸Šä¼ ï¼šå°†æ„å»ºå¥½çš„ Artifact ä¸Šä¼ åˆ°æŒ‡å®šçš„å­˜å‚¨æœåŠ¡ æ‰§è¡Œéƒ¨ç½²ï¼šè°ƒç”¨ Provider æä¾›çš„ APIï¼Œåˆ›å»ºå‡½æ•°èµ„æº å¯¹äºåŸºäº Kubernetes çš„ Serverless å¹³å°ï¼Œå¦‚ OpenFaasï¼ŒOpenWhisk å’Œ Knativeã€‚å‡½æ•°çš„è¿è¡ŒåŸºæœ¬å•ä½ä¸º PODï¼Œäº§ç‰©ä¸º Docker é•œåƒã€‚\nå¯¹äºè…¾è®¯äº‘ï¼Œé˜¿é‡Œäº‘ç­‰å…¬æœ‰äº‘å‚å•†ï¼Œäº§ç‰©ä¸ºæ„å»ºå¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ‰“åŒ…ä¸º zipï¼Œå¹¶éœ€è¦ä¸Šä¼ è‡³ OSS\n","permalink":"https://WFUing.github.io/posts/tech/architecture/serverless/serverless-concept-models/","summary":"Serverless æ˜¯ä¸€ç§è®¡ç®—æ¨¡å‹ï¼Œå®ƒä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿåœ¨æ— éœ€ç®¡ç†æœåŠ¡å™¨å’ŒåŸºç¡€æ¶æ„çš„æƒ…å†µä¸‹è¿è¡Œä»£ç ï¼ˆæˆ–ç§°å‡½æ•°ï¼‰ã€‚ä½¿ç”¨æ— æœåŠ¡å™¨è®¡ç®—ï¼Œå¼€å‘è€…å¯ä»¥å°†ä»£ç ä¸Šä¼ åˆ°äº‘å¹³å°ï¼Œå¹³å°ä¼šåœ¨éœ€è¦æ—¶æ ¹æ®æµé‡è‡ªåŠ¨è¿›è¡Œèµ„æºåˆ†é…å’Œå¤„ç†ã€‚\nServerless çš„ç‰¹ç‚¹\næŒ‰éœ€åˆ†é… æ— æœåŠ¡å™¨è®¡ç®—åŸºäºäº‹ä»¶é©±åŠ¨å’ŒæŒ‰éœ€è°ƒç”¨ï¼Œåªåœ¨éœ€è¦æ—¶æ‰ä¼šè¿›è¡Œè®¡ç®—èµ„æºçš„åˆ†é…å’Œç®¡ç† å¼¹æ€§ä¼¸ç¼© æ— æœåŠ¡å™¨è®¡ç®—å¹³å°ä¼šè‡ªåŠ¨æ ¹æ®è´Ÿè½½é‡çš„å˜åŒ–è¿›è¡Œèµ„æºçš„åŠ¨æ€åˆ†é…å’Œä¼˜åŒ–ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ ç®€åŒ–å¼€å‘ä¸éƒ¨ç½² å¼€å‘è€…ä¸“æ³¨äºç¼–å†™æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œç®€åŒ–åº”ç”¨å¼€å‘ä»¥åŠéƒ¨ç½²æµç¨‹ Concept Models Serverless æ ¸å¿ƒèµ„æº Service\né˜¿é‡Œäº‘æä¾›æœåŠ¡è¿™ä¸€æŠ½è±¡ æœåŠ¡æ˜¯å‡½æ•°è®¡ç®—èµ„æºç®¡ç†çš„å•ä½ï¼ŒåŒä¸€æœåŠ¡ä¸‹çš„æ‰€æœ‰å‡½æ•°å…±äº«ä¸€äº›è®¾ç½®ï¼Œå¦‚æœåŠ¡æˆæƒå’Œæ—¥å¿—é…ç½® ä¸€ä¸ªåº”ç”¨å¯æ‹†åˆ†ä¸ºå¤šä¸ªæœåŠ¡ï¼Œä¸€ä¸ªæœåŠ¡å¯ç”±å¤šä¸ªå‡½æ•°ç»„æˆ Function\näº‘å‡½æ•°ï¼Œäº‘å‡½æ•°ç”±ä»£ç å’Œè¿è¡Œç¯å¢ƒæè¿°ç»„æˆ äº‘å‡½æ•°å¯èƒ½ä¾èµ–äºå…¶ä»–äº‘å‡½æ•°ï¼Œæˆ–è€…å¤–éƒ¨æœåŠ¡ï¼Œå¦‚å¯¹è±¡å­˜å‚¨ï¼ŒAPI ç½‘å…³ï¼Œæ¶ˆæ¯é˜Ÿåˆ— Trigger\nè§¦å‘å™¨ï¼Œç”¨äºåœ¨æ»¡è¶³æŸäº›æ¡ä»¶æ—¶ï¼Œè§¦å‘ Function çš„æ‰§è¡Œ åŸºäºäº‹ä»¶é©±åŠ¨ å¸¸è§çš„è§¦å‘å™¨ç±»å‹ å®šæ—¶è§¦å‘å™¨ Cron Trigger API ç½‘å…³è§¦å‘å™¨ HTTP Trigger æ¶ˆæ¯é˜Ÿåˆ—è§¦å‘å™¨ MQ Trigger External Service\näº‘å‡½æ•°åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½è°ƒç”¨å¤–éƒ¨çš„æœåŠ¡å®Œæˆä»»åŠ¡ï¼Œå¦‚è°ƒç”¨ Redis æˆ– RDBMS å­˜å‚¨çŠ¶æ€ Function è¡¨ç¤º Serverless å‡½æ•°\nFunction åŸºæœ¬ä¿¡æ¯\nåŒ…æ‹¬å‡½æ•°çš„ä»£ç  URIï¼Œè¿è¡Œæ—¶ï¼Œå¤„ç†å‡½æ•°åç§°ç­‰\nFunction èµ„æºéœ€æ±‚\næŒ‡å®šå‡½æ•°è¿è¡Œæ—¶æ‰€éœ€çš„è®¡ç®—èµ„æºï¼Œå¦‚å†…å­˜ï¼ŒCPU ç­‰\nFunction è§¦å‘å™¨\n1 2 3 4 5 6 7 8 9 export interface Function { runtime: string; codeDir: string; // source code directory to bundle resource: { memory: string; cpu: string; }; triggers: {}[]; } Trigger å‡½æ•°è§¦å‘å™¨ï¼ŒåŸºäºäº‹ä»¶é©±åŠ¨æœºåˆ¶è§¦å‘å‡½æ•°æ‰§è¡Œ","title":"Serverless Concept Models"},{"content":"å…ƒç¼–ç¨‹æ˜¯ç¼–å†™å¯åœ¨å…¶ä»–ç¨‹åºä¸Šè¿è¡Œçš„è®¡ç®—æœºç¨‹åºçš„æŠ€æœ¯ã€‚è¯¸å¦‚ç¼–è¯‘å™¨å’Œç¨‹åºåˆ†æå™¨ä¹‹ç±»çš„ç³»ç»Ÿå¯ä»¥è¢«è§†ä¸ºå…ƒç¨‹åºï¼Œå› ä¸ºå®ƒä»¬å°†å…¶ä»–ç¨‹åºä½œä¸ºè¾“å…¥ã€‚æˆ‘ä»¬å°†åœ¨è¿™é‡Œè®¨è®ºçš„å…ƒç¼–ç¨‹å½¢å¼ç‰¹åˆ«å…³æ³¨ç”Ÿæˆè¦ä½œä¸ºç¨‹åºä¸€éƒ¨åˆ†åŒ…å«çš„ä»£ç ã€‚ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œå®ƒä»¬å¯ä»¥è¢«è®¤ä¸ºæ˜¯åˆçº§ç¼–è¯‘å™¨ã€‚\nMacros and Code Generation macro æ˜¯å°†è¾“å…¥åºåˆ—è½¬æ¢ä¸ºæŸç§æ›¿æ¢è¾“å‡ºåºåˆ—çš„è§„åˆ™ã€‚è¿™ä¸ªç¿»è¯‘è¿‡ç¨‹ç§°ä¸º macro expansionï¼Œä¸€äº›è¯­è¨€æä¾›å®ä½œä¸ºå…¶è§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚å®è®¾æ–½å¯ä»¥è¢«å®ç°ä¸º preprocessing stepï¼Œå…¶ä¸­å®æ‰©å±•å‘ç”Ÿåœ¨ lexical and syntactic analysis ä¹‹å‰ï¼Œæˆ–è€…å®ƒå¯ä»¥è¢«åˆå¹¶ä¸º syntax analysis æˆ– a later translation stepã€‚\nä½¿ç”¨æœ€å¹¿æ³›çš„ macro systems ä¹‹ä¸€æ˜¯ C é¢„å¤„ç†å™¨ï¼ˆCPPï¼‰ï¼Œå®ƒä½œä¸ºå¤„ç†ç¨‹åºçš„ç¬¬ä¸€æ­¥è¢«åŒ…å«åœ¨ C å’Œ C++ ä¸­ã€‚é¢„å¤„ç†å™¨æŒ‡ä»¤ä»¥æ•£åˆ—ç¬¦å·å¼€å¤´ï¼ŒåŒ…æ‹¬ #includeã€#defineã€#if ç­‰ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢å®šä¹‰äº†ä¸€ä¸ªç±»ä¼¼å‡½æ•°çš„ macro æ¥äº¤æ¢ä¸¤ä¸ªé¡¹ç›®ï¼š\n1 #define SWAP(a, b) { auto tmp = b; b = a; a = tmp; } ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å¦‚ä¸‹ä½¿ç”¨å®ï¼š\n1 2 3 4 5 6 7 8 9 int main() { int x = 3; int y = 4; SWAP(x, y); cout \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; endl; } // output 4 3 é€šè¿‡å‘ g++ ä¼ é€’ -E æ ‡å¿—ï¼Œå¯ä»¥è·å¾—å®æ‰©å±•çš„ç»“æœï¼š\n1 $ g++ -E \u0026lt;source\u0026gt; ä¸è¿‡ï¼Œå¦‚æœä½¿ç”¨ #includes æŒ‡ä»¤ï¼Œç»“æœå¯èƒ½ä¼šéå¸¸æ··ä¹±ï¼Œå› ä¸ºè¯¥æŒ‡ä»¤ä¼šä»ç»™å®šæ–‡ä»¶ä¸­è°ƒå…¥ä»£ç ã€‚\nCPP macros perform text æ›¿æ¢ï¼Œå› æ­¤ä¸Šè¿°ä»£ç ç­‰åŒäºï¼š\n1 2 3 4 5 6 int main() { int x = 3; int y = 4; { auto tmp = y; y = x; x = tmp; }; cout \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; endl; } ä½¿ç”¨ SWAP å®åçš„åˆ†å·ä»ç„¶ä¿ç•™ï¼Œè¡¨ç¤ºç©ºè¯­å¥ã€‚ä¸è¿‡ï¼Œåœ¨éœ€è¦ä½¿ç”¨å•ä¸€è¯­å¥çš„æƒ…å†µä¸‹ï¼Œä¾‹å¦‚ä¸€ä¸ªæ²¡æœ‰è¢« block æ‹¬ä½çš„æ¡ä»¶åˆ†æ”¯ï¼Œè¿™å°±ä¼šé€ æˆé—®é¢˜ï¼š\n1 2 3 4 if (x \u0026lt; y) SWAP(x, y); else cout \u0026lt;\u0026lt; \u0026#34;no swap\u0026#34; \u0026lt;\u0026lt; endl; é¿å…è¿™ä¸€é—®é¢˜çš„å¸¸ç”¨æ–¹æ³•æ˜¯å°† macro çš„æ‰©å±•ä»£ç æ”¾åœ¨ do/while ä¸­ï¼š\n1 2 3 4 5 #define SWAP(a, b) do { \\ auto tmp = b; \\ b = a; \\ a = tmp; \\ } while (false) åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨ä¸€è¡Œçš„æœ«å°¾æ·»åŠ äº†ä¸€ä¸ª \\ï¼Œè¡¨ç¤ºä¸‹ä¸€è¡Œåº”è¢«è§†ä¸ºä¸Šä¸€è¡Œçš„ç»§ç»­ã€‚do/while å¾ªç¯åœ¨è¯­æ³•ä¸Šä»¥åˆ†å·ç»“æŸï¼Œå› æ­¤ SWAP(x, y); ä¸­çš„åˆ†å·åœ¨è¯­æ³•ä¸Šæ˜¯ do/while å¾ªç¯çš„ä¸€éƒ¨åˆ†ã€‚å› æ­¤ï¼Œæ‰©å±•ä»£ç çš„è¯­æ³•æ˜¯æ­£ç¡®çš„ï¼š\n1 2 3 4 if (x \u0026lt; y) do { auto tmp = b; b = a; a = tmp; } while (false); else cout \u0026lt;\u0026lt; \u0026#34;no swap\u0026#34; \u0026lt;\u0026lt; endl; è™½ç„¶ textual replacement å¾ˆæœ‰ç”¨ï¼Œä½†å®ƒä¹Ÿæœ‰ç¼ºç‚¹ï¼Œå› ä¸ºè™½ç„¶å®åœ¨è¯­æ³•ä¸Šç±»ä¼¼å‡½æ•°ï¼Œä½†å®ƒä»¬çš„è¡Œä¸ºå´ä¸åƒå‡½æ•°ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒä»¬ä¸æŠŠå‚æ•°ä½œä¸ºè‡ªå·±çš„å®ä½“ï¼Œä¹Ÿä¸å¼•å…¥ç‹¬ç«‹çš„ä½œç”¨åŸŸã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 int main() { int x = 3; int y = 4; int z = 5; SWAP(x \u0026lt; y ? x : y, z); cout \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; z \u0026lt;\u0026lt; endl; } // output 3 4 3 ä½¿ç”¨ g++ -Eï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é¢„å¤„ç†åçš„ä»£ç ã€‚åªçœ‹ main() çš„è¾“å‡ºï¼Œæˆ‘ä»¬ä¼šå‘ç°\n1 2 3 4 5 6 7 8 9 10 11 int main() { int x = 3; int y = 4; int z = 5; do { auto tmp = z; z = x \u0026lt; y ? x : y; x \u0026lt; y ? x : y = tmp; } while (false); cout \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; z \u0026lt;\u0026lt; endl; } åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ äº†æ¢è¡Œç¬¦å’Œç©ºæ ¼ï¼Œä»¥ä½¿è¾“å‡ºæ›´æ˜“è¯»ï¼›è€Œé¢„å¤„ç†å™¨æœ¬èº«ä¼šå°†å®è¾“å‡ºæ”¾åœ¨ä¸€è¡Œä¸­ã€‚ç½ªé­ç¥¸é¦–æ˜¯æœ€åç”Ÿæˆçš„è¯­å¥ï¼š\n1 x \u0026lt; y ? x : y = tmp; åœ¨ C++ ä¸­ï¼Œæ¡ä»¶è¿ç®—ç¬¦ ? : å’Œèµ‹å€¼è¿ç®—ç¬¦ = å…·æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§ï¼Œå¹¶ä¸”ä»å³å‘å·¦å…³è”ï¼Œå› æ­¤è¿™ç­‰åŒäº\n1 x \u0026lt; y ? x : (y = tmp); ç”±äº x \u0026lt; yï¼Œè¿™é‡Œæ²¡æœ‰èµ‹å€¼ã€‚å› æ­¤ï¼Œx çš„å€¼ä¿æŒä¸å˜ã€‚\næˆ‘ä»¬å¯ä»¥åœ¨æ¯æ¬¡ä½¿ç”¨ macro argument æ—¶åŠ ä¸Šæ‹¬å·æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n1 2 3 4 5 #define SWAP(a, b) do { \\ auto tmp = (b); \\ (b) = (a); \\ (a) = tmp; \\ } while (false) Ranking the Operator Precedence in C++\nç°åœ¨ä¼šäº§ç”Ÿé¢„æœŸçš„ç»“æœï¼Œå› ä¸ºæ‹¬å·æ˜ç¡®åœ°å°†è¿™äº›æ“ä½œè”ç³»èµ·æ¥ï¼š\n1 2 3 4 5 6 7 8 9 10 11 int main() { int x = 3; int y = 4; int z = 5; do { auto tmp = (z); (z) = (x \u0026lt; y ? x : y); (x \u0026lt; y ? x : y) = tmp; } while (false); cout \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; z \u0026lt;\u0026lt; endl; } ç„¶è€Œï¼Œç¬¬äºŒä¸ªé—®é¢˜å¹¶ä¸é‚£ä¹ˆå®¹æ˜“è§£å†³ã€‚è€ƒè™‘ä¸€ä¸‹å½“æˆ‘ä»¬å°† SWAP å®åº”ç”¨äºåä¸º tmp çš„å˜é‡æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼š\n1 2 3 4 5 6 7 8 9 int main() { int x = 3; int tmp = 4; SWAP(tmp, x); cout \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; tmp \u0026lt;\u0026lt; endl; } // output 3 4 æ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼å†æ¬¡ä½¿ç”¨ g++ -E æ£€æŸ¥è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ˆæ¨¡æ•°é—´éš”ï¼‰\n1 2 3 4 5 6 7 8 9 10 int main() { int x = 3; int tmp = 4; do { auto tmp = (x); (x) = (tmp); (tmp) = tmp; } while (false); cout \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; tmp \u0026lt;\u0026lt; endl; } ç”±äº SWAP ä½¿ç”¨çš„ä¸´æ—¶å˜é‡ä¸å‚æ•°åŒåï¼Œå› æ­¤ä¸´æ—¶å˜é‡ä¼šæ•è·ç”Ÿæˆä»£ç ä¸­å‡ºç°çš„å‚æ•°ã€‚è¿™æ˜¯å› ä¸ºå®åªæ˜¯æ‰§è¡Œæ–‡æœ¬æ›¿æ¢ï¼Œå¹¶ä¸èƒ½ç¡®ä¿åç§°è¢«è§£æåˆ°é€‚å½“çš„ä½œç”¨åŸŸã€‚å› æ­¤ï¼Œå®å®é™…ä¸Šå¹¶ä¸ä½¿ç”¨æŒ‰åç§°è°ƒç”¨ï¼Œè€ŒæŒ‰åç§°è°ƒç”¨å¯ç¡®ä¿å‚æ•°ä¸­çš„åç§°è§£æåˆ°é€‚å½“çš„ä½œç”¨åŸŸã€‚å¯¹æ–‡æœ¬æ›¿æ¢çš„ä¾èµ–ä½¿ CPP æˆä¸ºä¸€ä¸ªä¸å«ç”Ÿçš„å®ç³»ç»Ÿã€‚å…¶ä»–ç³»ç»Ÿï¼ˆå¦‚ Scheme çš„ç³»ç»Ÿï¼‰æ˜¯å«ç”Ÿçš„ï¼Œå®ƒä»¬ä¸ºå®å¼•å…¥çš„åç§°åˆ›å»ºäº†å•ç‹¬çš„ä½œç”¨åŸŸï¼Œå¹¶ç¡®ä¿å‚æ•°ä¸ä¼šè¢«æ•è·ã€‚\nScheme Macros ä½œä¸º R5RS Scheme è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œå®ç³»ç»Ÿæ˜¯å«ç”Ÿçš„ã€‚å®ç”± define-syntaxã€let-syntax æˆ– letrec-syntax ä¸­çš„ä¸€ç§å½¢å¼å¼•å…¥ï¼Œå¹¶å°†ç»™å®šçš„åç§°ä¸å®ç»‘å®šã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ let ä½œä¸ºå®çš„å®šä¹‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 (define-syntax let (syntax-rules () ((let ((name val) ...) body1 body2 ... ) ((lambda (name ...) body1 body2 ... ) val ... ) ) ) ) syntax-rules æŒ‡å®šäº†å®è½¬æ¢çš„è§„åˆ™ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è§„åˆ™æ¨¡å¼ä¸è¾“å…¥ä¹‹é—´å¿…é¡»åŒ¹é…çš„å­—é¢å½¢å¼åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼Œcond å½¢å¼ä¸­çš„ else æ ‡è¯†ç¬¦ã€‚ä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ²¡æœ‰å­—é¢æ„ä¹‰ã€‚syntax-rules çš„å…¶ä½™å‚æ•°æŒ‡å®šäº†è½¬æ¢ã€‚è½¬æ¢çš„ç¬¬ä¸€é¡¹æ˜¯è¾“å…¥æ¨¡å¼ï¼Œç¬¬äºŒé¡¹æ˜¯è¾“å‡ºæ¨¡å¼ã€‚...çš„ä½œç”¨ç±»ä¼¼äºå…‹è±å› æ˜Ÿï¼Œå°†å‰ä¸€é¡¹ä¸è¾“å…¥ä¸­å‡ºç°çš„é›¶æ¬¡æˆ–å¤šæ¬¡ç›¸åŒ¹é…ã€‚è¾“å…¥æ¨¡å¼ä¸­å‡ºç°ä½†ä¸åœ¨å­—é¢é‡åˆ—è¡¨ä¸­çš„åç§°ï¼Œé™¤äº†ä½œä¸ºå®åç§°çš„ç¬¬ä¸€é¡¹ï¼Œéƒ½æ˜¯ä¸è¾“å…¥å…ƒç´ ç›¸åŒ¹é…çš„å«ç”Ÿå˜é‡ã€‚è¿™äº›å˜é‡å¯ä»¥åœ¨è¾“å‡ºæ¨¡å¼ä¸­å¼•ç”¨ï¼Œä»¥æŒ‡å®šå¦‚ä½•æ„é€ è¾“å‡ºã€‚\nåœ¨å…¨å±€ç¯å¢ƒä¸­è¯„ä¼°ä¸Šè¿°è¡¨è¾¾å¼æ—¶ï¼Œä¼šå°† let åç§°ä¸ä¸€ä¸ªè½¬æ¢ä¸º lambda çš„å®ç»‘å®šã€‚\nå®ä¸»ä½“å¼•å…¥çš„æ ‡è¯†ç¬¦ä¿è¯é¿å…ä¸å…¶ä»–æ ‡è¯†ç¬¦å†²çªï¼Œè§£é‡Šå™¨é€šå¸¸ä¼šé‡å‘½åæ ‡è¯†ç¬¦ä»¥é¿å…å†²çªã€‚ä¸‹é¢æ˜¯ swap å®çš„å®šä¹‰ï¼š\n1 2 3 4 5 6 7 8 9 10 (define-syntax swap (syntax-rules () ((swap a b) (let ((tmp b)) (set! b a) (set! a tmp) ) ) ) ) è¿™å°±å°† swap çš„ä½¿ç”¨è½¬åŒ–ä¸ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé€šè¿‡ä¸´æ—¶å˜é‡ tmp äº¤æ¢ä¸¤ä¸ªå‚æ•°ã€‚å› æ­¤\n1 2 3 4 5 6 7 \u0026gt; (define x 3) \u0026gt; (define y 4) \u0026gt; (swap x y) \u0026gt; x 4 \u0026gt; y 3 ä¸è¿‡ï¼Œä¸ CPP å®ä¸åŒçš„æ˜¯ï¼Œswap å®å¼•å…¥çš„ tmp ä¸å…¶ä»–ä»»ä½• tmp éƒ½æ˜¯ä¸åŒçš„ï¼š\n1 2 3 4 5 6 \u0026gt; (define tmp 5) \u0026gt; (swap x tmp) \u0026gt; x 5 \u0026gt; tmp 4 RESOURCES https://eecs390.github.io/notes/metaprogramming.html http://philo.top/2021/03/14/metaprogramming/ ","permalink":"https://WFUing.github.io/posts/tech/language/metaprogramming/","summary":"å…ƒç¼–ç¨‹æ˜¯ç¼–å†™å¯åœ¨å…¶ä»–ç¨‹åºä¸Šè¿è¡Œçš„è®¡ç®—æœºç¨‹åºçš„æŠ€æœ¯ã€‚è¯¸å¦‚ç¼–è¯‘å™¨å’Œç¨‹åºåˆ†æå™¨ä¹‹ç±»çš„ç³»ç»Ÿå¯ä»¥è¢«è§†ä¸ºå…ƒç¨‹åºï¼Œå› ä¸ºå®ƒä»¬å°†å…¶ä»–ç¨‹åºä½œä¸ºè¾“å…¥ã€‚æˆ‘ä»¬å°†åœ¨è¿™é‡Œè®¨è®ºçš„å…ƒç¼–ç¨‹å½¢å¼ç‰¹åˆ«å…³æ³¨ç”Ÿæˆè¦ä½œä¸ºç¨‹åºä¸€éƒ¨åˆ†åŒ…å«çš„ä»£ç ã€‚ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œå®ƒä»¬å¯ä»¥è¢«è®¤ä¸ºæ˜¯åˆçº§ç¼–è¯‘å™¨ã€‚\nMacros and Code Generation macro æ˜¯å°†è¾“å…¥åºåˆ—è½¬æ¢ä¸ºæŸç§æ›¿æ¢è¾“å‡ºåºåˆ—çš„è§„åˆ™ã€‚è¿™ä¸ªç¿»è¯‘è¿‡ç¨‹ç§°ä¸º macro expansionï¼Œä¸€äº›è¯­è¨€æä¾›å®ä½œä¸ºå…¶è§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚å®è®¾æ–½å¯ä»¥è¢«å®ç°ä¸º preprocessing stepï¼Œå…¶ä¸­å®æ‰©å±•å‘ç”Ÿåœ¨ lexical and syntactic analysis ä¹‹å‰ï¼Œæˆ–è€…å®ƒå¯ä»¥è¢«åˆå¹¶ä¸º syntax analysis æˆ– a later translation stepã€‚\nä½¿ç”¨æœ€å¹¿æ³›çš„ macro systems ä¹‹ä¸€æ˜¯ C é¢„å¤„ç†å™¨ï¼ˆCPPï¼‰ï¼Œå®ƒä½œä¸ºå¤„ç†ç¨‹åºçš„ç¬¬ä¸€æ­¥è¢«åŒ…å«åœ¨ C å’Œ C++ ä¸­ã€‚é¢„å¤„ç†å™¨æŒ‡ä»¤ä»¥æ•£åˆ—ç¬¦å·å¼€å¤´ï¼ŒåŒ…æ‹¬ #includeã€#defineã€#if ç­‰ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢å®šä¹‰äº†ä¸€ä¸ªç±»ä¼¼å‡½æ•°çš„ macro æ¥äº¤æ¢ä¸¤ä¸ªé¡¹ç›®ï¼š\n1 #define SWAP(a, b) { auto tmp = b; b = a; a = tmp; } ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å¦‚ä¸‹ä½¿ç”¨å®ï¼š\n1 2 3 4 5 6 7 8 9 int main() { int x = 3; int y = 4; SWAP(x, y); cout \u0026lt;\u0026lt; x \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; endl; } // output 4 3 é€šè¿‡å‘ g++ ä¼ é€’ -E æ ‡å¿—ï¼Œå¯ä»¥è·å¾—å®æ‰©å±•çš„ç»“æœï¼š","title":"meta-programming"},{"content":"Introduction æœ‰é™çŠ¶æ€æœº (finite-state machine, FSM) æ˜¯ä¸€ç§æŠ½è±¡æœºå™¨ï¼Œåœ¨ä»»ä½•ç»™å®šæ—¶é—´å†…éƒ½å¯ä»¥å¤„äºæœ‰é™ä¸ªçŠ¶æ€ä¸­çš„ä¸€ä¸ªçŠ¶æ€ã€‚FSM å¯ä»¥æ ¹æ®æŸäº›å¤–éƒ¨è¾“å…¥ä»ä¸€ç§çŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ç§çŠ¶æ€ï¼Œä»ä¸€ç§çŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ç§çŠ¶æ€ç§°ä¸ºè½¬æ¢ã€‚FSM æ˜¯ç”±å…¶çŠ¶æ€åˆ—è¡¨ã€åˆå§‹çŠ¶æ€å’Œæ¯ä¸ªè½¬æ¢çš„æ¡ä»¶å®šä¹‰çš„ã€‚\nçŠ¶æ€æ˜¯å¯¹ç­‰å¾…æ‰§è¡Œè½¬æ¢çš„ç³»ç»ŸçŠ¶æ€çš„æè¿°ã€‚\nExample ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çŠ¶æ€æœºçš„ç›´è§‚æè¿°ã€‚ è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å¼€å…³æ¨¡å‹ã€‚\nA simple on/off switch with two states å®ƒç”± \u0026ldquo;å¼€ \u0026ldquo;å’Œ \u0026ldquo;å…³ \u0026ldquo;ä¸¤ç§çŠ¶æ€ç»„æˆã€‚å› æ­¤ï¼Œè¿™å°æœºå™¨åœ¨ä»»ä½•æ—¶åˆ»éƒ½å¯ä»¥å¤„äºè¿™ä¸¤ç§çŠ¶æ€ä¸­çš„ä¸€ç§ã€‚æ¢å¥è¯è¯´ï¼ŒçŠ¶æ€ä¹‹é—´çš„è½¬æ¢æ˜¯ç¬æ—¶çš„ã€‚flick äº‹ä»¶ä¼šå¯¼è‡´æœºå™¨åœ¨ä¸åŒçŠ¶æ€é—´è½¬æ¢ã€‚ å½“æœºå™¨è¿›å…¥ on çŠ¶æ€æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªå‰¯ä½œç”¨ã€‚ä¸€ç›ç¯è¢«æ‰“å¼€ã€‚ å½“æœºå™¨é€€å‡º on çŠ¶æ€æ—¶ï¼Œä¼šäº§ç”Ÿå¦ä¸€ä¸ªå‰¯ä½œç”¨ã€‚ä¸€ç›ç¯è¢«å…³é—­ã€‚ è¿™ä¸ªç®€å•çš„çŠ¶æ€æœºå°±ç›¸å½“äºä¸€ä¸ªå¸ƒå°”å˜é‡ï¼Œæ¥æ§åˆ¶æŸä»¶äº‹æƒ…çš„ on ä¸ offã€‚ What is state anyway? ç¨‹åºçŠ¶æ€æ˜¯ç¨‹åºä¸­æ‰€æœ‰å˜é‡åŠå…¶åœ¨ä»»æ„æ—¶é—´ç‚¹ä¸Šçš„å€¼çš„é›†åˆ Wikipedia ã€‚\nä¸€ä¸ªç¨‹åºæˆ–è½¯ä»¶ç»„ä»¶æœ‰äº”ä¸ªç‹¬ç«‹å˜é‡ï¼Œæ¯ä¸ªå˜é‡éƒ½å¯èƒ½ä¸ºçœŸæˆ–å‡ï¼Œé‚£ä¹ˆç†è®ºä¸Šå®ƒå¯ä»¥å¤„äº $2^5=32$ ç§çŠ¶æ€ä¸­çš„ä»»ä½•ä¸€ç§ã€‚ç„¶è€Œï¼Œç¨‹åºç»å¸¸ä¼šå‡ºç° invalid çŠ¶æ€ï¼Œè€Œåœ¨ä¼ ç»Ÿè½¯ä»¶ä¸­ï¼Œå˜é‡éƒ½ä¼šç»è¿‡ä»”ç»†æ£€æŸ¥å’Œå¤„ç†ï¼Œä»¥é¿å…å‡ºç°è¿™äº› invalid çŠ¶æ€ã€‚\nRelationship with statecharts ç†è§£çŠ¶æ€æœºå‡ ä¹ç­‰åŒäºç†è§£ statechartsã€‚ åœ¨è®¸å¤šæ–¹é¢ï¼Œstatechartsæ˜¯çŠ¶æ€æœºçš„ \u0026ldquo;å¤§å“¥\u0026rdquo;ï¼Œæ—¨åœ¨å…‹æœçŠ¶æ€æœºçš„ä¸€äº›å±€é™æ€§ã€‚statecharts æœ¬è´¨ä¸Šæ˜¯ä¸€ç§çŠ¶æ€æœºï¼Œå®ƒå…è®¸ä»»ä½•çŠ¶æ€ä»¥åˆ†å±‚çš„æ–¹å¼åŒ…å«æ›´å¤šçš„çŠ¶æ€æœºã€‚è¿™æ˜¯ä¸ºäº†å…‹æœçŠ¶æ€æœºå›ºæœ‰çš„ä¸€äº›å±€é™æ€§ã€‚\nAbstract machine vs run-time æŠ½è±¡æœºå™¨æœ¬èº«ï¼ˆå¦‚çŠ¶æ€æœºçš„ç»˜åˆ¶æˆ–ä»£ç ï¼‰ä¸ç‰¹å®šæŠ½è±¡æœºå™¨æ›´å…·ä½“çš„è¿è¡Œæ—¶æ‰§è¡Œä¹‹é—´å¿…é¡»ä½œå‡ºé‡è¦åŒºåˆ†ã€‚è¿™ç§åŒºåˆ«ç±»ä¼¼äºç±»ï¼ˆæŠ½è±¡å®šä¹‰ï¼‰å’Œå¯¹è±¡ï¼ˆå…·ä½“å®ä¾‹åŒ–ï¼‰ä¹‹é—´çš„åŒºåˆ«ã€‚åŒæ ·ï¼Œå¯¹äºå•ä¸ªæŠ½è±¡æœºå™¨æ¥è¯´ï¼Œå¯èƒ½æœ‰è®¸å¤šæ‰§è¡Œï¼Œå°±åƒä»»ä½•ç‰¹å®šç±»å¾€å¾€æœ‰è®¸å¤šå®ä¾‹ä¸€æ ·ã€‚\næœ¯è¯­ \u0026ldquo;statechart\u0026rdquo;ã€\u0026ldquo;state machine \u0026ldquo;å’Œ \u0026ldquo;FSM \u0026ldquo;é€šå¸¸æ—¢æŒ‡æŠ½è±¡å½¢å¼ï¼Œä¹ŸæŒ‡è¿è¡Œæ—¶å½¢å¼ï¼Œå°½ç®¡è¿è¡Œæ—¶å½¢å¼æœ‰æ—¶å¸¦æœ‰é™å®šè¯ \u0026ldquo;run\u0026rdquo; æˆ– \u0026ldquo;execution\u0026rdquo;ï¼Œå¦‚ \u0026ldquo;state machine execution\u0026rdquo; æˆ– \u0026ldquo;statetchart run\u0026rdquo;ã€‚\nabstract state machine æ˜¯ä¸€ç§è½¯ä»¶ç»„ä»¶ï¼Œå®ƒå®šä¹‰äº†ä¸€ç»„æœ‰é™çš„çŠ¶æ€ï¼š\næœ‰ä¸€ç§çŠ¶æ€è¢«å®šä¹‰ä¸º initial stateã€‚å½“æœºå™¨å¼€å§‹æ‰§è¡Œæ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è¿›å…¥è¿™ç§çŠ¶æ€ã€‚ æ¯ä¸ªçŠ¶æ€éƒ½å¯ä»¥å®šä¹‰æœºå™¨è¿›å…¥æˆ–é€€å‡ºè¯¥çŠ¶æ€æ—¶å‘ç”Ÿçš„æ“ä½œã€‚æ“ä½œé€šå¸¸ä¼šäº§ç”Ÿ side effectsã€‚ æ¯ä¸ªçŠ¶æ€éƒ½èƒ½å®šä¹‰è§¦å‘è½¬æ¢çš„ transitionã€‚ transition å®šä¹‰äº†æœºå™¨å¦‚ä½•å¯¹äº‹ä»¶åšå‡ºååº”ï¼Œå³é€€å‡ºä¸€ç§çŠ¶æ€å¹¶è¿›å…¥å¦ä¸€ç§çŠ¶æ€ã€‚ transition å¯ä»¥å®šä¹‰è¿‡æ¸¡å‘ç”Ÿæ—¶çš„ actionsã€‚åŠ¨ä½œé€šå¸¸ä¼šäº§ç”Ÿ side effectsã€‚ åœ¨è¿è¡ŒçŠ¶æ€æœºæ—¶ï¼Œä¼šæ‰§è¡Œè¿™ä¸ªæŠ½è±¡çŠ¶æ€æœºã€‚é¦–å…ˆï¼ŒçŠ¶æ€æœºè¿›å…¥initial stateã€‚ ç„¶åï¼Œä¸€æ—¦æœ‰äº‹ä»¶å‘ç”Ÿï¼Œå°±ä¼šç«‹å³ä¼ é€’ç»™çŠ¶æ€æœºã€‚ å½“äº‹ä»¶å‘ç”Ÿæ—¶\nå°†æ ¹æ®å½“å‰çŠ¶æ€çš„è½¬æ¢å¯¹äº‹ä»¶è¿›è¡Œæ£€æŸ¥ å¦‚æœæŸä¸ªè½¬åœºä¸äº‹ä»¶ç›¸åŒ¹é…ï¼Œè¯¥è½¬åœºå°±ä¼šå‘ç”Ÿ ç”±äº transition å‘ç”Ÿï¼ŒçŠ¶æ€ exited æˆ– enteredï¼Œå¹¶æ‰§è¡Œç›¸å…³æ“ä½œ æœºå™¨ç«‹å³è¿›å…¥æ–°çŠ¶æ€ï¼Œå‡†å¤‡å¤„ç†ä¸‹ä¸€ä¸ªäº‹ä»¶ã€‚ Resources Wikipedia defines a finite-state machine statecharts ","permalink":"https://WFUing.github.io/posts/tech/architecture/distributed/iot/state-machine/","summary":"æœ‰é™çŠ¶æ€æœº (finite-state machine, FSM) æ˜¯ä¸€ç§æŠ½è±¡æœºå™¨ï¼Œåœ¨ä»»ä½•ç»™å®šæ—¶é—´å†…éƒ½å¯ä»¥å¤„äºæœ‰é™ä¸ªçŠ¶æ€ä¸­çš„ä¸€ä¸ªçŠ¶æ€ã€‚FSM å¯ä»¥æ ¹æ®æŸäº›å¤–éƒ¨è¾“å…¥ä»ä¸€ç§çŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ç§çŠ¶æ€ï¼Œä»ä¸€ç§çŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ç§çŠ¶æ€ç§°ä¸ºè½¬æ¢ã€‚","title":"State Machine"},{"content":"ç®€ä»‹ ANTLR æ˜¯ ANother Tool for Language Recognition çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è§£æå™¨ç”Ÿæˆå™¨æ¡†æ¶ï¼Œç”¨äºä»è¯­æ³•æ–‡ä»¶ä¸­æ„å»ºè¯­è¨€è¯†åˆ«å™¨ã€ç¼–è¯‘å™¨å’Œç¿»è¯‘å™¨ï¼Œè¯­æ³•æ–‡ä»¶ä¸­åŒ…å«ä»æºè¯­è¨€åˆ°ç›®æ ‡è¯­è¨€çš„æ¯ä¸ªè¯­å¥æ‰€è¦æ‰§è¡Œçš„æ“ä½œã€‚\nä½¿ç”¨ç¼–è¯‘å™¨è®¾è®¡çš„æ¦‚å¿µæ¥å®šä¹‰æ¯ç§ç°ä»£ç¼–ç¨‹è¯­è¨€çš„å†™ä½œé£æ ¼ã€‚è¿™æ˜¯ä¸€å¥—å…¸å‹çš„æ­¥éª¤ï¼Œé¦–å…ˆæ˜¯ Lexical, Syntactical å’Œ Semantic Analysisï¼Œç¡®å®šè¯­è¨€çš„åŸºæœ¬ç¼–å†™æ–¹å¼ï¼Œä»¥ä¾¿è¯†åˆ«ã€‚æ¥ä¸‹æ¥æ˜¯ä¸€ç³»åˆ—éå¸¸æœ‰è¶£çš„æ­¥éª¤ï¼šä¸­é—´ä»£ç ç”Ÿæˆã€ä¼˜åŒ–å’Œç›®æ ‡ä»£ç ç”Ÿæˆã€‚\nç›®å‰çš„ç‰ˆæœ¬ä¸º 4.7ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„ã€å¯¹å¼€å‘äººå‘˜å‹å¥½çš„æ–¹å¼æ¥å®šä¹‰è‡ªå·±çš„è§„åˆ™é›†ï¼ˆåˆç§°è¯­æ³•ï¼‰ï¼Œå®ƒç”±ä¸€ç³»åˆ—æ ‡è®°å’Œæ“ä½œç»„æˆï¼Œè¿™äº›æ ‡è®°å’Œæ“ä½œå®šä¹‰äº†è¯­å¥åœ¨æºè¯­è¨€ä¸­çš„ä¹¦å†™æ–¹å¼ï¼Œä»è€Œå¯ä»¥æ­£ç¡®è¯†åˆ«å’Œè§£æè¯­å¥ã€‚æ›´æœ‰è¶£çš„æ˜¯ï¼Œå®ƒè¿˜èƒ½è®©ç”¨æˆ·å¯¹ä»£ç è¿›è¡Œæ“ä½œï¼Œå¹¶å°†å…¶ç”Ÿæˆç›®æ ‡ä»£ç ï¼Œæ‰€æœ‰è¿™ä¸€åˆ‡éƒ½å¯ä»¥ç”¨æ‚¨é€‰æ‹©çš„è¯­è¨€æ¥å®ç°ã€‚\né‚£ä¹ˆï¼Œè°åœ¨ä½¿ç”¨ ANTLR å‘¢ï¼Ÿ\nç¼–ç¨‹è¯­è¨€ï¼šBooã€Groovyã€Mantraã€Nemerleã€XRuby ç­‰ã€‚ å…¶ä»–å·¥å…·ã€æ¡†æ¶ï¼šApache Sparkã€Hibernateã€Intellij IDEAã€Jazillianã€JBoss Rulesã€Keynote(Apple)ã€WebLogicï¼ˆOracleï¼‰ç­‰ã€‚ The Basics 1 2 def sum(a, b): return a + b è€ƒè™‘åˆ°ä¸Šé¢ Python çš„ä¾‹å­ï¼Œè¿™äº›ç¼–è¯‘å™¨è®¾è®¡æ­¥éª¤ä»è¯†åˆ« Python ä¸­ç¼–å†™çš„æ¯æ¡è¯­å¥ï¼ˆæºä»£ç ï¼‰çš„åŸºæœ¬å•å…ƒå¼€å§‹ï¼Œå¹¶å°†å…¶åˆ†è§£ä¸º a stream of tokensï¼Œæ¯ä¸ªæ ‡è®°éƒ½è¢«è¯†åˆ«æˆ–æ˜ å°„ä¸ºç‰¹å®šç±»å‹ï¼Œä¹Ÿå°±æ˜¯ Lexical Analysisã€‚\nLexical Analysis of the python function yielding a stream of tokens ç„¶åï¼Œæ ¹æ®è¿™äº›æ ‡è®°å‡ºç°çš„é¡ºåºæ¥ç¡®å®šä¹¦é¢è¯­å¥çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶é€šè¿‡è¯­ä¹‰åˆ†ææ„å»ºä¸€æ£µæ ‘ï¼ˆæˆ– Abstract Syntax Treeï¼‰æ¥æ£€æŸ¥å…¶æ­£ç¡®æ€§ï¼ŒåŒæ—¶æä¾›ä½¿ç”¨ç°æœ‰æ ‘éå†æ–¹æ³•ä¹‹ä¸€è¿›è¡Œéå†çš„èƒ½åŠ›ã€‚\nSyntax tree after Semantic analysis TLDR æ¦‚å¿µ Lexer : converts a stream of characters to a stream of tokens. Parser : processes of tokens, possibly creating AST. Abstract Syntax Tree(AST): an intermediate tree representation of the parsed input that is simpler to process than the stream of tokens. Tree Parser: It processes an AST. String Template: a library that supports using templates with placeholders for outputting text (something very specific to ANTLR). ANTLR æ˜¯ä¸€ç§ LL parserï¼ˆLeft-to-right, Leftmost derivationï¼‰ï¼Œæ˜¯ä¸€ç§è‡ªé¡¶å‘ä¸‹çš„å‰–æå™¨ï¼Œé€‚ç”¨äºæ— ä¸Šä¸‹æ–‡è¯­è¨€çš„å­é›†ã€‚å®ƒä»å·¦åˆ°å³è§£æè¾“å…¥ï¼Œå¯¹å¥å­è¿›è¡Œ Leftmost derivationã€‚å®ƒç®€åŒ–äº†è®¸å¤šæ­¥éª¤ï¼Œä½¿åˆ›å»ºè¯­è¨€è¯†åˆ«å™¨å’Œè§£æå™¨å˜å¾—æ›´å®¹æ˜“ã€æ›´æ–¹ä¾¿ã€‚\nSyntax tree after Semantic analysis Example1 ä¸‹é¢æ˜¯æˆ‘ä¸ºè§£æ python å‡½æ•°è€Œç¼–å†™çš„è§£æå™¨çš„ä¸€ä¸ªå¿«é€Ÿç¤ºä¾‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 grammar PythonParserExample; tokens { INDENT, DEDENT, LINE_BREAK } statement : (single_input)? EOF ; single_input : LINE_BREAK | simple_stmt | complex_stmt (LINE_BREAK)? EOF ; complex_stmt: funcdef; simple_stmt : small_stmt (SEMI_COLON small_stmt)* SEMI_COLON? (LINE_BREAK)? EOF ; stmt : simple_stmt | complex_stmt ; funcdef : ASYNC? DEF name OPEN_PAREN typedargslist? CLOSE_PAREN (ARROW name)? COLON \u0026#39;\\n\u0026#39;? funcbody ; typedargslist : (def_parameters COMMA)? (args (COMMA def_parameters)? ) COMMA? | def_parameters COMMA? ; funcbody : simple_stmt | LINE_BREAK INDENT stmt+ DEDENT ; args : STAR name ; def_parameters : def_parameter (COMMA def_parameter)* ; small_stmt : RETURN expression #return_stmt ; def_parameter : name | STAR ; expression: name op=OPERATOR name ; name: NAME; DEF : D E F; SEMI_COLON : \u0026#39;;\u0026#39;; STAR : \u0026#39;*\u0026#39;; OPERATOR : STAR|\u0026#39;+\u0026#39;|\u0026#39;/\u0026#39;|\u0026#39;**\u0026#39;|\u0026#39;-\u0026#39;; RETURN : R E T U R N; ASYNC : A S Y N C; COMMA : \u0026#39;,\u0026#39;; OPEN_PAREN : \u0026#39;(\u0026#39;; CLOSE_PAREN : \u0026#39;)\u0026#39;; ARROW : \u0026#39;-\u0026gt;\u0026#39;; COLON : \u0026#39;:\u0026#39;; NAME : ID_START ID_CONTINUE*; WS : [ \\t]+ {HandleSpaces();} -\u0026gt; channel(HIDDEN); å®ƒçš„ä¸€ä¸ªä¸»è¦ä¼˜ç‚¹æ˜¯ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ syntax è¿›è¡Œ lexing å’Œ parsingã€‚ç„¶è€Œï¼Œåœ¨è¯­æ³•å±‚é¢ä¸Šï¼Œè¿™é‡Œçš„åŒºåˆ«åœ¨äºå‘½åçº¦å®š:\nä»¥å¤§å†™å­—æ¯å¼€å¤´çš„è§„åˆ™æ˜¯ lexer rules å…¶ä»–çš„éƒ½æ˜¯ parse rules ANTLR plugin (on Intellij IDEA) output for the above python function parsing ä¸€æ—¦å®šä¹‰å®Œæ¯•ï¼Œcomplete ANLTR jar æ–‡ä»¶å°±ä¼šæä¾›ä¸€ä¸ªé€‰é¡¹ï¼Œå°†å…¶ç”Ÿæˆä¸€ç»„æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨æ‚¨å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€ä»£ç ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª parserã€‚\n1 java -Xmx500M -cp \u0026lt;path to ANTLR complete JAR\u0026gt; org.antlr.v4.Tool -Dlanguage=\u0026lt;target_language\u0026gt; PythonParserExample.g4 ç”±äºæˆ‘ä½¿ç”¨ Python3 ä½œä¸ºç”Ÿæˆè§£æå™¨çš„ç›®æ ‡ï¼ŒANTLR çš„é…ç½®ä¼šç”Ÿæˆ 3 ä¸ª python æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å¯ä»¥ä½œä¸ºä»£ç ç¿»è¯‘è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå°†ä¸€ç§è¯­è¨€çš„æºä»£ç è½¬æ¢ä¸ºå¦ä¸€ç§è¯­è¨€ã€‚\nANTLR plugin (on Intellij IDEA) output for the above python function parsing Setting up an ANTLR Project ANTLR plugin for VSCode è¿™é‡Œä½¿ç”¨çš„è®¾ç½®å°†æ˜¯åœ¨ VSCode ä¸Šåˆ›å»ºçš„ Java-Maven é¡¹ç›®ã€‚\nANTLR plugin for VSCode æä¾›äº†å„ç§é€‰é¡¹ï¼ˆç”šè‡³æ¯” Intellij è¿˜å¤šï¼‰æ¥è°ƒè¯•è¯­æ³•æ–‡ä»¶ï¼Œå¹¶åˆ›å»ºäº†ç¾è§‚çš„ parse treesï¼Œä»¥ä¾¿è½»æ¾è°ƒè¯•ç”¨æˆ·è¾“å…¥è¯­å¥çš„ç‰¹å®šé…ç½®ã€‚\nANTLR plugin (on Intellij IDEA) output for the above python function parsing è¦ç”Ÿæˆè¿™äº›å¯è§†åŒ–æ•ˆæœï¼Œéœ€è¦ä½¿ç”¨ vscode çš„ ANTLR å¯åŠ¨é…ç½®åœ¨è°ƒè¯•æ¨¡å¼ä¸‹è¿è¡Œè¯­æ³•æ–‡ä»¶ï¼Œå¹¶ä¸ºè¯­æ³•æŒ‡å®šè¾“å…¥æ–‡ä»¶ã€‚ä¸‹é¢æ˜¯ VS Code ä¸Š ANTLR çš„ launch.json é…ç½®æ–‡ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 { \u0026#34;name\u0026#34;: \u0026#34;Debug ANTLR4 grammar\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;antlr-debug\u0026#34;, \u0026#34;request\u0026#34;: \u0026#34;launch\u0026#34;, \u0026#34;input\u0026#34;: \u0026#34;input.txt\u0026#34;, \u0026#34;grammar\u0026#34;: \u0026#34;BooleanExprParser.g4\u0026#34;, \u0026#34;startRule\u0026#34;: \u0026#34;parse\u0026#34;, \u0026#34;printParseTree\u0026#34;: true, \u0026#34;visualParseTree\u0026#34;: true } Grammar è®©æˆ‘ä»¬å…ˆä¸ºè§£æå™¨åˆ›å»ºä¸€ä¸ªåŸºæœ¬è¯­æ³•æˆ– BooleanExpr.g4 æ–‡ä»¶ã€‚\n1 2 3 4 grammar BooleanExpr; @header { package antlrsource; } è¯·æ³¨æ„ parser file æ˜¯å¦‚ä½•ä»¥ grammar BooleanExpr; å¼€å§‹çš„ã€‚è¿™å¯ä»¥é€šè¿‡å°† Lexer tokens (å¤§å†™å­—æ¯è¡¨ç¤º) å’Œ parser tokens (æ‰€æœ‰å…¶ä»–æ ‡è®°) ä¿å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶ä¸­æ¥åˆ†è§£ï¼š\n1 2 3 4 lexer grammar BooleanExprLexer; @header { package antlrsource; } 1 2 3 4 parser grammar BooleanExprParser; @header { package antlrsource; } ä¸€ä¸ªç”¨äº parserï¼Œå¦ä¸€ä¸ªç”¨äº lexerï¼Œè¿™æ ·æ›´ä¾¿äºç»´æŠ¤ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªå¤´æ–‡ä»¶å’Œè½¯ä»¶åŒ…åç§°ï¼Œæ”¾åœ¨ç”Ÿæˆçš„è§£æå™¨ç±»çš„å¼€å¤´ã€‚è¿™å°†å…è®¸æˆ‘ä»¬æŒ‡å®šä¸€ä¸ªåŒ…ï¼Œä»¥ä¾¿åœ¨ Java ä»£ç ä¸­å¯¼å…¥ã€‚\nä» Lexer å¼€å§‹ï¼Œæˆ‘ä»¬å°† IDENTIFIER å®šä¹‰ä¸º lexer ruleï¼Œå¹¶æä¾›ä¸ä¹‹åŒ¹é…çš„æè¿°ï¼š\n1 2 3 IDENTIFIER : [a-zA-Z_] [a-zA-Z_0-9]* ; Lexer rules æ€»æ˜¯ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚è¿™äº›è§„åˆ™æ˜¯ parser çš„åŸºæœ¬æ„ä»¶ï¼Œé‡ç‚¹æ˜¯æ„å»º parser rules çš„åŸºç¡€ã€‚å¯¹æ­£åˆ™è¡¨è¾¾å¼ç¨æœ‰æ¥è§¦çš„äººæ¥è¯´ï¼Œè¿™åº”è¯¥æœ‰ç‚¹ç†Ÿæ‚‰ã€‚\nè¿™é‡Œï¼ŒA-Z è¡¨ç¤º A å’Œ Z ä¹‹é—´çš„å­—æ¯ï¼Œè€Œ a-z è¡¨ç¤º a å’Œ z ä¹‹é—´çš„å­—æ¯ã€‚åŒæ ·ï¼Œ0-9 è¡¨ç¤ºæ•°å­— 0 å’Œ 9 ä¹‹é—´çš„æ•°å­—ã€‚ç”±äºè§„åˆ™å¯èƒ½åŒ…å«ä¹Ÿå¯èƒ½ä¸åŒ…å«è¿™äº›å­—æ¯çš„å¤šæ¬¡å‡ºç°ï¼Œå› æ­¤å¯ä»¥ç”¨ (*/+) è¿ç®—ç¬¦ä½œä¸ºåç¼€ï¼Œè¡¨ç¤ºè¿™äº›å­—æ¯å‡ºç°çš„é¢‘ç‡ã€‚è¿™é‡Œï¼Œ* è¡¨ç¤ºå¯èƒ½å®Œå…¨ä¸å‡ºç°ï¼ˆ0 æ¬¡æˆ–æ›´å¤šæ¬¡ï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬çš„ IDENTIFIER è§„åˆ™å°†åŒ¹é…å¤§å†™å­—æ¯ã€å°å†™å­—æ¯ï¼ˆæ€»æ˜¯ä»¥å¤§å†™/å°å†™å­—æ¯å¼€å¤´ï¼‰å’Œæ•´æ•°å­—ç¬¦çš„ä»»æ„ç»„åˆï¼Œä½†ä¸åŒ¹é…ç©ºå­—ç¬¦ã€‚\nä¸€èˆ¬æ¥è¯´ï¼Œæ‰€æœ‰ç©ºç™½éƒ½ä¼šè¢«è¯æ³•è¯†åˆ«å™¨æ ‡è®°åŒ–ã€‚å› æ­¤ï¼Œæ‚¨å¿…é¡»åœ¨è§£æå™¨è§„åˆ™ä¸­å®šä¹‰ç©ºæ ¼ä»¥åŠæ‰€æœ‰å¯èƒ½ä½¿ç”¨ç©ºæ ¼çš„åœ°æ–¹ã€‚ä¸è¿‡ï¼Œç”±äºæˆ‘ä»¬çš„æºå¸ƒå°”è¡¨è¾¾å¼åœ¨æŸäº›åœ°æ–¹ä¸éœ€è¦å¯¹ç©ºæ ¼æ•æ„Ÿï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€æ¡è¯æ³•è§„åˆ™æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚\n1 WS: [ \\r\\t\\u000C\\n]+ -\u0026gt; skip; è¯·æ³¨æ„ç•™ç™½æ ‡è®°çš„å®šä¹‰æ˜¯å¦‚ä½•ç¼–å†™çš„ï¼Œä»¥è¯†åˆ«ä¸€ä¸ªæˆ–å¤šä¸ªç©ºæ ¼ã€åˆ¶è¡¨ç¬¦å’Œæ¢è¡Œç¬¦ï¼Œå¹¶è®© ANTLR è·³è¿‡å®ƒä»¬ã€‚ç®­å¤´ï¼ˆ-\u0026gt;ï¼‰è¿ç®—ç¬¦å®šä¹‰äº†é‡åˆ°æ ‡è®°æ—¶è¦æ‰§è¡Œçš„æ“ä½œï¼ˆæœ¬ä¾‹ä¸­ä¸ºè·³è¿‡æ“ä½œï¼‰ã€‚æ¥ä¸‹æ¥æ˜¯ä¸ºå¸ƒå°”è¡¨è¾¾å¼å®šä¹‰æ ‡è®°ï¼Œå…¶ä¸­åŒ…æ‹¬å¤šä¸ªè¿ç®—ç¬¦å’Œæ“ä½œæ•°ã€‚è¿™åŒ…æ‹¬ä»¥ä¸‹æ ‡è®°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 AND: A N D; OR: O R; NOT: N O T; TRUE: \u0026#39;True\u0026#39;; FALSE: \u0026#39;False\u0026#39;; GT: G T {setText(\u0026#34; \u0026gt; \u0026#34;);}; GE: G E {setText(\u0026#34; \u0026gt;= \u0026#34;);}; LT: L T {setText(\u0026#34; \u0026lt; \u0026#34;);}; LE: L E {setText(\u0026#34; \u0026lt;= \u0026#34;);}; EQ: E Q {setText(\u0026#34; == \u0026#34;);}; LPARENTHESIS: \u0026#39;(\u0026#39;; RPARENTHESIS: \u0026#39;)\u0026#39;; DECIMAL_NUMBER: \u0026#39;-\u0026#39;? [0-9]+ ( \u0026#39;.\u0026#39; [0-9]+)?; Embedding Actions è§„åˆ™ GTã€GEã€LTã€LE å’Œ EQ åŒ…å«ä»£ç å—ï¼Œå…è®¸å®ƒä»¬åœ¨é‡åˆ°å„è‡ªçš„æ ‡è®°æ—¶æ‰§è¡ŒæŸäº›åŠ¨ä½œã€‚è¿™æ ·å°±å¯ä»¥åœ¨è¯­æ³•æ–‡ä»¶ä¸­å®šä¹‰æŸäº›åŠ¨ä½œï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªèƒ½å®šä¹‰ç®€å•çš„å°åŠ¨ä½œï¼Œè€Œä¸èƒ½å®šä¹‰å¤æ‚çš„ä»£ç å—ã€‚\nå¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›äº§ç”Ÿæ„å»ºè§£ææ ‘çš„å¼€é”€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è§£æè¿‡ç¨‹ä¸­å³æ—¶è®¡ç®—å€¼æˆ–æ‰“å°å†…å®¹ã€‚å¦ä¸€æ–¹é¢ï¼Œè¿™æ„å‘³ç€è¦åœ¨è¡¨è¾¾å¼è¯­æ³•ä¸­åµŒå…¥ä»»æ„ä»£ç ï¼Œè¿™å°±æ¯”è¾ƒå›°éš¾ï¼›æˆ‘ä»¬å¿…é¡»äº†è§£è¿™äº›æ“ä½œå¯¹è§£æå™¨çš„å½±å“ï¼Œä»¥åŠè¿™äº›æ“ä½œçš„ä½ç½®ã€‚ The Definitive ANTLR 4 Reference\nè¯·æ³¨æ„ï¼Œæ¯æ¡è§„åˆ™éƒ½ç”±ç”¨ç©ºæ ¼éš”å¼€çš„å­—æ¯ç»„æˆã€‚è¿™äº›è¢«ç§°ä¸º fragmentsã€‚å®ƒä»¬çš„ä¸»è¦ç›®çš„æ˜¯å‡å°‘æ¯ä¸ªæ ‡è®°çš„æ‚ä¹±å®šä¹‰ï¼Œè¿™åŸºæœ¬ä¸Šéœ€è¦å¤„ç†å¯¹å¤§å°å†™æ•æ„Ÿçš„ç”¨ä¾‹ã€‚è¿™æ ·ï¼Œç”¨æˆ·å°±ä¸å¿…ä¸ºè¯†åˆ«åŒä¸€ä¸ª token è€Œå†™ä¸‹æ‰€æœ‰å¯èƒ½çš„æ–‡æœ¬ç»„åˆã€‚å…¶å®šä¹‰å¦‚ä¸‹\n1 2 3 4 fragment A : [aA]; // match either an \u0026#39;a\u0026#39; or \u0026#39;A\u0026#39; fragment B : [bB]; ... fragment Z : [zZ]; è™½ç„¶å¤§å¤šæ•°å­—æ¯æ•°å­—ä»¤ç‰Œéƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨ç‰‡æ®µæ¥åˆ›å»ºï¼Œä½†å…¶ä»–ä»¤ç‰Œåˆ™å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰æˆ–ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥çš„çº¯å­—ç¬¦ä¸²ï¼ˆå¦‚ LPARENTHESIS å’Œ DECIMAL_NUMBERï¼‰æ¥åˆ›å»ºã€‚\nè€Œ parser rulesï¼ˆæ‰€æœ‰å…¶ä»–è§„åˆ™ï¼‰åˆ™ä»¥å°å†™å­—æ¯å¼€å¤´ã€‚è¿™äº›è§„åˆ™çš„ä¸»è¦ç›®çš„æ˜¯åœ¨ DSL ä¸­å®šä¹‰å¸ƒå°”è¡¨è¾¾å¼çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶å¸®åŠ©ä»ç”Ÿæˆçš„è¯æ³•æ ‡è®°ä¸­æ„å»ºè§£ææ ‘æˆ–æŠ½è±¡è¯­æ³•æ ‘ã€‚\nBasic Building Blocks è®©æˆ‘ä»¬å¼€å§‹å®šä¹‰è§„åˆ™ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰æ ¹èŠ‚ç‚¹ï¼ˆæˆ–é€šå¸¸æ‰€è¯´çš„è§£æèŠ‚ç‚¹ï¼‰ï¼Œå®ƒæœ¬èº«åªèƒ½æŒ‡å‘ä¸€æ¡è§„åˆ™ï¼ˆæ­¤å¤„ä¸º basicBooleanExpressionï¼‰ã€‚é¦–å…ˆæ˜¯ä¸€ä¸ªè¿”å›è¯­å¥ï¼Œå…¶ä¸­åŒ…å«å®ƒåº”è¯¥è¿”å›çš„å˜é‡ï¼ˆå¯é€‰ï¼Œä½†åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯å¿…éœ€çš„ï¼‰åŠå…¶è¿”å›ç±»å‹ã€‚\nè¿™æ¡è§„åˆ™æŒ‡å‘å¦ä¸€æ¡åä¸º basicBooleanExpression çš„è§„åˆ™ï¼Œè¯¥è§„åˆ™åè·Ÿæœ‰ EOFï¼ˆæˆ–æ–‡ä»¶ç»“æŸï¼‰å­—ç¬¦ã€‚ä¸åŒ…å«è¯¥å­—ç¬¦å®è´¨ä¸Šæ„å‘³ç€æ‚¨æ­£è¯•å›¾è§£ææ•´ä¸ªè¾“å…¥å†…å®¹ï¼Œè€Œåªè§£æéƒ¨åˆ†è¾“å…¥å†…å®¹æ˜¯å¯ä»¥æ¥å—çš„ï¼Œè¿™å°†é¿å…ä»»ä½•è¯­æ³•é”™è¯¯ã€‚\n1 2 3 4 parse returns[String str] @init {$str=\u0026#34;\u0026#34;;}: basicBooleanExpression {$str=$basicBooleanExpression.str;} EOF; ä½¿ç”¨ EOF character çš„åŸå› æ˜¯ï¼Œå¦‚æœåœ¨è§£æ basicbooleanExpression è§„åˆ™æ—¶å‡ºç°è¯­æ³•é”™è¯¯ï¼Œé‚£ä¹ˆè§£æè§„åˆ™å°†å°è¯•æ¢å¤è¯­æ³•é”™è¯¯å¹¶æŠ¥å‘Šæ”¶é›†åˆ°çš„è¯­æ³•é”™è¯¯ï¼Œç„¶åç»§ç»­è§£æï¼Œå› ä¸º EOF æ˜¯å®Œæˆè§„åˆ™æ‰€å¿…éœ€çš„ï¼Œè€Œä¸”è§£æå™¨å°šæœªåˆ°è¾¾ EOFã€‚\nç”±äºæˆ‘ä»¬å·²ç»å®šä¹‰äº†è¯­æ³•å¹¶å°†å…¶åˆ†æˆäº†ä¸¤ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€‰æ‹©åœ¨è§£æå™¨æ–‡ä»¶ä¸­å°†è¯æ³•ä½œä¸ºå®šä¹‰è§„åˆ™çš„è¯æ±‡:\n1 2 3 options { tokenVocab = BooleanExprLexer; } å›åˆ°æˆ‘ä»¬çš„è§£æå™¨ï¼Œ\nç¬¬ä¸€æ¡è§„åˆ™æˆ– basicBooleanExpresion è§„åˆ™å®šä¹‰äº†ä¸‰ä¸ªé€‰é¡¹ï¼Œåœ¨æˆ‘ä»¬çš„ python ç›®æ ‡ä»£ç è¯„ä¼°ä¸­åº”å§‹ç»ˆè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ç¬¬ä¸€ç§æ˜¯åä¸¤ç§è§„åˆ™çš„ç»„åˆï¼Œå³ä¸¤ä¸ªå¸ƒå°”è¡¨è¾¾å¼ä¸ä¸€ä¸ªé€»è¾‘å’Œ/æˆ–è¿ç®—ç¬¦çš„ç»„åˆï¼› ç¬¬äºŒç§æ˜¯å¦ä¸€ç§ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œå³ä½¿ç”¨æ¯”è¾ƒå™¨ï¼ˆå¦‚ã€å°äºæˆ– LTï¼‰æ¯”è¾ƒä¸¤ä¸ªåŸºæœ¬è¡¨è¾¾å¼å½¼æ­¤è¿”å›çš„æŸä¸ªå€¼ï¼› æœ€åï¼Œç¬¬ä¸‰ç§æ˜¯å•å…ƒè¡¨è¾¾å¼ï¼ˆåªæœ‰ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚ True æˆ– Falseï¼‰ã€‚ è¿™äº›è§„åˆ™ç”±è¿ç®—ç¬¦ | åˆ†éš”ã€‚è¿™æ„å‘³ç€ï¼ŒbasicBooleanExpression åœ¨è¯†åˆ«è¾“å…¥å­—ç¬¦ä¸²æ—¶ï¼Œå¯ä»¥æ ¹æ®ä»å·¦åˆ°å³çš„æ–‡æœ¬è¯†åˆ«ï¼Œé€’å½’åœ°å¼•ç”¨å…¶å­è§„åˆ™ä¸­çš„ä»»ä¸€è§„åˆ™ã€‚\n1 2 3 4 5 basicBooleanExpression returns[String str]: left = basicBooleanExpression op = logicalOperator right = basicBooleanExpression {$str=$left.str +\u0026#34; \u0026#34;+$op.text+\u0026#34; \u0026#34;+$right.str;} # logicalExpression | left = expression op = comparator right = expression {$str=\u0026#34;(\u0026#34;+$left.text +\u0026#34; \u0026#34;+$op.text+\u0026#34; \u0026#34;+$right.text+\u0026#34;)\u0026#34;;} # comparisonExpression | bool {$str=$bool.str;} # booleanExpression; basicBooleanExpression ä¸­çš„æ¯æ¡è§„åˆ™éƒ½åˆ†é…ç»™ä¸€ä¸ªå˜é‡åï¼Œå¦‚ leftã€rightï¼ˆè¡¨è¾¾å¼ä¸­çš„å·¦å³æ“ä½œæ•°ï¼‰å’Œ opï¼ˆæ“ä½œæ•°çš„ç¼©å†™ï¼‰ï¼Œæˆ–è€…æ˜¯ä¸€æ¡å•æ ‡è®°è§„åˆ™ã€‚$str å˜é‡ç”¨äºåˆ†é…å½“å‰è¡¨è¾¾å¼è§£æçš„ç»“æœï¼Œå¹¶ä½¿ç”¨è§„åˆ™å¼€å¤´çš„ [String str] è¿”å›å€¼è¿”å›ã€‚\n# ç”¨äºæ ‡è®°æ¯æ¡è§„åˆ™ï¼Œä½¿å…¶åœ¨ç›®æ ‡è¯­è¨€è§£æå™¨ï¼ˆåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ Java è§£æå™¨ç±»ï¼‰ä¸­æœ‰ä¸“é—¨çš„ç›‘å¬å™¨æ–¹æ³•ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 lexer grammar BooleanExprLexer; @header { package antlrsource; } AND: A N D; OR: O R; NOT: N O T; TRUE: \u0026#39;True\u0026#39;; FALSE: \u0026#39;False\u0026#39;; GT: G T {setText(\u0026#34; \u0026gt; \u0026#34;);}; GE: G E {setText(\u0026#34; \u0026gt;= \u0026#34;);}; LT: L T {setText(\u0026#34; \u0026lt; \u0026#34;);}; LE: L E {setText(\u0026#34; \u0026lt;= \u0026#34;);}; EQ: E Q {setText(\u0026#34; == \u0026#34;);}; LPARENTHESIS: \u0026#39;(\u0026#39;; RPARENTHESIS: \u0026#39;)\u0026#39;; DECIMAL_NUMBER: \u0026#39;-\u0026#39;? [0-9]+ ( \u0026#39;.\u0026#39; [0-9]+)?; IDENTIFIER: [a-zA-Z_] [a-zA-Z_0-9]*; WS: [ \\r\\t\\u000C\\n]+ -\u0026gt; skip; fragment A : [aA]; // match either an \u0026#39;a\u0026#39; or \u0026#39;A\u0026#39; fragment B : [bB]; fragment C : [cC]; fragment D : [dD]; fragment E : [eE]; fragment F : [fF]; fragment G : [gG]; fragment H : [hH]; fragment I : [iI]; fragment J : [jJ]; fragment K : [kK]; fragment L : [lL]; fragment M : [mM]; fragment N : [nN]; fragment O : [oO]; fragment P : [pP]; fragment Q : [qQ]; fragment R : [rR]; fragment S : [sS]; fragment T : [tT]; fragment U : [uU]; fragment V : [vV]; fragment W : [wW]; fragment X : [xX]; fragment Y : [yY]; fragment Z : [zZ]; BooleanExprLexer.g4\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 parser grammar BooleanExprParser; @header { package antlrsource; } options { tokenVocab = BooleanExprLexer; } parse returns[String str] @init {$str=\u0026#34;\u0026#34;;}: basicBooleanExpression {$str=$basicBooleanExpression.str;} EOF; basicBooleanExpression returns[String str]: left = basicBooleanExpression op = logicalOperator right = basicBooleanExpression\t{$str=$left.str +\u0026#34; \u0026#34;+$op.text+\u0026#34; \u0026#34;+$right.str;} # logicalExpression | left = expression op = comparator right = expression {$str=\u0026#34;(\u0026#34;+$left.text +\u0026#34; \u0026#34;+$op.text+\u0026#34; \u0026#34;+$right.text+\u0026#34;)\u0026#34;;}\t# comparisonExpression | bool\t{$str=$bool.str;}\t# booleanExpression; expression returns[String str]: LPARENTHESIS expression RPARENTHESIS\t# parenthesisExpression | NOT expression\t# notExpression | bool\t# unaryboolExpression | IDENTIFIER\t# identifierExpression | DECIMAL_NUMBER\t# decimalExpression ; comparator returns[String str]: GT | GE | LT | LE | EQ; logicalOperator returns[String str]: AND | OR; bool returns[String str]: TRUE | FALSE; BooleanExprParser.g4\n1 2 a gt b and c gt d a eq b input demo\nMaven Configuration ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç»§ç»­ç”Ÿæˆè§£æå™¨æ–‡ä»¶ã€‚è¿™æ¬¡ï¼Œæˆ‘å°†ä½¿ç”¨ maven é…ç½®å’Œ VS Code çš„ ANTLR æ’ä»¶æ¥ç”Ÿæˆè¿™äº›æ–‡ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 \u0026lt;plugin\u0026gt; \u0026lt;groupId\u0026gt;org.antlr\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;antlr4-maven-plugin\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.8-1\u0026lt;/version\u0026gt; \u0026lt;executions\u0026gt; \u0026lt;execution\u0026gt; \u0026lt;id\u0026gt;antlr\u0026lt;/id\u0026gt; \u0026lt;phase\u0026gt;package\u0026lt;/phase\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;libDirectory\u0026gt;${basedir}/src/main/antlr\u0026lt;/libDirectory\u0026gt; \u0026lt;sourceDirectory\u0026gt;${basedir}/src/main/antlr\u0026lt;/sourceDirectory\u0026gt;\u0026lt;outputDirectory\u0026gt;${basedir}/src/main/java/antlrsource\u0026lt;/outputDirectory\u0026gt; \u0026lt;visitor\u0026gt;false\u0026lt;/visitor\u0026gt; \u0026lt;listener\u0026gt;true\u0026lt;/listener\u0026gt; \u0026lt;/configuration\u0026gt; \u0026lt;goals\u0026gt; \u0026lt;goal\u0026gt;antlr4\u0026lt;/goal\u0026gt; \u0026lt;/goals\u0026gt; \u0026lt;/execution\u0026gt; \u0026lt;/executions\u0026gt; \u0026lt;/plugin\u0026gt; æ¯ä¸ªæ ‡ç­¾éƒ½å®šä¹‰äº† ANTLR åœ¨ç”Ÿæˆè§£æå™¨ç±»æ—¶åº”ä½¿ç”¨çš„ç›®å½•æˆ–éœ€è¦æˆ–ä¸éœ€è¦ç”Ÿæˆçš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œç›‘å¬å™¨å’Œè®¿é—®è€…æ ‡ç­¾çš„å®šä¹‰éƒ½æ˜¯ä¸ºäº†æ ¹æ®å®ƒä»¬çš„å¸ƒå°”å€¼ç”Ÿæˆç›¸åº”çš„ java classes/interfacesã€‚\nThe set of target language parser files Traversal Patterns è®©æˆ‘ä»¬æ·±å…¥äº†è§£ Listener vs Visitor traversal patterns ï¼Œå¹¶æ¢ç´¢ BooleanExprParserBaseListener class çš„åŠŸèƒ½ã€‚\nANTLR4 æä¾›äº†ä¸¤ç§éå†è¯­æ³•æ ‘çš„æ–¹æ³•ï¼š\nListener(default)ï¼šlistener pattern æ˜¯ä¸€ç§äº‹ä»¶é©±åŠ¨æ–¹æ³•ï¼Œç”¨äºéå†æ¯ä¸ªè§£æå™¨è§„åˆ™ç±»å‹çš„è¯­æ³•æ ‘ã€‚ä¸ºæ¯ä¸ªè§£æå™¨è§„åˆ™æä¾›ä¸€ä¸ªåŒ…å«è¿›å…¥å’Œé€€å‡ºäº‹ä»¶æ–¹æ³•çš„æ¥å£ã€‚ Visitorï¼šè¿™ä½¿å¾—ç”¨æˆ·ä¹Ÿå¯ä»¥æ§åˆ¶è§£ææ ‘çš„éå†ã€‚è§£ææ ‘ä¸­çš„èŠ‚ç‚¹ï¼ˆè§£æå™¨è§„åˆ™ï¼‰å°†ä½¿ç”¨æä¾›çš„è®¿é—®æ–¹æ³•æ˜ç¡®éå†æˆ–è®¿é—®ã€‚ æ ¹æ®ä½¿ç”¨ç¯å¢ƒçš„ä¸åŒï¼ŒListener å’Œ Visitor æ¨¡å¼å„æœ‰åˆ©å¼Šã€‚\nç›¸åŒç‚¹\nä¸¤ç§å®ç°æ–¹å¼çš„è§„åˆ™è¯­æ³•è§„åˆ™å®Œå…¨ç›¸åŒã€‚ ä¸¤ç§å®ç°æ–¹å¼çš„è§£æå™¨è¾“å‡ºä¹Ÿå®Œå…¨ç›¸åŒã€‚ ä¸åŒç‚¹\nç”±äº Listener pattern ä¾èµ–äºç”¨æˆ·æ¥å®šä¹‰å…¶éå†åºåˆ—ï¼Œå› æ­¤å®ƒä½¿ç”¨è°ƒç”¨å †æ ˆæ¥ç®¡ç†è¿™äº›éå†ï¼Œè¿™æ„å‘³ç€å¤§é‡è¾“å…¥å¯èƒ½ä¼šå¯¼è‡´æº¢å‡ºï¼Œè€Œåœ¨å·²åˆ†é…å †ä¸Šä½¿ç”¨å †æ ˆçš„ç›‘å¬å™¨åˆ™ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚ Listener pattern å’Œ Visitor pattern çš„æœ€å¤§åŒºåˆ«åœ¨äºï¼Œç›‘å¬å™¨æ–¹æ³•æ˜¯ç”± ANTLR æä¾›çš„è¡Œèµ°å™¨å¯¹è±¡ç‹¬ç«‹è°ƒç”¨çš„ï¼Œè€Œè®¿é—®è€…æ–¹æ³•å¿…é¡»é€šè¿‡æ˜¾å¼è®¿é—®è°ƒç”¨æ¥è¡Œèµ°å…¶å­èŠ‚ç‚¹ã€‚å¦‚æœå¿˜è®°åœ¨èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸Šè°ƒç”¨è®¿é—®è€…æ–¹æ³•ï¼Œå°±æ„å‘³ç€è¿™äº›å­æ ‘ä¸ä¼šè¢«è®¿é—®ã€‚\nè·³å›åˆ°æˆ‘ä»¬ç”Ÿæˆçš„ Listener\nListener Implementation Listener Interface æ¥å£ç±»çš„å®ç°åªé’ˆå¯¹æŸäº›è¯­è¨€ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œimplementing class/module æ˜¯åœ¨ç›®æ ‡è¯­è¨€ä¸­å®šä¹‰çš„ã€‚è¯·æ³¨æ„ï¼Œinterface å’Œ implementation ä¸­éƒ½å®šä¹‰äº†æ ¹ï¼ˆæˆ–è§£æï¼‰èŠ‚ç‚¹ç›‘å¬å™¨æ–¹æ³•ã€‚æ‰€æœ‰æ–¹æ³•éƒ½æœ‰ç›¸åº”çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ç”±ç”Ÿæˆçš„è§£æå™¨ç±»æä¾›ã€‚è¿™æ ·å°±å¯ä»¥åœ¨éå†è§£ææ ‘æ—¶å¯¹è¯¥è§„åˆ™çš„ä¸Šä¸‹æ–‡è¿›è¡Œæ“ä½œã€‚\nè®©æˆ‘ä»¬åˆ›å»ºä¸è§£æå™¨çš„ç¬¬ä¸€æ¬¡ interaction ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªç®€å•è¡¨è¾¾å¼çš„è¾“å‡ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 // Creates a lexer for the input string to generate the tokens BooleanExprLexer lexer = new BooleanExprLexer(CharStreams.fromString(\u0026#34;a eq b\u0026#34;)); // Stores the tokens generated by the lexer for the input string CommonTokenStream tokens = new CommonTokenStream(lexer); /** Creates a parser for generation of an Abstract Syntax tree from the stream of tokens to identify context */ BooleanExprParser parser = new BooleanExprParser(tokens); /** Creates a parse tree for generating the output string and manipulation of the parser and lexer tokens in the parse tree. The tree is create considering the parse rule in the grammar as the root node. This tree will be used later for listener. */ ParseTree tree = parser.parse(); /** Convert the root node\u0026#39;s output to it\u0026#39;s rule context and use its attribute for printing the parser\u0026#39;s output string. */ ParseContext context = (ParseContext) tree; System.out.println(context.str); ç”±äºæˆ‘ä»¬å·²ç»åœ¨è¯­æ³•æ–‡ä»¶ä¸­æ·»åŠ äº†å°†åŸºæœ¬è¿ç®—ç¬¦è½¬æ¢ä¸º python å¯¹åº”è¿ç®—ç¬¦çš„æ“ä½œï¼Œå› æ­¤è§£æå™¨çš„è¾“å‡ºè¡¨è¾¾å¼å·²ç»æ˜¯è§£æå½¢å¼ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç®€å•çš„æ¯”è¾ƒè¡¨è¾¾å¼ï¼Œå¦‚ a eq bï¼Œå°†è½¬æ¢ä¸º python è¡¨è¾¾å¼ a == b ã€‚\nç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»è½¬æ¢äº†è¡¨è¾¾å¼ï¼Œå¯ä»¥ä½¿ç”¨ç›‘å¬å™¨æ–‡ä»¶ä¸­çš„æŸäº›æ›´æ”¹å°†å…¶è½¬æ¢ä¸ºå‡½æ•°ï¼Œå¹¶ä½¿ç”¨ template å°†è¯¥è¡¨è¾¾å¼æ›¿æ¢ä¸º placeholder function textï¼Œç”¨äºå¤šä¸ªç±»ä¼¼è¡¨è¾¾å¼ï¼š\n1 2 def \u0026lt;function_name\u0026gt;(\u0026lt;list_of_parameters\u0026gt;): return a == b parsed expression å¯ä»¥å¾ˆå®¹æ˜“åœ°æ›¿æ¢æˆä¸Šé¢çš„è¡¨è¾¾å¼ã€‚ä¸ç”¨æ‹…å¿ƒæ›¿æ¢éƒ¨åˆ†ï¼Œæˆ‘ä»¬ç¨åä¼šè®²åˆ°ã€‚ç°åœ¨ï¼Œä¸ºäº†ä»æ¯ä¸ªè¡¨è¾¾å¼ä¸­æå–å‚æ•°åˆ—è¡¨ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªåˆ—è¡¨ï¼Œä»¥ä¾¿åœ¨æ¯æ¬¡è§¦å‘æ ‡è¯†ç¬¦ç±»å‹ï¼ˆè§£æå™¨è§„åˆ™ï¼‰çš„è¾“å…¥äº‹ä»¶ç›‘å¬å™¨æ–¹æ³•æ—¶æ•è·æ¯ä¸ªæ ‡è¯†ç¬¦åç§°ã€‚\nè®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ä½œä¸ºå®ä¾‹å˜é‡ï¼Œåœ¨æ— å‚æ•°æ„é€ å‡½æ•°ä¸­å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼Œå®šä¹‰å…¶ getter æ–¹æ³•ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæ–¹æ³•æ¥æ¸…é™¤è¯¥åˆ—è¡¨ï¼Œä»¥ä¾¿æ¯æ¬¡è¡¨è¾¾å¼è§£æå’Œæ›¿æ¢å®Œæˆåéƒ½èƒ½æ¸…é™¤è¯¥åˆ—è¡¨ã€‚\n1 2 3 4 5 6 public class BooleanExprParserBaseListener implements BooleanExprParserListener { private List\u0026lt;String\u0026gt; identifiersList; public BooleanExprParserBaseListener(){ identifiersList= new ArrayList\u0026lt;\u0026gt;(); } ... è®©æˆ‘ä»¬æŠŠä¸Šä¸‹æ–‡ getText æ–¹æ³•ä¸­çš„æ ‡è¯†ç¬¦åç§°æ·»åŠ åˆ°æˆ‘ä»¬ä¸º identifierExpression æ¯æ¬¡è§¦å‘è¾“å…¥äº‹ä»¶æ—¶åˆ›å»ºçš„åˆ—è¡¨ä¸­ï¼š\n1 2 3 4 5 6 7 8 9 public void clearIdentifiers() { identifiersList.clear(); } public List\u0026lt;String\u0026gt; getIdentifiersList() { return identifiersList; } @Override public void enterIdentifierExpression(BooleanExprParser.IdentifierExpressionContext ctx) { identifiersList.add(ctx.getText()); } æœ€åï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ ‘ä¸Šéå†ï¼Œä»¥è§¦å‘è¿™äº›äº‹ä»¶ï¼Œä»è€Œæ”¶é›†è¡¨è¾¾å¼çš„æ‰€æœ‰å‚æ•°ã€‚ANTLR ä¸ºæ­¤æä¾›äº† ParseTreeWalker ç±»ã€‚é¡¾åæ€ä¹‰ï¼Œè¯¥ç±»å…è®¸åœ¨èµ°è¿‡è§£ææ ‘æ—¶åŒæ—¶ä½¿ç”¨ç›‘å¬å™¨å’Œè®¿é—®è€…å®ç°ç±»ã€‚è®©æˆ‘ä»¬ä½¿ç”¨ç›‘å¬å™¨æ¥éå†ä¸Šé¢å®šä¹‰çš„è§£ææ ‘ï¼š\n1 2 3 4 5 BooleanExprParserBaseListener booleanExprBaseListener = new BooleanExprParserBaseListener(); ParseTreeWalker walker = new ParseTreeWalker(); walker.walk(booleanExprBaseListener, tree); List\u0026lt;String\u0026gt; identifiers = booleanExprBaseListener.getIdentifiersList(); booleanExprBaseListener.clearIdentifiers(); è¯·æ³¨æ„ï¼Œè¿™é‡Œçš„ walk æ–¹æ³•ä½¿ç”¨ listener æ¥ç›‘å¬åœ¨è§£ææ ‘ä¸Šè¡Œèµ°æ—¶è§¦å‘çš„äº‹ä»¶ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ getter æ–¹æ³•è·å–è§£æè¡¨è¾¾å¼æ—¶è·å–çš„æ‰€æœ‰æ ‡è¯†ç¬¦åç§°åˆ—è¡¨ã€‚\nGenerate Code A gist of what the process looks like so far å°†ä½¿ç”¨ä¸Šä¸€éƒ¨åˆ† generated expression æˆ– the output of intermediate code generationï¼Œå¹¶å°†å…¶æ›¿æ¢ä¸ºæ¨¡æ¿ç»„æ–‡ä»¶(templating engine ä½¿ç”¨çš„ä¸œè¥¿)ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°†æ¸²æŸ“çš„å‡½æ•°ä¸²å†™å…¥ python æ–‡ä»¶ã€‚\ntemplating engine å°†ä»¥æˆ‘ä»¬çš„ç›®æ ‡è¯­è¨€ï¼ˆå³ Pythonï¼‰ç”Ÿæˆå®é™…å¯ç”¨çš„ä»£ç ï¼Œä»è€Œå®ç°ä»£ç ç”Ÿæˆçš„ç›®æ ‡ã€‚\næåˆ° templating engine ï¼Œä½ é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯ web frameworksã€‚å‡ ä¹æ‰€æœ‰çš„ç°ä»£ web frameworks éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç›®æ ‡ï¼Œé‚£å°±æ˜¯ä½¿ç”¨æ¨¡æ¿å¼•æ“ç”ŸæˆåŠ¨æ€çš„ã€ä¸šåŠ¡å°±ç»ªçš„ç½‘é¡µã€‚æ¯ä¸ªæ¨¡æ¿å¼•æ“çš„æœ€ç»ˆç›®æ ‡éƒ½æ˜¯å°†è·å–çš„è¾“å‡ºç»“æœæ›¿æ¢ä¸ºæ¨¡æ¿æ–‡ä»¶ï¼Œä»¥ä¾¿å³æ—¶æ˜¾ç¤ºç»™æœ€ç»ˆç”¨æˆ·ã€‚\ntemplating engines compared side-by-side\nStringTemplate æˆ‘å°†ä½¿ç”¨ä¸€ä¸ªåä¸º StringTemplate çš„ç±»ä¼¼æ¨¡æ¿å¼•æ“ã€‚å®ƒè¢«å¹¿æ³›ç”¨äºç½‘é¡µæ¨¡æ¿åŒ–ï¼Œä½†ä¹Ÿæ”¯æŒç”¨äºåˆ›å»ºç›®æ ‡è¯­è¨€ä»£ç æ–‡ä»¶çš„åŸºæœ¬æ¨¡æ¿æ“ä½œã€‚\n\u0026lt;attribute\u0026gt; å¦‚æœå­˜åœ¨ï¼Œåˆ™æ±‚å€¼ä¸ºå±æ€§çš„å­—ç¬¦ä¸²å€¼ï¼Œå¦åˆ™ä¸ºç©ºå­—ç¬¦ä¸²ã€‚ ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨ Java ä¸­çš„ StringTemplate å¯¹è±¡æ—¶ï¼Œ\u0026lt;expression\u0026gt; å°†ä»¥ key expression è¡¨ç¤ºã€‚å› æ­¤ï¼Œå¦‚æœç”¨æˆ·åœ¨ expression é”®ä¸Šè¾“å…¥ä»»ä½•å€¼ï¼Œå®ƒå°±ä¼šåœ¨æ¨¡æ¿ä¸­è¢«ç§°ä¸º expression å±æ€§ã€‚ å¯¹äºæ¨¡æ¿å†…çš„è‡ªå®šä¹‰æˆ–ç”¨æˆ·å®šä¹‰å¯¹è±¡ï¼Œè¯·ä½¿ç”¨ \u0026lt;attribute.property\u0026gt; ï¼Œå°†å±æ€§ä½œä¸ºå±æ€§æŸ¥æ‰¾ï¼Œç„¶åä½¿ç”¨ getProperty() æˆ– isProperty() æˆ– hasProperty() ç­‰è®¿é—®å™¨æ–¹æ³•ã€‚ \u0026lt;attribute:t1(argument-list)ï¼š... :tN(argument-list)\u0026gt; è¿­ä»£åŒä¸€ä¸ªæ¨¡æ¿æ›¿æ¢çš„å¯¹è±¡åˆ—è¡¨ã€‚ä»å·¦åˆ°å³ä¾æ¬¡åº”ç”¨å¤šä¸ªæ¨¡æ¿ã€‚åœ¨å¤šå€¼å±æ€§ä¸Šåº”ç”¨æ¨¡æ¿çš„ç»“æœæ˜¯å¦ä¸€ä¸ªå¤šå€¼å±æ€§ã€‚æ•´ä¸ªè¡¨è¾¾å¼çš„æ±‚å€¼ç»“æœæ˜¯æ‰€æœ‰æ¨¡æ¿å…ƒç´ çš„è¿æ¥ç»“æœ \u0026lt;! comment !\u0026gt; StringTemplate ä¼šå¿½ç•¥å·²å®šä¹‰çš„æ³¨é‡Šã€‚ æ¨¡æ¿å®šä¹‰çœ‹èµ·æ¥å°±åƒå¸¦æœ‰æœªé”®å…¥å‚æ•°çš„å‡½æ•°å®šä¹‰ï¼š templateName(arg1, arg2, ..., argN) ::= \u0026quot;single-line template\u0026quot; templateName(arg1, arg2, ..., argN) ::= \u0026lt;\u0026lt;multi-line template\u0026gt;\u0026gt; templateName(arg1, arg2, ..., argN) ::= \u0026lt;%multi-line template that ignores indentation and newlines%\u0026gt; ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ Python StringTemplateExample.stg æ–‡ä»¶çš„ç¤ºä¾‹ï¼š\n1 2 3 4 5 6 7 \u0026lt;! StringTemplateExample.stg !\u0026gt; templateExample(functions) ::= \u0026lt;\u0026lt; \u0026lt;functions :{function | def \u0026lt;function.function_name\u0026gt;(\u0026lt;function.params_list\u0026gt;) return \u0026lt;function.expression\u0026gt; }\u0026gt; \u0026gt;\u0026gt; è¯·æ³¨æ„ï¼Œä¸ºäº†ä¿æŒç¼©è¿›å’Œä¸¤è¡Œé—´éš™ï¼Œæˆ‘ä½¿ç”¨äº†ä¸Šé¢åŸºç¡€ç¤ºä¾‹ä¸­çš„ç¬¬äºŒç§æ¨¡æ¿ç±»å‹ï¼Œå› ä¸ºè¿™éœ€è¦éµå¾ª Python PEP8 çš„è§„åˆ™ï¼Œå³åœ¨ Python æ–¹æ³•ä¹‹é—´æœ‰ä¸¤è¡Œé—´éš™ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹è¯¥æ¨¡æ¿åœ¨ Java ä¸­çš„ç”¨æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 List\u0026lt;String\u0026gt; lines = reader.lines().collect(Collectors.toList()); String functionName = \u0026#34;generated_function_%1$s\u0026#34;; List\u0026lt;Map\u0026gt; functions = new ArrayList\u0026lt;\u0026gt;(); Map \u0026lt;String,String\u0026gt; function; for (int i = 0; i \u0026lt; lines.size(); i++) { BooleanExprLexer lexer = new BooleanExprLexer(CharStreams.fromString(lines.get(i))); CommonTokenStream tokens = new CommonTokenStream(lexer); BooleanExprParser parser = new BooleanExprParser(tokens); ParseTree tree = parser.parse(); ParseContext context = (ParseContext) tree; System.out.println(context.str); BooleanExprParserBaseListener booleanExprBaseListener = new BooleanExprParserBaseListener(); ParseTreeWalker walker = new ParseTreeWalker(); walker.walk(booleanExprBaseListener, tree); List\u0026lt;String\u0026gt; identifiers = booleanExprBaseListener.getIdentifiersList(); function = new HashMap\u0026lt;\u0026gt;(); function.put(\u0026#34;function_name\u0026#34;, String.format(functionName, i)); function.put(\u0026#34;expression\u0026#34;, context.str); function.put(\u0026#34;params_list\u0026#34;, identifiers.stream().collect(Collectors.joining(\u0026#34;, \u0026#34;))); functions.add(function); booleanExprBaseListener.clearIdentifiers(); } stringTemplateExample.add(\u0026#34;functions\u0026#34;, functions); System.out.println(stringTemplateExample.render()); INPUT\n1 2 a gt b and c gt d a eq b Output\n1 2 3 4 5 def generated_function_0(a, b, c, d) return (a \u0026gt; b) and (c \u0026gt; d) def generated_function_1(a, b) return (a == b) Resources repo : https://github.com/WFUing/BooleanParser https://medium.com/analytics-vidhya/antlr-and-code-generation-a71ead442005 https://medium.com/analytics-vidhya/python-from-expressions-the-antlr-series-part-1-3d7696c3a01c https://medium.com/analytics-vidhya/python-from-expressions-the-antlr-series-part-2-5436ef00bcf https://medium.com/analytics-vidhya/python-from-expressions-the-antlr-series-part-3-7ac541a1d08c ","permalink":"https://WFUing.github.io/posts/tech/language/code-generation/antlr-code-generation/","summary":"ANTLR æ˜¯ \u003cstrong\u003eAN\u003c/strong\u003eother \u003cstrong\u003eT\u003c/strong\u003eool for \u003cstrong\u003eL\u003c/strong\u003eanguage \u003cstrong\u003eR\u003c/strong\u003eecognition çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è§£æå™¨ç”Ÿæˆå™¨æ¡†æ¶ï¼Œç”¨äºä»è¯­æ³•æ–‡ä»¶ä¸­æ„å»ºè¯­è¨€è¯†åˆ«å™¨ã€ç¼–è¯‘å™¨å’Œç¿»è¯‘å™¨ï¼Œè¯­æ³•æ–‡ä»¶ä¸­åŒ…å«ä»æºè¯­è¨€åˆ°ç›®æ ‡è¯­è¨€çš„æ¯ä¸ªè¯­å¥æ‰€è¦æ‰§è¡Œçš„æ“ä½œã€‚","title":"Antlr Code Generation"},{"content":"ä¸‹é¢åˆ—å‡ºäº†æ‰€æœ‰ç±»å‹çš„ç¼–ç¨‹è¯­è¨€çš„å®Œæ•´åˆ†ç±»åˆ—è¡¨ã€‚ç¼–ç¨‹è¯­è¨€æ²¡æœ‰ä¸¥æ ¼çš„åˆ†ç±»æ–¹æ¡ˆã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ç§è¯­è¨€è§†ä¸ºä¸æ­¢ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„ç¤ºä¾‹ã€‚\nè®©æˆ‘ä»¬ä¸€ä¸€ç†è§£è¿™äº›ç¼–ç¨‹è¯­è¨€ã€‚ç”±äºåˆ—è¡¨å¾ˆå¤§ï¼Œå› æ­¤ä¸å¯èƒ½è¯¦ç»†è®¨è®ºæ‰€æœ‰è¿™äº›å†…å®¹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘æ­£åœ¨ç”¨æ‰€æœ‰è¿™äº›å„ç§ç¼–ç¨‹è¯­è¨€çš„ç¤ºä¾‹ç¼–å†™ç®€çŸ­çš„ä»‹ç»ã€‚\nç¼–è¯‘è¯­è¨€ ç¼–è¯‘è¯­è¨€æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œå…¶ä¸­æˆ‘ä»¬ä½¿ç”¨ç¼–è¯‘å™¨æ¥ç¼–è¯‘å’Œæ‰§è¡Œä»£ç ã€‚ç¼–è¯‘å™¨é€šå¸¸æ˜¯ä»æˆ‘ä»¬çš„ä¹¦é¢æºä»£ç ç”Ÿæˆæœºå™¨çº§ä»£ç çš„ç¿»è¯‘å™¨ã€‚\nC\nC ++\nCï¼ƒ\nALGOL\nCobol\nFortran\nJava\nVisual Basic\nSmalltalk\nè§£é‡Šè¯­è¨€ è§£é‡Šè¯­è¨€æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨å…¶ä¸­ï¼Œæ— éœ€å°†ç¨‹åºç¼–è¯‘ä¸ºæœºå™¨è¯­è¨€çš„æŒ‡ä»¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è‡ªç”±åœ°æ‰§è¡ŒæŒ‡ä»¤ã€‚è§£é‡Šå™¨é€è¡Œæ‰§è¡Œç¨‹åºã€‚è¯­è¨€è§£é‡Šä¸ºç¼–è¯‘åçš„å®ç°ï¼ˆå¦‚å¹³å°ç‹¬ç«‹æ€§ï¼ŒåŠ¨æ€èŒƒå›´ï¼ŒåŠ¨æ€ç±»å‹ç­‰ï¼‰æä¾›äº†æ›´å¤šçš„çµæ´»æ€§ã€‚\nPython\nRuby\nPerl\nPascal\nLisp\nBASIC\nAPL\nè„šæœ¬è¯­è¨€ è„šæœ¬è¯­è¨€æ˜¯æ§åˆ¶åº”ç”¨ç¨‹åºçš„ç¼–ç¨‹è¯­è¨€ã€‚å¯ä»¥åœ¨ä»»ä½•å…¶ä»–åº”ç”¨ç¨‹åºä¸Šç‹¬ç«‹æ‰§è¡Œçš„è„šæœ¬ã€‚å®ƒä»¬è¢«å¹¿æ³›åº”ç”¨äºå®ƒä»¬æ‰€æ§åˆ¶çš„åº”ç”¨ä¸­ï¼Œå¹¶è¢«ç”¨äºè‡ªåŠ¨åŒ–é¢†åŸŸã€‚\nPHP\nVBScript\nWindows PowerShell\nF-Script\nBeanShell\nAutoIt\nR\nGame Maker Language\næ ‡è®°è¯­è¨€ æ ‡è®°è¯­è¨€æ˜¯ä¸€ç§äººå·¥è¯­è¨€ï¼Œç”¨äºå¯¹æ–‡æ¡£è¿›è¡Œæ³¨é‡Šï¼Œä»¥ä¾¿åœ¨è¯­æ³•ä¸Šä¸æ–‡æœ¬ï¼ˆå¯å®šä¹‰æ–‡æœ¬æ˜¾ç¤ºæ–¹å¼çš„æ–‡æœ¬ï¼‰åŒºåˆ†å¼€ã€‚\nHTML\nXML\nXHTML\nSGML\nCurl\nç¨‹åºè¯­è¨€ ç¨‹åºï¼ˆå‘½ä»¤å¼ï¼‰ç¼–ç¨‹æ„å‘³ç€æŒ‡å®šç¨‹åºè¾¾åˆ°é¢„æœŸçŠ¶æ€åº”é‡‡å–çš„æ­¥éª¤ã€‚è¿‡ç¨‹ä¸è¿‡æ˜¯ä¸€ç»„å¯ä»¥é€šè¿‡è¿‡ç¨‹è°ƒç”¨å¼•ç”¨çš„æŒ‡ä»¤ã€‚è¿™æœ‰åŠ©äºä»£ç çš„é‡ç”¨ã€‚è¿™ç§ç±»å‹çš„ç¼–ç¨‹ä½¿ç¨‹åºç»“æ„åŒ–å¹¶æ˜“äºè·Ÿè¸ªç¨‹åºæµã€‚\nHyperTalk\nGo\nPL/C\nPL/I\nMATLAB\nCurl\nMathematica\nMATLAB\nå‡½æ•°å¼è¯­è¨€ å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å°†æ¯æ¬¡è®¡ç®—éƒ½å®šä¹‰ä¸ºæ•°å­¦è¯„ä¼°ã€‚ä»–ä»¬ä¸“æ³¨äºå‡½æ•°çš„åº”ç”¨ã€‚ä¸€äº›å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€æ˜¯çº¯å‡½æ•°å¼è¯­è¨€ï¼Œä½†æ˜¯è®¸å¤šæ‰€è°“çš„å‡½æ•°å¼è¯­è¨€æ˜¯ä¸çº¯å‡€çš„ï¼ŒåŒ…å«å‘½ä»¤å¼åŠŸèƒ½ï¼Œå®ƒä»¬ä¸æ˜¯çº¯å‡½æ•°å¼è¯­è¨€ã€‚\nPure Functional\nAgda\nSAC\nSASL\nCuneiform\nCurry\nFuthark\nHaskell\nä¸çº¯åŠŸèƒ½è¯­è¨€ APL\nC++ (since C++11)\nC#\nVB.NET\nCeylon\nKotlin\nLisp\nClojure\nJScript\nPHP\nPython\nåŸºäºé€»è¾‘çš„ç¼–ç¨‹è¯­è¨€ é€»è¾‘ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒä¾‹ï¼Œä¸»è¦åŸºäºå½¢å¼é€»è¾‘ã€‚åŸºäºé€»è¾‘çš„ç¼–ç¨‹æ˜¯ä¸€ç»„é€»è¾‘å½¢å¼çš„è¯­å¥ï¼Œè¿™äº›è¯­å¥è¡¨è¾¾æœ‰å…³é—®é¢˜åŸŸçš„äº‹å®å’Œè§„åˆ™ã€‚\nProlog\nROOP\nALF\nAlma-0\nCurry\nFril\nJanus\né¢å‘å¯¹è±¡çš„è¯­è¨€ é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ï¼ˆOOPï¼‰æ˜¯åŸºäºå¯¹è±¡æ¦‚å¿µçš„é«˜çº§ç¼–ç¨‹èŒƒä¾‹ï¼Œè¯¥å¯¹è±¡å¯èƒ½åŒ…å«å­—æ®µå½¢å¼çš„æ•°æ®ï¼Œé€šå¸¸ç§°ä¸ºå±æ€§ã€‚åœ¨OOPä¸­ï¼Œè®¡ç®—æœºç¨‹åºå°†ç›¸å…³æ•°æ®å’ŒåŠŸèƒ½ç»‘å®šåˆ°å¯¹è±¡ä¸­ï¼Œå¹¶å®ç°å¯¹è±¡åŠå…¶ç›¸å…³è¿‡ç¨‹ä»¥åˆ›å»ºè½¯ä»¶ç¨‹åºã€‚\nScala\nC++\nJava\nPython\nC#\nRuby\nScala\næ•°æ®æµè¯­è¨€ æ•°æ®æµç¼–ç¨‹è¯­è¨€ä¾èµ–äºè¡¨ç¤ºæ•°æ®æµã€‚åœ¨æ•°æ®æµè¯­è¨€ä¸­ï¼Œæ•°æ®æµä»ä¸€æ¡æŒ‡ä»¤ä¼ é€’åˆ°å¦ä¸€æ¡æŒ‡ä»¤ä»¥æ‰§è¡Œã€‚æ¡ä»¶æ‰§è¡Œä¼šè·³è½¬æ•°æ®ï¼Œå¹¶åœ¨è¿‡ç¨‹è°ƒç”¨ä¸­å°†æ•°æ®è·¯ç”±åˆ°å…¶ä»–ä½ç½®ã€‚\nAnalytica\nBMDFM\nHartmann pipelines\nLucid\nMax\nOz\nPrograph\nPure Data\nåµŒå…¥å¼è¯­è¨€ ä¸»è¦æ˜¯åŠ¨æ€è„šæœ¬å’Œç¼–ç¨‹è¯­è¨€ã€‚å®ƒä¹Ÿå¯ä»¥ç”¨ä½œç‹¬ç«‹äºå¹³å°çš„é€šç”¨ç¼–ç¨‹è¯­è¨€ã€‚åµŒå…¥å¼è¯­è¨€æœ‰ä¸¤ç§ç±»å‹ï¼š\næœåŠ¡ç«¯ : æœåŠ¡å™¨ç«¯åµŒå…¥å¼è¯­è¨€æ›´åŠ çµæ´»ã€‚åŠ¨æ€ç”Ÿæˆé™„åŠ æ ‡è®°æ˜¯æ‹¥æœ‰æœåŠ¡å™¨ç«¯ä»£ç ç‰‡æ®µçš„ä¸»è¦ç›®çš„ã€‚æœåŠ¡è¯¥é¡µé¢æ—¶ï¼ŒåµŒå…¥åœ¨ç½‘é¡µä¸­çš„æœåŠ¡å™¨ç«¯æ˜¯è‡ªåŠ¨ä¸¢å¼ƒçš„ä»£ç ï¼Œå¹¶ç”±è¾“å‡ºæ›¿æ¢ã€‚ å®¢æˆ·ç«¯ : å®¢æˆ·ç«¯åµŒå…¥å¼è¯­è¨€æ—¨åœ¨ä¸ºç½‘é¡µæä¾›åŠ¨æ€ç‰¹æ€§ï¼Œä»è€Œå‡å°‘é‡æ–°è¿æ¥æœåŠ¡å™¨çš„å¼€é”€ã€‚ æœåŠ¡å™¨ç«¯\nPHP\nVBScript\nSMX\nTcl\nWebDNA\nå®¢æˆ·ç«¯\nActionScript\nJavaScript\nVBScript\næœºå™¨è¯­è¨€ è¿™äº›è¯­è¨€å¯ç”±è®¡ç®—ä¸­å¤®å¤„ç†å™¨ç›´æ¥æ‰§è¡Œã€‚æœºå™¨è¯­è¨€é€šå¸¸ä»¥å…«è¿›åˆ¶æˆ–åå…­è¿›åˆ¶å½¢å¼çš„ä½æ¨¡å¼ç¼–ç ã€‚\nARM\nDEC\nx86\nIBM System/360\nMIPS\nSun, Oracle SPARC\nç³»ç»Ÿè¯­è¨€ è¿™äº›è¯­è¨€ç”¨äºå†…å­˜ç®¡ç†æˆ–ä»»åŠ¡ç®¡ç†ä¸­ä½¿ç”¨çš„ä½çº§è¯­è¨€ã€‚ä¸åº”ç”¨è½¯ä»¶ç›¸æ¯”ï¼Œé€šå¸¸ç”¨äºç³»ç»Ÿç¼–ç¨‹çš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ï¼ˆä¾‹å¦‚ï¼Œç”¨äºç¼–å†™ç³»ç»Ÿè½¯ä»¶çš„è¯­è¨€ï¼‰é€šå¸¸éœ€è¦ä¸åŒçš„å¼€å‘æ–¹æ³•ã€‚\nAda\nNim\nRust\nSwift\nESPOL\nå¹¶å‘è¯­è¨€ è¿™äº›è¯­è¨€æ˜¯ä¸ºäº†åœ¨æ¶ˆæ¯ä¼ é€’è¯­è¨€ä¸­å¹¶å‘è€Œæ„é€ çš„ã€‚ä¾‹å¦‚ï¼ŒJavaæ˜¾ç¤ºå…±äº«å†…å­˜å¹¶å‘ã€‚\nGo\nJava\nJulia\nclojure\nScala\nèŒƒå¼è¯­è¨€ è¿™äº›ç±»å‹çš„è¯­è¨€æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€æˆ–ç¼–ç¨‹èŒƒå¼ã€‚å¤šèŒƒå¼è¯­è¨€å…è®¸ä½¿ç”¨å¤šç§ç¼–ç¨‹é£æ ¼ã€‚æ²¡æœ‰ä¸€ç§ç‰¹å®šçš„è¯­è¨€èƒ½å¤Ÿä»¥æœ€ç®€å•æˆ–æœ‰æ•ˆçš„æ–¹å¼è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨Multiparadigmè¯­è¨€çš„åŸå› ã€‚\nAda\nAPL\nBETA\nC++\nC#\nCobra\næ‰©å±•è¯­è¨€ è¿™äº›è¯­è¨€ç”¨ä½œå…¶ä»–è¯­è¨€çš„æ‰©å±•ã€‚æ‰©å±•ç¼–ç¨‹è¯­è¨€åµŒå…¥åˆ°å¦ä¸€ä¸ªç¨‹åºä¸­ï¼Œå¹¶ç”¨äºåœ¨æ‰©å±•è„šæœ¬ä¸­åˆ©ç”¨å…¶åŠŸèƒ½ã€‚\nAutoLISP\nBeanShell\nPerl\nPike\nRuby\nè¿­ä»£è¯­è¨€ è¿™äº›è¯­è¨€å›´ç»•ç”Ÿæˆå™¨æä¾›æˆ–æä¾›ç”Ÿæˆå™¨ã€‚\nAldor\nAlphard\nPHP\nCLU\nCobra\nç¡¬ä»¶æè¿°è¯­è¨€ è¿™äº›ç¼–ç¨‹è¯­è¨€ç”¨äºç”µå­äº§å“ï¼Œç¡¬ä»¶æè¿°è¯­è¨€æˆ–HDLç”¨äºæè¿°ç”µå­ç”µè·¯æˆ–æ•°å­—é€»è¾‘ç”µè·¯çš„ç»“æ„ï¼Œè®¾è®¡å’Œæ“ä½œã€‚Verilogå’ŒVHDLåœ¨å·¥ä¸šä¸­ä½¿ç”¨çš„å„ç§æœ€æµè¡Œå’Œå¾—åˆ°è‰¯å¥½æ”¯æŒçš„HDLå“ç§ä¸­ã€‚\næ¨¡æ‹Ÿç”µè·¯çš„HDLï¼š\nVerilog-AMS\nVHDL-AMS\næ•°å­—ç”µè·¯çš„HDLï¼š\nAdvanced Boolean Expression Language(ABEL)\nAltera Hardware Description Language(AHDL)\nBluespec\nLava\nELLA\nè§†è§‰è¯­è¨€ åœ¨Viual Languagesä¸­ï¼Œç”¨æˆ·å¯ä»¥ä»¥äºŒç»´æˆ–å¤šç§æ–¹å¼æŒ‡å®šç¨‹åºï¼Œè€Œä¸èƒ½ä½¿ç”¨è§†è§‰è¯­è¨€ä¸­çš„ä¸€ç»´ï¼ˆæ–‡æœ¬å­—ç¬¦ä¸²ï¼‰æ¥æŒ‡å®šç¨‹åºï¼Œæˆ‘ä»¬ä½¿ç”¨å›¾å½¢å…ƒç´ å’Œå›¾å½¢æ¥å¼€å‘ç¨‹åºã€‚\nAnalytica\nBlockly\nDRAKON\nFabrik\nScratch\nSimulink\nSpreadsheets\nåŸºäºåˆ—è¡¨çš„è¯­è¨€ åˆ—è¡¨çš„è¯­è¨€åŸºäºåˆ—è¡¨æ•°æ®ç»“æ„ã€‚\nä¾‹ï¼š\nLisp\nArc\nClojure\nR\nDylan\nJoy\nåŒæ­¥è¯­è¨€ è¿™äº›ç¼–ç¨‹è¯­è¨€ç”¨äºå¯¹ååº”ç³»ç»Ÿè¿›è¡Œç¼–ç¨‹ã€‚ç¼–ç¨‹ååº”ç³»ç»Ÿæ˜¯è¢«ä¸­æ–­å¹¶ç«‹å³å“åº”çš„ç³»ç»Ÿã€‚è¿™äº›ç³»ç»Ÿä¸­çš„ä¸€äº›ä¹Ÿç§°ä¸ºå®æ—¶ç³»ç»Ÿï¼Œå¹¶ä¸”è¢«å¹¿æ³›ä½¿ç”¨ã€‚\nArgus\nAverest\nEsterel\nLustre\nSignal\nå®è¯­è¨€ è¿™äº›è¯­è¨€ç”¨äºå°†ä¸€ä¸ªæºä»£ç æ–‡ä»¶è½¬æ¢ä¸ºå¦ä¸€ä¸ªã€‚å®æ˜¯ä¸€å°æ®µæ–‡æœ¬ï¼Œå¯ä»¥æ‰©å±•ä¸ºæ›´å¤§çš„æ–‡æœ¬ã€‚å®è¯­è¨€é€šå¸¸ç”¨äºé¢„å¤„ç†æºä»£ç ã€‚é¢„å¤„ç†ç¨‹åºæä¾›æ–‡ä»¶åŒ…å«ç­‰åŠŸèƒ½ã€‚\ncpp (the C preprocessor)\nm4\nML/I (general purpose macro processor)\næŸ¥è¯¢è¯­è¨€ æ•°æ®åº“å’Œä¿¡æ¯ç³»ç»Ÿä¸­ä½¿ç”¨è¿™äº›è¯­è¨€è¿›è¡ŒæŸ¥è¯¢ã€‚\nSQL\nXPath\nAQL\nPQL\nXQuery\nå…ƒç¼–ç¨‹è¯­è¨€ å…ƒç¼–ç¨‹è¯­è¨€æ˜¯ç¼–å†™ç¨‹åºï¼Œè¯¥ç¨‹åºç¼–å†™æˆ–æ“çºµå…¶ä»–ç¨‹åºï¼ˆåŒ…æ‹¬å…¶è‡ªèº«ï¼‰ä½œä¸ºæ•°æ®ï¼Œæˆ–è€…å®Œæˆåœ¨ç¼–è¯‘æ—¶åœ¨è¿è¡Œæ—¶æ‰§è¡Œçš„éƒ¨åˆ†å·¥ä½œã€‚\nC++\nCWIC\nCurl\nD\neC\nEmacs Lisp\nElixir\nF#\nåŸºäºè§„åˆ™çš„è¯­è¨€ å½“è¢«ä¸€ç»„æ•°æ®ä¸­çš„æ¡ä»¶æ¿€æ´»æ—¶ï¼ŒåŸºäºè§„åˆ™çš„è¯­è¨€å®ä¾‹åŒ–è§„åˆ™ã€‚å°†é€‰æ‹©æŸäº›é›†åˆï¼Œå¹¶æ‰§è¡Œå±äºé‚£äº›è§„åˆ™çš„è¯­å¥ã€‚\nawk\nCLIPS\nConstraint Handling Rules\nDrools\nJess\nOPS5\nProlog\næ•°å€¼åˆ†æè¯­è¨€ åœ¨æ•°å€¼åˆ†æä¸­ï¼Œæˆ‘ä»¬åˆ†æå’Œå®ç°ç”¨äºæ•°å€¼è§£çš„ç®—æ³•ï¼Œä»¥è§£å†³æ¶‰åŠè¿ç»­å˜é‡çš„ç°å®æ•°å­¦æ¨¡å‹çš„å·¨å¤§é—®é¢˜ã€‚æˆ‘ä»¬åœ¨æ•°å€¼åˆ†æä¸­ä½¿ç”¨ä»¥ä¸‹ç¼–ç¨‹è¯­è¨€ã€‚\nMathematica\nMATLAB\nPROSE\nR\nè¯­æ³•å¤„ç†è¯­è¨€ è¿™äº›è¯­è¨€å¯å¸®åŠ©ç”Ÿæˆè¯æ³•åˆ†æå™¨å’Œè§£æå™¨ä»¥å®ç°ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•ã€‚\nANTLR\nCoco/R (EBNF with semantics)\nGNU bison (FSF\u0026rsquo;s version of Yacc)\nGNU Flex (FSF version of Lex)\nlex (Lexical Analysis, from Bell Labs)\nParsing expression grammar (PEG)\néåŸºäºè‹±è¯­çš„è¯­è¨€ æœ‰å‡ ç§ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒä»¬æ˜¯ç”¨è‹±è¯­ä»¥å¤–çš„å…¶ä»–è¯­è¨€å¼€å‘çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯­è¨€ä¸æ˜¯éšœç¢ã€‚\nChinese BASIC - Chinese\nFjÃ¶lnir - Icelandic\nLanguage Symbolique d\u0026rsquo;Enseignement - French\nLexico - Spanish\nRapira - Russian\nChaScript-Bengali\nezhil-Tamil\nåŸºäºXMLçš„è¯­è¨€ è¿™äº›è¯­è¨€ç”¨äºå°†XMLæ–‡æ¡£è½¬æ¢ä¸ºäººç±»å¯è¯»çš„æ ¼å¼ã€‚\nAnt\nC?\nXPath\nXQuery\nXProc\n","permalink":"https://WFUing.github.io/posts/tech/language/programming-language-pool/","summary":"ä¸‹é¢åˆ—å‡ºäº†æ‰€æœ‰ç±»å‹çš„ç¼–ç¨‹è¯­è¨€çš„å®Œæ•´åˆ†ç±»åˆ—è¡¨ã€‚ç¼–ç¨‹è¯­è¨€æ²¡æœ‰ä¸¥æ ¼çš„åˆ†ç±»æ–¹æ¡ˆã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ç§è¯­è¨€è§†ä¸ºä¸æ­¢ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„ç¤ºä¾‹ã€‚\nè®©æˆ‘ä»¬ä¸€ä¸€ç†è§£è¿™äº›ç¼–ç¨‹è¯­è¨€ã€‚ç”±äºåˆ—è¡¨å¾ˆå¤§ï¼Œå› æ­¤ä¸å¯èƒ½è¯¦ç»†è®¨è®ºæ‰€æœ‰è¿™äº›å†…å®¹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘æ­£åœ¨ç”¨æ‰€æœ‰è¿™äº›å„ç§ç¼–ç¨‹è¯­è¨€çš„ç¤ºä¾‹ç¼–å†™ç®€çŸ­çš„ä»‹ç»ã€‚\nç¼–è¯‘è¯­è¨€ ç¼–è¯‘è¯­è¨€æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œå…¶ä¸­æˆ‘ä»¬ä½¿ç”¨ç¼–è¯‘å™¨æ¥ç¼–è¯‘å’Œæ‰§è¡Œä»£ç ã€‚ç¼–è¯‘å™¨é€šå¸¸æ˜¯ä»æˆ‘ä»¬çš„ä¹¦é¢æºä»£ç ç”Ÿæˆæœºå™¨çº§ä»£ç çš„ç¿»è¯‘å™¨ã€‚\nC\nC ++\nCï¼ƒ\nALGOL\nCobol\nFortran\nJava\nVisual Basic\nSmalltalk\nè§£é‡Šè¯­è¨€ è§£é‡Šè¯­è¨€æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨å…¶ä¸­ï¼Œæ— éœ€å°†ç¨‹åºç¼–è¯‘ä¸ºæœºå™¨è¯­è¨€çš„æŒ‡ä»¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è‡ªç”±åœ°æ‰§è¡ŒæŒ‡ä»¤ã€‚è§£é‡Šå™¨é€è¡Œæ‰§è¡Œç¨‹åºã€‚è¯­è¨€è§£é‡Šä¸ºç¼–è¯‘åçš„å®ç°ï¼ˆå¦‚å¹³å°ç‹¬ç«‹æ€§ï¼ŒåŠ¨æ€èŒƒå›´ï¼ŒåŠ¨æ€ç±»å‹ç­‰ï¼‰æä¾›äº†æ›´å¤šçš„çµæ´»æ€§ã€‚\nPython\nRuby\nPerl\nPascal\nLisp\nBASIC\nAPL\nè„šæœ¬è¯­è¨€ è„šæœ¬è¯­è¨€æ˜¯æ§åˆ¶åº”ç”¨ç¨‹åºçš„ç¼–ç¨‹è¯­è¨€ã€‚å¯ä»¥åœ¨ä»»ä½•å…¶ä»–åº”ç”¨ç¨‹åºä¸Šç‹¬ç«‹æ‰§è¡Œçš„è„šæœ¬ã€‚å®ƒä»¬è¢«å¹¿æ³›åº”ç”¨äºå®ƒä»¬æ‰€æ§åˆ¶çš„åº”ç”¨ä¸­ï¼Œå¹¶è¢«ç”¨äºè‡ªåŠ¨åŒ–é¢†åŸŸã€‚\nPHP\nVBScript\nWindows PowerShell\nF-Script\nBeanShell\nAutoIt\nR\nGame Maker Language\næ ‡è®°è¯­è¨€ æ ‡è®°è¯­è¨€æ˜¯ä¸€ç§äººå·¥è¯­è¨€ï¼Œç”¨äºå¯¹æ–‡æ¡£è¿›è¡Œæ³¨é‡Šï¼Œä»¥ä¾¿åœ¨è¯­æ³•ä¸Šä¸æ–‡æœ¬ï¼ˆå¯å®šä¹‰æ–‡æœ¬æ˜¾ç¤ºæ–¹å¼çš„æ–‡æœ¬ï¼‰åŒºåˆ†å¼€ã€‚\nHTML\nXML\nXHTML\nSGML\nCurl\nç¨‹åºè¯­è¨€ ç¨‹åºï¼ˆå‘½ä»¤å¼ï¼‰ç¼–ç¨‹æ„å‘³ç€æŒ‡å®šç¨‹åºè¾¾åˆ°é¢„æœŸçŠ¶æ€åº”é‡‡å–çš„æ­¥éª¤ã€‚è¿‡ç¨‹ä¸è¿‡æ˜¯ä¸€ç»„å¯ä»¥é€šè¿‡è¿‡ç¨‹è°ƒç”¨å¼•ç”¨çš„æŒ‡ä»¤ã€‚è¿™æœ‰åŠ©äºä»£ç çš„é‡ç”¨ã€‚è¿™ç§ç±»å‹çš„ç¼–ç¨‹ä½¿ç¨‹åºç»“æ„åŒ–å¹¶æ˜“äºè·Ÿè¸ªç¨‹åºæµã€‚\nHyperTalk\nGo\nPL/C\nPL/I\nMATLAB\nCurl\nMathematica\nMATLAB\nå‡½æ•°å¼è¯­è¨€ å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å°†æ¯æ¬¡è®¡ç®—éƒ½å®šä¹‰ä¸ºæ•°å­¦è¯„ä¼°ã€‚ä»–ä»¬ä¸“æ³¨äºå‡½æ•°çš„åº”ç”¨ã€‚ä¸€äº›å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€æ˜¯çº¯å‡½æ•°å¼è¯­è¨€ï¼Œä½†æ˜¯è®¸å¤šæ‰€è°“çš„å‡½æ•°å¼è¯­è¨€æ˜¯ä¸çº¯å‡€çš„ï¼ŒåŒ…å«å‘½ä»¤å¼åŠŸèƒ½ï¼Œå®ƒä»¬ä¸æ˜¯çº¯å‡½æ•°å¼è¯­è¨€ã€‚\nPure Functional\nAgda\nSAC\nSASL\nCuneiform\nCurry\nFuthark\nHaskell\nä¸çº¯åŠŸèƒ½è¯­è¨€ APL\nC++ (since C++11)","title":"Programming Language List"},{"content":"Resources å®˜æ–¹ ZooKeeper å®˜ç½‘ ZooKeeper å®˜æ–¹æ–‡æ¡£ ZooKeeper Github åšå®¢ ZooKeeperæºç é˜…è¯»å¿ƒå¾—åˆ†äº«+æºç åŸºæœ¬ç»“æ„+æºç ç¯å¢ƒæ­å»º æ‰‹æ‘¸æ‰‹æ•™ä½ é˜…è¯»å’Œè°ƒè¯•å¤§å‹å¼€æºé¡¹ç›® ZooKeeper ","permalink":"https://WFUing.github.io/posts/tech/architecture/distributed/zookeeper/zookeeper-code/","summary":"Resources å®˜æ–¹ ZooKeeper å®˜ç½‘ ZooKeeper å®˜æ–¹æ–‡æ¡£ ZooKeeper Github åšå®¢ ZooKeeperæºç é˜…è¯»å¿ƒå¾—åˆ†äº«+æºç åŸºæœ¬ç»“æ„+æºç ç¯å¢ƒæ­å»º æ‰‹æ‘¸æ‰‹æ•™ä½ é˜…è¯»å’Œè°ƒè¯•å¤§å‹å¼€æºé¡¹ç›® ZooKeeper ","title":"Zookeeper Code"},{"content":"ZooKeeper ç®€ä»‹ ZooKeeper æ˜¯ä»€ä¹ˆ ZooKeeper æ˜¯ Apache çš„é¡¶çº§é¡¹ç›®ã€‚ZooKeeper ä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›äº†é«˜æ•ˆä¸”å¯é çš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œæä¾›äº†è¯¸å¦‚ç»Ÿä¸€å‘½åæœåŠ¡ã€é…ç½®ç®¡ç†å’Œåˆ†å¸ƒå¼é”ç­‰åˆ†å¸ƒå¼çš„åŸºç¡€æœåŠ¡ã€‚åœ¨è§£å†³åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§æ–¹é¢ï¼ŒZooKeeper å¹¶æ²¡æœ‰ç›´æ¥é‡‡ç”¨ Paxos ç®—æ³•ï¼Œè€Œæ˜¯é‡‡ç”¨äº†åä¸º ZAB çš„ä¸€è‡´æ€§åè®®ã€‚\nZooKeeper ä¸»è¦ç”¨æ¥è§£å†³åˆ†å¸ƒå¼é›†ç¾¤ä¸­åº”ç”¨ç³»ç»Ÿçš„ä¸€è‡´æ€§é—®é¢˜ï¼Œå®ƒèƒ½æä¾›åŸºäºç±»ä¼¼äºæ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•èŠ‚ç‚¹æ ‘æ–¹å¼çš„æ•°æ®å­˜å‚¨ã€‚ä½†æ˜¯ ZooKeeper å¹¶ä¸æ˜¯ç”¨æ¥ä¸“é—¨å­˜å‚¨æ•°æ®çš„ï¼Œå®ƒçš„ä½œç”¨ä¸»è¦æ˜¯ç”¨æ¥ç»´æŠ¤å’Œç›‘æ§å­˜å‚¨æ•°æ®çš„çŠ¶æ€å˜åŒ–ã€‚é€šè¿‡ç›‘æ§è¿™äº›æ•°æ®çŠ¶æ€çš„å˜åŒ–ï¼Œä»è€Œå¯ä»¥è¾¾åˆ°åŸºäºæ•°æ®çš„é›†ç¾¤ç®¡ç†ã€‚\nå¾ˆå¤šå¤§åé¼é¼çš„æ¡†æ¶éƒ½åŸºäº ZooKeeper æ¥å®ç°åˆ†å¸ƒå¼é«˜å¯ç”¨ï¼Œå¦‚ï¼šDubboã€Kafka ç­‰ã€‚\nZooKeeper å®˜æ–¹æ”¯æŒ Java å’Œ C çš„ Client APIã€‚ZooKeeper ç¤¾åŒºä¸ºå¤§å¤šæ•°è¯­è¨€ï¼ˆ.NETï¼Œpython ç­‰ï¼‰æä¾›éå®˜æ–¹ APIã€‚\nZooKeeper çš„åº”ç”¨åœºæ™¯ é…ç½®ç®¡ç† é›†ç¾¤èŠ‚ç‚¹å¯ä»¥é€šè¿‡ä¸­å¿ƒæºè·å–å¯åŠ¨é…ç½® æ›´ç®€å•çš„éƒ¨ç½² åˆ†å¸ƒå¼é›†ç¾¤ç®¡ç† èŠ‚ç‚¹åŠ å…¥/ç¦»å¼€ èŠ‚ç‚¹çš„å®æ—¶çŠ¶æ€ å‘½åæœåŠ¡ï¼Œå¦‚ï¼šDNS åˆ†å¸ƒå¼åŒæ­¥ï¼šå¦‚é”ã€æ …æ ã€é˜Ÿåˆ— åˆ†å¸ƒå¼ç³»ç»Ÿçš„é€‰ä¸» ä¸­å¿ƒåŒ–å’Œé«˜å¯é çš„æ•°æ®æ³¨å†Œ ZooKeeper çš„ç‰¹æ€§ ZooKeeper å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š\né¡ºåºä¸€è‡´æ€§ - æ‰€æœ‰å®¢æˆ·ç«¯çœ‹åˆ°çš„æœåŠ¡ç«¯æ•°æ®æ¨¡å‹éƒ½æ˜¯ä¸€è‡´çš„ã€‚ä»ä¸€ä¸ªå®¢æˆ·ç«¯å‘èµ·çš„äº‹åŠ¡è¯·æ±‚ï¼Œæœ€ç»ˆéƒ½ä¼šä¸¥æ ¼æŒ‰ç…§å…¶å‘èµ·é¡ºåºè¢«åº”ç”¨åˆ° ZooKeeper ä¸­ã€‚å…·ä½“çš„å®ç°å¯è§ï¼šåŸå­å¹¿æ’­ åŸå­æ€§ - æ‰€æœ‰äº‹åŠ¡è¯·æ±‚çš„å¤„ç†ç»“æœåœ¨æ•´ä¸ªé›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨ä¸Šçš„åº”ç”¨æƒ…å†µæ˜¯ä¸€è‡´çš„ï¼Œå³æ•´ä¸ªé›†ç¾¤è¦ä¹ˆéƒ½æˆåŠŸåº”ç”¨äº†æŸä¸ªäº‹åŠ¡ï¼Œè¦ä¹ˆéƒ½æ²¡æœ‰åº”ç”¨ã€‚ å®ç°æ–¹å¼å¯è§ï¼šäº‹åŠ¡ å•ä¸€è§†å›¾ - æ— è®ºå®¢æˆ·ç«¯è¿æ¥çš„æ˜¯å“ªä¸ª Zookeeper æœåŠ¡å™¨ï¼Œå…¶çœ‹åˆ°çš„æœåŠ¡ç«¯æ•°æ®æ¨¡å‹éƒ½æ˜¯ä¸€è‡´çš„ã€‚ é«˜æ€§èƒ½ - ZooKeeper å°†æ•°æ®å…¨é‡å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥å…¶æ€§èƒ½å¾ˆé«˜ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šç”±äº ZooKeeper çš„æ‰€æœ‰æ›´æ–°å’Œåˆ é™¤éƒ½æ˜¯åŸºäºäº‹åŠ¡çš„ï¼Œå› æ­¤ ZooKeeper åœ¨è¯»å¤šå†™å°‘çš„åº”ç”¨åœºæ™¯ä¸­æœ‰æ€§èƒ½è¡¨ç°è¾ƒå¥½ï¼Œå¦‚æœå†™æ“ä½œé¢‘ç¹ï¼Œæ€§èƒ½ä¼šå¤§å¤§ä¸‹æ»‘ã€‚ é«˜å¯ç”¨ - ZooKeeper çš„é«˜å¯ç”¨æ˜¯åŸºäºå‰¯æœ¬æœºåˆ¶å®ç°çš„ï¼Œæ­¤å¤– ZooKeeper æ”¯æŒæ•…éšœæ¢å¤ï¼Œå¯è§ï¼šé€‰ä¸¾ Leader ZooKeeper çš„è®¾è®¡ç›®æ ‡ ç®€å•çš„æ•°æ®æ¨¡å‹ï¼šZooKeeper çš„æ•°æ®æ¨¡å‹æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ ‘ä¸­çš„èŠ‚ç‚¹è¢«ç§°ä¸º znodeã€‚ å¯ä»¥æ„å»ºé›†ç¾¤ï¼šZooKeeper æ”¯æŒé›†ç¾¤æ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡ä¼¸ç¼©æ€§ï¼Œæ¥æ§åˆ¶é›†ç¾¤çš„ååé‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šç”±äº ZooKeeper é‡‡ç”¨ä¸€ä¸»å¤šä»æ¶æ„ï¼Œæ‰€ä»¥å…¶å†™æ€§èƒ½æ˜¯æœ‰ä¸Šé™çš„ï¼Œæ¯”è¾ƒé€‚åˆäºè¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚ é¡ºåºè®¿é—®ï¼šå¯¹äºæ¥è‡ªå®¢æˆ·ç«¯çš„æ¯ä¸ªæ›´æ–°è¯·æ±‚ï¼ŒZookeeper éƒ½ä¼šåˆ†é…ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„é€’å¢ IDï¼Œè¿™ä¸ª ID åæ˜ äº†æ‰€æœ‰äº‹åŠ¡è¯·æ±‚çš„å…ˆåé¡ºåºã€‚ é«˜æ€§èƒ½ã€é«˜å¯ç”¨ï¼šZooKeeper å°†æ•°æ®å­˜å…¨é‡å‚¨åœ¨å†…å­˜ä¸­ä»¥ä¿æŒé«˜æ€§èƒ½ï¼Œå¹¶é€šè¿‡æœåŠ¡é›†ç¾¤æ¥å®ç°é«˜å¯ç”¨ï¼Œç”±äº Zookeeper çš„æ‰€æœ‰æ›´æ–°å’Œåˆ é™¤éƒ½æ˜¯åŸºäºäº‹åŠ¡çš„ï¼Œæ‰€ä»¥å…¶åœ¨è¯»å¤šå†™å°‘çš„åº”ç”¨åœºæ™¯ä¸­æœ‰ç€å¾ˆé«˜çš„æ€§èƒ½è¡¨ç°ã€‚ ZooKeeper æ ¸å¿ƒæ¦‚å¿µ æœåŠ¡ Zookeeper æœåŠ¡æ˜¯ä¸€ä¸ªåŸºäºä¸»ä»å¤åˆ¶çš„é«˜å¯ç”¨é›†ç¾¤ï¼Œé›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½å­˜å‚¨äº†ä¸€ä»½æ•°æ®å‰¯æœ¬ï¼ˆå†…å­˜ä¸­ï¼‰ã€‚\nå®¢æˆ·ç«¯åªä¼šè¿æ¥ä¸€ä¸ª ZooKeeper æœåŠ¡å™¨èŠ‚ç‚¹ï¼Œå¹¶ç»´æŒ TCP è¿æ¥ã€‚\næ•°æ®æ¨¡å‹ ZooKeeper çš„æ•°æ®æ¨¡å‹æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„çš„æ–‡ä»¶ç³»ç»Ÿã€‚\næ ‘ä¸­çš„èŠ‚ç‚¹è¢«ç§°ä¸º znodeï¼Œå…¶ä¸­æ ¹èŠ‚ç‚¹ä¸º /ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½ä¼šä¿å­˜è‡ªå·±çš„æ•°æ®å’ŒèŠ‚ç‚¹ä¿¡æ¯ã€‚znode å¯ä»¥ç”¨äºå­˜å‚¨æ•°æ®ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªä¸ä¹‹ç›¸å…³è”çš„ ACLï¼ˆè¯¦æƒ…å¯è§ ACLï¼‰ã€‚ZooKeeper çš„è®¾è®¡ç›®æ ‡æ˜¯å®ç°åè°ƒæœåŠ¡ï¼Œè€Œä¸æ˜¯çœŸçš„ä½œä¸ºä¸€ä¸ªæ–‡ä»¶å­˜å‚¨ï¼Œå› æ­¤ znode å­˜å‚¨æ•°æ®çš„å¤§å°è¢«é™åˆ¶åœ¨ 1MB ä»¥å†…ã€‚\næ•°æ®æ¨¡å‹ ZooKeeper çš„æ•°æ®è®¿é—®å…·æœ‰åŸå­æ€§ã€‚å…¶è¯»å†™æ“ä½œéƒ½æ˜¯è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚\nznode é€šè¿‡è·¯å¾„è¢«å¼•ç”¨ã€‚znode èŠ‚ç‚¹è·¯å¾„å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ã€‚\nznode æœ‰ä¸¤ç§ç±»å‹ï¼š\nä¸´æ—¶çš„ï¼ˆ EPHEMERAL ï¼‰ - æˆ·ç«¯ä¼šè¯ç»“æŸæ—¶ï¼ŒZooKeeper å°±ä¼šåˆ é™¤ä¸´æ—¶çš„ znodeã€‚ä¸å…è®¸æœ‰å­èŠ‚ç‚¹ã€‚ æŒä¹…çš„ï¼ˆPERSISTENT ï¼‰ - é™¤éå®¢æˆ·ç«¯ä¸»åŠ¨æ‰§è¡Œåˆ é™¤æ“ä½œï¼Œå¦åˆ™ ZooKeeper ä¸ä¼šåˆ é™¤æŒä¹…çš„ znodeã€‚ èŠ‚ç‚¹ä¿¡æ¯ znode ä¸Šæœ‰ä¸€ä¸ªé¡ºåºæ ‡å¿—ï¼ˆ SEQUENTIAL ï¼‰ã€‚å¦‚æœåœ¨åˆ›å»º znode æ—¶ï¼Œè®¾ç½®äº†é¡ºåºæ ‡å¿—ï¼ˆ SEQUENTIAL ï¼‰ï¼Œé‚£ä¹ˆ ZooKeeper ä¼šä½¿ç”¨è®¡æ•°å™¨ä¸º znode æ·»åŠ ä¸€ä¸ªå•è°ƒé€’å¢çš„æ•°å€¼ï¼Œå³ zxidã€‚ZooKeeper æ­£æ˜¯åˆ©ç”¨ zxid å®ç°äº†ä¸¥æ ¼çš„é¡ºåºè®¿é—®æ§åˆ¶èƒ½åŠ›ã€‚\næ¯ä¸ª znode èŠ‚ç‚¹åœ¨å­˜å‚¨æ•°æ®çš„åŒæ—¶ï¼Œéƒ½ä¼šç»´æŠ¤ä¸€ä¸ªå«åš Stat çš„æ•°æ®ç»“æ„ï¼Œé‡Œé¢å­˜å‚¨äº†å…³äºè¯¥èŠ‚ç‚¹çš„å…¨éƒ¨çŠ¶æ€ä¿¡æ¯ã€‚å¦‚ä¸‹ï¼š\nçŠ¶æ€å±æ€§ è¯´æ˜ czxid æ•°æ®èŠ‚ç‚¹åˆ›å»ºæ—¶çš„äº‹åŠ¡ ID ctime æ•°æ®èŠ‚ç‚¹åˆ›å»ºæ—¶çš„æ—¶é—´ mzxid æ•°æ®èŠ‚ç‚¹æœ€åä¸€æ¬¡æ›´æ–°æ—¶çš„äº‹åŠ¡ ID mtime æ•°æ®èŠ‚ç‚¹æœ€åä¸€æ¬¡æ›´æ–°æ—¶çš„æ—¶é—´ pzxid æ•°æ®èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æœ€åä¸€æ¬¡è¢«ä¿®æ”¹æ—¶çš„äº‹åŠ¡ ID cversion å­èŠ‚ç‚¹çš„æ›´æ”¹æ¬¡æ•° version èŠ‚ç‚¹æ•°æ®çš„æ›´æ”¹æ¬¡æ•° aversion èŠ‚ç‚¹çš„ ACL çš„æ›´æ”¹æ¬¡æ•° ephemeralOwner å¦‚æœèŠ‚ç‚¹æ˜¯ä¸´æ—¶èŠ‚ç‚¹ï¼Œåˆ™è¡¨ç¤ºåˆ›å»ºè¯¥èŠ‚ç‚¹çš„ä¼šè¯çš„ SessionIDï¼›å¦‚æœèŠ‚ç‚¹æ˜¯æŒä¹…èŠ‚ç‚¹ï¼Œåˆ™è¯¥å±æ€§å€¼ä¸º 0 dataLength æ•°æ®å†…å®¹çš„é•¿åº¦ numChildren æ•°æ®èŠ‚ç‚¹å½“å‰çš„å­èŠ‚ç‚¹ä¸ªæ•° é›†ç¾¤è§’è‰² Zookeeper é›†ç¾¤æ˜¯ä¸€ä¸ªåŸºäºä¸»ä»å¤åˆ¶çš„é«˜å¯ç”¨é›†ç¾¤ï¼Œé›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½å­˜å‚¨äº†ä¸€ä»½æ•°æ®å‰¯æœ¬ï¼ˆå†…å­˜ä¸­ï¼‰ã€‚æ­¤å¤–ï¼Œæ¯ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹æ‰¿æ‹…å¦‚ä¸‹ä¸‰ç§è§’è‰²ä¸­çš„ä¸€ç§ï¼š\nLeader - å®ƒè´Ÿè´£ å‘èµ·å¹¶ç»´æŠ¤ä¸å„ Follwer åŠ Observer é—´çš„å¿ƒè·³ã€‚æ‰€æœ‰çš„å†™æ“ä½œå¿…é¡»è¦é€šè¿‡ Leader å®Œæˆå†ç”± Leader å°†å†™æ“ä½œå¹¿æ’­ç»™å…¶å®ƒæœåŠ¡å™¨ã€‚ä¸€ä¸ª Zookeeper é›†ç¾¤åŒä¸€æ—¶é—´åªä¼šæœ‰ä¸€ä¸ªå®é™…å·¥ä½œçš„ Leaderã€‚ Follower - å®ƒä¼šå“åº” Leader çš„å¿ƒè·³ã€‚Follower å¯ç›´æ¥å¤„ç†å¹¶è¿”å›å®¢æˆ·ç«¯çš„è¯»è¯·æ±‚ï¼ŒåŒæ—¶ä¼šå°†å†™è¯·æ±‚è½¬å‘ç»™ Leader å¤„ç†ï¼Œå¹¶ä¸”è´Ÿè´£åœ¨ Leader å¤„ç†å†™è¯·æ±‚æ—¶å¯¹è¯·æ±‚è¿›è¡ŒæŠ•ç¥¨ã€‚ä¸€ä¸ª Zookeeper é›†ç¾¤å¯èƒ½åŒæ—¶å­˜åœ¨å¤šä¸ª Followerã€‚ Observer - è§’è‰²ä¸ Follower ç±»ä¼¼ï¼Œä½†æ˜¯æ— æŠ•ç¥¨æƒã€‚ å®¢æˆ·ç«¯å¯ä»¥ä»ä»»æ„ ZooKeeper æœåŠ¡å™¨èŠ‚ç‚¹è¯»å–æ•°æ®ï¼Œä½†åªèƒ½é€šè¿‡ Leader æœåŠ¡å†™æ•°æ®å¹¶éœ€è¦åŠæ•°ä»¥ä¸Š Follower çš„ ACKï¼Œæ‰ç®—å†™å…¥æˆåŠŸã€‚è®°ä½è¿™ä¸ªé‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œä¸‹æ–‡ä¼šè¯¦ç»†è®²è¿°ã€‚\nACL ZooKeeper é‡‡ç”¨ ACLï¼ˆAccess Control Listsï¼‰ç­–ç•¥æ¥è¿›è¡Œæƒé™æ§åˆ¶ã€‚\næ¯ä¸ª znode åˆ›å»ºæ—¶éƒ½ä¼šå¸¦æœ‰ä¸€ä¸ª ACL åˆ—è¡¨ï¼Œç”¨äºå†³å®šè°å¯ä»¥å¯¹å®ƒæ‰§è¡Œä½•ç§æ“ä½œã€‚\nACL ä¾èµ–äº ZooKeeper çš„å®¢æˆ·ç«¯è®¤è¯æœºåˆ¶ã€‚ZooKeeper æä¾›äº†ä»¥ä¸‹å‡ ç§è®¤è¯æ–¹å¼ï¼š\ndigest - ç”¨æˆ·åå’Œå¯†ç  æ¥è¯†åˆ«å®¢æˆ·ç«¯ sasl - é€šè¿‡ kerberos æ¥è¯†åˆ«å®¢æˆ·ç«¯ ip - é€šè¿‡ IP æ¥è¯†åˆ«å®¢æˆ·ç«¯ ZooKeeper å®šä¹‰äº†å¦‚ä¸‹äº”ç§æƒé™ï¼š\nCREATE - å…è®¸åˆ›å»ºå­èŠ‚ç‚¹ï¼› READ - å…è®¸ä»èŠ‚ç‚¹è·å–æ•°æ®å¹¶åˆ—å‡ºå…¶å­èŠ‚ç‚¹ï¼› WRITE - å…è®¸ä¸ºèŠ‚ç‚¹è®¾ç½®æ•°æ®ï¼› DELETE - å…è®¸åˆ é™¤å­èŠ‚ç‚¹ï¼› ADMIN - å…è®¸ä¸ºèŠ‚ç‚¹è®¾ç½®æƒé™ã€‚ ZooKeeper å·¥ä½œåŸç† è¯»æ“ä½œ Leader/Follower/Observer éƒ½å¯ç›´æ¥å¤„ç†è¯»è¯·æ±‚ï¼Œä»æœ¬åœ°å†…å­˜ä¸­è¯»å–æ•°æ®å¹¶è¿”å›ç»™å®¢æˆ·ç«¯å³å¯ã€‚\nç”±äºå¤„ç†è¯»è¯·æ±‚ä¸éœ€è¦æœåŠ¡å™¨ä¹‹é—´çš„äº¤äº’ï¼ŒFollower/Observer è¶Šå¤šï¼Œæ•´ä½“ç³»ç»Ÿçš„è¯»è¯·æ±‚ååé‡è¶Šå¤§ï¼Œä¹Ÿå³è¯»æ€§èƒ½è¶Šå¥½ã€‚\nå†™æ“ä½œ æ‰€æœ‰çš„å†™è¯·æ±‚å®é™…ä¸Šéƒ½è¦äº¤ç»™ Leader å¤„ç†ã€‚Leader å°†å†™è¯·æ±‚ä»¥äº‹åŠ¡å½¢å¼å‘ç»™æ‰€æœ‰ Follower å¹¶ç­‰å¾… ACKï¼Œä¸€æ—¦æ”¶åˆ°åŠæ•°ä»¥ä¸Š Follower çš„ ACKï¼Œå³è®¤ä¸ºå†™æ“ä½œæˆåŠŸã€‚\nå†™ Leader ç”±ä¸Šå›¾å¯è§ï¼Œé€šè¿‡ Leader è¿›è¡Œå†™æ“ä½œï¼Œä¸»è¦åˆ†ä¸ºäº”æ­¥ï¼š\nå®¢æˆ·ç«¯å‘ Leader å‘èµ·å†™è¯·æ±‚ Leader å°†å†™è¯·æ±‚ä»¥äº‹åŠ¡ Proposal çš„å½¢å¼å‘ç»™æ‰€æœ‰ Follower å¹¶ç­‰å¾… ACK Follower æ”¶åˆ° Leader çš„äº‹åŠ¡ Proposal åè¿”å› ACK Leader å¾—åˆ°è¿‡åŠæ•°çš„ ACKï¼ˆLeader å¯¹è‡ªå·±é»˜è®¤æœ‰ä¸€ä¸ª ACKï¼‰åå‘æ‰€æœ‰çš„ Follower å’Œ Observer å‘é€ Commmit Leader å°†å¤„ç†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ æ³¨æ„\nLeader ä¸éœ€è¦å¾—åˆ° Observer çš„ ACKï¼Œå³ Observer æ— æŠ•ç¥¨æƒ Leader ä¸éœ€è¦å¾—åˆ°æ‰€æœ‰ Follower çš„ ACKï¼Œåªè¦æ”¶åˆ°è¿‡åŠçš„ ACK å³å¯ï¼ŒåŒæ—¶ Leader æœ¬èº«å¯¹è‡ªå·±æœ‰ä¸€ä¸ª ACKã€‚ä¸Šå›¾ä¸­æœ‰ 4 ä¸ª Followerï¼Œåªéœ€å…¶ä¸­ä¸¤ä¸ªè¿”å› ACK å³å¯ï¼Œå› ä¸º $$\\frac{2+1}{4+1} \u0026gt; \\frac{1}{2}$$ Observer è™½ç„¶æ— æŠ•ç¥¨æƒï¼Œä½†ä»é¡»åŒæ­¥ Leader çš„æ•°æ®ä»è€Œåœ¨å¤„ç†è¯»è¯·æ±‚æ—¶å¯ä»¥è¿”å›å°½å¯èƒ½æ–°çš„æ•°æ® å†™ Follower/Observer Follower/Observer å‡å¯æ¥å—å†™è¯·æ±‚ï¼Œä½†ä¸èƒ½ç›´æ¥å¤„ç†ï¼Œè€Œéœ€è¦å°†å†™è¯·æ±‚è½¬å‘ç»™ Leader å¤„ç†ã€‚ é™¤äº†å¤šäº†ä¸€æ­¥è¯·æ±‚è½¬å‘ï¼Œå…¶å®ƒæµç¨‹ä¸ç›´æ¥å†™ Leader æ— ä»»ä½•åŒºåˆ«ã€‚ äº‹åŠ¡ å¯¹äºæ¥è‡ªå®¢æˆ·ç«¯çš„æ¯ä¸ªæ›´æ–°è¯·æ±‚ï¼ŒZooKeeper å…·å¤‡ä¸¥æ ¼çš„é¡ºåºè®¿é—®æ§åˆ¶èƒ½åŠ›ã€‚\nä¸ºäº†ä¿è¯äº‹åŠ¡çš„é¡ºåºä¸€è‡´æ€§ï¼ŒZooKeeper é‡‡ç”¨äº†é€’å¢çš„äº‹åŠ¡ id å·ï¼ˆzxidï¼‰æ¥æ ‡è¯†äº‹åŠ¡ã€‚\nLeader æœåŠ¡ä¼šä¸ºæ¯ä¸€ä¸ª Follower æœåŠ¡å™¨åˆ†é…ä¸€ä¸ªå•ç‹¬çš„é˜Ÿåˆ—ï¼Œç„¶åå°†äº‹åŠ¡ Proposal ä¾æ¬¡æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œå¹¶æ ¹æ® FIFO(å…ˆè¿›å…ˆå‡º) çš„ç­–ç•¥è¿›è¡Œæ¶ˆæ¯å‘é€ã€‚Follower æœåŠ¡åœ¨æ¥æ”¶åˆ° Proposal åï¼Œä¼šå°†å…¶ä»¥äº‹åŠ¡æ—¥å¿—çš„å½¢å¼å†™å…¥æœ¬åœ°ç£ç›˜ä¸­ï¼Œå¹¶åœ¨å†™å…¥æˆåŠŸååé¦ˆç»™ Leader ä¸€ä¸ª Ack å“åº”ã€‚å½“ Leader æ¥æ”¶åˆ°è¶…è¿‡åŠæ•° Follower çš„ Ack å“åº”åï¼Œå°±ä¼šå¹¿æ’­ä¸€ä¸ª Commit æ¶ˆæ¯ç»™æ‰€æœ‰çš„ Follower ä»¥é€šçŸ¥å…¶è¿›è¡Œäº‹åŠ¡æäº¤ï¼Œä¹‹å Leader è‡ªèº«ä¹Ÿä¼šå®Œæˆå¯¹äº‹åŠ¡çš„æäº¤ã€‚è€Œæ¯ä¸€ä¸ª Follower åˆ™åœ¨æ¥æ”¶åˆ° Commit æ¶ˆæ¯åï¼Œå®Œæˆäº‹åŠ¡çš„æäº¤ã€‚\næ‰€æœ‰çš„æè®®ï¼ˆproposalï¼‰éƒ½åœ¨è¢«æå‡ºçš„æ—¶å€™åŠ ä¸Šäº† zxidã€‚zxid æ˜¯ä¸€ä¸ª 64 ä½çš„æ•°å­—ï¼Œå®ƒçš„é«˜ 32 ä½æ˜¯ epoch ç”¨æ¥æ ‡è¯† Leader å…³ç³»æ˜¯å¦æ”¹å˜ï¼Œæ¯æ¬¡ä¸€ä¸ª Leader è¢«é€‰å‡ºæ¥ï¼Œå®ƒéƒ½ä¼šæœ‰ä¸€ä¸ªæ–°çš„ epochï¼Œæ ‡è¯†å½“å‰å±äºé‚£ä¸ª leader çš„ç»Ÿæ²»æ—¶æœŸã€‚ä½ 32 ä½ç”¨äºé€’å¢è®¡æ•°ã€‚\nè¯¦ç»†è¿‡ç¨‹å¦‚ä¸‹ï¼š\nLeader ç­‰å¾… Server è¿æ¥ï¼› Follower è¿æ¥ Leaderï¼Œå°†æœ€å¤§çš„ zxid å‘é€ç»™ Leaderï¼› Leader æ ¹æ® Follower çš„ zxid ç¡®å®šåŒæ­¥ç‚¹ï¼› å®ŒæˆåŒæ­¥åé€šçŸ¥ follower å·²ç»æˆä¸º uptodate çŠ¶æ€ï¼› Follower æ”¶åˆ° uptodate æ¶ˆæ¯åï¼Œåˆå¯ä»¥é‡æ–°æ¥å— client çš„è¯·æ±‚è¿›è¡ŒæœåŠ¡äº†ã€‚ è§‚å¯Ÿ ZooKeeper å…è®¸å®¢æˆ·ç«¯ç›‘å¬å®ƒå…³å¿ƒçš„ znodeï¼Œå½“ znode çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼ˆæ•°æ®å˜åŒ–ã€å­èŠ‚ç‚¹å¢å‡å˜åŒ–ï¼‰æ—¶ï¼ŒZooKeeper æœåŠ¡ä¼šé€šçŸ¥å®¢æˆ·ç«¯ã€‚\nå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¿æŒè¿æ¥ä¸€èˆ¬æœ‰ä¸¤ç§å½¢å¼ï¼š\nå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯ä¸æ–­è½®è¯¢ æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯æ¨é€çŠ¶æ€ Zookeeper çš„é€‰æ‹©æ˜¯æœåŠ¡ç«¯ä¸»åŠ¨æ¨é€çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è§‚å¯Ÿæœºåˆ¶ï¼ˆ Watch ï¼‰ã€‚\nZooKeeper çš„è§‚å¯Ÿæœºåˆ¶å…è®¸ç”¨æˆ·åœ¨æŒ‡å®šèŠ‚ç‚¹ä¸Šé’ˆå¯¹æ„Ÿå…´è¶£çš„äº‹ä»¶æ³¨å†Œç›‘å¬ï¼Œå½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œç›‘å¬å™¨ä¼šè¢«è§¦å‘ï¼Œå¹¶å°†äº‹ä»¶ä¿¡æ¯æ¨é€åˆ°å®¢æˆ·ç«¯ã€‚\nç›‘å¬å™¨å®æ—¶è§¦å‘ ç›‘å¬å™¨æ€»æ˜¯æœ‰åºçš„ åˆ›å»ºæ–°çš„ znode æ•°æ®å‰ï¼Œå®¢æˆ·ç«¯å°±èƒ½æ”¶åˆ°ç›‘å¬äº‹ä»¶ã€‚ å®¢æˆ·ç«¯ä½¿ç”¨ getData ç­‰æ¥å£è·å– znode çŠ¶æ€æ—¶ä¼ å…¥äº†ä¸€ä¸ªç”¨äºå¤„ç†èŠ‚ç‚¹å˜æ›´çš„å›è°ƒï¼Œé‚£ä¹ˆæœåŠ¡ç«¯å°±ä¼šä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€èŠ‚ç‚¹çš„å˜æ›´ï¼š\n1 public byte[] getData(final String path, Watcher watcher, Stat stat) ä»è¿™ä¸ªæ–¹æ³•ä¸­ä¼ å…¥çš„ Watcher å¯¹è±¡å®ç°äº†ç›¸åº”çš„ process æ–¹æ³•ï¼Œæ¯æ¬¡å¯¹åº”èŠ‚ç‚¹å‡ºç°äº†çŠ¶æ€çš„æ”¹å˜ï¼ŒWatchManager éƒ½ä¼šé€šè¿‡ä»¥ä¸‹çš„æ–¹å¼è°ƒç”¨ä¼ å…¥ Watcher çš„æ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 Set\u0026lt;Watcher\u0026gt; triggerWatch(String path, EventType type, Set\u0026lt;Watcher\u0026gt; supress) { WatchedEvent e = new WatchedEvent(type, KeeperState.SyncConnected, path); Set\u0026lt;Watcher\u0026gt; watchers; synchronized (this) { watchers = watchTable.remove(path); } for (Watcher w : watchers) { w.process(e); } return watchers; } Zookeeper ä¸­çš„æ‰€æœ‰æ•°æ®å…¶å®éƒ½æ˜¯ç”±ä¸€ä¸ªåä¸º DataTree çš„æ•°æ®ç»“æ„ç®¡ç†çš„ï¼Œæ‰€æœ‰çš„è¯»å†™æ•°æ®çš„è¯·æ±‚æœ€ç»ˆéƒ½ä¼šæ”¹å˜è¿™é¢—æ ‘çš„å†…å®¹ï¼Œåœ¨å‘å‡ºè¯»è¯·æ±‚æ—¶å¯èƒ½ä¼šä¼ å…¥ Watcher æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè€Œå†™è¯·æ±‚å°±å¯èƒ½ä¼šè§¦å‘ç›¸åº”çš„å›è°ƒï¼Œç”± WatchManager é€šçŸ¥å®¢æˆ·ç«¯æ•°æ®çš„å˜åŒ–ã€‚\né€šçŸ¥æœºåˆ¶çš„å®ç°å…¶å®è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œé€šè¿‡è¯»è¯·æ±‚è®¾ç½® Watcher ç›‘å¬äº‹ä»¶ï¼Œå†™è¯·æ±‚åœ¨è§¦å‘äº‹ä»¶æ—¶å°±èƒ½å°†é€šçŸ¥å‘é€ç»™æŒ‡å®šçš„å®¢æˆ·ç«¯ã€‚\nä¼šè¯ ZooKeeper å®¢æˆ·ç«¯é€šè¿‡ TCP é•¿è¿æ¥è¿æ¥åˆ° ZooKeeper æœåŠ¡é›†ç¾¤ã€‚ä¼šè¯ (Session) ä»ç¬¬ä¸€æ¬¡è¿æ¥å¼€å§‹å°±å·²ç»å»ºç«‹ï¼Œä¹‹åé€šè¿‡å¿ƒè·³æ£€æµ‹æœºåˆ¶æ¥ä¿æŒæœ‰æ•ˆçš„ä¼šè¯çŠ¶æ€ã€‚é€šè¿‡è¿™ä¸ªè¿æ¥ï¼Œå®¢æˆ·ç«¯å¯ä»¥å‘é€è¯·æ±‚å¹¶æ¥æ”¶å“åº”ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ¥æ”¶åˆ° Watch äº‹ä»¶çš„é€šçŸ¥ã€‚\næ¯ä¸ª ZooKeeper å®¢æˆ·ç«¯é…ç½®ä¸­éƒ½é…ç½®äº† ZooKeeper æœåŠ¡å™¨é›†ç¾¤åˆ—è¡¨ã€‚å¯åŠ¨æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šéå†åˆ—è¡¨å»å°è¯•å»ºç«‹è¿æ¥ã€‚å¦‚æœå¤±è´¥ï¼Œå®ƒä¼šå°è¯•è¿æ¥ä¸‹ä¸€ä¸ªæœåŠ¡å™¨ï¼Œä¾æ¬¡ç±»æ¨ã€‚\nä¸€æ—¦ä¸€å°å®¢æˆ·ç«¯ä¸ä¸€å°æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œè¿™å°æœåŠ¡å™¨ä¼šä¸ºè¿™ä¸ªå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªæ–°çš„ä¼šè¯ã€‚æ¯ä¸ªä¼šè¯éƒ½ä¼šæœ‰ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œè‹¥æœåŠ¡å™¨åœ¨è¶…æ—¶æ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ä»»ä½•è¯·æ±‚ï¼Œåˆ™ç›¸åº”ä¼šè¯è¢«è§†ä¸ºè¿‡æœŸã€‚ä¸€æ—¦ä¼šè¯è¿‡æœŸï¼Œå°±æ— æ³•å†é‡æ–°æ‰“å¼€ï¼Œä¸”ä»»ä½•ä¸è¯¥ä¼šè¯ç›¸å…³çš„ä¸´æ—¶ znode éƒ½ä¼šè¢«åˆ é™¤ã€‚\né€šå¸¸æ¥è¯´ï¼Œä¼šè¯åº”è¯¥é•¿æœŸå­˜åœ¨ï¼Œè€Œè¿™éœ€è¦ç”±å®¢æˆ·ç«¯æ¥ä¿è¯ã€‚å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡å¿ƒè·³æ–¹å¼ï¼ˆpingï¼‰æ¥ä¿æŒä¼šè¯ä¸è¿‡æœŸã€‚\nZooKeeper çš„ä¼šè¯å…·æœ‰å››ä¸ªå±æ€§ï¼š\nsessionID - ä¼šè¯ IDï¼Œå”¯ä¸€æ ‡è¯†ä¸€ä¸ªä¼šè¯ï¼Œæ¯æ¬¡å®¢æˆ·ç«¯åˆ›å»ºæ–°çš„ä¼šè¯æ—¶ï¼ŒZookeeper éƒ½ä¼šä¸ºå…¶åˆ†é…ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ sessionIDã€‚ TimeOut - ä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œå®¢æˆ·ç«¯åœ¨æ„é€  Zookeeper å®ä¾‹æ—¶ï¼Œä¼šé…ç½® sessionTimeout å‚æ•°ç”¨äºæŒ‡å®šä¼šè¯çš„è¶…æ—¶æ—¶é—´ï¼ŒZookeeper å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¿™ä¸ªè¶…æ—¶æ—¶é—´åï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®è‡ªå·±çš„è¶…æ—¶æ—¶é—´é™åˆ¶æœ€ç»ˆç¡®å®šä¼šè¯çš„è¶…æ—¶æ—¶é—´ã€‚ TickTime - ä¸‹æ¬¡ä¼šè¯è¶…æ—¶æ—¶é—´ç‚¹ï¼Œä¸ºäº†ä¾¿äº Zookeeper å¯¹ä¼šè¯å®è¡Œåˆ†æ¡¶ç­–ç•¥ç®¡ç†ï¼ŒåŒæ—¶ä¸ºäº†é«˜æ•ˆä½è€—åœ°å®ç°ä¼šè¯çš„è¶…æ—¶æ£€æŸ¥ä¸æ¸…ç†ï¼ŒZookeeper ä¼šä¸ºæ¯ä¸ªä¼šè¯æ ‡è®°ä¸€ä¸ªä¸‹æ¬¡ä¼šè¯è¶…æ—¶æ—¶é—´ç‚¹ï¼Œå…¶å€¼å¤§è‡´ç­‰äºå½“å‰æ—¶é—´åŠ ä¸Š TimeOutã€‚ isClosing - æ ‡è®°ä¸€ä¸ªä¼šè¯æ˜¯å¦å·²ç»è¢«å…³é—­ï¼Œå½“æœåŠ¡ç«¯æ£€æµ‹åˆ°ä¼šè¯å·²ç»è¶…æ—¶å¤±æ•ˆæ—¶ï¼Œä¼šå°†è¯¥ä¼šè¯çš„ isClosing æ ‡è®°ä¸ºå·²å…³é—­ï¼Œè¿™æ ·å°±èƒ½ç¡®ä¿ä¸å†å¤„ç†æ¥è‡ªè¯¥ä¼šè¯çš„å¿ƒæƒ…æ±‚äº†ã€‚ Zookeeper çš„ä¼šè¯ç®¡ç†ä¸»è¦æ˜¯é€šè¿‡ SessionTracker æ¥è´Ÿè´£ï¼Œå…¶é‡‡ç”¨äº†åˆ†æ¡¶ç­–ç•¥ï¼ˆå°†ç±»ä¼¼çš„ä¼šè¯æ”¾åœ¨åŒä¸€åŒºå—ä¸­è¿›è¡Œç®¡ç†ï¼‰è¿›è¡Œç®¡ç†ï¼Œä»¥ä¾¿ Zookeeper å¯¹ä¼šè¯è¿›è¡Œä¸åŒåŒºå—çš„éš”ç¦»å¤„ç†ä»¥åŠåŒä¸€åŒºå—çš„ç»Ÿä¸€å¤„ç†ã€‚\nZAB åè®® ZooKeeper å¹¶æ²¡æœ‰ç›´æ¥é‡‡ç”¨ Paxos ç®—æ³•ï¼Œè€Œæ˜¯é‡‡ç”¨äº†åä¸º ZAB çš„ä¸€è‡´æ€§åè®®ã€‚ZAB åè®®ä¸æ˜¯ Paxos ç®—æ³•ï¼Œåªæ˜¯æ¯”è¾ƒç±»ä¼¼ï¼ŒäºŒè€…åœ¨æ“ä½œä¸Šå¹¶ä¸ç›¸åŒã€‚Multi-Paxos å®ç°çš„æ˜¯ä¸€ç³»åˆ—å€¼çš„å…±è¯†ï¼Œä¸å…³å¿ƒæœ€ç»ˆè¾¾æˆå…±è¯†çš„å€¼æ˜¯ä»€ä¹ˆï¼Œä¸å…³å¿ƒå„å€¼çš„é¡ºåºã€‚è€Œ ZooKeeper éœ€è¦ç¡®ä¿æ“ä½œçš„é¡ºåºæ€§ã€‚\nZAB åè®®æ˜¯ Zookeeper ä¸“é—¨è®¾è®¡çš„ä¸€ç§æ”¯æŒå´©æºƒæ¢å¤çš„åŸå­å¹¿æ’­åè®®ã€‚\nZAB åè®®æ˜¯ ZooKeeper çš„æ•°æ®ä¸€è‡´æ€§å’Œé«˜å¯ç”¨è§£å†³æ–¹æ¡ˆã€‚\nZAB åè®®å®šä¹‰äº†ä¸¤ä¸ªå¯ä»¥æ— é™å¾ªç¯çš„æµç¨‹ï¼š\né€‰ä¸¾ Leader - ç”¨äºæ•…éšœæ¢å¤ï¼Œä»è€Œä¿è¯é«˜å¯ç”¨ã€‚ åŸå­å¹¿æ’­ - ç”¨äºä¸»ä»åŒæ­¥ï¼Œä»è€Œä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚ é€‰ä¸¾ Leader ZooKeeper çš„æ•…éšœæ¢å¤\nZooKeeper é›†ç¾¤é‡‡ç”¨ä¸€ä¸»ï¼ˆç§°ä¸º Leaderï¼‰å¤šä»ï¼ˆç§°ä¸º Followerï¼‰æ¨¡å¼ï¼Œä¸»ä»èŠ‚ç‚¹é€šè¿‡å‰¯æœ¬æœºåˆ¶ä¿è¯æ•°æ®ä¸€è‡´ã€‚\nå¦‚æœ Follower èŠ‚ç‚¹æŒ‚äº† - ZooKeeper é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå•ç‹¬åœ¨å†…å­˜ä¸­ç»´æŠ¤è‡ªèº«çš„çŠ¶æ€ï¼Œå¹¶ä¸”å„èŠ‚ç‚¹ä¹‹é—´éƒ½ä¿æŒç€é€šè®¯ï¼Œåªè¦é›†ç¾¤ä¸­æœ‰åŠæ•°æœºå™¨èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œé‚£ä¹ˆæ•´ä¸ªé›†ç¾¤å°±å¯ä»¥æ­£å¸¸æä¾›æœåŠ¡ã€‚ å¦‚æœ Leader èŠ‚ç‚¹æŒ‚äº† - å¦‚æœ Leader èŠ‚ç‚¹æŒ‚äº†ï¼Œç³»ç»Ÿå°±ä¸èƒ½æ­£å¸¸å·¥ä½œäº†ã€‚æ­¤æ—¶ï¼Œéœ€è¦é€šè¿‡ ZAB åè®®çš„é€‰ä¸¾ Leader æœºåˆ¶æ¥è¿›è¡Œæ•…éšœæ¢å¤ã€‚ ZAB åè®®çš„é€‰ä¸¾ Leader æœºåˆ¶ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ï¼šåŸºäºè¿‡åŠé€‰ä¸¾æœºåˆ¶äº§ç”Ÿæ–°çš„ Leaderï¼Œä¹‹åå…¶ä»–æœºå™¨å°†ä»æ–°çš„ Leader ä¸ŠåŒæ­¥çŠ¶æ€ï¼Œå½“æœ‰è¿‡åŠæœºå™¨å®ŒæˆçŠ¶æ€åŒæ­¥åï¼Œå°±é€€å‡ºé€‰ä¸¾ Leader æ¨¡å¼ï¼Œè¿›å…¥åŸå­å¹¿æ’­æ¨¡å¼ã€‚\næœ¯è¯­ myid - æ¯ä¸ª Zookeeper æœåŠ¡å™¨ï¼Œéƒ½éœ€è¦åœ¨æ•°æ®æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º myid çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«æ•´ä¸ª Zookeeper é›†ç¾¤å”¯ä¸€çš„ IDï¼ˆæ•´æ•°ï¼‰ã€‚ zxid - ç±»ä¼¼äº RDBMS ä¸­çš„äº‹åŠ¡ IDï¼Œç”¨äºæ ‡è¯†ä¸€æ¬¡æ›´æ–°æ“ä½œçš„ Proposal IDã€‚ä¸ºäº†ä¿è¯é¡ºåºæ€§ï¼Œè¯¥ zxid å¿…é¡»å•è°ƒé€’å¢ã€‚å› æ­¤ Zookeeper ä½¿ç”¨ä¸€ä¸ª 64 ä½çš„æ•°æ¥è¡¨ç¤ºï¼Œé«˜ 32 ä½æ˜¯ Leader çš„ epochï¼Œä» 1 å¼€å§‹ï¼Œæ¯æ¬¡é€‰å‡ºæ–°çš„ Leaderï¼Œepoch åŠ ä¸€ã€‚ä½ 32 ä½ä¸ºè¯¥ epoch å†…çš„åºå·ï¼Œæ¯æ¬¡ epoch å˜åŒ–ï¼Œéƒ½å°†ä½ 32 ä½çš„åºå·é‡ç½®ã€‚è¿™æ ·ä¿è¯äº† zxid çš„å…¨å±€é€’å¢æ€§ã€‚ æœåŠ¡å™¨çŠ¶æ€ LOOKING - ä¸ç¡®å®š Leader çŠ¶æ€ã€‚è¯¥çŠ¶æ€ä¸‹çš„æœåŠ¡å™¨è®¤ä¸ºå½“å‰é›†ç¾¤ä¸­æ²¡æœ‰ Leaderï¼Œä¼šå‘èµ· Leader é€‰ä¸¾ FOLLOWING - è·Ÿéšè€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯ Followerï¼Œå¹¶ä¸”å®ƒçŸ¥é“ Leader æ˜¯è° LEADING - é¢†å¯¼è€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯ Leaderï¼Œå®ƒä¼šç»´æŠ¤ä¸ Follower é—´çš„å¿ƒè·³ OBSERVING - è§‚å¯Ÿè€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯ Observerï¼Œä¸ Folower å”¯ä¸€çš„ä¸åŒåœ¨äºä¸å‚ä¸é€‰ä¸¾ï¼Œä¹Ÿä¸å‚ä¸é›†ç¾¤å†™æ“ä½œæ—¶çš„æŠ•ç¥¨ é€‰ç¥¨æ•°æ®ç»“æ„ æ¯ä¸ªæœåŠ¡å™¨åœ¨è¿›è¡Œé¢†å¯¼é€‰ä¸¾æ—¶ï¼Œä¼šå‘é€å¦‚ä¸‹å…³é”®ä¿¡æ¯\nlogicClock - æ¯ä¸ªæœåŠ¡å™¨ä¼šç»´æŠ¤ä¸€ä¸ªè‡ªå¢çš„æ•´æ•°ï¼Œåä¸º logicClockï¼Œå®ƒè¡¨ç¤ºè¿™æ˜¯è¯¥æœåŠ¡å™¨å‘èµ·çš„ç¬¬å¤šå°‘è½®æŠ•ç¥¨ state - å½“å‰æœåŠ¡å™¨çš„çŠ¶æ€ self_id - å½“å‰æœåŠ¡å™¨çš„ myid self_zxid - å½“å‰æœåŠ¡å™¨ä¸Šæ‰€ä¿å­˜çš„æ•°æ®çš„æœ€å¤§ zxid vote_id - è¢«æ¨ä¸¾çš„æœåŠ¡å™¨çš„ myid vote_zxid - è¢«æ¨ä¸¾çš„æœåŠ¡å™¨ä¸Šæ‰€ä¿å­˜çš„æ•°æ®çš„æœ€å¤§ zxid æŠ•ç¥¨æµç¨‹ è‡ªå¢é€‰ä¸¾è½®æ¬¡ - Zookeeper è§„å®šæ‰€æœ‰æœ‰æ•ˆçš„æŠ•ç¥¨éƒ½å¿…é¡»åœ¨åŒä¸€è½®æ¬¡ä¸­ã€‚æ¯ä¸ªæœåŠ¡å™¨åœ¨å¼€å§‹æ–°ä¸€è½®æŠ•ç¥¨æ—¶ï¼Œä¼šå…ˆå¯¹è‡ªå·±ç»´æŠ¤çš„ logicClock è¿›è¡Œè‡ªå¢æ“ä½œã€‚ åˆå§‹åŒ–é€‰ç¥¨ - æ¯ä¸ªæœåŠ¡å™¨åœ¨å¹¿æ’­è‡ªå·±çš„é€‰ç¥¨å‰ï¼Œä¼šå°†è‡ªå·±çš„æŠ•ç¥¨ç®±æ¸…ç©ºã€‚è¯¥æŠ•ç¥¨ç®±è®°å½•äº†æ‰€æ”¶åˆ°çš„é€‰ç¥¨ã€‚ä¾‹ï¼šæœåŠ¡å™¨ 2 æŠ•ç¥¨ç»™æœåŠ¡å™¨ 3ï¼ŒæœåŠ¡å™¨ 3 æŠ•ç¥¨ç»™æœåŠ¡å™¨ 1ï¼Œåˆ™æœåŠ¡å™¨ 1 çš„æŠ•ç¥¨ç®±ä¸º(2, 3), (3, 1), (1, 1)ã€‚ç¥¨ç®±ä¸­åªä¼šè®°å½•æ¯ä¸€æŠ•ç¥¨è€…çš„æœ€åä¸€ç¥¨ï¼Œå¦‚æŠ•ç¥¨è€…æ›´æ–°è‡ªå·±çš„é€‰ç¥¨ï¼Œåˆ™å…¶å®ƒæœåŠ¡å™¨æ”¶åˆ°è¯¥æ–°é€‰ç¥¨åä¼šåœ¨è‡ªå·±ç¥¨ç®±ä¸­æ›´æ–°è¯¥æœåŠ¡å™¨çš„é€‰ç¥¨ã€‚ å‘é€åˆå§‹åŒ–é€‰ç¥¨ - æ¯ä¸ªæœåŠ¡å™¨æœ€å¼€å§‹éƒ½æ˜¯é€šè¿‡å¹¿æ’­æŠŠç¥¨æŠ•ç»™è‡ªå·±ã€‚ æ¥æ”¶å¤–éƒ¨æŠ•ç¥¨ - æœåŠ¡å™¨ä¼šå°è¯•ä»å…¶å®ƒæœåŠ¡å™¨è·å–æŠ•ç¥¨ï¼Œå¹¶è®°å…¥è‡ªå·±çš„æŠ•ç¥¨ç®±å†…ã€‚å¦‚æœæ— æ³•è·å–ä»»ä½•å¤–éƒ¨æŠ•ç¥¨ï¼Œåˆ™ä¼šç¡®è®¤è‡ªå·±æ˜¯å¦ä¸é›†ç¾¤ä¸­å…¶å®ƒæœåŠ¡å™¨ä¿æŒç€æœ‰æ•ˆè¿æ¥ã€‚å¦‚æœæ˜¯ï¼Œåˆ™å†æ¬¡å‘é€è‡ªå·±çš„æŠ•ç¥¨ï¼›å¦‚æœå¦ï¼Œåˆ™é©¬ä¸Šä¸ä¹‹å»ºç«‹è¿æ¥ã€‚ åˆ¤æ–­é€‰ä¸¾è½®æ¬¡ - æ”¶åˆ°å¤–éƒ¨æŠ•ç¥¨åï¼Œé¦–å…ˆä¼šæ ¹æ®æŠ•ç¥¨ä¿¡æ¯ä¸­æ‰€åŒ…å«çš„ logicClock æ¥è¿›è¡Œä¸åŒå¤„ç† å¤–éƒ¨æŠ•ç¥¨çš„ logicClock å¤§äºè‡ªå·±çš„ logicClockã€‚è¯´æ˜è¯¥æœåŠ¡å™¨çš„é€‰ä¸¾è½®æ¬¡è½åäºå…¶å®ƒæœåŠ¡å™¨çš„é€‰ä¸¾è½®æ¬¡ï¼Œç«‹å³æ¸…ç©ºè‡ªå·±çš„æŠ•ç¥¨ç®±å¹¶å°†è‡ªå·±çš„ logicClock æ›´æ–°ä¸ºæ”¶åˆ°çš„ logicClockï¼Œç„¶åå†å¯¹æ¯”è‡ªå·±ä¹‹å‰çš„æŠ•ç¥¨ä¸æ”¶åˆ°çš„æŠ•ç¥¨ä»¥ç¡®å®šæ˜¯å¦éœ€è¦å˜æ›´è‡ªå·±çš„æŠ•ç¥¨ï¼Œæœ€ç»ˆå†æ¬¡å°†è‡ªå·±çš„æŠ•ç¥¨å¹¿æ’­å‡ºå»ã€‚ å¤–éƒ¨æŠ•ç¥¨çš„ logicClock å°äºè‡ªå·±çš„ logicClockã€‚å½“å‰æœåŠ¡å™¨ç›´æ¥å¿½ç•¥è¯¥æŠ•ç¥¨ï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªæŠ•ç¥¨ã€‚ å¤–éƒ¨æŠ•ç¥¨çš„ logickClock ä¸è‡ªå·±çš„ç›¸ç­‰ã€‚å½“æ—¶è¿›è¡Œé€‰ç¥¨ PKã€‚ é€‰ç¥¨ PK - é€‰ç¥¨ PK æ˜¯åŸºäº(self_id, self_zxid) ä¸ (vote_id, vote_zxid) çš„å¯¹æ¯” å¤–éƒ¨æŠ•ç¥¨çš„ logicClock å¤§äºè‡ªå·±çš„ logicClockï¼Œåˆ™å°†è‡ªå·±çš„ logicClock åŠè‡ªå·±çš„é€‰ç¥¨çš„ logicClock å˜æ›´ä¸ºæ”¶åˆ°çš„ logicClock è‹¥ logicClock ä¸€è‡´ï¼Œåˆ™å¯¹æ¯”äºŒè€…çš„ vote_zxidï¼Œè‹¥å¤–éƒ¨æŠ•ç¥¨çš„ vote_zxid æ¯”è¾ƒå¤§ï¼Œåˆ™å°†è‡ªå·±çš„ç¥¨ä¸­çš„ vote_zxid ä¸ vote_myid æ›´æ–°ä¸ºæ”¶åˆ°çš„ç¥¨ä¸­çš„ vote_zxid ä¸ vote_myid å¹¶å¹¿æ’­å‡ºå»ï¼Œå¦å¤–å°†æ”¶åˆ°çš„ç¥¨åŠè‡ªå·±æ›´æ–°åçš„ç¥¨æ”¾å…¥è‡ªå·±çš„ç¥¨ç®±ã€‚å¦‚æœç¥¨ç®±å†…å·²å­˜åœ¨(self_myid, self_zxid)ç›¸åŒçš„é€‰ç¥¨ï¼Œåˆ™ç›´æ¥è¦†ç›– è‹¥äºŒè€… vote_zxid ä¸€è‡´ï¼Œåˆ™æ¯”è¾ƒäºŒè€…çš„ vote_myidï¼Œè‹¥å¤–éƒ¨æŠ•ç¥¨çš„ vote_myid æ¯”è¾ƒå¤§ï¼Œåˆ™å°†è‡ªå·±çš„ç¥¨ä¸­çš„ vote_myid æ›´æ–°ä¸ºæ”¶åˆ°çš„ç¥¨ä¸­çš„ vote_myid å¹¶å¹¿æ’­å‡ºå»ï¼Œå¦å¤–å°†æ”¶åˆ°çš„ç¥¨åŠè‡ªå·±æ›´æ–°åçš„ç¥¨æ”¾å…¥è‡ªå·±çš„ç¥¨ç®± ç»Ÿè®¡é€‰ç¥¨ - å¦‚æœå·²ç»ç¡®å®šæœ‰è¿‡åŠæœåŠ¡å™¨è®¤å¯äº†è‡ªå·±çš„æŠ•ç¥¨ï¼ˆå¯èƒ½æ˜¯æ›´æ–°åçš„æŠ•ç¥¨ï¼‰ï¼Œåˆ™ç»ˆæ­¢æŠ•ç¥¨ã€‚å¦åˆ™ç»§ç»­æ¥æ”¶å…¶å®ƒæœåŠ¡å™¨çš„æŠ•ç¥¨ã€‚ æ›´æ–°æœåŠ¡å™¨çŠ¶æ€ - æŠ•ç¥¨ç»ˆæ­¢åï¼ŒæœåŠ¡å™¨å¼€å§‹æ›´æ–°è‡ªèº«çŠ¶æ€ã€‚è‹¥è¿‡åŠçš„ç¥¨æŠ•ç»™äº†è‡ªå·±ï¼Œåˆ™å°†è‡ªå·±çš„æœåŠ¡å™¨çŠ¶æ€æ›´æ–°ä¸º LEADINGï¼Œå¦åˆ™å°†è‡ªå·±çš„çŠ¶æ€æ›´æ–°ä¸º FOLLOWING é€šè¿‡ä»¥ä¸Šæµç¨‹åˆ†æï¼Œæˆ‘ä»¬ä¸éš¾çœ‹å‡ºï¼šè¦ä½¿ Leader è·å¾—å¤šæ•° Server çš„æ”¯æŒï¼Œåˆ™ ZooKeeper é›†ç¾¤èŠ‚ç‚¹æ•°å¿…é¡»æ˜¯å¥‡æ•°ã€‚ä¸”å­˜æ´»çš„èŠ‚ç‚¹æ•°ç›®ä¸å¾—å°‘äº N + 1 ã€‚\næ¯ä¸ª Server å¯åŠ¨åéƒ½ä¼šé‡å¤ä»¥ä¸Šæµç¨‹ã€‚åœ¨æ¢å¤æ¨¡å¼ä¸‹ï¼Œå¦‚æœæ˜¯åˆšä»å´©æºƒçŠ¶æ€æ¢å¤çš„æˆ–è€…åˆšå¯åŠ¨çš„ server è¿˜ä¼šä»ç£ç›˜å¿«ç…§ä¸­æ¢å¤æ•°æ®å’Œä¼šè¯ä¿¡æ¯ï¼Œzk ä¼šè®°å½•äº‹åŠ¡æ—¥å¿—å¹¶å®šæœŸè¿›è¡Œå¿«ç…§ï¼Œæ–¹ä¾¿åœ¨æ¢å¤æ—¶è¿›è¡ŒçŠ¶æ€æ¢å¤ã€‚\nåŸå­å¹¿æ’­ï¼ˆAtomic Broadcastï¼‰ ZooKeeper é€šè¿‡å‰¯æœ¬æœºåˆ¶æ¥å®ç°é«˜å¯ç”¨ã€‚\né‚£ä¹ˆï¼ŒZooKeeper æ˜¯å¦‚ä½•å®ç°å‰¯æœ¬æœºåˆ¶çš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šZAB åè®®çš„åŸå­å¹¿æ’­ã€‚\nZAB åè®®çš„åŸå­å¹¿æ’­è¦æ±‚ï¼š\næ‰€æœ‰çš„å†™è¯·æ±‚éƒ½ä¼šè¢«è½¬å‘ç»™ Leaderï¼ŒLeader ä¼šä»¥åŸå­å¹¿æ’­çš„æ–¹å¼é€šçŸ¥ Followã€‚å½“åŠæ•°ä»¥ä¸Šçš„ Follow å·²ç»æ›´æ–°çŠ¶æ€æŒä¹…åŒ–åï¼ŒLeader æ‰ä¼šæäº¤è¿™ä¸ªæ›´æ–°ï¼Œç„¶åå®¢æˆ·ç«¯æ‰ä¼šæ”¶åˆ°ä¸€ä¸ªæ›´æ–°æˆåŠŸçš„å“åº”ã€‚è¿™æœ‰äº›ç±»ä¼¼æ•°æ®åº“ä¸­çš„ä¸¤é˜¶æ®µæäº¤åè®®ã€‚\nåœ¨æ•´ä¸ªæ¶ˆæ¯çš„å¹¿æ’­è¿‡ç¨‹ä¸­ï¼ŒLeader æœåŠ¡å™¨ä¼šæ¯ä¸ªäº‹åŠ¡è¯·æ±‚ç”Ÿæˆå¯¹åº”çš„ Proposalï¼Œå¹¶ä¸ºå…¶åˆ†é…ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„é€’å¢çš„äº‹åŠ¡ ID(ZXID)ï¼Œä¹‹åå†å¯¹å…¶è¿›è¡Œå¹¿æ’­ã€‚\nZAB æ˜¯é€šè¿‡ä¸€åˆ‡ä»¥é¢†å¯¼è€…ä¸ºå‡†çš„å¼ºé¢†å¯¼è€…æ¨¡å‹å’Œä¸¥æ ¼æŒ‰ç…§é¡ºåºæäº¤æ—¥å¿—ï¼Œæ¥å®ç°æ“ä½œçš„é¡ºåºæ€§çš„ï¼Œè¿™ä¸€ç‚¹å’Œ Raft æ˜¯ä¸€æ ·çš„ã€‚\nZooKeeper åº”ç”¨ ZooKeeper å¯ä»¥ç”¨äºå‘å¸ƒ/è®¢é˜…ã€è´Ÿè½½å‡è¡¡ã€å‘½ä»¤æœåŠ¡ã€åˆ†å¸ƒå¼åè°ƒ/é€šçŸ¥ã€é›†ç¾¤ç®¡ç†ã€Master é€‰ä¸¾ã€åˆ†å¸ƒå¼é”å’Œåˆ†å¸ƒå¼é˜Ÿåˆ—ç­‰åŠŸèƒ½ ã€‚\nå‘½åæœåŠ¡ åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œé€šå¸¸éœ€è¦ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„åå­—ï¼Œå¦‚ç”Ÿæˆå…¨å±€å”¯ä¸€çš„è®¢å•å·ç­‰ï¼ŒZooKeeper å¯ä»¥é€šè¿‡é¡ºåºèŠ‚ç‚¹çš„ç‰¹æ€§æ¥ç”Ÿæˆå…¨å±€å”¯ä¸€ IDï¼Œä»è€Œå¯ä»¥å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿæä¾›å‘½åæœåŠ¡ã€‚\né…ç½®ç®¡ç† åˆ©ç”¨ ZooKeeper çš„è§‚å¯Ÿæœºåˆ¶ï¼Œå¯ä»¥å°†å…¶ä½œä¸ºä¸€ä¸ªé«˜å¯ç”¨çš„é…ç½®å­˜å‚¨å™¨ï¼Œå…è®¸åˆ†å¸ƒå¼åº”ç”¨çš„å‚ä¸è€…æ£€ç´¢å’Œæ›´æ–°é…ç½®æ–‡ä»¶ã€‚\nåˆ†å¸ƒå¼é” å¯ä»¥é€šè¿‡ ZooKeeper çš„ä¸´æ—¶èŠ‚ç‚¹å’Œ Watcher æœºåˆ¶æ¥å®ç°åˆ†å¸ƒå¼æ’å®ƒé”ã€‚\nä¸¾ä¾‹æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæœ‰ä¸‰ä¸ªèŠ‚ç‚¹ Aã€Bã€Cï¼Œè¯•å›¾é€šè¿‡ ZooKeeper è·å–åˆ†å¸ƒå¼é”ã€‚\nï¼ˆ1ï¼‰è®¿é—® /lock ï¼ˆè¿™ä¸ªç›®å½•è·¯å¾„ç”±ç¨‹åºè‡ªå·±å†³å®šï¼‰ï¼Œåˆ›å»º å¸¦åºåˆ—å·çš„ä¸´æ—¶èŠ‚ç‚¹ï¼ˆEPHEMERALï¼‰ ã€‚\nï¼ˆ2ï¼‰æ¯ä¸ªèŠ‚ç‚¹å°è¯•è·å–é”æ—¶ï¼Œæ‹¿åˆ° /locksèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼ˆid_0000,id_0001,id_0002ï¼‰ï¼Œåˆ¤æ–­è‡ªå·±åˆ›å»ºçš„èŠ‚ç‚¹æ˜¯ä¸æ˜¯åºåˆ—å·æœ€å°çš„\nå¦‚æœåºåˆ—å·æ˜¯æœ€å°çš„ï¼Œåˆ™æˆåŠŸè·å–åˆ°é”ã€‚ é‡Šæ”¾é”ï¼šæ‰§è¡Œå®Œæ“ä½œåï¼ŒæŠŠåˆ›å»ºçš„èŠ‚ç‚¹ç»™åˆ æ‰ã€‚ å¦‚æœä¸æ˜¯ï¼Œåˆ™ç›‘å¬æ¯”è‡ªå·±è¦å° 1 çš„èŠ‚ç‚¹å˜åŒ–ã€‚ ï¼ˆ3ï¼‰é‡Šæ”¾é”ï¼Œå³åˆ é™¤è‡ªå·±åˆ›å»ºçš„èŠ‚ç‚¹ã€‚\nå›¾ä¸­ï¼ŒNodeA åˆ é™¤è‡ªå·±åˆ›å»ºçš„èŠ‚ç‚¹ id_0000ï¼ŒNodeB ç›‘å¬åˆ°å˜åŒ–ï¼Œå‘ç°è‡ªå·±çš„èŠ‚ç‚¹å·²ç»æ˜¯æœ€å°èŠ‚ç‚¹ï¼Œå³å¯è·å–åˆ°é”ã€‚\né›†ç¾¤ç®¡ç† ZooKeeper è¿˜èƒ½è§£å†³å¤§å¤šæ•°åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„é—®é¢˜ï¼š\nå¦‚å¯ä»¥é€šè¿‡åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹æ¥å»ºç«‹å¿ƒè·³æ£€æµ‹æœºåˆ¶ã€‚å¦‚æœåˆ†å¸ƒå¼ç³»ç»Ÿçš„æŸä¸ªæœåŠ¡èŠ‚ç‚¹å®•æœºäº†ï¼Œåˆ™å…¶æŒæœ‰çš„ä¼šè¯ä¼šè¶…æ—¶ï¼Œæ­¤æ—¶è¯¥ä¸´æ—¶èŠ‚ç‚¹ä¼šè¢«åˆ é™¤ï¼Œç›¸åº”çš„ç›‘å¬äº‹ä»¶å°±ä¼šè¢«è§¦å‘ã€‚ åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ¯ä¸ªæœåŠ¡èŠ‚ç‚¹è¿˜å¯ä»¥å°†è‡ªå·±çš„èŠ‚ç‚¹çŠ¶æ€å†™å…¥ä¸´æ—¶èŠ‚ç‚¹ï¼Œä»è€Œå®ŒæˆçŠ¶æ€æŠ¥å‘Šæˆ–èŠ‚ç‚¹å·¥ä½œè¿›åº¦æ±‡æŠ¥ã€‚ é€šè¿‡æ•°æ®çš„è®¢é˜…å’Œå‘å¸ƒåŠŸèƒ½ï¼ŒZooKeeper è¿˜èƒ½å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿè¿›è¡Œæ¨¡å—çš„è§£è€¦å’Œä»»åŠ¡çš„è°ƒåº¦ã€‚ é€šè¿‡ç›‘å¬æœºåˆ¶ï¼Œè¿˜èƒ½å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿçš„æœåŠ¡èŠ‚ç‚¹è¿›è¡ŒåŠ¨æ€ä¸Šä¸‹çº¿ï¼Œä»è€Œå®ç°æœåŠ¡çš„åŠ¨æ€æ‰©å®¹ã€‚ é€‰ä¸¾ Leader èŠ‚ç‚¹ åˆ†å¸ƒå¼ç³»ç»Ÿä¸€ä¸ªé‡è¦çš„æ¨¡å¼å°±æ˜¯ä¸»ä»æ¨¡å¼ (Master/Salves)ï¼ŒZooKeeper å¯ä»¥ç”¨äºè¯¥æ¨¡å¼ä¸‹çš„ Matser é€‰ä¸¾ã€‚å¯ä»¥è®©æ‰€æœ‰æœåŠ¡èŠ‚ç‚¹å»ç«äº‰æ€§åœ°åˆ›å»ºåŒä¸€ä¸ª ZNodeï¼Œç”±äº ZooKeeper ä¸èƒ½æœ‰è·¯å¾„ç›¸åŒçš„ ZNodeï¼Œå¿…ç„¶åªæœ‰ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹èƒ½å¤Ÿåˆ›å»ºæˆåŠŸï¼Œè¿™æ ·è¯¥æœåŠ¡èŠ‚ç‚¹å°±å¯ä»¥æˆä¸º Master èŠ‚ç‚¹ã€‚\né˜Ÿåˆ—ç®¡ç† ZooKeeper å¯ä»¥å¤„ç†ä¸¤ç§ç±»å‹çš„é˜Ÿåˆ—ï¼š\nå½“ä¸€ä¸ªé˜Ÿåˆ—çš„æˆå‘˜éƒ½èšé½æ—¶ï¼Œè¿™ä¸ªé˜Ÿåˆ—æ‰å¯ç”¨ï¼Œå¦åˆ™ä¸€ç›´ç­‰å¾…æ‰€æœ‰æˆå‘˜åˆ°è¾¾ï¼Œè¿™ç§æ˜¯åŒæ­¥é˜Ÿåˆ—ã€‚ é˜Ÿåˆ—æŒ‰ç…§ FIFO æ–¹å¼è¿›è¡Œå…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œï¼Œä¾‹å¦‚å®ç°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å‹ã€‚ åŒæ­¥é˜Ÿåˆ—ç”¨ ZooKeeper å®ç°çš„å®ç°æ€è·¯å¦‚ä¸‹ï¼š\nåˆ›å»ºä¸€ä¸ªçˆ¶ç›®å½• /synchronizingï¼Œæ¯ä¸ªæˆå‘˜éƒ½ç›‘æ§æ ‡å¿—ï¼ˆSet Watchï¼‰ä½ç›®å½• /synchronizing/start æ˜¯å¦å­˜åœ¨ï¼Œç„¶åæ¯ä¸ªæˆå‘˜éƒ½åŠ å…¥è¿™ä¸ªé˜Ÿåˆ—ï¼ŒåŠ å…¥é˜Ÿåˆ—çš„æ–¹å¼å°±æ˜¯åˆ›å»º /synchronizing/member_i çš„ä¸´æ—¶ç›®å½•èŠ‚ç‚¹ï¼Œç„¶åæ¯ä¸ªæˆå‘˜è·å– /synchronizing ç›®å½•çš„æ‰€æœ‰ç›®å½•èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ member_iã€‚åˆ¤æ–­ i çš„å€¼æ˜¯å¦å·²ç»æ˜¯æˆå‘˜çš„ä¸ªæ•°ï¼Œå¦‚æœå°äºæˆå‘˜ä¸ªæ•°ç­‰å¾… /synchronizing/start çš„å‡ºç°ï¼Œå¦‚æœå·²ç»ç›¸ç­‰å°±åˆ›å»º /synchronizing/startã€‚\nZooKeeper çš„ç¼ºç‚¹ ZooKeeper çš„ç›‘å¬æ˜¯ä¸€æ¬¡æ€§çš„ã€‚\nZooKeeper ä¸æ˜¯ä¸ºé«˜å¯ç”¨æ€§è®¾è®¡çš„ ç”Ÿäº§ç¯å¢ƒä¸­å¸¸å¸¸éœ€è¦é€šè¿‡å¤šæœºæˆ¿éƒ¨ç½²æ¥å®¹ç¾ã€‚å‡ºäºæˆæœ¬è€ƒè™‘ï¼Œä¸€èˆ¬å¤šæœºæˆ¿éƒ½æ˜¯åŒæ—¶æä¾›æœåŠ¡çš„ï¼Œå³ä¸€ä¸ªæœºæˆ¿æ’‘ä¸ä½æ‰€æœ‰æµé‡ã€‚ZooKeeper é›†ç¾¤åªèƒ½æœ‰ä¸€ä¸ª Leaderï¼Œä¸€æ—¦æœºæˆ¿ä¹‹é—´è¿æ¥å‡ºç°æ•…éšœï¼Œé‚£ä¹ˆåªæœ‰ Leader æ‰€åœ¨çš„æœºæˆ¿å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œå…¶ä»–æœºæˆ¿åªèƒ½åœæ‘†ã€‚äºæ˜¯æ‰€æœ‰æµé‡é›†ä¸­åˆ° Leader æ‰€åœ¨çš„æœºæˆ¿ï¼Œç”±äºå¤„ç†ä¸è¿‡æ¥è€Œå¯¼è‡´å´©æºƒã€‚\nå³ä½¿æ˜¯åœ¨åŒä¸€ä¸ªæœºæˆ¿é‡Œé¢ï¼Œç”±äºç½‘æ®µçš„ä¸åŒï¼Œåœ¨è°ƒæ•´æœºæˆ¿äº¤æ¢æœºçš„æ—¶å€™å¶å°”ä¹Ÿä¼šå‘ç”Ÿç½‘æ®µéš”ç¦»çš„æƒ…å†µã€‚å®é™…ä¸Šæœºæˆ¿æ¯ä¸ªæœˆåŸºæœ¬ä¸Šéƒ½ä¼šå‘ç”ŸçŸ­æš‚çš„ç½‘ç»œéš”ç¦»ä¹‹ç±»çš„å­ç½‘æ®µè°ƒæ•´ã€‚åœ¨é‚£ä¸ªæ—¶åˆ» ZooKeeper å°†å¤„äºä¸å¯ç”¨çŠ¶æ€ã€‚å¦‚æœä¸šåŠ¡ç³»ç»Ÿé‡åº¦ä¾èµ– ZooKeeperï¼ˆæ¯”å¦‚ç”¨ Dubbo ä½œä¸º RPCï¼Œä¸”ä½¿ç”¨ ZooKeeper ä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼‰ï¼Œåˆ™ç³»ç»Ÿçš„å¯ç”¨æ€§å°†éå¸¸è„†å¼±ã€‚\nç”±äº ZooKeeper å¯¹äºç½‘ç»œéš”ç¦»çš„æåº¦æ•æ„Ÿï¼Œå¯¼è‡´ ZooKeeper å¯¹äºç½‘ç»œçš„ä»»ä½•é£å¹è‰åŠ¨éƒ½ä¼šåšå‡ºæ¿€çƒˆååº”ã€‚è¿™ä½¿å¾— ZooKeeper çš„ä¸å¯ç”¨æ—¶é—´æ¯”è¾ƒå¤šã€‚æˆ‘ä»¬ä¸èƒ½è®© ZooKeeper çš„ä¸å¯ç”¨ï¼Œå˜æˆç³»ç»Ÿçš„ä¸å¯ç”¨ã€‚\nZooKeeper çš„é€‰ä¸¾è¿‡ç¨‹é€Ÿåº¦å¾ˆæ…¢ äº’è”ç½‘ç¯å¢ƒä¸­ï¼Œç½‘ç»œä¸ç¨³å®šå‡ ä¹æ˜¯å¿…ç„¶çš„ï¼Œè€Œ ZooKeeper ç½‘ç»œéš”ç¦»éå¸¸æ•æ„Ÿã€‚ä¸€æ—¦å‡ºç°ç½‘ç»œéš”ç¦»ï¼Œzookeeper å°±è¦å‘èµ·é€‰ä¸¾æµç¨‹ã€‚\nZooKeeper çš„é€‰ä¸¾æµç¨‹é€šå¸¸è€—æ—¶ 30 åˆ° 120 ç§’ï¼ŒæœŸé—´ ZooKeeper ç”±äºæ²¡æœ‰ Leaderï¼Œéƒ½æ˜¯ä¸å¯ç”¨çš„ã€‚\nå¯¹äºç½‘ç»œé‡Œé¢å¶å°”å‡ºç°çš„ï¼Œæ¯”å¦‚åŠç§’ä¸€ç§’çš„ç½‘ç»œéš”ç¦»ï¼ŒZooKeeper ä¼šç”±äºé€‰ä¸¾è¿‡ç¨‹ï¼Œè€ŒæŠŠä¸å¯ç”¨æ—¶é—´æ”¾å¤§å‡ åå€ã€‚\nZooKeeper çš„æ€§èƒ½æ˜¯æœ‰é™çš„ å…¸å‹çš„ ZooKeeper çš„ TPS å¤§æ¦‚æ˜¯ä¸€ä¸‡å¤šï¼Œæ— æ³•æ”¯æ’‘æ¯å¤©åŠ¨è¾„å‡ åäº¿æ¬¡çš„è°ƒç”¨ã€‚å› æ­¤ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å» ZooKeeper è·å–ä¸šåŠ¡ç³»ç»Ÿä¿¡æ¯æ˜¯ä¸å¯èƒ½çš„ã€‚\nä¸ºæ­¤ï¼ŒZooKeeper çš„ client å¿…é¡»è‡ªå·±ç¼“å­˜ä¸šåŠ¡ç³»ç»Ÿçš„ä¿¡æ¯ã€‚è¿™å°±å¯¼è‡´ ZooKeeper æä¾›çš„å¼ºä¸€è‡´æ€§å®é™…ä¸Šæ˜¯åšä¸åˆ°çš„ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦å¼ºä¸€è‡´æ€§ï¼Œè¿˜éœ€è¦å…¶ä»–æœºåˆ¶æ¥è¿›è¡Œä¿éšœï¼šæ¯”å¦‚ç”¨è‡ªåŠ¨åŒ–è„šæœ¬æŠŠä¸šåŠ¡ç³»ç»Ÿçš„ old master ç»™ kill æ‰ï¼Œä½†æ˜¯è¿™å¯èƒ½ä¼šå¼•å‘å¾ˆå¤šå…¶ä»–é—®é¢˜ã€‚\nZooKeeper æ— æ³•è¿›è¡Œæœ‰æ•ˆçš„æƒé™æ§åˆ¶ ZooKeeper çš„æƒé™æ§åˆ¶éå¸¸å¼±ã€‚åœ¨å¤§å‹çš„å¤æ‚ç³»ç»Ÿé‡Œé¢ï¼Œä½¿ç”¨ ZooKeeper å¿…é¡»è‡ªå·±å†é¢å¤–çš„å¼€å‘ä¸€å¥—æƒé™æ§åˆ¶ç³»ç»Ÿï¼Œé€šè¿‡é‚£å¥—æƒé™æ§åˆ¶ç³»ç»Ÿå†è®¿é—® ZooKeeperã€‚\né¢å¤–çš„æƒé™æ§åˆ¶ç³»ç»Ÿä¸ä½†å¢åŠ äº†ç³»ç»Ÿå¤æ‚æ€§å’Œç»´æŠ¤æˆæœ¬ï¼Œè€Œä¸”é™ä½äº†ç³»ç»Ÿçš„æ€»ä½“æ€§èƒ½ã€‚\nå³ä½¿æœ‰äº† ZooKeeper ä¹Ÿå¾ˆéš¾é¿å…ä¸šåŠ¡ç³»ç»Ÿçš„æ•°æ®ä¸ä¸€è‡´ ç”±äº ZooKeeper çš„æ€§èƒ½é™åˆ¶ï¼Œæˆ‘ä»¬æ— æ³•è®©æ¯æ¬¡ç³»ç»Ÿå†…éƒ¨è°ƒç”¨éƒ½èµ° ZooKeeperï¼Œå› æ­¤æ€»æœ‰æŸäº›æ—¶åˆ»ï¼Œä¸šåŠ¡ç³»ç»Ÿä¼šå­˜åœ¨ä¸¤ä»½æ•°æ®ï¼ˆä¸šåŠ¡ç³»ç»Ÿ client é‚£è¾¹ç¼“å­˜çš„ä¸šåŠ¡ç³»ç»Ÿä¿¡æ¯æ˜¯å®šæ—¶ä» ZooKeeper æ›´æ–°çš„ï¼Œå› æ­¤ä¼šæœ‰æ›´æ–°ä¸åŒæ­¥çš„é—®é¢˜ï¼‰ã€‚\nå¦‚æœè¦ä¿æŒæ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œå”¯ä¸€çš„æ–¹æ³•æ˜¯å…ˆ kill æ‰å½“å‰ Leaderï¼Œå†åœ¨ ZooKeeper ä¸Šæ›´æ–° Leader ä¿¡æ¯ã€‚æ˜¯å¦è¦ kill æ‰å½“å‰ Leader è¿™ä¸ªé—®é¢˜ä¸Šï¼Œç¨‹åºæ˜¯æ— æ³•å®Œå…¨è‡ªåŠ¨å†³å®šçš„ï¼ˆå› ä¸ºç½‘ç»œéš”ç¦»çš„æ—¶å€™ ZooKeeper å·²ç»ä¸å¯ç”¨äº†ï¼Œè‡ªåŠ¨è„šæœ¬æ²¡æœ‰å…¨å±€ä¿¡æ¯ï¼Œä¸ç®¡æ€ä¹ˆåšéƒ½å¯èƒ½æ˜¯é”™çš„ï¼Œä»€ä¹ˆéƒ½ä¸åšä¹Ÿå¯èƒ½æ˜¯é”™çš„ã€‚å½“ç½‘ç»œæ•…éšœçš„æ—¶å€™ï¼Œåªæœ‰è¿ç»´äººå‘˜æ‰æœ‰å…¨å±€ä¿¡æ¯ï¼Œç¨‹åºæ˜¯æ— æ³•å¾—çŸ¥å…¶ä»–æœºæˆ¿çš„æƒ…å†µçš„ï¼‰ã€‚å› æ­¤ç³»ç»Ÿæ— æ³•è‡ªåŠ¨çš„ä¿éšœæ•°æ®ä¸€è‡´æ€§ï¼Œå¿…é¡»è¦äººå·¥ä»‹å…¥ã€‚è€Œäººå·¥ä»‹å…¥çš„å…¸å‹æ—¶é—´æ˜¯åŠä¸ªå°æ—¶ä»¥ä¸Šï¼Œæˆ‘ä»¬ä¸èƒ½è®©ç³»ç»Ÿè¿™ä¹ˆé•¿æ—¶é—´ä¸å¯ç”¨ã€‚å› æ­¤æˆ‘ä»¬å¿…é¡»åœ¨æŸä¸ªæ–¹å‘ä¸Šè¿›è¡Œå¦¥åï¼Œæœ€å¸¸è§çš„å¦¥åæ–¹å¼æ˜¯æ”¾å¼ƒå¼ºä¸€è‡´æ€§ï¼Œè€Œæ¥å—æœ€ç»ˆä¸€è‡´æ€§ã€‚\nå¦‚æœæˆ‘ä»¬éœ€è¦äººå·¥ä»‹å…¥æ‰èƒ½ä¿è¯å¯é çš„å¼ºä¸€è‡´æ€§ï¼Œé‚£ä¹ˆ ZooKeeper çš„ä»·å€¼å°±å¤§æ‰“æŠ˜æ‰£ã€‚\nResources å®˜æ–¹ ZooKeeper å®˜ç½‘ ZooKeeper å®˜æ–¹æ–‡æ¡£ ZooKeeper Github ä¹¦ç± ã€ŠHadoop æƒå¨æŒ‡å—ï¼ˆç¬¬å››ç‰ˆï¼‰ã€‹ ã€Šä» Paxos åˆ° Zookeeper åˆ†å¸ƒå¼ä¸€è‡´æ€§åŸç†ä¸å®è·µã€‹ æ–‡ç«  åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ ZooKeeper \u0026ndash; ç®¡ç†åˆ†å¸ƒå¼ç¯å¢ƒä¸­çš„æ•°æ® ZooKeeper çš„åŠŸèƒ½ä»¥åŠå·¥ä½œåŸç† ZooKeeper ç®€ä»‹åŠæ ¸å¿ƒæ¦‚å¿µ è¯¦è§£åˆ†å¸ƒå¼åè°ƒæœåŠ¡ ZooKeeper æ·±å…¥æµ…å‡º Zookeeperï¼ˆä¸€ï¼‰ Zookeeper æ¶æ„åŠ FastLeaderElection æœºåˆ¶ Introduction to Apache ZooKeeper Zookeeper çš„ä¼˜ç¼ºç‚¹ ","permalink":"https://WFUing.github.io/posts/tech/architecture/distributed/zookeeper/zookeeper-theory/","summary":"ZooKeeper ç®€ä»‹ ZooKeeper æ˜¯ä»€ä¹ˆ ZooKeeper æ˜¯ Apache çš„é¡¶çº§é¡¹ç›®ã€‚ZooKeeper ä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›äº†é«˜æ•ˆä¸”å¯é çš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œæä¾›äº†è¯¸å¦‚ç»Ÿä¸€å‘½åæœåŠ¡ã€é…ç½®ç®¡ç†å’Œåˆ†å¸ƒå¼é”ç­‰åˆ†å¸ƒå¼çš„åŸºç¡€æœåŠ¡ã€‚åœ¨è§£å†³åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§æ–¹é¢ï¼ŒZooKeeper å¹¶æ²¡æœ‰ç›´æ¥é‡‡ç”¨ Paxos ç®—æ³•ï¼Œè€Œæ˜¯é‡‡ç”¨äº†åä¸º ZAB çš„ä¸€è‡´æ€§åè®®ã€‚\nZooKeeper ä¸»è¦ç”¨æ¥è§£å†³åˆ†å¸ƒå¼é›†ç¾¤ä¸­åº”ç”¨ç³»ç»Ÿçš„ä¸€è‡´æ€§é—®é¢˜ï¼Œå®ƒèƒ½æä¾›åŸºäºç±»ä¼¼äºæ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•èŠ‚ç‚¹æ ‘æ–¹å¼çš„æ•°æ®å­˜å‚¨ã€‚ä½†æ˜¯ ZooKeeper å¹¶ä¸æ˜¯ç”¨æ¥ä¸“é—¨å­˜å‚¨æ•°æ®çš„ï¼Œå®ƒçš„ä½œç”¨ä¸»è¦æ˜¯ç”¨æ¥ç»´æŠ¤å’Œç›‘æ§å­˜å‚¨æ•°æ®çš„çŠ¶æ€å˜åŒ–ã€‚é€šè¿‡ç›‘æ§è¿™äº›æ•°æ®çŠ¶æ€çš„å˜åŒ–ï¼Œä»è€Œå¯ä»¥è¾¾åˆ°åŸºäºæ•°æ®çš„é›†ç¾¤ç®¡ç†ã€‚\nå¾ˆå¤šå¤§åé¼é¼çš„æ¡†æ¶éƒ½åŸºäº ZooKeeper æ¥å®ç°åˆ†å¸ƒå¼é«˜å¯ç”¨ï¼Œå¦‚ï¼šDubboã€Kafka ç­‰ã€‚\nZooKeeper å®˜æ–¹æ”¯æŒ Java å’Œ C çš„ Client APIã€‚ZooKeeper ç¤¾åŒºä¸ºå¤§å¤šæ•°è¯­è¨€ï¼ˆ.NETï¼Œpython ç­‰ï¼‰æä¾›éå®˜æ–¹ APIã€‚\nZooKeeper çš„åº”ç”¨åœºæ™¯ é…ç½®ç®¡ç† é›†ç¾¤èŠ‚ç‚¹å¯ä»¥é€šè¿‡ä¸­å¿ƒæºè·å–å¯åŠ¨é…ç½® æ›´ç®€å•çš„éƒ¨ç½² åˆ†å¸ƒå¼é›†ç¾¤ç®¡ç† èŠ‚ç‚¹åŠ å…¥/ç¦»å¼€ èŠ‚ç‚¹çš„å®æ—¶çŠ¶æ€ å‘½åæœåŠ¡ï¼Œå¦‚ï¼šDNS åˆ†å¸ƒå¼åŒæ­¥ï¼šå¦‚é”ã€æ …æ ã€é˜Ÿåˆ— åˆ†å¸ƒå¼ç³»ç»Ÿçš„é€‰ä¸» ä¸­å¿ƒåŒ–å’Œé«˜å¯é çš„æ•°æ®æ³¨å†Œ ZooKeeper çš„ç‰¹æ€§ ZooKeeper å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š\né¡ºåºä¸€è‡´æ€§ - æ‰€æœ‰å®¢æˆ·ç«¯çœ‹åˆ°çš„æœåŠ¡ç«¯æ•°æ®æ¨¡å‹éƒ½æ˜¯ä¸€è‡´çš„ã€‚ä»ä¸€ä¸ªå®¢æˆ·ç«¯å‘èµ·çš„äº‹åŠ¡è¯·æ±‚ï¼Œæœ€ç»ˆéƒ½ä¼šä¸¥æ ¼æŒ‰ç…§å…¶å‘èµ·é¡ºåºè¢«åº”ç”¨åˆ° ZooKeeper ä¸­ã€‚å…·ä½“çš„å®ç°å¯è§ï¼šåŸå­å¹¿æ’­ åŸå­æ€§ - æ‰€æœ‰äº‹åŠ¡è¯·æ±‚çš„å¤„ç†ç»“æœåœ¨æ•´ä¸ªé›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨ä¸Šçš„åº”ç”¨æƒ…å†µæ˜¯ä¸€è‡´çš„ï¼Œå³æ•´ä¸ªé›†ç¾¤è¦ä¹ˆéƒ½æˆåŠŸåº”ç”¨äº†æŸä¸ªäº‹åŠ¡ï¼Œè¦ä¹ˆéƒ½æ²¡æœ‰åº”ç”¨ã€‚ å®ç°æ–¹å¼å¯è§ï¼šäº‹åŠ¡ å•ä¸€è§†å›¾ - æ— è®ºå®¢æˆ·ç«¯è¿æ¥çš„æ˜¯å“ªä¸ª Zookeeper æœåŠ¡å™¨ï¼Œå…¶çœ‹åˆ°çš„æœåŠ¡ç«¯æ•°æ®æ¨¡å‹éƒ½æ˜¯ä¸€è‡´çš„ã€‚ é«˜æ€§èƒ½ - ZooKeeper å°†æ•°æ®å…¨é‡å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥å…¶æ€§èƒ½å¾ˆé«˜ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šç”±äº ZooKeeper çš„æ‰€æœ‰æ›´æ–°å’Œåˆ é™¤éƒ½æ˜¯åŸºäºäº‹åŠ¡çš„ï¼Œå› æ­¤ ZooKeeper åœ¨è¯»å¤šå†™å°‘çš„åº”ç”¨åœºæ™¯ä¸­æœ‰æ€§èƒ½è¡¨ç°è¾ƒå¥½ï¼Œå¦‚æœå†™æ“ä½œé¢‘ç¹ï¼Œæ€§èƒ½ä¼šå¤§å¤§ä¸‹æ»‘ã€‚ é«˜å¯ç”¨ - ZooKeeper çš„é«˜å¯ç”¨æ˜¯åŸºäºå‰¯æœ¬æœºåˆ¶å®ç°çš„ï¼Œæ­¤å¤– ZooKeeper æ”¯æŒæ•…éšœæ¢å¤ï¼Œå¯è§ï¼šé€‰ä¸¾ Leader ZooKeeper çš„è®¾è®¡ç›®æ ‡ ç®€å•çš„æ•°æ®æ¨¡å‹ï¼šZooKeeper çš„æ•°æ®æ¨¡å‹æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ ‘ä¸­çš„èŠ‚ç‚¹è¢«ç§°ä¸º znodeã€‚ å¯ä»¥æ„å»ºé›†ç¾¤ï¼šZooKeeper æ”¯æŒé›†ç¾¤æ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡ä¼¸ç¼©æ€§ï¼Œæ¥æ§åˆ¶é›†ç¾¤çš„ååé‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šç”±äº ZooKeeper é‡‡ç”¨ä¸€ä¸»å¤šä»æ¶æ„ï¼Œæ‰€ä»¥å…¶å†™æ€§èƒ½æ˜¯æœ‰ä¸Šé™çš„ï¼Œæ¯”è¾ƒé€‚åˆäºè¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚ é¡ºåºè®¿é—®ï¼šå¯¹äºæ¥è‡ªå®¢æˆ·ç«¯çš„æ¯ä¸ªæ›´æ–°è¯·æ±‚ï¼ŒZookeeper éƒ½ä¼šåˆ†é…ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„é€’å¢ IDï¼Œè¿™ä¸ª ID åæ˜ äº†æ‰€æœ‰äº‹åŠ¡è¯·æ±‚çš„å…ˆåé¡ºåºã€‚ é«˜æ€§èƒ½ã€é«˜å¯ç”¨ï¼šZooKeeper å°†æ•°æ®å­˜å…¨é‡å‚¨åœ¨å†…å­˜ä¸­ä»¥ä¿æŒé«˜æ€§èƒ½ï¼Œå¹¶é€šè¿‡æœåŠ¡é›†ç¾¤æ¥å®ç°é«˜å¯ç”¨ï¼Œç”±äº Zookeeper çš„æ‰€æœ‰æ›´æ–°å’Œåˆ é™¤éƒ½æ˜¯åŸºäºäº‹åŠ¡çš„ï¼Œæ‰€ä»¥å…¶åœ¨è¯»å¤šå†™å°‘çš„åº”ç”¨åœºæ™¯ä¸­æœ‰ç€å¾ˆé«˜çš„æ€§èƒ½è¡¨ç°ã€‚ ZooKeeper æ ¸å¿ƒæ¦‚å¿µ æœåŠ¡ Zookeeper æœåŠ¡æ˜¯ä¸€ä¸ªåŸºäºä¸»ä»å¤åˆ¶çš„é«˜å¯ç”¨é›†ç¾¤ï¼Œé›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½å­˜å‚¨äº†ä¸€ä»½æ•°æ®å‰¯æœ¬ï¼ˆå†…å­˜ä¸­ï¼‰ã€‚","title":"Zookeeper åŸç†"},{"content":"ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿ å°†ç¡¬ä»¶æˆ–è½¯ä»¶ç»„ä»¶(æœåŠ¡)åˆ†å¸ƒåœ¨ä¸åŒçš„ç½‘ç»œè®¡ç®—æœºä¸Šï¼Œå¹¶ä¸”é€šè¿‡æ¶ˆæ¯ä¼ é€’è¿›è¡Œé€šä¿¡å’Œåè°ƒã€‚\nç‰¹ç‚¹\nåˆ†å¸ƒæ€§ å¯¹ç­‰æ€§ å¹³ç­‰: æ— ä¸»ä»ä¹‹åˆ† ç‹¬ç«‹: æ‹¥æœ‰è‡ªå·±çš„CPUå’Œå†…å­˜ï¼Œç‹¬ç«‹å¤„ç†æ•°æ® å¹¶å‘æ€§ å¤–éƒ¨: æ‰¿è½½å¤šä¸ªå®¢æˆ·ç«¯çš„å¹¶å‘è®¿é—® å†…éƒ¨: ä½œä¸š(Job)è¢«åˆ†è§£æˆå¤šä¸ªä»»åŠ¡(Task)ï¼Œå¹¶å‘è¿è¡Œåœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Š æ•…éšœç‹¬ç«‹æ€§ éƒ¨åˆ†èŠ‚ç‚¹å‡ºç°æ•…éšœä¸å½±å“æ•´ä¸ªç³»ç»Ÿçš„æ­£å¸¸ä½¿ç”¨ split-brain é—®é¢˜ å¯¹äºä¸€ä¸ªé›†ç¾¤ï¼Œæƒ³è¦æé«˜è¿™ä¸ªé›†ç¾¤çš„å¯ç”¨æ€§ï¼Œé€šå¸¸ä¼šé‡‡ç”¨å¤šæœºæˆ¿éƒ¨ç½²ï¼Œæ¯”å¦‚ç°åœ¨æœ‰ä¸€ä¸ªç”±6å°zkServeræ‰€ç»„æˆçš„ä¸€ä¸ªé›†ç¾¤ï¼Œéƒ¨ç½²åœ¨äº†ä¸¤ä¸ªæœºæˆ¿ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ­¤é›†ç¾¤åªä¼šæœ‰ä¸€ä¸ªLeaderï¼Œé‚£ä¹ˆå¦‚æœæœºæˆ¿ä¹‹é—´çš„ç½‘ç»œæ–­äº†ä¹‹åï¼Œä¸¤ä¸ªæœºæˆ¿å†…çš„zkServerè¿˜æ˜¯å¯ä»¥ç›¸äº’é€šä¿¡çš„ï¼Œä½†æœºæˆ¿ä¹‹é—´æ— æ³•é€šä¿¡ã€‚å¦‚æœä¸è€ƒè™‘è¿‡åŠæœºåˆ¶ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°æ¯ä¸ªæœºæˆ¿å†…éƒ¨éƒ½å°†é€‰å‡ºä¸€ä¸ªLeaderã€‚è¿™å°±ç›¸å½“äºåŸæœ¬ä¸€ä¸ªé›†ç¾¤ï¼Œè¢«åˆ†æˆäº†ä¸¤ä¸ªé›†ç¾¤ï¼Œå‡ºç°äº†ä¸¤ä¸ªå¤§è„‘ï¼Œè¿™å°±æ˜¯è„‘è£‚ã€‚\nè„‘è£‚ å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼ŒåŸæœ¬åº”è¯¥æ˜¯ç»Ÿä¸€çš„ä¸€ä¸ªé›†ç¾¤å¯¹å¤–æä¾›æœåŠ¡çš„ï¼Œç°åœ¨å˜æˆäº†ä¸¤ä¸ªé›†ç¾¤åŒæ—¶å¯¹å¤–æä¾›æœåŠ¡ï¼Œå¦‚æœè¿‡äº†ä¸€ä¼šï¼Œæ–­äº†çš„ç½‘ç»œçªç„¶è”é€šäº†ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±ä¼šå‡ºç°é—®é¢˜äº†ï¼Œä¸¤ä¸ªé›†ç¾¤åˆšåˆšéƒ½å¯¹å¤–æä¾›æœåŠ¡äº†ï¼Œæ•°æ®è¯¥æ€ä¹ˆåˆå¹¶ï¼Œæ•°æ®å†²çªæ€ä¹ˆè§£å†³ç­‰ç­‰é—®é¢˜ã€‚\nCAPå®šç† C(Consistencyï¼Œä¸€è‡´æ€§) å«ä¹‰: åŒä¸€æ—¶åˆ»ï¼Œæ•°æ®åœ¨ä¸åŒèŠ‚ç‚¹çš„å¤šä¸ªå‰¯æœ¬æ˜¯å¦å…·æœ‰å®Œå…¨ç›¸åŒçš„å€¼ ç±»å‹ å¼ºä¸€è‡´æ€§: æ•°æ®æ›´æ–°å®Œæˆåï¼ŒåŒä¸€æ—¶åˆ»ï¼Œä¸åŒçš„è¯»æ“ä½œéƒ½èƒ½è·å¾—æœ€æ–°çš„å€¼ å¼±ä¸€è‡´æ€§: æ•°æ®æ›´æ–°å®Œæˆåï¼ŒåŒä¸€æ—¶åˆ»ï¼Œä¸åŒçš„è¯»æ“ä½œä¸ä¸€å®šéƒ½èƒ½è·å¾—æœ€æ–°çš„å€¼ï¼Œä¹Ÿæ— æ³•ä¿è¯å¤šé•¿æ—¶é—´ä¹‹åå¯ä»¥è·å¾—æœ€æ–°çš„å€¼ A(Availabilityï¼Œå¯ç”¨æ€§) å«ä¹‰: å¯¹äºæ¯ä¸€æ¬¡è¯·æ±‚ï¼Œç³»ç»Ÿæ˜¯å¦éƒ½èƒ½åœ¨æœ‰é™(æŒ‡å®š)çš„æ—¶é—´å†…åšå‡ºå“åº” P(Partition Toleranceï¼Œåˆ†åŒºå®¹é”™æ€§) å«ä¹‰: å½“å‘ç”Ÿç½‘ç»œåˆ†åŒºæ—¶ï¼Œç³»ç»Ÿä»èƒ½å¯¹å¤–æä¾›æ»¡è¶³ ä¸€è‡´æ€§C å’Œ å¯ç”¨æ€§A çš„æœåŠ¡ CAPå®šç† åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨åŒä¸€æ—¶é—´ç‰‡æ®µå†…ï¼Œä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§Cã€å¯ç”¨æ€§Aå’Œåˆ†åŒºå®¹é”™æ€§Pï¼Œæœ€å¤šåªèƒ½æ»¡è¶³å…¶ä¸­çš„ä¸¤é¡¹ã€‚\næ»¡è¶³æ„å‘³ç€100%ï¼Œ æ»¡è¶³C -\u0026gt; æ»¡è¶³å¼ºä¸€è‡´æ€§ æ»¡è¶³A -\u0026gt; æ»¡è¶³ç»å¯¹å¯ç”¨æ€§ å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿè€Œè¨€ï¼Œç½‘ç»œåˆ†åŒºæ— æ³•é¿å…ï¼Œæ»¡è¶³Pæ˜¯å‰ææ¡ä»¶ï¼Œæ‰€ä»¥ä¸å¯èƒ½é€‰æ‹©CAæ¶æ„ï¼Œåªèƒ½é€‰æ‹©CPæˆ–APæ¶æ„ ä¾‹å¦‚: å‘ç”Ÿç½‘ç»œåˆ†åŒºæ—¶ï¼ŒæŸä¸ªèŠ‚ç‚¹æ­£åœ¨è¿›è¡Œå†™æ“ä½œ å¦‚æœä¸ºäº†ä¿è¯Cï¼Œå¿…é¡»ç¦æ­¢å…¶ä»–èŠ‚ç‚¹çš„è¯»å†™æ“ä½œï¼Œé‚£å°±ä¸Aå†²çªäº† å¦‚æœä¸ºäº†ä¿è¯Aï¼Œå…¶ä»–èŠ‚ç‚¹æ­£å¸¸è¯»å†™ï¼Œé‚£å°±ä¸Cå†²çªäº† é€‰æ‹©CPæˆ–APæ¶æ„ï¼Œå…³é”®åœ¨ä¸šåŠ¡åœºæ™¯ ä¾‹å¦‚: å¯¹äºå¿…é¡»ç¡®ä¿å¼ºä¸€è‡´æ€§çš„é“¶è¡Œä¸šåŠ¡ï¼Œåªèƒ½é€‰æ‹©CP BASEç†è®º BA(Basically Availabilityï¼ŒåŸºæœ¬å¯ç”¨æ€§) å½“ç³»ç»Ÿå‘ç”Ÿæ•…éšœæ—¶ï¼Œåœ¨ç¡®ä¿æ ¸å¿ƒåŠŸèƒ½å’ŒæŒ‡æ ‡æœ‰æ•ˆçš„æå‰ä¸‹ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ï¼ŒåŒ…æ‹¬å“åº”æ—¶é—´ä¸Šçš„æŸå¤±ã€éæ ¸å¿ƒåŠŸèƒ½ä¸Šçš„æŸå¤±ç­‰ S(Soft Stateï¼Œè½¯çŠ¶æ€) å…è®¸æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€(æš‚æ—¶æœªæ›´æ–°)ï¼Œä¸”è¯¥çŠ¶æ€ä¸ä¼šå½±å“æ•´ä½“å¯ç”¨æ€§ å…è®¸ä¸åŒèŠ‚ç‚¹ä¸Šçš„æ•°æ®å‰¯æœ¬çš„åŒæ­¥è¿‡ç¨‹å­˜åœ¨ä¸€å®šå»¶æ—¶ EC(Eventually Consistencyï¼Œæœ€ç»ˆä¸€è‡´æ€§) åˆ†å¸ƒåœ¨ä¸åŒèŠ‚ç‚¹ä¸Šçš„æ•°æ®å‰¯æœ¬ï¼Œåœ¨ç»è¿‡ä¸€å®šæ—¶é—´çš„åŒæ­¥åï¼Œæœ€ç»ˆè¾¾åˆ°ä¸€è‡´çŠ¶æ€ ä¾‹å¦‚: Zookeeperã€HDFS QJMå†™äº‹åŠ¡çš„è¿‡åŠç­–ç•¥ å¼±ä¸€è‡´æ€§çš„å‡çº§ç‰ˆ BASEå®šç† åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨æ»¡è¶³åˆ†åŒºå®¹é”™æ€§Pçš„åŒæ—¶ï¼Œå…è®¸æ•°æ®è½¯çŠ¶æ€Sçš„å­˜åœ¨ï¼Œå¹¶å®ç°åŸºæœ¬å¯ç”¨æ€§BAå’Œæœ€ç»ˆä¸€è‡´æ€§EC\nåœ¨æ»¡è¶³Pçš„å‰æä¸‹ï¼Œå¯¹CAPä¸­çš„å¼ºä¸€è‡´æ€§Aå’Œç»å¯¹å¯ç”¨æ€§Cè¿›è¡Œé€‚åº¦å¦¥å A -\u0026gt; BA ï¼ŒC -\u0026gt; EC é€šè¿‡å®¹å¿éƒ¨åˆ†æ•°æ®çš„æš‚æ—¶ä¸ä¸€è‡´(è½¯çŠ¶æ€)ï¼Œå³ç‰ºç‰²æ•°æ®çš„å¼ºä¸€è‡´æ€§(ç¡®ä¿æœ€ç»ˆä¸€è‡´æ€§)ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½å’ŒæŒ‡æ ‡æœ‰æ•ˆ(åŸºæœ¬å¯ç”¨) CAPå®šç†çš„å»¶ä¼¸ï¼ŒCAPçš„ C+P / A+P -\u0026gt; BASEçš„EC+BA+P å¯¹å¤§è§„æ¨¡äº’è”ç½‘ç³»ç»Ÿåˆ†å¸ƒå¼å®è·µçš„æ€»ç»“ ","permalink":"https://WFUing.github.io/posts/tech/architecture/distributed/overview/","summary":"ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿ å°†ç¡¬ä»¶æˆ–è½¯ä»¶ç»„ä»¶(æœåŠ¡)åˆ†å¸ƒåœ¨ä¸åŒçš„ç½‘ç»œè®¡ç®—æœºä¸Šï¼Œå¹¶ä¸”é€šè¿‡æ¶ˆæ¯ä¼ é€’è¿›è¡Œé€šä¿¡å’Œåè°ƒã€‚\nç‰¹ç‚¹\nåˆ†å¸ƒæ€§ å¯¹ç­‰æ€§ å¹³ç­‰: æ— ä¸»ä»ä¹‹åˆ† ç‹¬ç«‹: æ‹¥æœ‰è‡ªå·±çš„CPUå’Œå†…å­˜ï¼Œç‹¬ç«‹å¤„ç†æ•°æ® å¹¶å‘æ€§ å¤–éƒ¨: æ‰¿è½½å¤šä¸ªå®¢æˆ·ç«¯çš„å¹¶å‘è®¿é—® å†…éƒ¨: ä½œä¸š(Job)è¢«åˆ†è§£æˆå¤šä¸ªä»»åŠ¡(Task)ï¼Œå¹¶å‘è¿è¡Œåœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Š æ•…éšœç‹¬ç«‹æ€§ éƒ¨åˆ†èŠ‚ç‚¹å‡ºç°æ•…éšœä¸å½±å“æ•´ä¸ªç³»ç»Ÿçš„æ­£å¸¸ä½¿ç”¨ split-brain é—®é¢˜ å¯¹äºä¸€ä¸ªé›†ç¾¤ï¼Œæƒ³è¦æé«˜è¿™ä¸ªé›†ç¾¤çš„å¯ç”¨æ€§ï¼Œé€šå¸¸ä¼šé‡‡ç”¨å¤šæœºæˆ¿éƒ¨ç½²ï¼Œæ¯”å¦‚ç°åœ¨æœ‰ä¸€ä¸ªç”±6å°zkServeræ‰€ç»„æˆçš„ä¸€ä¸ªé›†ç¾¤ï¼Œéƒ¨ç½²åœ¨äº†ä¸¤ä¸ªæœºæˆ¿ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ­¤é›†ç¾¤åªä¼šæœ‰ä¸€ä¸ªLeaderï¼Œé‚£ä¹ˆå¦‚æœæœºæˆ¿ä¹‹é—´çš„ç½‘ç»œæ–­äº†ä¹‹åï¼Œä¸¤ä¸ªæœºæˆ¿å†…çš„zkServerè¿˜æ˜¯å¯ä»¥ç›¸äº’é€šä¿¡çš„ï¼Œä½†æœºæˆ¿ä¹‹é—´æ— æ³•é€šä¿¡ã€‚å¦‚æœä¸è€ƒè™‘è¿‡åŠæœºåˆ¶ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°æ¯ä¸ªæœºæˆ¿å†…éƒ¨éƒ½å°†é€‰å‡ºä¸€ä¸ªLeaderã€‚è¿™å°±ç›¸å½“äºåŸæœ¬ä¸€ä¸ªé›†ç¾¤ï¼Œè¢«åˆ†æˆäº†ä¸¤ä¸ªé›†ç¾¤ï¼Œå‡ºç°äº†ä¸¤ä¸ªå¤§è„‘ï¼Œè¿™å°±æ˜¯è„‘è£‚ã€‚\nè„‘è£‚ å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼ŒåŸæœ¬åº”è¯¥æ˜¯ç»Ÿä¸€çš„ä¸€ä¸ªé›†ç¾¤å¯¹å¤–æä¾›æœåŠ¡çš„ï¼Œç°åœ¨å˜æˆäº†ä¸¤ä¸ªé›†ç¾¤åŒæ—¶å¯¹å¤–æä¾›æœåŠ¡ï¼Œå¦‚æœè¿‡äº†ä¸€ä¼šï¼Œæ–­äº†çš„ç½‘ç»œçªç„¶è”é€šäº†ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±ä¼šå‡ºç°é—®é¢˜äº†ï¼Œä¸¤ä¸ªé›†ç¾¤åˆšåˆšéƒ½å¯¹å¤–æä¾›æœåŠ¡äº†ï¼Œæ•°æ®è¯¥æ€ä¹ˆåˆå¹¶ï¼Œæ•°æ®å†²çªæ€ä¹ˆè§£å†³ç­‰ç­‰é—®é¢˜ã€‚\nCAPå®šç† C(Consistencyï¼Œä¸€è‡´æ€§) å«ä¹‰: åŒä¸€æ—¶åˆ»ï¼Œæ•°æ®åœ¨ä¸åŒèŠ‚ç‚¹çš„å¤šä¸ªå‰¯æœ¬æ˜¯å¦å…·æœ‰å®Œå…¨ç›¸åŒçš„å€¼ ç±»å‹ å¼ºä¸€è‡´æ€§: æ•°æ®æ›´æ–°å®Œæˆåï¼ŒåŒä¸€æ—¶åˆ»ï¼Œä¸åŒçš„è¯»æ“ä½œéƒ½èƒ½è·å¾—æœ€æ–°çš„å€¼ å¼±ä¸€è‡´æ€§: æ•°æ®æ›´æ–°å®Œæˆåï¼ŒåŒä¸€æ—¶åˆ»ï¼Œä¸åŒçš„è¯»æ“ä½œä¸ä¸€å®šéƒ½èƒ½è·å¾—æœ€æ–°çš„å€¼ï¼Œä¹Ÿæ— æ³•ä¿è¯å¤šé•¿æ—¶é—´ä¹‹åå¯ä»¥è·å¾—æœ€æ–°çš„å€¼ A(Availabilityï¼Œå¯ç”¨æ€§) å«ä¹‰: å¯¹äºæ¯ä¸€æ¬¡è¯·æ±‚ï¼Œç³»ç»Ÿæ˜¯å¦éƒ½èƒ½åœ¨æœ‰é™(æŒ‡å®š)çš„æ—¶é—´å†…åšå‡ºå“åº” P(Partition Toleranceï¼Œåˆ†åŒºå®¹é”™æ€§) å«ä¹‰: å½“å‘ç”Ÿç½‘ç»œåˆ†åŒºæ—¶ï¼Œç³»ç»Ÿä»èƒ½å¯¹å¤–æä¾›æ»¡è¶³ ä¸€è‡´æ€§C å’Œ å¯ç”¨æ€§A çš„æœåŠ¡ CAPå®šç† åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨åŒä¸€æ—¶é—´ç‰‡æ®µå†…ï¼Œä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§Cã€å¯ç”¨æ€§Aå’Œåˆ†åŒºå®¹é”™æ€§Pï¼Œæœ€å¤šåªèƒ½æ»¡è¶³å…¶ä¸­çš„ä¸¤é¡¹ã€‚\næ»¡è¶³æ„å‘³ç€100%ï¼Œ æ»¡è¶³C -\u0026gt; æ»¡è¶³å¼ºä¸€è‡´æ€§ æ»¡è¶³A -\u0026gt; æ»¡è¶³ç»å¯¹å¯ç”¨æ€§ å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿè€Œè¨€ï¼Œç½‘ç»œåˆ†åŒºæ— æ³•é¿å…ï¼Œæ»¡è¶³Pæ˜¯å‰ææ¡ä»¶ï¼Œæ‰€ä»¥ä¸å¯èƒ½é€‰æ‹©CAæ¶æ„ï¼Œåªèƒ½é€‰æ‹©CPæˆ–APæ¶æ„ ä¾‹å¦‚: å‘ç”Ÿç½‘ç»œåˆ†åŒºæ—¶ï¼ŒæŸä¸ªèŠ‚ç‚¹æ­£åœ¨è¿›è¡Œå†™æ“ä½œ å¦‚æœä¸ºäº†ä¿è¯Cï¼Œå¿…é¡»ç¦æ­¢å…¶ä»–èŠ‚ç‚¹çš„è¯»å†™æ“ä½œï¼Œé‚£å°±ä¸Aå†²çªäº† å¦‚æœä¸ºäº†ä¿è¯Aï¼Œå…¶ä»–èŠ‚ç‚¹æ­£å¸¸è¯»å†™ï¼Œé‚£å°±ä¸Cå†²çªäº† é€‰æ‹©CPæˆ–APæ¶æ„ï¼Œå…³é”®åœ¨ä¸šåŠ¡åœºæ™¯ ä¾‹å¦‚: å¯¹äºå¿…é¡»ç¡®ä¿å¼ºä¸€è‡´æ€§çš„é“¶è¡Œä¸šåŠ¡ï¼Œåªèƒ½é€‰æ‹©CP BASEç†è®º BA(Basically Availabilityï¼ŒåŸºæœ¬å¯ç”¨æ€§) å½“ç³»ç»Ÿå‘ç”Ÿæ•…éšœæ—¶ï¼Œåœ¨ç¡®ä¿æ ¸å¿ƒåŠŸèƒ½å’ŒæŒ‡æ ‡æœ‰æ•ˆçš„æå‰ä¸‹ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ï¼ŒåŒ…æ‹¬å“åº”æ—¶é—´ä¸Šçš„æŸå¤±ã€éæ ¸å¿ƒåŠŸèƒ½ä¸Šçš„æŸå¤±ç­‰ S(Soft Stateï¼Œè½¯çŠ¶æ€) å…è®¸æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€(æš‚æ—¶æœªæ›´æ–°)ï¼Œä¸”è¯¥çŠ¶æ€ä¸ä¼šå½±å“æ•´ä½“å¯ç”¨æ€§ å…è®¸ä¸åŒèŠ‚ç‚¹ä¸Šçš„æ•°æ®å‰¯æœ¬çš„åŒæ­¥è¿‡ç¨‹å­˜åœ¨ä¸€å®šå»¶æ—¶ EC(Eventually Consistencyï¼Œæœ€ç»ˆä¸€è‡´æ€§) åˆ†å¸ƒåœ¨ä¸åŒèŠ‚ç‚¹ä¸Šçš„æ•°æ®å‰¯æœ¬ï¼Œåœ¨ç»è¿‡ä¸€å®šæ—¶é—´çš„åŒæ­¥åï¼Œæœ€ç»ˆè¾¾åˆ°ä¸€è‡´çŠ¶æ€ ä¾‹å¦‚: Zookeeperã€HDFS QJMå†™äº‹åŠ¡çš„è¿‡åŠç­–ç•¥ å¼±ä¸€è‡´æ€§çš„å‡çº§ç‰ˆ BASEå®šç† åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨æ»¡è¶³åˆ†åŒºå®¹é”™æ€§Pçš„åŒæ—¶ï¼Œå…è®¸æ•°æ®è½¯çŠ¶æ€Sçš„å­˜åœ¨ï¼Œå¹¶å®ç°åŸºæœ¬å¯ç”¨æ€§BAå’Œæœ€ç»ˆä¸€è‡´æ€§EC","title":"åˆ†å¸ƒå¼ç³»ç»Ÿæ¦‚è¿°"},{"content":"Background IIoTï¼ˆå·¥ä¸šç‰©è”ç½‘ï¼‰æ¶æ„é€šå¸¸æ˜¯åˆ†å¸ƒå¼å’Œå¼‚æ­¥çš„ï¼Œé€šä¿¡ç”±äº‹ä»¶é©±åŠ¨ï¼Œå¦‚æ¶ˆæ¯çš„å‘å¸ƒï¼ˆå’Œç›¸åº”çš„è®¢é˜…ï¼‰ã€‚è¿™äº›å¼‚æ­¥æ¶æ„æé«˜äº†å¯æ‰©å±•æ€§å’Œå¯¹å˜åŒ–çš„è€å—æ€§ï¼Œä½†ä¹Ÿå¼•å‘äº†äº’æ“ä½œæ€§é—®é¢˜ï¼Œå› ä¸ºæ¶æ„å„å…ƒç´ ä¹‹é—´å¯¹æ¶ˆæ¯å†…éƒ¨ç»“æ„åŠå…¶åˆ†ç±»ï¼ˆä¸»é¢˜ï¼‰çš„æ˜ç¡®çŸ¥è¯†è¢«ç¨€é‡Šäº†ã€‚\näº‹å®ä¸Šï¼Œè¿™ä¹Ÿæ˜¯ REST åº”ç”¨ç¨‹åºæ¥å£é¢ä¸´çš„ä¸€ä¸ªé—®é¢˜ï¼Œç›´åˆ°ä¸šç•Œè”åˆèµ·æ¥ï¼Œæå‡ºäº†ä¸€ç§å®šä¹‰åŒæ­¥åº”ç”¨ç¨‹åºæ¥å£ç»“æ„å’Œæ¨¡å¼çš„æ ‡å‡†æ–¹æ³•ï¼šOpenAPIï¼ˆæºè‡ª Swaggerï¼‰ã€‚\nIntroduction å¯¹äºå¼‚æ­¥æ¶æ„ï¼Œå— OpenAPI çš„å¯å‘ï¼ŒAsyncAPI çš„å‡ºç°è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼š\nAsyncAPI æä¾›äº†ä¸€ç§è§„èŒƒï¼Œå…è®¸æ‚¨ä»¥æœºå™¨å¯è¯»çš„æ ¼å¼å®šä¹‰æ¶ˆæ¯é©±åŠ¨çš„ APIã€‚å®ƒä¸åè®®æ— å…³ï¼Œå› æ­¤å¯ä»¥ç”¨äºé€šè¿‡ Kafkaã€MQTTã€AMQPã€WebSocketsã€STOMP ç­‰å·¥ä½œçš„ APIã€‚è¯¥è§„èŒƒä¸ OpenAPI/Swagger éå¸¸ç›¸ä¼¼ï¼Œæ‰€ä»¥å¦‚æœä½ ç†Ÿæ‚‰å®ƒï¼ŒAsyncAPI å¯¹ä½ æ¥è¯´åº”è¯¥å¾ˆå®¹æ˜“ã€‚\nåœ¨ AsyncAPI ä¸­ï¼ŒAPI çš„è§„æ ¼å¯ä»¥ç”¨ YAML æˆ– JSON å®šä¹‰ï¼Œä¾‹å¦‚å¯ä»¥æŒ‡å®šæ¶ˆæ¯ä»£ç†ã€æ„Ÿå…´è¶£çš„ä¸»é¢˜æˆ–ä¸æ¯ä¸ªä¸»é¢˜ç›¸å…³çš„ä¸åŒæ¶ˆæ¯æ ¼å¼ç­‰ã€‚ä¸è¿‡ï¼ŒAsyncAPI è¿˜å¤„äºå¼€å‘çš„æ—©æœŸé˜¶æ®µï¼ŒAsyncAPI å·¥å…·å¸‚åœºè¿˜ä¸å‘è¾¾ï¼Œä¸»è¦å±€é™äºç”Ÿæˆä¾›äººç±»ä½¿ç”¨çš„æ–‡æ¡£ã€‚\nAsyncAPI æœ€åˆçš„è´¡çŒ®å°±æ˜¯ä¸Šå›¾ä¸­å±•ç¤ºçš„æ–¹æ³•ã€‚\nAsyncAPI Toolkit å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒAsyncAPI å›¢é˜Ÿæ‰©å±•äº†è¿™ä¸€åˆå§‹æ¡†æ¶ã€‚åŸºäº AsyncAPI è§„èŒƒåœ¨ Xtext ä¸­å¼€å‘ AsyncAPI JSON è¯­æ³•çš„ï¼Œè¯¥è¯­æ³•å¯éªŒè¯ç¬¦åˆ AsyncAPI è§„èŒƒçš„æ¶ˆæ¯é©±åŠ¨ API å®šä¹‰ã€‚åŒæ ·ï¼Œæ ¹æ®è¯¥è¯­æ³•ï¼ŒXtext ä¼šè‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„ AsyncAPI å…ƒæ¨¡å‹å’Œæ‰€æœ‰å·¥å…·ï¼ˆå¸¦å†…å®¹è¾…åŠ©åŠŸèƒ½çš„ç¼–è¾‘å™¨ã€è§£æå™¨ç­‰ï¼‰ï¼Œä»¥ä¾¿è½»æ¾åˆ›å»º AsyncAPI JSON å®šä¹‰å¹¶å°†å…¶è½¬æ¢ä¸ºç¬¦åˆ AsyncAPI å…ƒæ¨¡å‹çš„ AsyncAPI æ¨¡å‹ã€‚\næœ‰äº† AsyncAPI å…ƒæ¨¡å‹å’Œä½œä¸ºç¬¦åˆæ¨¡å‹çš„åº”ç”¨ç¨‹åºæ¥å£è§„èŒƒï¼Œå°±å¯ä»¥é€šè¿‡æ‰§è¡Œ M2T è½¬æ¢ï¼ˆç”Ÿæˆå†…éƒ¨ DSLï¼‰æ¥ç»§ç»­å·¥ä½œæµç¨‹ã€‚ç›®å‰ï¼ŒAsyncAPI Toolkit æ”¯æŒ Java è¯­è¨€ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªåº“ï¼Œé€šè¿‡æä¾›æµç•…çš„ API æ¥ååŠ©å¼€å‘äººå‘˜åˆ›å»ºã€å‘å¸ƒå’Œæ¥æ”¶æ ¼å¼è‰¯å¥½çš„æ¶ˆæ¯ã€‚\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”±äºè¿™äº›æ¶æ„éƒ½æ˜¯åŸºäº message çš„ï¼Œå› æ­¤æ•°æ®å»ºæ¨¡èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ä¸Šè¿°å·¥ä½œæµç¨‹ä¸­ä½¿ç”¨äº†å¦ä¸€ç§ï¼ˆå›¾å½¢åŒ–ï¼‰å…·ä½“è¯­æ³•ï¼Œé‡ç‚¹æ˜¯å¯¹è¦äº¤æ¢çš„æ¶ˆæ¯è¿›è¡Œå»ºæ¨¡ã€‚è¿™å¯ç”¨äºå¼•å¯¼ AsyncAPI JSON å®šä¹‰ï¼Œéšåå¯å¯¹å…¶è¿›è¡Œæ‰‹åŠ¨å®Œå–„ã€‚\nImporting / Modeling an AsyncAPI è§„èŒƒ é¦–å…ˆï¼ŒåŸºäº AsyncAPI è§„èŒƒï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Xtext è¯­æ³•ã€‚æ ¹æ®è¯¥è¯­æ³•ï¼Œæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ª Ecore metamodelï¼Œä»¥åŠä¸€å¥—ç¼–è¾‘å™¨å’ŒåŸºäº Eclipse çš„å·¥å…·ã€‚è¿™äº›ç¼–è¾‘å™¨å…è®¸ä½¿ç”¨ AsyncAPI åˆ›å»ºåŸºäº JSON çš„æ¶ˆæ¯é©±åŠ¨ API è§„èŒƒã€‚ä½¿ç”¨è¿™äº›ç¼–è¾‘å™¨åˆ›å»ºçš„è§„èŒƒä¼šè¢«è‡ªåŠ¨è§£æå¹¶é‡æ–°æ•´åˆä¸º AsyncAPI å…ƒæ¨¡å‹çš„å®ä¾‹ã€‚\nç”Ÿæˆä»£ç ï¼Œè½»æ¾å¤„ç† AsyncAPI è§„èŒƒä¸­çš„ä¿¡æ¯ æ­¤å¤–ï¼ŒåŸå‹è¿˜èƒ½ç”Ÿæˆ Java ä»£ç ï¼Œæ”¯æŒæ ¹æ®å»ºæ¨¡çš„ AsyncAPIï¼ˆåŒ…æ‹¬åµŒå¥— JSON å¯¹è±¡ï¼‰åˆ›å»ºå’Œåºåˆ—åŒ–åŸºäº JSON çš„æ¶ˆæ¯æœ‰æ•ˆè½½è·ã€‚ä½†ç›®å‰è¿˜ä¸æ”¯æŒæ•°ç»„ã€‚ä¸‹é¢çš„èŠ‚é€‰æ˜¾ç¤ºäº†åŸå‹æ”¯æŒçš„ AsyncAPI è§„èŒƒç¤ºä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 { \u0026#34;asyncapi\u0026#34;: \u0026#34;1.2.0\u0026#34;, \u0026#34;info\u0026#34;: { \u0026#34;title\u0026#34;: \u0026#34;Sample AsyncAPI specification\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0.1.0\u0026#34;, }, \u0026#34;servers\u0026#34;: [ { \u0026#34;url\u0026#34;: \u0026#34;broker.url:{port}\u0026#34;, \u0026#34;scheme\u0026#34;: \u0026#34;mqtt\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;This is an example description\u0026#34;, \u0026#34;variables\u0026#34;: { \u0026#34;port\u0026#34;: { \u0026#34;default\u0026#34;: \u0026#34;1883\u0026#34;, \u0026#34;enum\u0026#34;: [ \u0026#34;1883\u0026#34;, \u0026#34;8883\u0026#34; ] } } } ], \u0026#34;topics\u0026#34;: { \u0026#34;messages/device2controller\u0026#34;: { \u0026#34;publish\u0026#34;: { \u0026#34;$ref\u0026#34; : \u0026#34;#/components/messages/request\u0026#34; } } } }, \u0026#34;components\u0026#34;: { \u0026#34;schemas\u0026#34;: { \u0026#34;protocol_version\u0026#34;: { \u0026#34;title\u0026#34;: \u0026#34;Protocol version\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;integer\u0026#34;, \u0026#34;default\u0026#34;: 2, \u0026#34;x-friendly-name\u0026#34;: \u0026#34;ProtocolVersion\u0026#34; }, \u0026#34;id\u0026#34;: { \u0026#34;title\u0026#34;: \u0026#34;ID\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;format\u0026#34;: \u0026#34;XXXXXX YY ZZZZZZ W\u0026#34; }, \u0026#34;status\u0026#34;: { \u0026#34;title\u0026#34;: \u0026#34;Status\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;enum\u0026#34;: [\u0026#34;OK\u0026#34;, \u0026#34;ERROR\u0026#34;], \u0026#34;x-friendly-name\u0026#34; : \u0026#34;Status\u0026#34; }, \u0026#34;environment\u0026#34;: { \u0026#34;title\u0026#34;: \u0026#34;Environment\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;enum\u0026#34;: [\u0026#34;DEV\u0026#34;, \u0026#34;STAG\u0026#34;,\u0026#34;PROD\u0026#34; ], \u0026#34;x-friendly-name\u0026#34; : \u0026#34;Environment\u0026#34; } }, \u0026#34;messages\u0026#34; : { \u0026#34;request\u0026#34; : { \u0026#34;summary\u0026#34; : \u0026#34;Request connectivity.\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Request connectivity when status changes\u0026#34;, \u0026#34;payload\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;object\u0026#34;, \u0026#34;properties\u0026#34;: { \u0026#34;P\u0026#34;: { \u0026#34;$ref\u0026#34;: \u0026#34;#/components/schemas/protocol_version\u0026#34; }, \u0026#34;ID\u0026#34;: { \u0026#34;$ref\u0026#34;: \u0026#34;#/components/schemas/id\u0026#34; }, \u0026#34;E\u0026#34;: { \u0026#34;$ref\u0026#34;: \u0026#34;#/components/schemas/environment\u0026#34; }, \u0026#34;M\u0026#34;: { \u0026#34;x-friendly-name\u0026#34; : \u0026#34;Message\u0026#34;, \u0026#34;properties\u0026#34;: { \u0026#34;S\u0026#34;: { \u0026#34;$ref\u0026#34;: \u0026#34;#/components/schemas/status\u0026#34; }, \u0026#34;C\u0026#34;: { \u0026#34;title\u0026#34;: \u0026#34;Content\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;x-friendly-name\u0026#34;: \u0026#34;Content\u0026#34; } } } } } } } } æ ¹æ®ä¸Šè¿°è§„èŒƒï¼Œå¯ä»¥ç”Ÿæˆå¦‚ä¸‹ä¿¡æ¯ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 package tests; import messages.device2controller.Request; import messages.device2controller.Request.Payload.Environment; import messages.device2controller.Request.Payload.Message; import messages.device2controller.Request.Payload.PayloadBuilder; import messages.device2controller.Request.Payload.Message.Status; public class Test { public static void main(String[] args) { PayloadBuilder builder = Request.payloadBuilder(); Request.Payload payload = builder .withProtocolVersion(2) .withEnvironment(Environment.DEV) .withID(\u0026#34;id\u0026#34;) .withMessage( Message.newBuilder() .withStatus(Status.OK) .withContent(\u0026#34;Content\u0026#34;) .build() ).build(); System.out.println(payload.toJson(true)); System.out.println(Request.Payload.fromJson(payload.toJson()).toJson(true)); } } ä» Ecore æ¨¡å‹ç”Ÿæˆæ–°çš„ AsyncAPI åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å‡è®¾æ‚¨è¦ä¹ˆå·²ç»æœ‰ä¸€ä¸ª AsyncAPI æ–‡ä»¶è¦å¯¼å…¥ï¼Œè¦ä¹ˆæ‚¨å°†ä½¿ç”¨æˆ‘ä»¬çš„ AsyncAPI ç¼–è¾‘å™¨åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ã€‚äº‹å®ä¸Šï¼Œè¿˜æœ‰ç¬¬ä¸‰ç§é€‰æ‹©ï¼šä½¿ç”¨ç°æœ‰çš„ Ecore æ¨¡å‹ï¼Œå¹¶ä»ä¸­ç”Ÿæˆä¸€ä¸ªéª¨æ¶ AsyncAPI è§„èŒƒã€‚\nç”Ÿæˆå™¨å°†ä¸ºæ¯ä¸ªé¢†åŸŸç±»åˆ›å»ºä¸€ä¸ªå¯é‡å¤ä½¿ç”¨çš„ JSON æ¨¡å¼ã€‚é€šé“å°†ç”±æ³¨é‡Šè¿‡çš„ EClasses åˆ›å»ºã€‚æ­¤å¤–ï¼Œè¿˜å¯é€šè¿‡ EAnnotations æŒ‡å®šä¸»æœºä¿¡æ¯ã€‚\né™¤äº†å…¶å±€é™æ€§å¤–ï¼Œè·å¾—åŸºäº JSON çš„ Ecore æ¨¡å‹è¡¨ç¤ºæ³•è¿˜æœ‰å‡ ä¸ªä¼˜ç‚¹ï¼š\nå…è®¸å¼€å‘äººå‘˜å’Œæ¶æ„å¸ˆåˆ›å»ºä¸€ä¸ªå¯ç”¨çš„ AsyncAPI å®šä¹‰ï¼Œè€Œæ— éœ€æ·±å…¥äº†è§£è§„èŒƒï¼Œ åŒæ—¶ä¿æŒå»ºæ¨¡ç¯å¢ƒçš„ç®€å•æ€§å’Œå¯ç®¡ç†æ€§ï¼› ä»¥åŠè®©ä¸ç†Ÿæ‚‰å»ºæ¨¡çš„äººä¹Ÿèƒ½éµå®ˆ AsyncAPI è§„èŒƒè¿˜èƒ½è®©æœ‰ç»éªŒçš„å¼€å‘äººå‘˜å’Œæ¶æ„å¸ˆå®Œå–„å’Œå®Œæˆæ— æ³•ç”¨ Ecore è½»æ¾æ•è·çš„æ¶æ„ç»†èŠ‚ ä¸ºäº†åœ¨å»ºè®®çš„å¼€å‘å·¥ä½œæµç¨‹ä¸­é›†æˆæ•°æ®æ¨¡å‹ï¼Œå®šä¹‰äº† Ecore åˆ° AsyncAPI çš„æ¨¡å‹åˆ°æ¨¡å‹ï¼ˆM2Mï¼‰å’Œ AsyncAPI åˆ° JSON çš„ M2T è½¬æ¢ã€‚\nä¾‹å­\nResources tutorial: https://modeling-languages.com/asyncapi-modeling-editor-code-generator/ A model-based approach for developing event-driven architectures with AsyncAPI Model-driven development of asynchronous message-driven architectures with AsyncAPI Grammar 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 533 534 535 536 grammar io.github.abelgomez.asyncapi.AsyncApi hidden(WS) generate asyncApi \u0026#34;http://io.github.abelgomez/asyncapi/AsyncApi\u0026#34; import \u0026#34;http://www.eclipse.org/emf/2002/Ecore\u0026#34; as ecore AsyncAPI: {AsyncAPI} \u0026#39;{\u0026#39;\t( ( \u0026#39;\u0026#34;asyncapi\u0026#34;\u0026#39; \u0026#39;:\u0026#39; version=VersionNumber \u0026#39;,\u0026#39;? ) \u0026amp; ( \u0026#39;\u0026#34;info\u0026#34;\u0026#39; \u0026#39;:\u0026#39; info=Info \u0026#39;,\u0026#39;? ) \u0026amp; ( \u0026#39;\u0026#34;servers\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; servers+=Server (\u0026#39;,\u0026#39; servers+=Server)* \u0026#39;}\u0026#39; \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;channels\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; channels+=Channel (\u0026#39;,\u0026#39; channels+=Channel)* \u0026#39;}\u0026#39; \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;components\u0026#34;\u0026#39; \u0026#39;:\u0026#39; components=Components \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;x-sla\u0026#34;\u0026#39; \u0026#39;:\u0026#39; sla=Sla \u0026#39;,\u0026#39;? )? //\t\u0026amp; ( GenericJsonTuple \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; Info: {Info} \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;title\u0026#34;\u0026#39; \u0026#39;:\u0026#39; title=AnyString \u0026#39;,\u0026#39;? ) \u0026amp; ( \u0026#39;\u0026#34;version\u0026#34;\u0026#39; \u0026#39;:\u0026#39; version=AnyString \u0026#39;,\u0026#39;? ) \u0026amp; ( \u0026#39;\u0026#34;description\u0026#34;\u0026#39; \u0026#39;:\u0026#39; description=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;termsOfService\u0026#34;\u0026#39; \u0026#39;:\u0026#39; termsOfService=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;contact\u0026#34;\u0026#39; \u0026#39;:\u0026#39; contact=Contact \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;license\u0026#34;\u0026#39; \u0026#39;:\u0026#39; license=License \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;x-basePackage\u0026#34;\u0026#39; \u0026#39;:\u0026#39; basePackage=AnyString \u0026#39;,\u0026#39;? )? //\t\u0026amp; ( GenericJsonTuple \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; Contact: {Contact} \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;name\u0026#34;\u0026#39; \u0026#39;:\u0026#39; name=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;url\u0026#34;\u0026#39; \u0026#39;:\u0026#39; url=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;email\u0026#34;\u0026#39; \u0026#39;:\u0026#39; email=AnyString \u0026#39;,\u0026#39;? )? //\t\u0026amp; ( GenericJsonTuple \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; License: {License} \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;name\u0026#34;\u0026#39; \u0026#39;:\u0026#39; name=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;url\u0026#34;\u0026#39; \u0026#39;:\u0026#39; url=AnyString \u0026#39;,\u0026#39;? )? //\t\u0026amp; ( GenericJsonTuple \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; Server: {Server} name=AnyString \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;url\u0026#34;\u0026#39; \u0026#39;:\u0026#39; url=AnyString \u0026#39;,\u0026#39;? ) \u0026amp; ( \u0026#39;\u0026#34;protocol\u0026#34;\u0026#39; \u0026#39;:\u0026#39; protocol=Protocol \u0026#39;,\u0026#39;? ) \u0026amp; ( \u0026#39;\u0026#34;description\u0026#34;\u0026#39; \u0026#39;:\u0026#39; description=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;variables\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; variables+=Variable (\u0026#39;,\u0026#39; variables+=Variable)* \u0026#39;}\u0026#39; \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;x-isMonitored\u0026#34;\u0026#39; \u0026#39;:\u0026#39; isMonitored=Boolean \u0026#39;,\u0026#39;? )? //\t\u0026amp; ( GenericJsonTuple \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; Variable: {Variable} name=AnyString \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;description\u0026#34;\u0026#39; \u0026#39;:\u0026#39; description=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;default\u0026#34;\u0026#39; \u0026#39;:\u0026#39; default=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;enum\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;[\u0026#39; ^enum+=AnyString (\u0026#39;,\u0026#39; ^enum+=AnyString)* \u0026#39;]\u0026#39; \u0026#39;,\u0026#39;? )? //\t\u0026amp; ( GenericJsonTuple \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; Channel: {Channel} name=AnyString \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;description\u0026#34;\u0026#39; \u0026#39;:\u0026#39; description=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;publish\u0026#34;\u0026#39; \u0026#39;:\u0026#39; publish=Operation \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;subscribe\u0026#34;\u0026#39; \u0026#39;:\u0026#39; subscribe=Operation \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;parameters\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; parameters+=NamedParameter (\u0026#39;,\u0026#39; parameters+=NamedParameter)* \u0026#39;}\u0026#39; \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;x-title\u0026#34;\u0026#39; \u0026#39;:\u0026#39; title=AnyString \u0026#39;,\u0026#39;? )? //\t\u0026amp; ( GenericJsonTuple \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; Operation: {Operation} \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;operationId\u0026#34;\u0026#39; \u0026#39;:\u0026#39; operationId=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;summary\u0026#34;\u0026#39; \u0026#39;:\u0026#39; summary=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;description\u0026#34;\u0026#39; \u0026#39;:\u0026#39; description=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;message\u0026#34;\u0026#39; \u0026#39;:\u0026#39; message=AbstractMessage \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;traits\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;[\u0026#39; traits+=AbstractOperationTrait ( \u0026#39;,\u0026#39; traits+=AbstractOperationTrait )* \u0026#39;]\u0026#39; \u0026#39;,\u0026#39;? )? //\t\u0026amp; ( GenericJsonTuple \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; AbstractMessage: Reference | Message; Message: {Message} \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;name\u0026#34;\u0026#39; \u0026#39;:\u0026#39; name=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;title\u0026#34;\u0026#39; \u0026#39;:\u0026#39; title=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;summary\u0026#34;\u0026#39; \u0026#39;:\u0026#39; summary=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;description\u0026#34;\u0026#39; \u0026#39;:\u0026#39; description=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;deprecated\u0026#34;\u0026#39; \u0026#39;:\u0026#39; deprecated=Boolean \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;headers\u0026#34;\u0026#39; \u0026#39;:\u0026#39; headers=AbstractSchema \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;tags\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;[\u0026#39; tags+=Tag ( \u0026#39;,\u0026#39; tags+=Tag )* \u0026#39;]\u0026#39; \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;payload\u0026#34;\u0026#39; \u0026#39;:\u0026#39; payload=AbstractSchema \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;traits\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;[\u0026#39; traits+=AbstractMessageTrait ( \u0026#39;,\u0026#39; traits+=AbstractMessageTrait )* \u0026#39;]\u0026#39; \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;x-identifier\u0026#34;\u0026#39; \u0026#39;:\u0026#39; identifier=MessageIdentifier )? //\t\u0026amp; ( GenericJsonTupleButRef \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; NamedMessage: {NamedMessage} name=AnyString \u0026#39;:\u0026#39; message=AbstractMessage; Tag: {Tag} \u0026#39;{\u0026#39; ( (\u0026#39;\u0026#34;name\u0026#34;\u0026#39; \u0026#39;:\u0026#39; name=AnyString \u0026#39;,\u0026#39;?)? \u0026amp; (\u0026#39;\u0026#34;description\u0026#34;\u0026#39; \u0026#39;:\u0026#39; description=AnyString \u0026#39;,\u0026#39;?)? //\t\u0026amp; ( GenericJsonTuple \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; AbstractSchema: Reference | Schema; Schema: {Schema} \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;title\u0026#34;\u0026#39; \u0026#39;:\u0026#39; title=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;type\u0026#34;\u0026#39; \u0026#39;:\u0026#39; type=JsonType \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;description\u0026#34;\u0026#39; \u0026#39;:\u0026#39; description=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;format\u0026#34;\u0026#39; \u0026#39;:\u0026#39; format=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;minimum\u0026#34;\u0026#39; \u0026#39;:\u0026#39; minimum=INT \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;maximum\u0026#34;\u0026#39; \u0026#39;:\u0026#39; maximum=INT \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;minItems\u0026#34;\u0026#39; \u0026#39;:\u0026#39; minItems=INT \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;maxItems\u0026#34;\u0026#39; \u0026#39;:\u0026#39; maxItems=INT \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;default\u0026#34;\u0026#39; \u0026#39;:\u0026#39; default=PrimitiveValue\u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;properties\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; properties+=NamedSchema (\u0026#39;,\u0026#39; properties+=NamedSchema)* \u0026#39;}\u0026#39; \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;enum\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;[\u0026#39; ^enum+=PrimitiveValue (\u0026#39;,\u0026#39; ^enum+=PrimitiveValue)* \u0026#39;]\u0026#39; \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;items\u0026#34;\u0026#39; \u0026#39;:\u0026#39; items=AbstractSchema \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;required\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;[\u0026#39; required+=AnyString (\u0026#39;,\u0026#39; required+=AnyString)* \u0026#39;]\u0026#39; \u0026#39;,\u0026#39;? )? //\t\u0026amp; ( GenericJsonTupleButRef \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; NamedSchema: {NamedSchema} name=AnyString \u0026#39;:\u0026#39; schema=AbstractSchema; AbstractParameter: Reference | Parameter; Parameter: {Parameter} \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;description\u0026#34;\u0026#39; \u0026#39;:\u0026#39; description=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;schema\u0026#34;\u0026#39; \u0026#39;:\u0026#39; schema=AbstractSchema \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;location\u0026#34;\u0026#39; \u0026#39;:\u0026#39; location=AnyString \u0026#39;,\u0026#39;? )? //\t\u0026amp; ( GenericJsonTupleButRef \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; NamedParameter: {NamedParameter} name=AnyString \u0026#39;:\u0026#39; parameter=AbstractParameter; AbstractOperationTrait: Reference | OperationTrait; OperationTrait: {OperationTrait} \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;operationId\u0026#34;\u0026#39; \u0026#39;:\u0026#39; operationId=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;summary\u0026#34;\u0026#39; \u0026#39;:\u0026#39; summary=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;description\u0026#34;\u0026#39; \u0026#39;:\u0026#39; description=AnyString \u0026#39;,\u0026#39;? )? //\t\u0026amp; ( GenericJsonTupleButRef \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; NamedOperationTrait: {NamedOperationTrait} name=AnyString \u0026#39;:\u0026#39; operationTrait=AbstractOperationTrait; AbstractMessageTrait: Reference | MessageTrait; MessageTrait: {MessageTrait} \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;summary\u0026#34;\u0026#39; \u0026#39;:\u0026#39; summary=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;description\u0026#34;\u0026#39; \u0026#39;:\u0026#39; description=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;deprecated\u0026#34;\u0026#39; \u0026#39;:\u0026#39; deprecated=Boolean \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;headers\u0026#34;\u0026#39; \u0026#39;:\u0026#39; headers=AbstractSchema \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;tags\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;[\u0026#39; tags+=Tag ( \u0026#39;,\u0026#39; tags+=Tag )* \u0026#39;]\u0026#39; \u0026#39;,\u0026#39;? )? //\t\u0026amp; ( GenericJsonTupleButRef \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; NamedMessageTrait: {NamedMessageTrait} name=AnyString \u0026#39;:\u0026#39; messageTrait=AbstractMessageTrait; Components: {Components} \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;schemas\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; schemas+=NamedSchema (\u0026#39;,\u0026#39; schemas+=NamedSchema)* \u0026#39;}\u0026#39; \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;messages\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; messages+=NamedMessage (\u0026#39;,\u0026#39; messages+=NamedMessage)* \u0026#39;}\u0026#39; \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;parameters\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; parameters+=NamedParameter (\u0026#39;,\u0026#39; parameters+=NamedParameter)* \u0026#39;}\u0026#39; \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;operationTraits\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; operationTraits+=NamedOperationTrait (\u0026#39;,\u0026#39; operationTraits+=NamedOperationTrait)* \u0026#39;}\u0026#39; \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;messageTraits\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; messageTraits+=NamedMessageTrait (\u0026#39;,\u0026#39; messageTraits+=NamedMessageTrait)* \u0026#39;}\u0026#39; \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;x-qosMetrics\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;[\u0026#39; qosMetrics+=QoSMetric (\u0026#39;,\u0026#39; qosMetrics+=QoSMetric)* \u0026#39;]\u0026#39; \u0026#39;,\u0026#39;? )? //\t\u0026amp; ( GenericJsonTupleButRef \u0026#39;,\u0026#39;? )* ) \u0026#39;}\u0026#39;; Sla: {Sla} \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;guaranteeTerm\u0026#34;\u0026#39; \u0026#39;:\u0026#39; guaranteeTerm+=GuaranteeTerm (\u0026#39;,\u0026#39; guaranteeTerm+=GuaranteeTerm)* ) ) \u0026#39;}\u0026#39;; GuaranteeTerm: {GuaranteeTerm} \u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;scopes\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; scopes+=Scope (\u0026#39;,\u0026#39; scopes+=Scope)* \u0026#39;}\u0026#39; \u0026#39;,\u0026#39; ) ( \u0026#39;\u0026#34;qualifyingConditions\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; qualifyingConditions+=QualifyingCondition (\u0026#39;,\u0026#39; qualifyingConditions+=QualifyingCondition)* \u0026#39;}\u0026#39;\u0026#39;,\u0026#39;)? ( \u0026#39;\u0026#34;slos\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; slos+=Slo (\u0026#39;,\u0026#39; slos+=Slo)* \u0026#39;}\u0026#39;)\t) \u0026#39;}\u0026#39;; Scope: {Scope}( name=AnyString \u0026#39;:\u0026#39; reference= [Channel|AnyString] ); QualifyingCondition: {QualifyingCondition} name=AnyString \u0026#39;:\u0026#39; condition=BooleanExpression ; Slo: {Slo} name=AnyString \u0026#39;:\u0026#39; condition=BooleanExpression ;\tAbstractQoSMetric: QoSMetricReference | QoSMetric; QoSMetricReference: metric= [QoSMetric|AnyString]\t; QoSMetric: (\u0026#39;{\u0026#39; ( ( \u0026#39;\u0026#34;name\u0026#34;\u0026#39; \u0026#39;:\u0026#39; name=AnyString \u0026#39;,\u0026#39;? )\t\u0026amp; ( \u0026#39;\u0026#34;metricType\u0026#34;\u0026#39; \u0026#39;:\u0026#39; metricType=QoSMetricType \u0026#39;,\u0026#39;? )\t\u0026amp; ( \u0026#39;\u0026#34;description\u0026#34;\u0026#39; \u0026#39;:\u0026#39; description=AnyString \u0026#39;,\u0026#39;? )? \u0026amp; ( \u0026#39;\u0026#34;unit\u0026#34;\u0026#39; \u0026#39;:\u0026#39; unit=QoSMetricUnit \u0026#39;,\u0026#39;? ) \u0026amp; ( \u0026#39;\u0026#34;groupedByEvent\u0026#34;\u0026#39; \u0026#39;:\u0026#39; groupedByEvent=Boolean \u0026#39;,\u0026#39;? )\t) (DerivedQoSMetric)?\t// AixÃ² estÃ  al final de tot, pq Xtext es queixa que no pot haver-hi una unasssigned rule dins d\u0026#39;una unordered list.\t\u0026#39;}\u0026#39;); DerivedQoSMetric: {DerivedQoSMetric}( \u0026#39;\u0026#34;derivedQoSMetricDefinition\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;{\u0026#39; ( (\u0026#39;\u0026#34;window\u0026#34;\u0026#39; \u0026#39;:\u0026#39; window = AnyString \u0026#39;,\u0026#39;? ) \u0026amp; (\u0026#39;\u0026#34;windowUnit\u0026#34;\u0026#39; \u0026#39;:\u0026#39; windowUnit = WindowUnit \u0026#39;,\u0026#39;? ) \u0026amp; (\u0026#39;\u0026#34;aggregationFunction\u0026#34;\u0026#39; \u0026#39;:\u0026#39; aggregationFunction = AggregationFunction \u0026#39;,\u0026#39;? ) ) \u0026#39;}\u0026#39; ) ; BooleanExpression: AndExpression | OrExpression | ComparisonExpression; AndExpression: {AndExpression} \u0026#39;{\u0026#39; \u0026#39;\u0026#34;AND\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;[\u0026#39; conditions+=BooleanExpression (\u0026#39;,\u0026#39; conditions+=BooleanExpression)* \u0026#39;]\u0026#39; \u0026#39;}\u0026#39; ; OrExpression: {OrExpression} \u0026#39;{\u0026#39; \u0026#39;\u0026#34;OR\u0026#34;\u0026#39; \u0026#39;:\u0026#39; \u0026#39;[\u0026#39; conditions+=BooleanExpression (\u0026#39;,\u0026#39; conditions+=BooleanExpression)* \u0026#39;]\u0026#39; \u0026#39;}\u0026#39;; ComparisonExpression: {ComparisonExpression} \u0026#39;{\u0026#39; \u0026#39;\u0026#34;qosMetric\u0026#34;\u0026#39; \u0026#39;:\u0026#39; qosMetric = AbstractQoSMetric \u0026#39;,\u0026#39; \u0026#39;\u0026#34;operator\u0026#34;\u0026#39; \u0026#39;:\u0026#39; operator = Operator \u0026#39;,\u0026#39; \u0026#39;\u0026#34;value\u0026#34;\u0026#39; \u0026#39;:\u0026#39; value = AnyString \u0026#39;}\u0026#39; ; Reference: {Reference} \u0026#39;{\u0026#39; \u0026#39;\u0026#34;$ref\u0026#34;\u0026#39; \u0026#39;:\u0026#39; uri=AnyString \u0026#39;}\u0026#39;; //GenericJsonExpression: //\tPrimitiveValue //\t| GenericJsonObject //\t| GenericJsonArray; // //GenericJsonObject: //\t\u0026#39;{\u0026#39; \u0026#39;}\u0026#39; | \u0026#39;{\u0026#39; GenericJsonTuple (\u0026#39;,\u0026#39; GenericJsonTuple)* \u0026#39;}\u0026#39;; // //GenericJsonArray: //\t\u0026#39;[\u0026#39; \u0026#39;]\u0026#39; | \u0026#39;[\u0026#39; GenericJsonExpression (\u0026#39;,\u0026#39; GenericJsonExpression)* \u0026#39;]\u0026#39;; // //GenericJsonTuple: AnyString \u0026#39;:\u0026#39; GenericJsonExpression; // //GenericJsonTupleButRef: AnyStringButRef \u0026#39;:\u0026#39; GenericJsonExpression; enum WindowUnit: seconds = \u0026#39;\u0026#34;seconds\u0026#34;\u0026#39; | minutes = \u0026#39;\u0026#34;minutes\u0026#34;\u0026#39; | hours = \u0026#39;\u0026#34;hours\u0026#34;\u0026#39; | days = \u0026#39;\u0026#34;days\u0026#34;\u0026#39; | messages = \u0026#39;\u0026#34;messages\u0026#34;\u0026#39; ; enum AggregationFunction: AVG = \u0026#39;\u0026#34;AVG\u0026#34;\u0026#39; | MEDIAN = \u0026#39;\u0026#34;MEDIAN\u0026#34;\u0026#39; | MAX = \u0026#39;\u0026#34;MAX\u0026#34;\u0026#39; | MIN = \u0026#39;\u0026#34;MIN\u0026#34;\u0026#39; ; enum QoSMetricType: availability = \u0026#39;\u0026#34;availability\u0026#34;\u0026#39; | bandwith = \u0026#39;\u0026#34;bandwith\u0026#34;\u0026#39; | cpu = \u0026#39;\u0026#34;cpu\u0026#34;\u0026#39; | capacity = \u0026#39;\u0026#34;capacity\u0026#34;\u0026#39; | disaster = \u0026#39;\u0026#34;disaster\u0026#34;\u0026#39; | resiliance = \u0026#39;\u0026#34;resiliance\u0026#34;\u0026#39; | discoverability = \u0026#39;\u0026#34;discoverability\u0026#34;\u0026#39; | documentation = \u0026#39;\u0026#34;documentation\u0026#34;\u0026#39; | exception_handling = \u0026#39;\u0026#34;exception_handling\u0026#34;\u0026#39; | expected_failures = \u0026#39;\u0026#34;expected_failures\u0026#34;\u0026#39; | failover = \u0026#39;\u0026#34;failover\u0026#34;\u0026#39; | jitter = \u0026#39;\u0026#34;jitter\u0026#34;\u0026#39; | latency = \u0026#39;\u0026#34;latency\u0026#34;\u0026#39; | load_balancing = \u0026#39;\u0026#34;load_balancing\u0026#34;\u0026#39; | maximum_throughput = \u0026#39;\u0026#34;maximum_throughput\u0026#34;\u0026#39; | memory_aapacity = \u0026#39;\u0026#34;memory_aapacity\u0026#34;\u0026#39; | packet_loss = \u0026#39;\u0026#34;packet_loss\u0026#34;\u0026#39; | precision = \u0026#39;\u0026#34;precision\u0026#34;\u0026#39; | probability_of_correctness = \u0026#39;\u0026#34;probability_of_correctness\u0026#34;\u0026#39; | round_trip_time = \u0026#39;\u0026#34;round_trip_time\u0026#34;\u0026#39; | throughput = \u0026#39;\u0026#34;throughput\u0026#34;\u0026#39; | time_to_tail = \u0026#39;\u0026#34;time_to_tail\u0026#34;\u0026#39; | time_to_tepair = \u0026#39;\u0026#34;time_to_tepair\u0026#34;\u0026#39; | type_consistency = \u0026#39;\u0026#34;type_consistency\u0026#34;\u0026#39; | uptime = \u0026#39;\u0026#34;uptime\u0026#34;\u0026#39; | up_to_dateness = \u0026#39;\u0026#34;up-to-dateness\u0026#34;\u0026#39; ; enum QoSMetricUnit: milliseconds = \u0026#39;\u0026#34;milliseconds\u0026#34;\u0026#39; | seconds = \u0026#39;\u0026#34;seconds\u0026#34;\u0026#39; | minutes = \u0026#39;\u0026#34;minutes\u0026#34;\u0026#39; | hours = \u0026#39;\u0026#34;hours\u0026#34;\u0026#39; | null = \u0026#39;\u0026#34;null\u0026#34;\u0026#39; ; enum Operator: greater = \u0026#39;\u0026#34;\u0026gt;\u0026#34;\u0026#39; | greater_equal = \u0026#39;\u0026#34;\u0026gt;=\u0026#34;\u0026#39; | equal = \u0026#39;\u0026#34;=\u0026#34;\u0026#39; | less_equal = \u0026#39;\u0026#34;\u0026lt;=\u0026#34;\u0026#39; | less = \u0026#39;\u0026#34;\u0026lt;\u0026#34;\u0026#39;\t; enum JsonType: string = \u0026#39;\u0026#34;string\u0026#34;\u0026#39; | number = \u0026#39;\u0026#34;number\u0026#34;\u0026#39; | integer = \u0026#39;\u0026#34;integer\u0026#34;\u0026#39; | boolean = \u0026#39;\u0026#34;boolean\u0026#34;\u0026#39; | object = \u0026#39;\u0026#34;object\u0026#34;\u0026#39; | array = \u0026#39;\u0026#34;array\u0026#34;\u0026#39; | any = \u0026#39;\u0026#34;any\u0026#34;\u0026#39; | null = \u0026#39;\u0026#34;null\u0026#34;\u0026#39;; enum Boolean: _false = \u0026#34;false\u0026#34; | _true = \u0026#34;true\u0026#34;; enum VersionNumber: _200 = \u0026#39;\u0026#34;2.0.0\u0026#34;\u0026#39;; enum MessageIdentifier: none =\u0026#39;\u0026#34;none\u0026#34;\u0026#39; | generated = \u0026#39;\u0026#34;generated\u0026#34;\u0026#39; | md5 = \u0026#39;\u0026#34;md5\u0026#34;\u0026#39; | sha256 = \u0026#39;\u0026#34;sha-256\u0026#34;\u0026#39;; enum Protocol: amqp = \u0026#39;\u0026#34;amqp\u0026#34;\u0026#39; | amqps = \u0026#39;\u0026#34;amqps\u0026#34;\u0026#39; | http = \u0026#39;\u0026#34;http\u0026#34;\u0026#39; | https = \u0026#39;\u0026#34;https\u0026#34;\u0026#39; | jms = \u0026#39;\u0026#34;jms\u0026#34;\u0026#39; | kafka = \u0026#39;\u0026#34;kafka\u0026#34;\u0026#39; | kafka_secure = \u0026#39;\u0026#34;kafka-secure\u0026#34;\u0026#39; | mqtt = \u0026#39;\u0026#34;mqtt\u0026#34;\u0026#39; | secure_mqtt = \u0026#39;\u0026#34;secure-mqtt\u0026#34;\u0026#39; | ws = \u0026#39;\u0026#34;ws\u0026#34;\u0026#39; | wss = \u0026#39;\u0026#34;wss\u0026#34;\u0026#39; | stomp = \u0026#39;\u0026#34;stomp\u0026#34;\u0026#39; | stomps = \u0026#39;\u0026#34;stomps\u0026#34;\u0026#39;; PrimitiveValue: AnyString | \u0026#34;true\u0026#34; | \u0026#34;false\u0026#34; | INT; AnyStringButRef: STRING | Keyword; AnyString: STRING | \u0026#39;\u0026#34;$ref\u0026#34;\u0026#39; | Keyword; terminal ID: \u0026#39;^\u0026#39;?(\u0026#39;a\u0026#39;..\u0026#39;z\u0026#39;|\u0026#39;A\u0026#39;..\u0026#39;Z\u0026#39;|\u0026#39;_\u0026#39;) (\u0026#39;a\u0026#39;..\u0026#39;z\u0026#39;|\u0026#39;A\u0026#39;..\u0026#39;Z\u0026#39;|\u0026#39;_\u0026#39;|\u0026#39;0\u0026#39;..\u0026#39;9\u0026#39;)*; terminal INT returns ecore::EInt: (\u0026#39;0\u0026#39;..\u0026#39;9\u0026#39;)+; terminal STRING: \u0026#39;\u0026#34;\u0026#39; ( \u0026#39;\\\\\u0026#39; . | !(\u0026#39;\\\\\u0026#39;|\u0026#39;\u0026#34;\u0026#39;) )* \u0026#39;\u0026#34;\u0026#39; | \u0026#34;\u0026#39;\u0026#34; ( \u0026#39;\\\\\u0026#39; . | !(\u0026#39;\\\\\u0026#39;|\u0026#34;\u0026#39;\u0026#34;) )* \u0026#34;\u0026#39;\u0026#34;; terminal WS: (\u0026#39; \u0026#39;|\u0026#39;\\t\u0026#39;|\u0026#39;\\r\u0026#39;|\u0026#39;\\n\u0026#39;)+; Keyword: \u0026#39;\u0026#34;2.0.0\u0026#34;\u0026#39; | \u0026#39;\u0026#34;\u0026lt;\u0026#34;\u0026#39; | \u0026#39;\u0026#34;\u0026lt;=\u0026#34;\u0026#39; | \u0026#39;\u0026#34;=\u0026#34;\u0026#39; | \u0026#39;\u0026#34;\u0026gt;\u0026#34;\u0026#39; | \u0026#39;\u0026#34;\u0026gt;=\u0026#34;\u0026#39; | \u0026#39;\u0026#34;AND\u0026#34;\u0026#39; | \u0026#39;\u0026#34;AVG\u0026#34;\u0026#39; | \u0026#39;\u0026#34;MAX\u0026#34;\u0026#39; | \u0026#39;\u0026#34;MEDIAN\u0026#34;\u0026#39; | \u0026#39;\u0026#34;MIN\u0026#34;\u0026#39; | \u0026#39;\u0026#34;OR\u0026#34;\u0026#39; | \u0026#39;\u0026#34;aggregationFunction\u0026#34;\u0026#39; | \u0026#39;\u0026#34;amqp\u0026#34;\u0026#39; | \u0026#39;\u0026#34;amqps\u0026#34;\u0026#39; | \u0026#39;\u0026#34;any\u0026#34;\u0026#39; | \u0026#39;\u0026#34;array\u0026#34;\u0026#39; | \u0026#39;\u0026#34;asyncapi\u0026#34;\u0026#39; | \u0026#39;\u0026#34;availability\u0026#34;\u0026#39; | \u0026#39;\u0026#34;bandwith\u0026#34;\u0026#39; | \u0026#39;\u0026#34;boolean\u0026#34;\u0026#39; | \u0026#39;\u0026#34;capacity\u0026#34;\u0026#39; | \u0026#39;\u0026#34;channels\u0026#34;\u0026#39; | \u0026#39;\u0026#34;components\u0026#34;\u0026#39; | \u0026#39;\u0026#34;contact\u0026#34;\u0026#39; | \u0026#39;\u0026#34;cpu\u0026#34;\u0026#39; | \u0026#39;\u0026#34;dataType\u0026#34;\u0026#39; | \u0026#39;\u0026#34;days\u0026#34;\u0026#39; | \u0026#39;\u0026#34;default\u0026#34;\u0026#39; | \u0026#39;\u0026#34;deprecated\u0026#34;\u0026#39; | \u0026#39;\u0026#34;derivedQoSMetricDefinition\u0026#34;\u0026#39; | \u0026#39;\u0026#34;description\u0026#34;\u0026#39; | \u0026#39;\u0026#34;disaster\u0026#34;\u0026#39; | \u0026#39;\u0026#34;discoverability\u0026#34;\u0026#39; | \u0026#39;\u0026#34;documentation\u0026#34;\u0026#39; | \u0026#39;\u0026#34;email\u0026#34;\u0026#39; | \u0026#39;\u0026#34;enum\u0026#34;\u0026#39; | \u0026#39;\u0026#34;exception_handling\u0026#34;\u0026#39; | \u0026#39;\u0026#34;expected_failures\u0026#34;\u0026#39; | \u0026#39;\u0026#34;failover\u0026#34;\u0026#39; | \u0026#39;\u0026#34;format\u0026#34;\u0026#39; | \u0026#39;\u0026#34;groupedByEvent\u0026#34;\u0026#39; | \u0026#39;\u0026#34;guaranteeTerm\u0026#34;\u0026#39; | \u0026#39;\u0026#34;headers\u0026#34;\u0026#39; | \u0026#39;\u0026#34;hours\u0026#34;\u0026#39; | \u0026#39;\u0026#34;http\u0026#34;\u0026#39; | \u0026#39;\u0026#34;https\u0026#34;\u0026#39; | \u0026#39;\u0026#34;info\u0026#34;\u0026#39; | \u0026#39;\u0026#34;integer\u0026#34;\u0026#39; | \u0026#39;\u0026#34;items\u0026#34;\u0026#39; | \u0026#39;\u0026#34;jitter\u0026#34;\u0026#39; | \u0026#39;\u0026#34;jms\u0026#34;\u0026#39; | \u0026#39;\u0026#34;kafka\u0026#34;\u0026#39; | \u0026#39;\u0026#34;kafka-secure\u0026#34;\u0026#39; | \u0026#39;\u0026#34;latency\u0026#34;\u0026#39; | \u0026#39;\u0026#34;license\u0026#34;\u0026#39; | \u0026#39;\u0026#34;load_balancing\u0026#34;\u0026#39; | \u0026#39;\u0026#34;location\u0026#34;\u0026#39; | \u0026#39;\u0026#34;maxItems\u0026#34;\u0026#39; | \u0026#39;\u0026#34;maximum\u0026#34;\u0026#39; | \u0026#39;\u0026#34;maximum_throughput\u0026#34;\u0026#39; | \u0026#39;\u0026#34;memory_aapacity\u0026#34;\u0026#39; | \u0026#39;\u0026#34;message\u0026#34;\u0026#39; | \u0026#39;\u0026#34;messageTraits\u0026#34;\u0026#39; | \u0026#39;\u0026#34;messages\u0026#34;\u0026#39; | \u0026#39;\u0026#34;metricType\u0026#34;\u0026#39; | \u0026#39;\u0026#34;milliseconds\u0026#34;\u0026#39; | \u0026#39;\u0026#34;minItems\u0026#34;\u0026#39; | \u0026#39;\u0026#34;minimum\u0026#34;\u0026#39; | \u0026#39;\u0026#34;minutes\u0026#34;\u0026#39; | \u0026#39;\u0026#34;mqtt\u0026#34;\u0026#39; | \u0026#39;\u0026#34;mqtts\u0026#34;\u0026#39; | \u0026#39;\u0026#34;name\u0026#34;\u0026#39; | \u0026#39;\u0026#34;null\u0026#34;\u0026#39; | \u0026#39;\u0026#34;number\u0026#34;\u0026#39; | \u0026#39;\u0026#34;object\u0026#34;\u0026#39; | \u0026#39;\u0026#34;operationId\u0026#34;\u0026#39; | \u0026#39;\u0026#34;operationTraits\u0026#34;\u0026#39; | \u0026#39;\u0026#34;operator\u0026#34;\u0026#39; | \u0026#39;\u0026#34;packet_loss\u0026#34;\u0026#39; | \u0026#39;\u0026#34;parameters\u0026#34;\u0026#39; | \u0026#39;\u0026#34;payload\u0026#34;\u0026#39; | \u0026#39;\u0026#34;precision\u0026#34;\u0026#39; | \u0026#39;\u0026#34;probability_of_correctness\u0026#34;\u0026#39; | \u0026#39;\u0026#34;properties\u0026#34;\u0026#39; | \u0026#39;\u0026#34;protocol\u0026#34;\u0026#39; | \u0026#39;\u0026#34;publish\u0026#34;\u0026#39; | \u0026#39;\u0026#34;qosMetric\u0026#34;\u0026#39; | \u0026#39;\u0026#34;qualifyingConditions\u0026#34;\u0026#39; | \u0026#39;\u0026#34;required\u0026#34;\u0026#39; | \u0026#39;\u0026#34;resiliance\u0026#34;\u0026#39; | \u0026#39;\u0026#34;round_trip_time\u0026#34;\u0026#39; | \u0026#39;\u0026#34;schema\u0026#34;\u0026#39; | \u0026#39;\u0026#34;schemas\u0026#34;\u0026#39; | \u0026#39;\u0026#34;scopes\u0026#34;\u0026#39; | \u0026#39;\u0026#34;seconds\u0026#34;\u0026#39; | \u0026#39;\u0026#34;secure-mqtt\u0026#34;\u0026#39; | \u0026#39;\u0026#34;servers\u0026#34;\u0026#39; | \u0026#39;\u0026#34;slos\u0026#34;\u0026#39; | \u0026#39;\u0026#34;stomp\u0026#34;\u0026#39; | \u0026#39;\u0026#34;stomps\u0026#34;\u0026#39; | \u0026#39;\u0026#34;string\u0026#34;\u0026#39; | \u0026#39;\u0026#34;subscribe\u0026#34;\u0026#39; | \u0026#39;\u0026#34;summary\u0026#34;\u0026#39; | \u0026#39;\u0026#34;tags\u0026#34;\u0026#39; | \u0026#39;\u0026#34;termsOfService\u0026#34;\u0026#39; | \u0026#39;\u0026#34;throughput\u0026#34;\u0026#39; | \u0026#39;\u0026#34;time_to_tail\u0026#34;\u0026#39; | \u0026#39;\u0026#34;time_to_tepair\u0026#34;\u0026#39; | \u0026#39;\u0026#34;title\u0026#34;\u0026#39; | \u0026#39;\u0026#34;traits\u0026#34;\u0026#39; | \u0026#39;\u0026#34;type\u0026#34;\u0026#39; | \u0026#39;\u0026#34;type_consistency\u0026#34;\u0026#39; | \u0026#39;\u0026#34;unit\u0026#34;\u0026#39; | \u0026#39;\u0026#34;up-to-dateness\u0026#34;\u0026#39; | \u0026#39;\u0026#34;uptime\u0026#34;\u0026#39; | \u0026#39;\u0026#34;url\u0026#34;\u0026#39; | \u0026#39;\u0026#34;value\u0026#34;\u0026#39; | \u0026#39;\u0026#34;variables\u0026#34;\u0026#39; | \u0026#39;\u0026#34;version\u0026#34;\u0026#39; | \u0026#39;\u0026#34;window\u0026#34;\u0026#39; | \u0026#39;\u0026#34;windowUnit\u0026#34;\u0026#39; | \u0026#39;\u0026#34;ws\u0026#34;\u0026#39; | \u0026#39;\u0026#34;wss\u0026#34;\u0026#39; | \u0026#39;\u0026#34;x-basePackage\u0026#34;\u0026#39; | \u0026#39;\u0026#34;x-qosMetrics\u0026#34;\u0026#39; | \u0026#39;\u0026#34;x-sla\u0026#34;\u0026#39; | \u0026#39;\u0026#34;x-title\u0026#34;\u0026#39;; ","permalink":"https://WFUing.github.io/posts/tech/language/code-generation/asyncapi-code-generator/","summary":"Background IIoTï¼ˆå·¥ä¸šç‰©è”ç½‘ï¼‰æ¶æ„é€šå¸¸æ˜¯åˆ†å¸ƒå¼å’Œå¼‚æ­¥çš„ï¼Œé€šä¿¡ç”±äº‹ä»¶é©±åŠ¨ï¼Œå¦‚æ¶ˆæ¯çš„å‘å¸ƒï¼ˆå’Œç›¸åº”çš„è®¢é˜…ï¼‰ã€‚è¿™äº›å¼‚æ­¥æ¶æ„æé«˜äº†å¯æ‰©å±•æ€§å’Œå¯¹å˜åŒ–çš„è€å—æ€§ï¼Œä½†ä¹Ÿå¼•å‘äº†äº’æ“ä½œæ€§é—®é¢˜ï¼Œå› ä¸ºæ¶æ„å„å…ƒç´ ä¹‹é—´å¯¹æ¶ˆæ¯å†…éƒ¨ç»“æ„åŠå…¶åˆ†ç±»ï¼ˆä¸»é¢˜ï¼‰çš„æ˜ç¡®çŸ¥è¯†è¢«ç¨€é‡Šäº†ã€‚\näº‹å®ä¸Šï¼Œè¿™ä¹Ÿæ˜¯ REST åº”ç”¨ç¨‹åºæ¥å£é¢ä¸´çš„ä¸€ä¸ªé—®é¢˜ï¼Œç›´åˆ°ä¸šç•Œè”åˆèµ·æ¥ï¼Œæå‡ºäº†ä¸€ç§å®šä¹‰åŒæ­¥åº”ç”¨ç¨‹åºæ¥å£ç»“æ„å’Œæ¨¡å¼çš„æ ‡å‡†æ–¹æ³•ï¼šOpenAPIï¼ˆæºè‡ª Swaggerï¼‰ã€‚\nIntroduction å¯¹äºå¼‚æ­¥æ¶æ„ï¼Œå— OpenAPI çš„å¯å‘ï¼ŒAsyncAPI çš„å‡ºç°è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼š\nAsyncAPI æä¾›äº†ä¸€ç§è§„èŒƒï¼Œå…è®¸æ‚¨ä»¥æœºå™¨å¯è¯»çš„æ ¼å¼å®šä¹‰æ¶ˆæ¯é©±åŠ¨çš„ APIã€‚å®ƒä¸åè®®æ— å…³ï¼Œå› æ­¤å¯ä»¥ç”¨äºé€šè¿‡ Kafkaã€MQTTã€AMQPã€WebSocketsã€STOMP ç­‰å·¥ä½œçš„ APIã€‚è¯¥è§„èŒƒä¸ OpenAPI/Swagger éå¸¸ç›¸ä¼¼ï¼Œæ‰€ä»¥å¦‚æœä½ ç†Ÿæ‚‰å®ƒï¼ŒAsyncAPI å¯¹ä½ æ¥è¯´åº”è¯¥å¾ˆå®¹æ˜“ã€‚\nåœ¨ AsyncAPI ä¸­ï¼ŒAPI çš„è§„æ ¼å¯ä»¥ç”¨ YAML æˆ– JSON å®šä¹‰ï¼Œä¾‹å¦‚å¯ä»¥æŒ‡å®šæ¶ˆæ¯ä»£ç†ã€æ„Ÿå…´è¶£çš„ä¸»é¢˜æˆ–ä¸æ¯ä¸ªä¸»é¢˜ç›¸å…³çš„ä¸åŒæ¶ˆæ¯æ ¼å¼ç­‰ã€‚ä¸è¿‡ï¼ŒAsyncAPI è¿˜å¤„äºå¼€å‘çš„æ—©æœŸé˜¶æ®µï¼ŒAsyncAPI å·¥å…·å¸‚åœºè¿˜ä¸å‘è¾¾ï¼Œä¸»è¦å±€é™äºç”Ÿæˆä¾›äººç±»ä½¿ç”¨çš„æ–‡æ¡£ã€‚\nAsyncAPI æœ€åˆçš„è´¡çŒ®å°±æ˜¯ä¸Šå›¾ä¸­å±•ç¤ºçš„æ–¹æ³•ã€‚\nAsyncAPI Toolkit å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒAsyncAPI å›¢é˜Ÿæ‰©å±•äº†è¿™ä¸€åˆå§‹æ¡†æ¶ã€‚åŸºäº AsyncAPI è§„èŒƒåœ¨ Xtext ä¸­å¼€å‘ AsyncAPI JSON è¯­æ³•çš„ï¼Œè¯¥è¯­æ³•å¯éªŒè¯ç¬¦åˆ AsyncAPI è§„èŒƒçš„æ¶ˆæ¯é©±åŠ¨ API å®šä¹‰ã€‚åŒæ ·ï¼Œæ ¹æ®è¯¥è¯­æ³•ï¼ŒXtext ä¼šè‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„ AsyncAPI å…ƒæ¨¡å‹å’Œæ‰€æœ‰å·¥å…·ï¼ˆå¸¦å†…å®¹è¾…åŠ©åŠŸèƒ½çš„ç¼–è¾‘å™¨ã€è§£æå™¨ç­‰ï¼‰ï¼Œä»¥ä¾¿è½»æ¾åˆ›å»º AsyncAPI JSON å®šä¹‰å¹¶å°†å…¶è½¬æ¢ä¸ºç¬¦åˆ AsyncAPI å…ƒæ¨¡å‹çš„ AsyncAPI æ¨¡å‹ã€‚\næœ‰äº† AsyncAPI å…ƒæ¨¡å‹å’Œä½œä¸ºç¬¦åˆæ¨¡å‹çš„åº”ç”¨ç¨‹åºæ¥å£è§„èŒƒï¼Œå°±å¯ä»¥é€šè¿‡æ‰§è¡Œ M2T è½¬æ¢ï¼ˆç”Ÿæˆå†…éƒ¨ DSLï¼‰æ¥ç»§ç»­å·¥ä½œæµç¨‹ã€‚ç›®å‰ï¼ŒAsyncAPI Toolkit æ”¯æŒ Java è¯­è¨€ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªåº“ï¼Œé€šè¿‡æä¾›æµç•…çš„ API æ¥ååŠ©å¼€å‘äººå‘˜åˆ›å»ºã€å‘å¸ƒå’Œæ¥æ”¶æ ¼å¼è‰¯å¥½çš„æ¶ˆæ¯ã€‚\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”±äºè¿™äº›æ¶æ„éƒ½æ˜¯åŸºäº message çš„ï¼Œå› æ­¤æ•°æ®å»ºæ¨¡èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ä¸Šè¿°å·¥ä½œæµç¨‹ä¸­ä½¿ç”¨äº†å¦ä¸€ç§ï¼ˆå›¾å½¢åŒ–ï¼‰å…·ä½“è¯­æ³•ï¼Œé‡ç‚¹æ˜¯å¯¹è¦äº¤æ¢çš„æ¶ˆæ¯è¿›è¡Œå»ºæ¨¡ã€‚è¿™å¯ç”¨äºå¼•å¯¼ AsyncAPI JSON å®šä¹‰ï¼Œéšåå¯å¯¹å…¶è¿›è¡Œæ‰‹åŠ¨å®Œå–„ã€‚","title":"A Modeling Editor and Code Generator for message-driven architectures with AsyncAPI"},{"content":"OpenAPI Generator å¯æ ¹æ® OpenAPI yaml è§„èŒƒç”Ÿæˆä»£ç ï¼Œå¹¶æ”¯æŒå¤šç§è¯­è¨€ã€‚\nå¦‚ä½•ä½¿ç”¨ OpenAPI æœ¬èŠ‚ä»‹ç»å¦‚ä½•åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ OpenAPI yaml è§„èŒƒï¼Œå¹¶ç”¨å®ƒä¸º Spring Boot åº”ç”¨ç¨‹åºç”ŸæˆæœåŠ¡å™¨ç«¯ä»£ç ã€‚\nCreate OpenAPI spec é¦–å…ˆè¦åšçš„æ˜¯ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºè®¾è®¡ OpenAPI è§„èŒƒã€‚æ‚¨å°†è®¾è®¡ä¸€ä¸ªå®¢æˆ· APIã€‚è¯¥ API å…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªå®¢æˆ·ï¼Œå¹¶æ ¹æ®å…¶ ID æ£€ç´¢è¯¥å®¢æˆ·ã€‚ç°å®ç”Ÿæ´»ä¸­çš„åº”ç”¨ç¨‹åºæ¥å£ä¼šæ›´åŠ å¤æ‚ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯ä¿æŒç®€å•ã€‚\nä½¿ç”¨ Swagger ç¼–è¾‘å™¨ æ˜¯è®¾è®¡ API çš„ç®€ä¾¿æ–¹æ³•ã€‚å®ƒä¼šç«‹å³åé¦ˆæ‚¨çš„è§„èŒƒæ˜¯å¦æœ‰é”™è¯¯ï¼Œå¹¶å³æ—¶ç”Ÿæˆ Swagger æ–‡æ¡£ã€‚\nOpenAPI è§„èŒƒçš„ header åŒ…å«ä¸€äº›æœ‰å…³ API çš„å…ƒæ•°æ®ï¼Œå¦‚æ ‡é¢˜ã€ç‰ˆæœ¬ã€API è¿è¡Œçš„æœåŠ¡å™¨ç­‰ã€‚æ ‡ç­¾å¯ç”¨äºå¯¹èµ„æºè¿›è¡Œåˆ†ç»„ï¼Œä»è€Œä¸ºæ‚¨æä¾›æ›´å¤šæ¦‚è§ˆã€‚\n1 2 3 4 5 6 7 8 9 openapi: \u0026#34;3.0.2\u0026#34; info: title: API Customer version: \u0026#34;1.0\u0026#34; servers: - url: https://localhost:8080 tags: - name: Customer description: Customer specific data. paths éƒ¨åˆ†åŒ…å«èµ„æºè§„èŒƒã€‚æ‚¨å®šä¹‰çš„ç¬¬ä¸€ä¸ªèµ„æºæ˜¯åˆ›å»º Customer çš„èµ„æºï¼Œå°†é€šè¿‡åŒ…å« JSON ä¸»ä½“çš„ POST æ–¹å¼åˆ›å»ºã€‚ç”Ÿæˆå™¨å°†ä½¿ç”¨ operationId ä¸ºè¯¥èµ„æºåˆ›å»ºæ–¹æ³•åç§°ã€‚ä¸ºç®€å•èµ·è§ï¼Œåªè€ƒè™‘æˆåŠŸå“åº”ã€‚æ¨¡å¼æŒ‡çš„æ˜¯ JSON ä¸»ä½“ï¼Œå°†åœ¨æœ¬èŠ‚åé¢ä»‹ç»ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 /customer: post: tags: - Customer summary: Create Customer operationId: createCustomer requestBody: content: application/json: schema: $ref: \u0026#39;#/components/schemas/Customer\u0026#39; responses: \u0026#39;200\u0026#39;: description: OK content: \u0026#39;application/json\u0026#39;: schema: $ref: \u0026#39;#/components/schemas/CustomerFullData\u0026#39; ç¬¬äºŒä¸ªèµ„æºå…è®¸æ‚¨æ£€ç´¢å®¢æˆ·ã€‚è¯¥èµ„æºä¹Ÿéœ€è¦ä¸€ä¸ªåŒ…å«è¦æ£€ç´¢çš„ customerId çš„è·¯å¾„å‚æ•°ã€‚å¦‚æœ ID ä¸å­˜åœ¨ï¼Œå°†è¿”å› NOT FOUND çš„å“åº”ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 /customer/{customerId}: get: tags: - Customer summary: Retrieve Customer operationId: getCustomer parameters: - name: customerId in: path required: true schema: type: integer format: int64 responses: \u0026#39;200\u0026#39;: description: OK content: \u0026#39;application/json\u0026#39;: schema: $ref: \u0026#39;#/components/schemas/CustomerFullData\u0026#39; \u0026#39;404\u0026#39;: description: NOT FOUND æœ€åï¼Œåœ¨ç»„ä»¶éƒ¨åˆ†ï¼Œå®šä¹‰äº†ä½¿ç”¨çš„æ¨¡å¼ã€‚é™¤äº† ID ä¹‹å¤–ï¼ŒCustomer æ¨¡å¼å’Œ CustomerFullData æ¨¡å¼å…±äº«æ‰€æœ‰å±æ€§ã€‚ä¸ºäº†æé«˜å¯ç»´æŠ¤æ€§ï¼Œå¯ä»¥ä½¿ç”¨ allOf å±æ€§ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 components: schemas: Customer: type: object properties: firstName: type: string description: First name of the customer lastName: type: string description: Last name of the customer CustomerFullData: allOf: - $ref: \u0026#39;#/components/schemas/Customer\u0026#39; - type: object properties: customerId: type: integer description: The ID of the customer format: int64 description: Full data of the customer. è¯¥åº”ç”¨ç¨‹åºçš„ OpenAPI è§„èŒƒç°å·²å®Œæˆã€‚\nCreate Spring Boot Application è¦åˆ›å»º Spring Boot åº”ç”¨ç¨‹åºï¼Œè¯·è®¿é—® start.spring.ioï¼Œé€‰æ‹©æœ€æ–°ç¨³å®šçš„ Spring Boot ç‰ˆæœ¬ã€Java 17 å¹¶æ·»åŠ  Spring Web ä¾èµ–å…³ç³»ã€‚ä¸‹è½½ç”Ÿæˆçš„é¡¹ç›®å¹¶å°†å…¶æ‰“å¼€åˆ°æ‚¨å–œæ¬¢çš„é›†æˆå¼€å‘ç¯å¢ƒä¸­ã€‚åœ¨ src/main/resources ç›®å½•ä¸­æ·»åŠ  OpenAPI è§„èŒƒï¼Œåç§°ä¸º customer.ymlã€‚\næ‚¨å°†ä½¿ç”¨ Open API Generator Maven æ’ä»¶ï¼Œå› æ­¤è¯·å°†è¯¥æ’ä»¶æ·»åŠ åˆ° pom æ–‡ä»¶çš„æ„å»ºéƒ¨åˆ†ã€‚ç”±äºæ‚¨ä½¿ç”¨çš„æ˜¯ Spring Boot åº”ç”¨ç¨‹åºï¼Œå› æ­¤ä½¿ç”¨ spring ä½œä¸º generatorNameï¼Œå¹¶ä½¿ç”¨ inputSpec å±æ€§è®¾ç½® customer.yml æ–‡ä»¶çš„è·¯å¾„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;plugin\u0026gt; \u0026lt;groupId\u0026gt;org.openapitools\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;openapi-generator-maven-plugin\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;5.3.0\u0026lt;/version\u0026gt; \u0026lt;executions\u0026gt; \u0026lt;execution\u0026gt; \u0026lt;goals\u0026gt; \u0026lt;goal\u0026gt;generate\u0026lt;/goal\u0026gt; \u0026lt;/goals\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;inputSpec\u0026gt;${project.basedir}/src/main/resources/customer.yml\u0026lt;/inputSpec\u0026gt; \u0026lt;generatorName\u0026gt;spring\u0026lt;/generatorName\u0026gt; \u0026lt;/configuration\u0026gt; \u0026lt;/execution\u0026gt; \u0026lt;/executions\u0026gt; \u0026lt;/plugin\u0026gt; æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆä»£ç ï¼š\n1 $ mvn clean compile ç¼–è¯‘å¤±è´¥ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š\n1 2 3 4 package io.swagger.annotations does not exist package io.swagger.annotations does not exist package org.openapitools.jackson.nullable does not exist cannot find symbol ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œéœ€è¦åœ¨ pom æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;io.swagger\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;swagger-annotations\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.6.3\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;javax.validation\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;validation-api\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.0.1.Final\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.openapitools\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jackson-databind-nullable\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;0.2.1\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; å†æ¬¡è¿è¡Œç¼–è¯‘ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š\n1 2 3 4 5 6 7 8 9 package springfox.documentation.builders does not exist package springfox.documentation.builders does not exist package springfox.documentation.service does not exist package springfox.documentation.service does not exist package springfox.documentation.spi does not exist package springfox.documentation.spring.web.paths does not exist package springfox.documentation.spring.web.paths does not exist package springfox.documentation.spring.web.plugins does not exist package springfox.documentation.swagger2.annotations does not exist åœ¨ pom æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹å¯ä»¥è§£å†³è¿™äº›é”™è¯¯ï¼š\n1 2 3 4 5 6 7 8 9 10 \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;io.springfox\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;springfox-swagger-ui\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.6.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;io.springfox\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;springfox-swagger2\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.6.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; ä»”ç»†çœ‹çœ‹ç”Ÿæˆäº†ä»€ä¹ˆã€‚å¯¼èˆªè‡³ target/generated-sources/open-api ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸­å¯ä»¥æ‰¾åˆ°ç”Ÿæˆçš„æ–‡ä»¶ã€‚ä»¥ä¸‹ç›®å½•åŒ…å«ç”Ÿæˆçš„æ–‡ä»¶ï¼š\nsrc/main/org/openapitools/api : æ˜¯ Spring æ§åˆ¶å™¨çš„ä¸€ä¸ªæ¥å£ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå®ç° src/main/org/openapitools/configuration : æ˜¯ Swagger æ–‡æ¡£çš„æ§åˆ¶å™¨ src/main/org/openapitools/model : åŸºäº API è§„èŒƒçš„ API æ¨¡å‹ src/main/org/openapitools : OpenAPI2SpringBoot æ˜¯ä¸€ä¸ª SpringBootApplication å½“ä½ æƒ³è¿è¡Œ Spring Boot åº”ç”¨ç¨‹åºæ—¶ï¼Œä½ ä¼šé‡åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸º Spring Boot æ— æ³•ç¡®å®šå®ƒéœ€è¦è¿è¡Œå“ªä¸ª SpringBootApplication :\n1 $ mvn spring-boot:run ç”±æ­¤äº§ç”Ÿçš„é”™è¯¯æ˜¯ :\n1 Unable to find a single main class from the following candidates [org.openapitools.OpenAPI2SpringBoot, com.mydeveloperplanet.myopenapiplanet.MyOpenApiPlanetApplication é»˜è®¤æƒ…å†µä¸‹ä¼šç”Ÿæˆå¤§é‡ä»£ç ï¼Œä¹Ÿè®¸æ¯”ä½ éœ€è¦çš„è¿˜è¦å¤šã€‚ä¸‹ä¸€æ®µå°†ä»‹ç»å¦‚ä½•è°ƒæ•´é…ç½®ã€‚\nConfigure OpenAPI plugin é™¤äº† OpenAPI æ’ä»¶çš„ Maven éƒ¨åˆ†è®°å½•çš„æ‰€æœ‰é€‰é¡¹å¤–ï¼Œè¿˜æœ‰è®¸å¤šé¢å¤–çš„é€‰é¡¹å¯åœ¨ OpenAPI æ’ä»¶é…ç½®éƒ¨åˆ†çš„ configOptions éƒ¨åˆ†è¿›è¡Œé…ç½®ã€‚å¯é€šè¿‡åœ¨é…ç½®éƒ¨åˆ†æ·»åŠ  configHelp å±æ€§æ¥æ˜¾ç¤ºå¯ç”¨é€‰é¡¹ã€‚\n1 2 3 4 5 \u0026lt;configuration\u0026gt; \u0026lt;inputSpec\u0026gt;${project.basedir}/src/main/resources/customer.yml\u0026lt;/inputSpec\u0026gt; \u0026lt;generatorName\u0026gt;spring\u0026lt;/generatorName\u0026gt; \u0026lt;configHelp\u0026gt;true\u0026lt;/configHelp\u0026gt; \u0026lt;/configuration\u0026gt; åœ¨æ­¤åˆ—è¡¨ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ interfaceOnly å±æ€§ï¼Œå®ƒåªä¼šä¸ºæ§åˆ¶å™¨å’Œ API æ¨¡å‹ç”Ÿæˆæ¥å£ã€‚\n1 2 3 4 5 6 \u0026lt;configuration\u0026gt; ... \u0026lt;configOptions\u0026gt; \u0026lt;interfaceOnly\u0026gt;true\u0026lt;/interfaceOnly\u0026gt; \u0026lt;/configOptions\u0026gt; \u0026lt;/configuration\u0026gt; æ­¤æ—¶ï¼Œè¿˜å¯ä»¥åˆ é™¤ä¹‹å‰æ·»åŠ çš„ Springfox ä¾èµ–é¡¹ã€‚è¿™äº›éƒ½ä¸å†éœ€è¦äº†ã€‚\nä»ç”Ÿæˆçš„ä»£ç ä¸­è¿˜å¯ä»¥çœ‹åˆ°ï¼Œä»£ç æ˜¯åœ¨ org.openapitools åŒ…ä¸­ç”Ÿæˆçš„ã€‚ä½ å¯èƒ½å¸Œæœ›è¿™æ˜¯ä½ è‡ªå·±çš„è½¯ä»¶åŒ…åç§°ï¼Œè¿™å¯ä»¥é€šè¿‡ä¸€äº›åŸºæœ¬å±æ€§æ¥é…ç½®ã€‚é€šè¿‡ packageName å±æ€§ï¼Œæ‚¨å¯ä»¥è®¾ç½®é»˜è®¤çš„è½¯ä»¶åŒ…åç§°ã€‚ä¸è¿‡ï¼Œè¿˜å¿…é¡»è®¾ç½® apiPackage å’Œ modelPackage å±æ€§ï¼Œå¦åˆ™è¿™äº›å±æ€§ä»å°†åœ¨ org.openapitools åŒ…ä¸­ç”Ÿæˆã€‚åœ¨é…ç½®éƒ¨åˆ†æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚\n1 2 3 4 5 6 7 \u0026lt;configuration\u0026gt; .... \u0026lt;packageName\u0026gt;com.mydeveloperplanet.myopenapiplanet\u0026lt;/packageName\u0026gt; \u0026lt;apiPackage\u0026gt;com.mydeveloperplanet.myopenapiplanet.api\u0026lt;/apiPackage\u0026gt; \u0026lt;modelPackage\u0026gt;com.mydeveloperplanet.myopenapiplanet.model\u0026lt;/modelPackage\u0026gt; .... \u0026lt;/configuration\u0026gt; ç”Ÿæˆçš„æ§åˆ¶å™¨ç•Œé¢å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 @javax.annotation.Generated(value = \u0026#34;org.openapitools.codegen.languages.SpringCodegen\u0026#34;, date = \u0026#34;2022-01-15T12:51:43.809971036+01:00[Europe/Amsterdam]\u0026#34;) @Validated @Api(value = \u0026#34;customer\u0026#34;, description = \u0026#34;the customer API\u0026#34;) public interface CustomerApi { default Optional\u0026lt;NativeWebRequest\u0026gt; getRequest() { return Optional.empty(); } /** * POST /customer : Create Customer * * @param customer (optional) * @return OK (status code 200) */ @ApiOperation(value = \u0026#34;Create Customer\u0026#34;, nickname = \u0026#34;createCustomer\u0026#34;, notes = \u0026#34;\u0026#34;, response = CustomerFullData.class, tags={ \u0026#34;Customer\u0026#34;, }) @ApiResponses(value = { @ApiResponse(code = 200, message = \u0026#34;OK\u0026#34;, response = CustomerFullData.class) }) @RequestMapping( method = RequestMethod.POST, value = \u0026#34;/customer\u0026#34;, produces = { \u0026#34;application/json\u0026#34; }, consumes = { \u0026#34;application/json\u0026#34; } ) default ResponseEntity\u0026lt;CustomerFullData\u0026gt; createCustomer(@ApiParam(value = \u0026#34;\u0026#34;) @Valid @RequestBody(required = false) Customer customer) { getRequest().ifPresent(request -\u0026gt; { for (MediaType mediaType: MediaType.parseMediaTypes(request.getHeader(\u0026#34;Accept\u0026#34;))) { if (mediaType.isCompatibleWith(MediaType.valueOf(\u0026#34;application/json\u0026#34;))) { String exampleString = \u0026#34;null\u0026#34;; ApiUtil.setExampleResponse(request, \u0026#34;application/json\u0026#34;, exampleString); break; } } }); return new ResponseEntity\u0026lt;\u0026gt;(HttpStatus.NOT_IMPLEMENTED); } ... Use Generated Code åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œé¦–å…ˆè¦åœ¨åŒ… domain ä¸­åˆ›å»ºä¸€ä¸ª Customer ç±»ã€‚\n1 2 3 4 5 6 public class Customer { private Long customerId; private String firstName; private String lastName; // Getters and setters } åˆ›å»ºä¸€ä¸ª CustomerControllerï¼Œå®ç°ç”Ÿæˆçš„ CustomerApi æ¥å£ã€‚\nåˆ›å»º Customer æ˜¯ä¸€ç§åŸºæœ¬çš„å®ç°æ–¹å¼ï¼Œæ‚¨å¯ä»¥å°† Customer æ·»åŠ åˆ° HashMap ä¸­ï¼šè®¡ç®—ç´¢å¼•æ˜¯é”®ï¼ŒåŸŸå®¢æˆ·å¯¹è±¡æ˜¯å€¼ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ‚¨å°†æŠŠå®¢æˆ·ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚\næ£€ç´¢å®¢æˆ·æ—¶ï¼Œé¦–å…ˆè¦æ£€æŸ¥æ‰€è¯·æ±‚çš„ ID æ˜¯å¦å­˜åœ¨äº HashMap ä¸­ã€‚æ‰¾åˆ° ID åï¼ŒCustomer åŸŸå¯¹è±¡å°†è½¬æ¢ä¸º Customer API æ¨¡å‹å¯¹è±¡å¹¶è¿”å›ç»™è¯·æ±‚è€…ã€‚å¦‚æœæœªæ‰¾åˆ° IDï¼Œåˆ™ä¼šè¿”å› NOT FOUND å“åº”ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 @RestController public class CustomerController implements CustomerApi { private final HashMap\u0026lt;Long, com.mydeveloperplanet.myopenapiplanet.domain.Customer\u0026gt; customers = new HashMap\u0026lt;\u0026gt;(); private Long index = 0L; @Override public ResponseEntity\u0026lt;CustomerFullData\u0026gt; createCustomer(Customer apiCustomer) { com.mydeveloperplanet.myopenapiplanet.domain.Customer customer = new com.mydeveloperplanet.myopenapiplanet.domain.Customer(); customer.setCustomerId(index); customer.setFirstName(apiCustomer.getFirstName()); customer.setLastName(apiCustomer.getLastName()); customers.put(index, customer); index++; return ResponseEntity.ok(domainToApi(customer)); } @Override public ResponseEntity\u0026lt;CustomerFullData\u0026gt; getCustomer(Long customerId) { if (customers.containsKey(customerId)) { return ResponseEntity.ok(domainToApi(customers.get(customerId))); } else { return new ResponseEntity\u0026lt;\u0026gt;(HttpStatus.NOT_FOUND); } } private CustomerFullData domainToApi(com.mydeveloperplanet.myopenapiplanet.domain.Customer customer) { CustomerFullData cfd = new CustomerFullData(); cfd.setCustomerId(customer.getCustomerId()); cfd.setFirstName(customer.getFirstName()); cfd.setLastName(customer.getLastName()); return cfd; } } è¿è¡Œ Spring Boot åº”ç”¨ç¨‹åºï¼š\n1 $ mvn spring-boot:run æ·»åŠ  Consumerï¼Œå¹¶æŸ¥æ‰¾\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 $ curl -i -X \u0026#39;POST\u0026#39; \\ \u0026gt; \u0026#39;http://localhost:8080/customer\u0026#39; \\ \u0026gt; -H \u0026#39;accept: application/json\u0026#39; \\ \u0026gt; -H \u0026#39;Content-Type: application/json\u0026#39; \\ \u0026gt; -d \u0026#39;{ \u0026gt; \u0026#34;firstName\u0026#34;: \u0026#34;Foo\u0026#34;, \u0026gt; \u0026#34;lastName\u0026#34;: \u0026#34;Bar\u0026#34; \u0026gt; }\u0026#39; HTTP/1.1 200 Content-Type: application/json Transfer-Encoding: chunked Date: Sat, 15 Jan 2022 11:42:47 GMT {\u0026#34;firstName\u0026#34;:\u0026#34;Foo\u0026#34;,\u0026#34;lastName\u0026#34;:\u0026#34;Bar\u0026#34;,\u0026#34;customerId\u0026#34;:0} $ curl -i -X \u0026#39;POST\u0026#39; \\ \u0026gt; \u0026#39;http://localhost:8080/customer\u0026#39; \\ \u0026gt; -H \u0026#39;accept: application/json\u0026#39; \\ \u0026gt; -H \u0026#39;Content-Type: application/json\u0026#39; \\ \u0026gt; -d \u0026#39;{ \u0026gt; \u0026#34;firstName\u0026#34;: \u0026#34;John\u0026#34;, \u0026gt; \u0026#34;lastName\u0026#34;: \u0026#34;Doe\u0026#34; \u0026gt; }\u0026#39; HTTP/1.1 200 Content-Type: application/json Transfer-Encoding: chunked Date: Sat, 15 Jan 2022 11:43:11 GMT {\u0026#34;firstName\u0026#34;:\u0026#34;John\u0026#34;,\u0026#34;lastName\u0026#34;:\u0026#34;Doe\u0026#34;,\u0026#34;customerId\u0026#34;:1} $ curl -i http://localhost:8080/customer/1 HTTP/1.1 200 Content-Type: application/json Transfer-Encoding: chunked Date: Sat, 15 Jan 2022 11:45:21 GMT {\u0026#34;firstName\u0026#34;:\u0026#34;John\u0026#34;,\u0026#34;lastName\u0026#34;:\u0026#34;Doe\u0026#34;,\u0026#34;customerId\u0026#34;:1} $ curl -i http://localhost:8080/customer/2 HTTP/1.1 404 Content-Length: 0 Date: Sat, 15 Jan 2022 11:46:18 GMT Add OpenAPI Documentation https://springdoc.org/ 1 2 3 4 5 \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springdoc\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;springdoc-openapi-ui\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.5.12\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; åœ¨æµè§ˆå™¨ä¸­å¯¼èˆªè‡³ http://localhost:8080/swagger-ui.htmlï¼Œå³å¯æ˜¾ç¤º OpenAPI æ–‡æ¡£ï¼Œå¹¶å¯åœ¨æ­¤å¤„ä¸‹è½½ OpenAPI yaml è§„èŒƒã€‚\nå½“ä½ ä»”ç»†æŸ¥çœ‹æ–‡æ¡£æ—¶ï¼Œä¼šå‘ç°å®ƒä¸ Swagger ç¼–è¾‘å™¨ä¸­æ˜¾ç¤ºçš„æ–‡æ¡£æœ‰æ‰€ä¸åŒã€‚springdoc ä¾èµ–é¡¹é»˜è®¤ä¼šä»æºä»£ç ç”Ÿæˆæ–‡æ¡£ï¼Œå¹¶ä½¿ç”¨ç”Ÿæˆçš„æ–‡æ¡£ã€‚å¦‚ä½•é…ç½® springdoc ä»¥ä½¿ç”¨ customer.yml æ–‡ä»¶ï¼Ÿ\né¦–å…ˆï¼Œæ‚¨éœ€è¦å°† customer.yml æ–‡ä»¶ç§»è‡³ src/main/resources/static/customer.yml ç›®å½•ã€‚è¿™ä¹Ÿæ„å‘³ç€ä½ éœ€è¦æ›´æ”¹ pom ä¸­çš„ Open API ç”Ÿæˆå™¨é…ç½®ã€‚\n1 2 3 4 \u0026lt;configuration\u0026gt; \u0026lt;inputSpec\u0026gt;${project.basedir}/src/main/resources/static/customer.yml\u0026lt;/inputSpec\u0026gt; ... \u0026lt;/configuration\u0026gt; åœ¨ application.properties æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å±æ€§\n1 springdoc.swagger-ui.url=/customer.yml URL ç°åœ¨æ˜¾ç¤ºçš„æ˜¯æ‚¨åˆ›å»ºçš„ customer.yml ä¸­å®šä¹‰çš„ API\nResources å®˜æ–¹ OpenAPI Specification v3.1.0 repo https://tools.openapis.org/categories/code-generators.html Blogs Open API Server Implementation Using OpenAPI Generator Generate Server Code Using OpenAPI Generator ","permalink":"https://WFUing.github.io/posts/tech/language/code-generation/openapi-code-generator/","summary":"OpenAPI Generator å¯æ ¹æ® OpenAPI yaml è§„èŒƒç”Ÿæˆä»£ç ï¼Œå¹¶æ”¯æŒå¤šç§è¯­è¨€ã€‚\nå¦‚ä½•ä½¿ç”¨ OpenAPI æœ¬èŠ‚ä»‹ç»å¦‚ä½•åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ OpenAPI yaml è§„èŒƒï¼Œå¹¶ç”¨å®ƒä¸º Spring Boot åº”ç”¨ç¨‹åºç”ŸæˆæœåŠ¡å™¨ç«¯ä»£ç ã€‚\nCreate OpenAPI spec é¦–å…ˆè¦åšçš„æ˜¯ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºè®¾è®¡ OpenAPI è§„èŒƒã€‚æ‚¨å°†è®¾è®¡ä¸€ä¸ªå®¢æˆ· APIã€‚è¯¥ API å…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªå®¢æˆ·ï¼Œå¹¶æ ¹æ®å…¶ ID æ£€ç´¢è¯¥å®¢æˆ·ã€‚ç°å®ç”Ÿæ´»ä¸­çš„åº”ç”¨ç¨‹åºæ¥å£ä¼šæ›´åŠ å¤æ‚ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯ä¿æŒç®€å•ã€‚\nä½¿ç”¨ Swagger ç¼–è¾‘å™¨ æ˜¯è®¾è®¡ API çš„ç®€ä¾¿æ–¹æ³•ã€‚å®ƒä¼šç«‹å³åé¦ˆæ‚¨çš„è§„èŒƒæ˜¯å¦æœ‰é”™è¯¯ï¼Œå¹¶å³æ—¶ç”Ÿæˆ Swagger æ–‡æ¡£ã€‚\nOpenAPI è§„èŒƒçš„ header åŒ…å«ä¸€äº›æœ‰å…³ API çš„å…ƒæ•°æ®ï¼Œå¦‚æ ‡é¢˜ã€ç‰ˆæœ¬ã€API è¿è¡Œçš„æœåŠ¡å™¨ç­‰ã€‚æ ‡ç­¾å¯ç”¨äºå¯¹èµ„æºè¿›è¡Œåˆ†ç»„ï¼Œä»è€Œä¸ºæ‚¨æä¾›æ›´å¤šæ¦‚è§ˆã€‚\n1 2 3 4 5 6 7 8 9 openapi: \u0026#34;3.0.2\u0026#34; info: title: API Customer version: \u0026#34;1.0\u0026#34; servers: - url: https://localhost:8080 tags: - name: Customer description: Customer specific data. paths éƒ¨åˆ†åŒ…å«èµ„æºè§„èŒƒã€‚æ‚¨å®šä¹‰çš„ç¬¬ä¸€ä¸ªèµ„æºæ˜¯åˆ›å»º Customer çš„èµ„æºï¼Œå°†é€šè¿‡åŒ…å« JSON ä¸»ä½“çš„ POST æ–¹å¼åˆ›å»ºã€‚ç”Ÿæˆå™¨å°†ä½¿ç”¨ operationId ä¸ºè¯¥èµ„æºåˆ›å»ºæ–¹æ³•åç§°ã€‚ä¸ºç®€å•èµ·è§ï¼Œåªè€ƒè™‘æˆåŠŸå“åº”ã€‚æ¨¡å¼æŒ‡çš„æ˜¯ JSON ä¸»ä½“ï¼Œå°†åœ¨æœ¬èŠ‚åé¢ä»‹ç»ã€‚","title":"Openapi Code Generator"},{"content":"REST å…¨ç§°æ˜¯ Representational State Transferï¼ˆè¡¨ç°å±‚çŠ¶æ€è½¬åŒ–ï¼‰ï¼Œæ›´å…·ä½“çš„å…¨ç§°æ˜¯ Resource Representational State Transferï¼ˆèµ„æºè¡¨ç°å±‚çŠ¶æ€è½¬åŒ–ï¼‰ï¼Œå…·ä½“å¯ä»¥è§ Roy Thomas Fielding çš„åšå£«è®ºæ–‡ https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm è¿™ä¸€ç« ã€‚\nREST æŒ‡çš„æ˜¯ä¸€ç»„æ¶æ„çº¦æŸæ¡ä»¶å’ŒåŸåˆ™ï¼š\nä¸ºè®¾è®¡ä¸€ä¸ªåŠŸèƒ½å¼ºã€æ€§èƒ½å¥½ã€é€‚å®œé€šä¿¡çš„ web åº”ç”¨ å¦‚æœä¸€ä¸ªæ¶æ„ç¬¦åˆ REST çš„çº¦æŸæ¡ä»¶å’ŒåŸåˆ™ï¼Œæˆ‘ä»¬å°±ç§°å®ƒä¸º RESTful ç»“æ„ Resources restful petclinic tutorial docter paper bilibili-è½¯ä»¶ä½“ç³»ç»“æ„-2022.7-REST Create REST APIs with JAX-RS æ ¸å¿ƒæ¦‚å¿µ èµ„æºï¼ˆResourcesï¼‰ è¡¨ç°å±‚ï¼ˆRepresentationï¼‰ çŠ¶æ€è½¬åŒ–ï¼ˆState Transferï¼‰ èµ„æº ç½‘ç»œä¸Šçš„ä¸€ä¸ªå®ä½“ï¼Œæˆ–è€…è¯´æ˜¯ç½‘ç»œä¸Šçš„ä¸€ä¸ªå…·ä½“ä¿¡æ¯ï¼Œä»»ä½•äº‹ç‰©ï¼Œåªè¦æœ‰è¢«å¼•ç”¨åˆ°çš„å¿…è¦ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªèµ„æºã€‚\nä¸€æ®µæ–‡æœ¬ï¼Œä¸€å¼ å›¾ç‰‡ï¼Œä¸€é¦–æ­Œæ›² æ•°æ®åº“ä¸­çš„ä¸€è¡Œæ•°æ® ä¸€ä¸ªæ‰‹æœºå·ç ï¼ŒæŸç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ ä¸€ç§æœåŠ¡ èµ„æºæ ‡è¯† è¦è®©ä¸€ä¸ªèµ„æºå¯ä»¥è¢«è¯†åˆ«ï¼Œéœ€è¦æœ‰ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œåœ¨Webä¸­è¿™ä¸ªå”¯ä¸€æ ‡è¯†å°±æ˜¯URIï¼ˆUniform Resource Identifierï¼‰ã€‚ä¾‹å¦‚ï¼š\nhttps://www.ex.com/software/releases/latest.tar.gz https://www.ex.com/map/roads/USA/CA/17_mile_drive https://www.ex.com/search/cs578 URI è®¾è®¡åŸåˆ™\næ˜“è¯»ï¼š https://www.oschina.net/news/38119/oschina-translate-reward-plan è¡¨è¾¾èµ„æºçš„å±‚çº§å…³ç³»ï¼š https://github.com/git/git/commit/e3ae056f87e1d675913d08/orders/2012/10 è¡¨ç¤ºèµ„æºçš„åŒçº§å…³ç³»ï¼š /git/block-sha1/sha1.h/compare/e3af72cda056f87e;bd63e61bdf38eb264 è¡¨è¾¾èµ„æºçš„è¿‡æ»¤ï¼š https://github.com/git/git/pulls?q=is%3Aclosed ç»Ÿä¸€èµ„æºæ¥å£\nRESTful æ¶æ„åº”è¯¥éµå¾ªç»Ÿä¸€æ¥å£åŸåˆ™ï¼Œç»Ÿä¸€æ¥å£åŒ…å«äº†ä¸€ç»„å—é™çš„é¢„å®šä¹‰çš„æ“ä½œï¼Œä¸è®ºä»€ä¹ˆæ ·çš„èµ„æºï¼Œéƒ½æ˜¯é€šè¿‡ä½¿ç”¨ç›¸åŒçš„æ¥å£è¿›è¡Œèµ„æºçš„è®¿é—®ã€‚æ¥å£åº”è¯¥ä½¿ç”¨æ ‡å‡†çš„ HTTP æ–¹æ³•å¦‚ GETï¼ŒPUT å’Œ POSTï¼Œå¹¶éµå¾ªè¿™äº›æ–¹æ³•çš„è¯­ä¹‰ å¦‚æœæŒ‰ç…§HTTPæ–¹æ³•çš„è¯­ä¹‰æ¥æš´éœ²èµ„æºï¼Œé‚£ä¹ˆæ¥å£å°†ä¼šæ‹¥æœ‰å®‰å…¨æ€§å’Œå¹‚ç­‰æ€§çš„ç‰¹æ€§ GETå’ŒHEADè¯·æ±‚æ˜¯å®‰å…¨çš„ï¼Œæ— è®ºè¯·æ±‚å¤šå°‘æ¬¡ï¼Œéƒ½ä¸æ”¹å˜æœåŠ¡å™¨çŠ¶æ€ GETã€HEADã€PUTå’ŒDELETEè¯·æ±‚æ˜¯å¹‚ç­‰çš„ï¼Œæ— è®ºå¯¹èµ„æºæ“ä½œå¤šå°‘æ¬¡ï¼Œç»“æœæ€»æ˜¯ä¸€æ ·çš„ï¼Œåé¢çš„è¯·æ±‚å¹¶ä¸ä¼šäº§ç”Ÿæ¯”ç¬¬ä¸€æ¬¡æ›´å¤šçš„å½±å“ GET è·å–è¡¨ç¤ºï¼Œå˜æ›´æ—¶è·å–è¡¨ç¤ºï¼ˆç¼“å­˜ï¼‰ã€‚å®‰å…¨ä¸”å¹‚ç­‰ã€‚\n200: OKï¼Œè¡¨ç¤ºå·²åœ¨å“åº”ä¸­å‘å‡º 204: æ— å†…å®¹ï¼Œèµ„æºæœ‰ç©ºè¡¨ç¤º 301: Moved Permanentlyï¼Œèµ„æºçš„URIå·²è¢«æ›´æ–° 303: See Otherï¼Œå…¶ä»–ï¼ˆå¦‚ï¼Œè´Ÿè½½å‡è¡¡ï¼‰ 304: not modifiedï¼Œèµ„æºæœªæ›´æ”¹ï¼ˆç¼“å­˜ï¼‰ 400: bad requestï¼ŒæŒ‡ä»£åè¯·æ±‚ï¼ˆå¦‚ï¼Œå‚æ•°é”™è¯¯ï¼‰ 404: not foundï¼Œèµ„æºä¸å­˜åœ¨ 406: not acceptableï¼ŒæœåŠ¡ç«¯ä¸æ”¯æŒæ‰€éœ€è¡¨ç¤º 500: internal server errorï¼Œé€šç”¨é”™è¯¯å“åº” 503: Service Unavailableï¼ŒæœåŠ¡ç«¯å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ POST ä½¿ç”¨æœåŠ¡ç«¯ç®¡ç†çš„ï¼ˆè‡ªåŠ¨äº§ç”Ÿï¼‰çš„å®ä¾‹å·åˆ›å»ºèµ„æºï¼Œæˆ–åˆ›å»ºå­èµ„æºï¼Œéƒ¨åˆ†æ›´æ–°èµ„æºï¼Œå¦‚æœæ²¡æœ‰è¢«ä¿®æ”¹ï¼Œåˆ™ä¸è¿‡æ›´æ–°èµ„æºï¼ˆä¹è§‚é”ï¼‰ã€‚ä¸å®‰å…¨ä¸”ä¸å¹‚ç­‰ã€‚\n406: not acceptableï¼ŒæœåŠ¡ç«¯ä¸æ”¯æŒæ‰€éœ€è¡¨ç¤º 409: conflictï¼Œé€šç”¨å†²çª 412: Precondition Failedï¼Œå‰ç½®æ¡ä»¶å¤±è´¥ï¼ˆå¦‚æ‰§è¡Œæ¡ä»¶æ›´æ–°æ—¶çš„å†²çªï¼‰ 415: unsupported media typeï¼Œæ¥å—åˆ°çš„è¡¨ç¤ºä¸å—æ”¯æŒ 500: internal server errorï¼Œé€šç”¨é”™è¯¯å“åº” 503: Service Unavailableï¼ŒæœåŠ¡å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ PUT ç”¨å®¢æˆ·ç«¯ç®¡ç†çš„å®ä¾‹å·åˆ›å»ºä¸€ä¸ªèµ„æºï¼Œé€šè¿‡æ›¿æ¢çš„æ–¹å¼æ›´æ–°èµ„æºï¼Œå¦‚æœæœªè¢«ä¿®æ”¹ï¼Œåˆ™æ›´æ–°èµ„æºï¼ˆä¹è§‚é”ï¼‰ã€‚ä¸å®‰å…¨ä½†å¹‚ç­‰ã€‚\n200: OKï¼Œå¦‚æœå·²å­˜åœ¨èµ„æºè¢«æ›´æ”¹ 201: createdï¼Œå¦‚æœæ–°èµ„æºè¢«åˆ›å»º 301: Moved Permanentlyï¼Œèµ„æºçš„URIå·²æ›´æ”¹ 303: See Otherï¼Œå…¶ä»–ï¼ˆå¦‚ï¼Œè´Ÿè½½å‡è¡¡ï¼‰ 400: bad requestï¼ŒæŒ‡ä»£åè¯·æ±‚ 404: not foundï¼Œèµ„æºä¸å­˜åœ¨ DELETE åˆ é™¤èµ„æºã€‚ä¸å®‰å…¨ä½†å¹‚ç­‰ã€‚\n200: OKï¼Œèµ„æºå·²è¢«åˆ é™¤ 301: Moved Permanentlyï¼Œèµ„æºçš„URIå·²æ›´æ”¹ 303: See Otherï¼Œå…¶ä»–ï¼Œå¦‚è´Ÿè½½å‡è¡¡ 400: bad requestï¼ŒæŒ‡ä»£åè¯·æ±‚ 404: not foundï¼Œèµ„æºä¸å­˜åœ¨ 409: conflictï¼Œé€šç”¨å†²çª 500: internal server errorï¼Œé€šç”¨é”™è¯¯å“åº” 503: Service Unavailableï¼ŒæœåŠ¡ç«¯å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ æŒ‡å¯¼æ„ä¹‰ ç»Ÿä¸€èµ„æºæ¥å£è¦æ±‚ä½¿ç”¨æ ‡å‡†çš„HTTPæ–¹æ³•å¯¹èµ„æºè¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥URIåªåº”è¯¥æ¥è¡¨ç¤ºèµ„æºçš„åç§°ï¼Œè€Œä¸åº”è¯¥åŒ…æ‹¬èµ„æºçš„æ“ä½œã€‚é€šä¿—æ¥è¯´ï¼ŒURIä¸åº”è¯¥ä½¿ç”¨åŠ¨ä½œæ¥æè¿°ã€‚ä¾‹å¦‚ï¼š\nPOST /getUser?id=1 $\\rightarrow$ GET /Uset/1 GET /newUser $\\rightarrow$ POST /User GET /updateUser $\\rightarrow$ PUT /User/1 GET /deleteUser?id=2 $\\rightarrow$ DELETE /User/2 è¡¨ç° (Representation) \u0026ldquo;èµ„æº\u0026quot;æ˜¯ä¸€ç§ä¿¡æ¯å®ä½“ï¼Œå®ƒå¯ä»¥æœ‰å¤šç§å¤–åœ¨è¡¨ç°å½¢å¼ã€‚æˆ‘ä»¬æŠŠ\u0026quot;èµ„æº\u0026quot;å…·ä½“å‘ˆç°å‡ºæ¥çš„å½¢å¼ï¼Œå«åšå®ƒçš„\u0026quot;è¡¨ç°å±‚\u0026rdquo;ï¼ˆRepresentationï¼‰\næ–‡æœ¬å¯ä»¥ç”¨txtæ ¼å¼è¡¨ç°ï¼Œä¹Ÿå¯ä»¥ç”¨HTMLæ ¼å¼ã€XMILæ ¼å¼ã€JSONæ ¼å¼è¡¨ç°ï¼Œç”šè‡³å¯ä»¥é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ å›¾ç‰‡å¯ä»¥ç”¨JPGæ ¼å¼è¡¨ç°ï¼Œä¹Ÿå¯ä»¥ç”¨PNGæ ¼å¼è¡¨ç¤º èµ„æºè¡¨è¿° URIåªä»£è¡¨èµ„æºçš„å®ä½“ï¼Œä¸ä»£è¡¨å®ƒçš„å½¢å¼ã€‚ä¸¥æ ¼åœ°è¯´ï¼Œæœ‰äº›ç½‘å€æœ€åçš„ .html åç¼€åæ˜¯ä¸å¿…è¦çš„ï¼Œå› ä¸ºè¿™ä¸ªåç¼€åè¡¨ç¤ºæ ¼å¼ï¼Œå±äº \u0026ldquo;è¡¨ç°å±‚\u0026rdquo; èŒƒç•´ï¼Œè€ŒURIåº”è¯¥åªä»£è¡¨ \u0026ldquo;èµ„æº\u0026rdquo; çš„ä½ç½®ã€‚\nèµ„æºçš„è¡¨è¿°åŒ…æ‹¬æ•°æ®å’Œæè¿°æ•°æ®çš„å…ƒæ•°æ®ï¼Œä¾‹å¦‚ï¼ŒHTTPå¤´ \u0026ldquo;Content-Type\u0026rdquo; å°±æ˜¯è¿™æ ·ä¸€ä¸ªå…ƒæ•°æ®å±æ€§\nå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ Accept å¤´è¯·æ±‚ä¸€ç§ç‰¹å®šæ ¼å¼çš„è¡¨è¿°ï¼ŒæœåŠ¡ç«¯åˆ™é€šè¿‡ Content-Type å‘Šè¯‰å®¢æˆ·ç«¯èµ„æºçš„è¡¨è¿°å½¢å¼\næ”¯æŒçš„è¡¨è¾¾\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 ~ Â» http get https://api.github.com/orgs/github \u0026#39;Accept: application/json\u0026#39; HTTP/1.1 200 OK Content-Type: application/json; charset=utf-8 { \u0026#34;archived_at\u0026#34;: null, \u0026#34;avatar_url\u0026#34;: \u0026#34;https://avatars.githubusercontent.com/u/9919?v=4\u0026#34;, \u0026#34;blog\u0026#34;: \u0026#34;https://github.com/about\u0026#34;, \u0026#34;company\u0026#34;: null, \u0026#34;created_at\u0026#34;: \u0026#34;2008-05-11T04:37:31Z\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;How people build software.\u0026#34;, \u0026#34;email\u0026#34;: null, \u0026#34;events_url\u0026#34;: \u0026#34;https://api.github.com/orgs/github/events\u0026#34;, \u0026#34;followers\u0026#34;: 29993, \u0026#34;following\u0026#34;: 0, \u0026#34;has_organization_projects\u0026#34;: true, \u0026#34;has_repository_projects\u0026#34;: true, \u0026#34;hooks_url\u0026#34;: \u0026#34;https://api.github.com/orgs/github/hooks\u0026#34;, \u0026#34;html_url\u0026#34;: \u0026#34;https://github.com/github\u0026#34;, \u0026#34;id\u0026#34;: 9919, \u0026#34;is_verified\u0026#34;: true, \u0026#34;issues_url\u0026#34;: \u0026#34;https://api.github.com/orgs/github/issues\u0026#34;, \u0026#34;location\u0026#34;: \u0026#34;San Francisco, CA\u0026#34;, \u0026#34;login\u0026#34;: \u0026#34;github\u0026#34;, \u0026#34;members_url\u0026#34;: \u0026#34;https://api.github.com/orgs/github/members{/member}\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;GitHub\u0026#34;, \u0026#34;node_id\u0026#34;: \u0026#34;MDEyOk9yZ2FuaXphdGlvbjk5MTk=\u0026#34;, \u0026#34;public_gists\u0026#34;: 0, \u0026#34;public_members_url\u0026#34;: \u0026#34;https://api.github.com/orgs/github/public_members{/member}\u0026#34;, \u0026#34;public_repos\u0026#34;: 477, \u0026#34;repos_url\u0026#34;: \u0026#34;https://api.github.com/orgs/github/repos\u0026#34;, \u0026#34;twitter_username\u0026#34;: null, \u0026#34;type\u0026#34;: \u0026#34;Organization\u0026#34;, \u0026#34;updated_at\u0026#34;: \u0026#34;2022-11-29T19:44:55Z\u0026#34;, \u0026#34;url\u0026#34;: \u0026#34;https://api.github.com/orgs/github\u0026#34; } ä¸æ”¯æŒçš„è¡¨è¾¾\n1 2 3 4 5 6 7 8 ~ Â» http get https://api.github.com/orgs/github \u0026#39;Accept: text/xml\u0026#39; HTTP/1.1 415 Unsupported Media Type Content-Type: application/json; charset=utf-8 { \u0026#34;documentation_url\u0026#34;: \u0026#34;https://docs.github.com/v3/media\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Unsupported \u0026#39;Accept\u0026#39; header: \u0026#39;text/xml\u0026#39;. Must accept \u0026#39;application/json\u0026#39;.\u0026#34; } èµ„æºé“¾æ¥ å½“ä½ æµè§ˆWebç½‘é¡µæ—¶ï¼Œä»ä¸€ä¸ªè¿æ¥è·³åˆ°ä¸€ä¸ªé¡µé¢ï¼Œå†ä»å¦ä¸€ä¸ªè¿æ¥è·³åˆ°å¦å¤–ä¸€å†¬é¡µé¢ï¼Œå°±æ˜¯åˆ©ç”¨äº†è¶…åª’ä½“çš„æ¦‚å¿µï¼šæŠŠä¸€ä¸ªä¸ªæŠŠèµ„æºé“¾æ¥èµ·æ¥ã€‚\nåŒæ ·ï¼Œæˆ‘ä»¬åœ¨è¡¨è¿°æ ¼å¼é‡Œè¾¹åŠ å…¥é“¾æ¥æ¥å¼•å¯¼å®¢æˆ·ç«¯ï¼š\nåœ¨Linkå¤´å‘Šè¯‰å®¢æˆ·ç«¯æ€ä¹ˆè®¿é—®ä¸‹ä¸€é¡µå’Œæœ€åä¸€é¡µçš„è®°å½•ï¼› åœ¨å“åº”ä½“é‡Œç”¨urlæ¥é“¾æ¥é¡¹ç›®æ‰€æœ‰è€…å’Œé¡¹ç›®åœ°å€ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 ~ Â» http -h get https://api.github.com/orgs/github/repos HTTP/1.1 200 OK Content-Type: application/json; charset=utf-8 Link: \u0026lt;https://api.github.com/organizations/9919/repos?page=2\u0026gt;; rel=\u0026#34;next\u0026#34;, \u0026lt;https://api.github.com/organizations/9919/repos?page=16\u0026gt;; rel=\u0026#34;last\u0026#34; [ { \u0026#34;id\u0026#34;: 3222, \u0026#34;node_id\u0026#34;: \u0026#34;MDEwOlJlcG9zaXRvcnkzMjIy\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;media\u0026#34;, \u0026#34;full_name\u0026#34;: \u0026#34;github/media\u0026#34;, \u0026#34;private\u0026#34;: false, \u0026#34;owner\u0026#34;: { \u0026#34;login\u0026#34;: \u0026#34;github\u0026#34;, \u0026#34;id\u0026#34;: 9919, \u0026#34;node_id\u0026#34;: \u0026#34;MDEyOk9yZ2FuaXphdGlvbjk5MTk=\u0026#34;, \u0026#34;avatar_url\u0026#34;: \u0026#34;https://avatars.githubusercontent.com/u/9919?v=4\u0026#34;, \u0026#34;gravatar_id\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;url\u0026#34;: \u0026#34;https://api.github.com/users/github\u0026#34;, \u0026#34;html_url\u0026#34;: \u0026#34;https://github.com/github\u0026#34;, \u0026#34;followers_url\u0026#34;: \u0026#34;https://api.github.com/users/github/followers\u0026#34;, \u0026#34;following_url\u0026#34;: \u0026#34;https://api.github.com/users/github/following{/other_user}\u0026#34;, \u0026#34;gists_url\u0026#34;: \u0026#34;https://api.github.com/users/github/gists{/gist_id}\u0026#34;, \u0026#34;starred_url\u0026#34;: \u0026#34;https://api.github.com/users/github/starred{/owner}{/repo}\u0026#34;, \u0026#34;subscriptions_url\u0026#34;: \u0026#34;https://api.github.com/users/github/subscriptions\u0026#34;, \u0026#34;organizations_url\u0026#34;: \u0026#34;https://api.github.com/users/github/orgs\u0026#34;, \u0026#34;repos_url\u0026#34;: \u0026#34;https://api.github.com/users/github/repos\u0026#34;, \u0026#34;events_url\u0026#34;: \u0026#34;https://api.github.com/users/github/events{/privacy}\u0026#34;, \u0026#34;received_events_url\u0026#34;: \u0026#34;https://api.github.com/users/github/received_events\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;Organization\u0026#34;, \u0026#34;site_admin\u0026#34;: false }, \u0026#34;html_url\u0026#34;: \u0026#34;https://github.com/github/media\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Media files for use in your GitHub integration projects\u0026#34;, \u0026#34;fork\u0026#34;: false, \u0026#34;url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media\u0026#34;, \u0026#34;forks_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/forks\u0026#34;, \u0026#34;keys_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/keys{/key_id}\u0026#34;, \u0026#34;collaborators_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/collaborators{/collaborator}\u0026#34;, \u0026#34;teams_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/teams\u0026#34;, \u0026#34;hooks_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/hooks\u0026#34;, \u0026#34;issue_events_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/issues/events{/number}\u0026#34;, \u0026#34;events_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/events\u0026#34;, \u0026#34;assignees_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/assignees{/user}\u0026#34;, \u0026#34;branches_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/branches{/branch}\u0026#34;, \u0026#34;tags_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/tags\u0026#34;, \u0026#34;blobs_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/git/blobs{/sha}\u0026#34;, \u0026#34;git_tags_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/git/tags{/sha}\u0026#34;, \u0026#34;git_refs_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/git/refs{/sha}\u0026#34;, \u0026#34;trees_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/git/trees{/sha}\u0026#34;, \u0026#34;statuses_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/statuses/{sha}\u0026#34;, \u0026#34;languages_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/languages\u0026#34;, \u0026#34;stargazers_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/stargazers\u0026#34;, \u0026#34;contributors_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/contributors\u0026#34;, \u0026#34;subscribers_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/subscribers\u0026#34;, \u0026#34;subscription_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/subscription\u0026#34;, \u0026#34;commits_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/commits{/sha}\u0026#34;, \u0026#34;git_commits_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/git/commits{/sha}\u0026#34;, \u0026#34;comments_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/comments{/number}\u0026#34;, \u0026#34;issue_comment_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/issues/comments{/number}\u0026#34;, \u0026#34;contents_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/contents/{+path}\u0026#34;, \u0026#34;compare_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/compare/{base}...{head}\u0026#34;, \u0026#34;merges_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/merges\u0026#34;, \u0026#34;archive_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/{archive_format}{/ref}\u0026#34;, \u0026#34;downloads_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/downloads\u0026#34;, \u0026#34;issues_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/issues{/number}\u0026#34;, \u0026#34;pulls_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/pulls{/number}\u0026#34;, \u0026#34;milestones_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/milestones{/number}\u0026#34;, \u0026#34;notifications_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/notifications{?since,all,participating}\u0026#34;, \u0026#34;labels_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/labels{/name}\u0026#34;, \u0026#34;releases_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/releases{/id}\u0026#34;, \u0026#34;deployments_url\u0026#34;: \u0026#34;https://api.github.com/repos/github/media/deployments\u0026#34;, \u0026#34;created_at\u0026#34;: \u0026#34;2008-03-09T22:43:49Z\u0026#34;, \u0026#34;updated_at\u0026#34;: \u0026#34;2023-09-23T01:50:37Z\u0026#34;, \u0026#34;pushed_at\u0026#34;: \u0026#34;2015-02-27T17:31:20Z\u0026#34;, \u0026#34;git_url\u0026#34;: \u0026#34;git://github.com/github/media.git\u0026#34;, \u0026#34;ssh_url\u0026#34;: \u0026#34;git@github.com:github/media.git\u0026#34;, \u0026#34;clone_url\u0026#34;: \u0026#34;https://github.com/github/media.git\u0026#34;, \u0026#34;svn_url\u0026#34;: \u0026#34;https://github.com/github/media\u0026#34;, \u0026#34;homepage\u0026#34;: \u0026#34;https://github.com/logos\u0026#34;, \u0026#34;size\u0026#34;: 4484, \u0026#34;stargazers_count\u0026#34;: 293, \u0026#34;watchers_count\u0026#34;: 293, \u0026#34;language\u0026#34;: null, \u0026#34;has_issues\u0026#34;: false, \u0026#34;has_projects\u0026#34;: true, \u0026#34;has_downloads\u0026#34;: true, \u0026#34;has_wiki\u0026#34;: false, \u0026#34;has_pages\u0026#34;: false, \u0026#34;has_discussions\u0026#34;: false, \u0026#34;forks_count\u0026#34;: 69, \u0026#34;mirror_url\u0026#34;: null, \u0026#34;archived\u0026#34;: true, \u0026#34;disabled\u0026#34;: false, \u0026#34;open_issues_count\u0026#34;: 0, \u0026#34;license\u0026#34;: null, \u0026#34;allow_forking\u0026#34;: true, \u0026#34;is_template\u0026#34;: false, \u0026#34;web_commit_signoff_required\u0026#34;: false, \u0026#34;topics\u0026#34;: [], \u0026#34;visibility\u0026#34;: \u0026#34;public\u0026#34;, \u0026#34;forks\u0026#34;: 69, \u0026#34;open_issues\u0026#34;: 0, \u0026#34;watchers\u0026#34;: 293, \u0026#34;default_branch\u0026#34;: \u0026#34;master\u0026#34;, \u0026#34;permissions\u0026#34;: { \u0026#34;admin\u0026#34;: false, \u0026#34;maintain\u0026#34;: false, \u0026#34;push\u0026#34;: false, \u0026#34;triage\u0026#34;: false, \u0026#34;pull\u0026#34;: true } }, ... ] çŠ¶æ€è½¬ç§»ï¼ˆState Transferï¼‰ çŠ¶æ€åº”è¯¥åŒºåˆ†åº”ç”¨çŠ¶æ€å’Œèµ„æºçŠ¶æ€ï¼Œ\nå®¢æˆ·ç«¯è´Ÿè´£ç»´æŠ¤åº”ç”¨çŠ¶æ€ï¼Œ è€ŒæœåŠ¡ç«¯ç»´æŠ¤èµ„æºçŠ¶æ€ã€‚ å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„äº¤äº’å¿…é¡»æ˜¯æ— çŠ¶æ€çš„ï¼Œå¹¶åœ¨æ¯ä¸€æ¬¡è¯·æ±‚ä¸­åŒ…å«å¤„ç†è¯¥è¯·æ±‚æ‰€éœ€çš„ä¸€åˆ‡ä¿¡æ¯ã€‚æœåŠ¡ç«¯ä¸éœ€è¦åœ¨è¯·æ±‚é—´ä¿ç•™åº”ç”¨çŠ¶æ€ï¼Œåªæœ‰åœ¨æ¥å—åˆ°å®é™…è¯·æ±‚çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯æ‰ä¼šå…³æ³¨åº”ç”¨çŠ¶æ€ã€‚è¿™ç§æ— çŠ¶æ€é€šä¿¡åŸåˆ™ï¼Œä½¿å¾—æœåŠ¡ç«¯å’Œä¸­ä»‹èƒ½å¤Ÿç†è§£ç‹¬ç«‹çš„è¯·æ±‚å’Œå“åº”ã€‚åœ¨å¤šæ¬¡è¯·æ±‚ä¸­ï¼ŒåŒä¸€å®¢æˆ·ç«¯ä¹Ÿä¸å†éœ€è¦ä¾èµ–äºåŒä¸€æœåŠ¡å™¨ï¼Œæ–¹ä¾¿å®ç°é«˜å¯æ‰©å±•å’Œé«˜å¯ç”¨æ€§çš„æœåŠ¡ç«¯ã€‚\nå®¢æˆ·ç«¯åº”ç”¨çŠ¶æ€åœ¨æœåŠ¡ç«¯æä¾›çš„è¶…åª’ä½“çš„æŒ‡å¼•ä¸‹å‘ç”Ÿå˜è¿ã€‚æœåŠ¡ç«¯é€šè¿‡è¶…åª’ä½“å‘Šè¯‰å®¢æˆ·ç«¯å½“å‰çŠ¶æ€æœ‰å“ªäº›åç»­çŠ¶æ€å¯ä»¥è¿›å…¥ã€‚\n","permalink":"https://WFUing.github.io/posts/tech/network/restful/","summary":"REST å…¨ç§°æ˜¯ Representational State Transferï¼ˆè¡¨ç°å±‚çŠ¶æ€è½¬åŒ–ï¼‰ï¼Œæ›´å…·ä½“çš„å…¨ç§°æ˜¯ Resource Representational State Transferï¼ˆèµ„æºè¡¨ç°å±‚çŠ¶æ€è½¬åŒ–ï¼‰ï¼Œå…·ä½“å¯ä»¥è§ Roy Thomas Fielding çš„åšå£«è®ºæ–‡ https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm è¿™ä¸€ç« ã€‚\nREST æŒ‡çš„æ˜¯ä¸€ç»„æ¶æ„çº¦æŸæ¡ä»¶å’ŒåŸåˆ™ï¼š\nä¸ºè®¾è®¡ä¸€ä¸ªåŠŸèƒ½å¼ºã€æ€§èƒ½å¥½ã€é€‚å®œé€šä¿¡çš„ web åº”ç”¨ å¦‚æœä¸€ä¸ªæ¶æ„ç¬¦åˆ REST çš„çº¦æŸæ¡ä»¶å’ŒåŸåˆ™ï¼Œæˆ‘ä»¬å°±ç§°å®ƒä¸º RESTful ç»“æ„ Resources restful petclinic tutorial docter paper bilibili-è½¯ä»¶ä½“ç³»ç»“æ„-2022.7-REST Create REST APIs with JAX-RS æ ¸å¿ƒæ¦‚å¿µ èµ„æºï¼ˆResourcesï¼‰ è¡¨ç°å±‚ï¼ˆRepresentationï¼‰ çŠ¶æ€è½¬åŒ–ï¼ˆState Transferï¼‰ èµ„æº ç½‘ç»œä¸Šçš„ä¸€ä¸ªå®ä½“ï¼Œæˆ–è€…è¯´æ˜¯ç½‘ç»œä¸Šçš„ä¸€ä¸ªå…·ä½“ä¿¡æ¯ï¼Œä»»ä½•äº‹ç‰©ï¼Œåªè¦æœ‰è¢«å¼•ç”¨åˆ°çš„å¿…è¦ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªèµ„æºã€‚\nä¸€æ®µæ–‡æœ¬ï¼Œä¸€å¼ å›¾ç‰‡ï¼Œä¸€é¦–æ­Œæ›² æ•°æ®åº“ä¸­çš„ä¸€è¡Œæ•°æ® ä¸€ä¸ªæ‰‹æœºå·ç ï¼ŒæŸç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ ä¸€ç§æœåŠ¡ èµ„æºæ ‡è¯† è¦è®©ä¸€ä¸ªèµ„æºå¯ä»¥è¢«è¯†åˆ«ï¼Œéœ€è¦æœ‰ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œåœ¨Webä¸­è¿™ä¸ªå”¯ä¸€æ ‡è¯†å°±æ˜¯URIï¼ˆUniform Resource Identifierï¼‰ã€‚ä¾‹å¦‚ï¼š\nhttps://www.ex.com/software/releases/latest.tar.gz https://www.ex.com/map/roads/USA/CA/17_mile_drive https://www.ex.com/search/cs578 URI è®¾è®¡åŸåˆ™\næ˜“è¯»ï¼š https://www.oschina.net/news/38119/oschina-translate-reward-plan è¡¨è¾¾èµ„æºçš„å±‚çº§å…³ç³»ï¼š https://github.com/git/git/commit/e3ae056f87e1d675913d08/orders/2012/10 è¡¨ç¤ºèµ„æºçš„åŒçº§å…³ç³»ï¼š /git/block-sha1/sha1.h/compare/e3af72cda056f87e;bd63e61bdf38eb264 è¡¨è¾¾èµ„æºçš„è¿‡æ»¤ï¼š https://github.com/git/git/pulls?q=is%3Aclosed ç»Ÿä¸€èµ„æºæ¥å£\nRESTful æ¶æ„åº”è¯¥éµå¾ªç»Ÿä¸€æ¥å£åŸåˆ™ï¼Œç»Ÿä¸€æ¥å£åŒ…å«äº†ä¸€ç»„å—é™çš„é¢„å®šä¹‰çš„æ“ä½œï¼Œä¸è®ºä»€ä¹ˆæ ·çš„èµ„æºï¼Œéƒ½æ˜¯é€šè¿‡ä½¿ç”¨ç›¸åŒçš„æ¥å£è¿›è¡Œèµ„æºçš„è®¿é—®ã€‚æ¥å£åº”è¯¥ä½¿ç”¨æ ‡å‡†çš„ HTTP æ–¹æ³•å¦‚ GETï¼ŒPUT å’Œ POSTï¼Œå¹¶éµå¾ªè¿™äº›æ–¹æ³•çš„è¯­ä¹‰ å¦‚æœæŒ‰ç…§HTTPæ–¹æ³•çš„è¯­ä¹‰æ¥æš´éœ²èµ„æºï¼Œé‚£ä¹ˆæ¥å£å°†ä¼šæ‹¥æœ‰å®‰å…¨æ€§å’Œå¹‚ç­‰æ€§çš„ç‰¹æ€§ GETå’ŒHEADè¯·æ±‚æ˜¯å®‰å…¨çš„ï¼Œæ— è®ºè¯·æ±‚å¤šå°‘æ¬¡ï¼Œéƒ½ä¸æ”¹å˜æœåŠ¡å™¨çŠ¶æ€ GETã€HEADã€PUTå’ŒDELETEè¯·æ±‚æ˜¯å¹‚ç­‰çš„ï¼Œæ— è®ºå¯¹èµ„æºæ“ä½œå¤šå°‘æ¬¡ï¼Œç»“æœæ€»æ˜¯ä¸€æ ·çš„ï¼Œåé¢çš„è¯·æ±‚å¹¶ä¸ä¼šäº§ç”Ÿæ¯”ç¬¬ä¸€æ¬¡æ›´å¤šçš„å½±å“ GET è·å–è¡¨ç¤ºï¼Œå˜æ›´æ—¶è·å–è¡¨ç¤ºï¼ˆç¼“å­˜ï¼‰ã€‚å®‰å…¨ä¸”å¹‚ç­‰ã€‚","title":"Restful API Tutorial"},{"content":"Actor Model CPU ä¸Šæœ‰å¤šä¸ªå†…æ ¸ã€‚å¦‚æœæˆ‘ä»¬æƒ³å……åˆ†åˆ©ç”¨ç°æœ‰çš„è¿™äº›ç¡¬ä»¶ï¼Œå°±éœ€è¦ä¸€ç§å¹¶å‘è¿è¡Œä»£ç çš„æ–¹æ³•ã€‚æ•°åå¹´æ¥æ— æ³•è¿½è¸ªçš„é”™è¯¯å’Œå¼€å‘äººå‘˜çš„æ²®ä¸§éƒ½è¡¨æ˜ï¼Œçº¿ç¨‹å¹¶ä¸æ˜¯è§£å†³é—®é¢˜çš„åŠæ³•ã€‚ä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘ä»¬è¿˜æœ‰å…¶ä»–å¾ˆå¥½çš„é€‰æ‹©ï¼Œä»Šå¤©æˆ‘è¦å‘ä½ å±•ç¤ºçš„å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼šactor modelã€‚\nactor model actor model æ˜¯ä¸€ç§å¤„ç†å¹¶å‘è®¡ç®—çš„æ¦‚å¿µæ¨¡å‹ã€‚å®ƒä¸ºç³»ç»Ÿç»„ä»¶çš„è¡Œä¸ºå’Œäº¤äº’æ–¹å¼å®šä¹‰äº†ä¸€äº›é€šç”¨è§„åˆ™ã€‚\nactors actor æ˜¯è®¡ç®—çš„åŸå§‹å•å…ƒã€‚å®ƒæ¥æ”¶ messageï¼Œå¹¶æ ¹æ® messageè¿›è¡ŒæŸç§è®¡ç®—ã€‚\nè¿™ç§æƒ³æ³•ä¸é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆobject-oriented languagesï¼‰ä¸­çš„æƒ³æ³•éå¸¸ç›¸ä¼¼ï¼šå¯¹è±¡æ¥æ”¶ messageï¼ˆæ–¹æ³•è°ƒç”¨ï¼‰ï¼Œå¹¶æ ¹æ®æ¥æ”¶åˆ°çš„ messageï¼ˆæˆ‘ä»¬è°ƒç”¨çš„æ–¹æ³•ï¼‰è¿›è¡Œæ“ä½œã€‚\nä¸»è¦åŒºåˆ«åœ¨äºï¼Œactors ä¹‹é—´æ˜¯å®Œå…¨éš”ç¦»çš„ï¼Œå®ƒä»¬æ°¸è¿œä¸ä¼šå…±äº«å†…å­˜ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ª actor å¯ä»¥ä¿æŒä¸€ä¸ªç§æœ‰çŠ¶æ€ï¼Œå…¶ä»– actor æ°¸è¿œæ— æ³•ç›´æ¥æ”¹å˜è¯¥çŠ¶æ€ã€‚\nä¸€ä¸ª actor ä¸æ˜¯ actorã€‚å®ƒä»¬æ˜¯ä»¥ç³»ç»Ÿçš„å½¢å¼å‡ºç°çš„ã€‚åœ¨ actor model ä¸­ï¼Œä¸€åˆ‡éƒ½æ˜¯ actorï¼Œå®ƒä»¬éœ€è¦æœ‰åœ°å€ï¼Œè¿™æ ·ä¸€ä¸ªè¡Œä¸ºè€…æ‰èƒ½å‘å¦ä¸€ä¸ª actor å‘é€ messageã€‚\nmailbox è™½ç„¶å¤šä¸ª actor å¯ä»¥åŒæ—¶è¿è¡Œï¼Œä½†ä¸€ä¸ª actor ä¼šæŒ‰é¡ºåºå¤„ç†ç»™å®šçš„ messageã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä½ å‘åŒä¸€ä¸ª actor å‘é€ 3 æ¡ messageï¼Œå®ƒåªä¼šä¸€æ¬¡æ‰§è¡Œä¸€æ¡ã€‚è¦åŒæ—¶æ‰§è¡Œè¿™ 3 æ¡ messageï¼Œä½ éœ€è¦åˆ›å»º 3 ä¸ª actorï¼Œæ¯ä¸ª actor å‘é€ä¸€æ¡ messageã€‚\nmessage æ˜¯å¼‚æ­¥å‘é€ç»™è§’è‰²çš„ï¼Œè§’è‰²åœ¨å¤„ç†å¦ä¸€æ¡æ¶ˆæ¯æ—¶éœ€è¦å°†æ¶ˆæ¯å­˜å‚¨åœ¨æŸä¸ªåœ°æ–¹ã€‚mailbox å°±æ˜¯å­˜å‚¨è¿™äº› message çš„åœ°æ–¹ã€‚\nactor ä¹‹é—´é€šè¿‡å‘é€å¼‚æ­¥æ¶ˆæ¯è¿›è¡Œé€šä¿¡ã€‚è¿™äº› message ä¼šä¿å­˜åœ¨å…¶ä»– actor çš„ mailbox ä¸­ï¼Œç›´åˆ°å®ƒä»¬è¢«å¤„ç†ã€‚\nWhat actors do å½“ actor æ”¶åˆ° message æ—¶ï¼Œå®ƒå¯ä»¥åšä»¥ä¸‹ä¸‰ä»¶äº‹ä¸­çš„ä¸€ä»¶ï¼š\nCreate more actors Send messages to other actors Designate what to do with the next messageï¼šæŒ‡å®šä¹‰è¿™ä¸ªçŠ¶æ€åœ¨æ”¶åˆ°ä¸‹ä¸€æ¡ä¿¡æ¯æ—¶çš„æ ·å­ï¼Œè¡Œä¸ºä½“å¦‚ä½•æ”¹å˜çŠ¶æ€ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¡Œä¸ºç±»ä¼¼äºè®¡ç®—å™¨çš„è¡Œä¸ºä½“ï¼Œå®ƒçš„åˆå§‹çŠ¶æ€æ˜¯ç®€å•çš„æ•°å­— 0ã€‚å½“è¿™ä¸ªè¡Œä¸ºä½“æ”¶åˆ° add(1) æ¶ˆæ¯æ—¶ï¼Œå®ƒä¸ä¼šæ”¹å˜è‡ªå·±çš„åŸå§‹çŠ¶æ€ï¼Œè€Œæ˜¯æŒ‡å®šåœ¨æ”¶åˆ°ä¸‹ä¸€æ¡æ¶ˆæ¯æ—¶ï¼ŒçŠ¶æ€å°†æ˜¯ 1ã€‚ Fault tolerance Erlang å¼•å…¥äº† \u0026ldquo;let it crash\u0026rdquo; çš„ç†å¿µã€‚å…¶ç†å¿µæ˜¯ï¼Œä½ ä¸éœ€è¦è¿›è¡Œé˜²å¾¡æ€§ç¼–ç¨‹ï¼Œè¯•å›¾é¢„æµ‹æ‰€æœ‰å¯èƒ½å‘ç”Ÿçš„é—®é¢˜ï¼Œå¹¶æ‰¾åˆ°å¤„ç†å®ƒä»¬çš„æ–¹æ³•ï¼Œå› ä¸ºæ ¹æœ¬ä¸å¯èƒ½è€ƒè™‘åˆ°æ¯ä¸€ä¸ªæ•…éšœç‚¹ã€‚\nErlang æ‰€åšçš„å°±æ˜¯ç®€å•åœ°è®©å®ƒå´©æºƒï¼Œä½†è®©è¿™äº›å…³é”®ä»£ç ç”±æŸä¸ªäººç›‘ç®¡ï¼Œè€Œè¿™ä¸ªäººå”¯ä¸€çš„è´£ä»»å°±æ˜¯çŸ¥é“å½“å´©æºƒå‘ç”Ÿæ—¶è¯¥åšä»€ä¹ˆï¼ˆæ¯”å¦‚å°†ä»£ç å•å…ƒé‡ç½®ä¸ºç¨³å®šçŠ¶æ€ï¼‰ï¼Œè€Œä½¿è¿™ä¸€åˆ‡æˆä¸ºå¯èƒ½çš„å°±æ˜¯ actor modelã€‚\næ¯æ®µä»£ç éƒ½è¿è¡Œåœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼ˆè¿™ä¹Ÿæ˜¯ Erlang å¯¹å…¶è§’è‰²çš„åŸºæœ¬ç§°å‘¼ï¼‰ã€‚è¿™ä¸ªè¿›ç¨‹æ˜¯å®Œå…¨å­¤ç«‹çš„ï¼Œè¿™æ„å‘³ç€å®ƒçš„çŠ¶æ€ä¸ä¼šå½±å“ä»»ä½•å…¶ä»–è¿›ç¨‹ã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ª \u0026ldquo;ç›‘ç£è€…\u0026rdquo;ï¼Œå®ƒåŸºæœ¬ä¸Šæ˜¯å¦ä¸€ä¸ªè¿›ç¨‹ï¼ˆæ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯è¡Œä¸ºä½“ï¼Œè¿˜è®°å¾—å—ï¼Ÿï¼‰ï¼Œå½“è¢«ç›‘ç£çš„è¿›ç¨‹å´©æºƒæ—¶ï¼Œå®ƒä¼šæ”¶åˆ°é€šçŸ¥ï¼Œç„¶åå¯ä»¥é‡‡å–ä¸€äº›æªæ–½ã€‚\nè¿™å°±ä½¿å¾—åˆ›å»º \u0026ldquo;self heal\u0026rdquo; ç³»ç»Ÿæˆä¸ºå¯èƒ½ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸€ä¸ªè¡Œä¸ºä½“ç”±äºæŸç§åŸå› è¿›å…¥äº†å¼‚å¸¸çŠ¶æ€å¹¶å´©æºƒï¼Œé‚£ä¹ˆç›‘ç®¡è€…å°±å¯ä»¥é‡‡å–ä¸€äº›æªæ–½ï¼Œå°è¯•å°†å…¶æ¢å¤åˆ°ä¸€è‡´çš„çŠ¶æ€ï¼ˆæœ‰å¤šç§ç­–ç•¥å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œæœ€å¸¸è§çš„å°±æ˜¯ä»¥åˆå§‹çŠ¶æ€é‡æ–°å¯åŠ¨è¡Œä¸ºä½“ï¼‰ã€‚\nActor Model For IoT ç‰©è”ç½‘ï¼ˆIoTï¼‰ç”±è®¸å¤šèŠ‚ç‚¹ç»„æˆï¼Œé€šå¸¸åŠŸèƒ½æœ‰é™ã€‚é€šè¿‡äº’è”ç½‘åè®®æ ‡å‡†è¿›è¡Œé€šä¿¡çš„å°å‹è½¯ä»¶ç»„ä»¶é€šå¸¸åœ¨æœºå™¨ä¹‹é—´å½¢æˆé«˜åº¦åˆ†å¸ƒå¼çš„å·¥ä½œæµç¨‹ï¼Œäººä¸æœºå™¨ä¹‹é—´çš„äº’åŠ¨æå°‘ã€‚ä¸€èˆ¬çš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ç›‘æ§ç¯å¢ƒæ¡ä»¶ç­‰æ•°æ®çš„ä¼ æ„Ÿå™¨ã€‚å¤æ‚çš„åº”ç”¨åˆ™ä½¿ç”¨ä¼ æ„Ÿå™¨å’Œæ‰§è¡Œå™¨ï¼Œä¾‹å¦‚ï¼šå®¶åº­è‡ªåŠ¨åŒ–å’Œå¥åº·æ•°æ®è·Ÿè¸ªã€‚è¿™äº›ç³»ç»Ÿä½¿æœºå™¨èƒ½å¤Ÿå°†æ•°æ®ä¸Šä¼ åˆ°äº’è”ç½‘æœåŠ¡å™¨ã€‚å› æ­¤ï¼Œå®ƒä»¬å¯ä»¥éšæ—¶éšåœ°è·Ÿè¸ªæ•°æ®ã€‚\nå…¸å‹ IoT ç³»ç»Ÿçš„ä¸»è¦ç‰¹ç‚¹ä¹‹ä¸€æ˜¯æ¶‰åŠå¤§é‡å—ç®¡è®¾å¤‡ï¼Œæ¯ä¸ªè®¾å¤‡çš„å†…éƒ¨çŠ¶æ€éƒ½åœ¨ä¸æ–­å˜åŒ–ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™äº›è®¾å¤‡éƒ½æ˜¯åœ¨ä¸€äº›ç®€å•çš„ç½‘ç»œåè®®ä¸Šè¿è¡Œçš„åŸå§‹ç¡¬ä»¶ã€‚è¿™ç§ \u0026ldquo;æç®€\u0026rdquo; è¦æ±‚ä¸ actor model éå¸¸å»åˆï¼Œå› ä¸º actor model çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€å°±æ˜¯å°†ä¸šåŠ¡é€»è¾‘åˆ†è§£æˆæœ€å°çš„ä»»åŠ¡ï¼Œç”±å„ä¸ª actor æ¥å¤„ç†ã€‚\nactor å…·æœ‰ delivery guarantees å’Œ isolation ç‰¹æ€§ï¼Œéå¸¸é€‚åˆç‰©è”ç½‘ä¸–ç•Œï¼Œæ˜¯æ¨¡æ‹Ÿæ•°ç™¾ä¸‡ä¸ªå¹¶å‘è¿æ¥çš„ä¼ æ„Ÿå™¨ç”Ÿæˆå®æ—¶æ•°æ®çš„ç»ä½³å·¥å…·ã€‚å®ƒä»¬è®¾è®¡è½»å·§ï¼Œå› æ­¤å¯ä»¥åœ¨ä¸æ¶ˆè€—è¿‡å¤šè®¡ç®—èµ„æºçš„æƒ…å†µä¸‹è¿›è¡Œæ‰©å±•ã€‚\nä»¥ä¸‹æ˜¯è¡ŒåŠ¨è€…é€‚åˆç‰©è”ç½‘çš„ç‰¹å¾å±æ€§ï¼š\nScalabilityï¼šç‰©è”ç½‘å¸¦æ¥äº†è®¸å¤šæŒ‘æˆ˜ï¼Œå¦‚ä½•å¤„ç†æ‰€æœ‰åŒæ—¶è¿æ¥çš„è®¾å¤‡äº§ç”Ÿçš„å¤§é‡æ•°æ®ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæ£€ç´¢ã€æ±‡æ€»ã€åˆ†æå’Œæ¨é€ï¼ŒåŒæ—¶ä¿æŒè®¾å¤‡çš„å“åº”é€Ÿåº¦ã€‚é¢ä¸´çš„æŒ‘æˆ˜åŒ…æ‹¬ç®¡ç†é«˜å³°æœŸæ¥æ”¶ä¼ æ„Ÿå™¨æ•°æ®çš„å·¨å¤§çªå‘æµé‡ã€æ‰¹å¤„ç†å’Œå®æ—¶å¤„ç†è¿™äº›æµ·é‡æ•°æ®ï¼Œä»¥åŠè¿›è¡Œæ¨¡æ‹ŸçœŸå®ä¸–ç•Œä½¿ç”¨æ¨¡å¼çš„å¤§è§„æ¨¡ä»¿çœŸã€‚ä¸€äº›ç‰©è”ç½‘éƒ¨ç½²è¿˜è¦æ±‚åç«¯æœåŠ¡ç®¡ç†è®¾å¤‡ï¼Œè€Œä¸ä»…ä»…æ˜¯å¸æ”¶è®¾å¤‡å‘é€çš„æ•°æ®ã€‚ç®¡ç†è¿™ä¸€åˆ‡çš„åç«¯ç³»ç»Ÿéœ€è¦èƒ½å¤ŸæŒ‰éœ€æ‰©å±•ï¼Œå¹¶å…·æœ‰å®Œå…¨çš„å¼¹æ€§ã€‚è¿™éå¸¸é€‚åˆ reactive architectures ï¼Œå°¤å…¶æ˜¯ Akkaã€‚\nConcurrencyï¼šç‰©è”ç½‘åº”ç”¨ç½‘å…³æ˜¯ç³»ç»Ÿä¸­å°†æœ¬åœ°ä¼ æ„Ÿå™¨å’Œæ‰§è¡Œå™¨è¿æ¥åˆ°äº‘çš„ç‚¹ï¼ˆä¾‹å¦‚è·¯è¾¹ç«™ã€è¿è¾“è¿‡ç¨‹ä¸­çš„è½¦è½½è®¾å¤‡æˆ–å®¶åº­è‡ªåŠ¨åŒ–ç½‘å…³ï¼‰ã€‚å³ä½¿ä¸€ä¸ªåº”ç”¨ç¨‹åºåœ¨ä¼ æ„Ÿå™¨ã€æ‰§è¡Œå™¨å’Œäº‘æœåŠ¡ä¹‹é—´ \u0026ldquo;åªè½¬å‘æ•°æ®\u0026rdquo;ï¼Œä¹Ÿä¼šæœ‰å¹¶å‘äº‹ä»¶ã€‚ç‰©è”ç½‘åº”ç”¨ç½‘å…³éœ€è¦å¤„ç†åœ¨å…¶ç¯å¢ƒä¸­å‘ç”Ÿçš„äº‹ä»¶æµå’Œåˆ°è¾¾å…¶æ¥å£çš„æ•°æ®æµã€‚ç¯å¢ƒä»¥è‡ªå·±çš„é€Ÿåº¦äº§ç”Ÿæ•°æ®å¹¶è¦æ±‚è¾“å‡ºã€‚Actor model é€šè¿‡æ¶ˆæ¯ä¼ é€’å®ç°äº†å¯¹æ¥è‡ªè®¾å¤‡çš„æ¶ˆæ¯çš„é«˜æ€§èƒ½å¹¶å‘å¤„ç†ï¼Œä»è€Œè§£å†³äº†ä¸Šè¿°é—®é¢˜ã€‚message-processing modelsçš„ä¼˜åŠ¿ä¹‹ä¸€æ˜¯ï¼Œä¼ ç»Ÿçš„å¹¶å‘é—®é¢˜ï¼ˆä¸»è¦æ˜¯å…±äº«çŠ¶æ€çš„åŒæ­¥ï¼‰ä¸å†æ˜¯é—®é¢˜ã€‚è¡Œä¸ºä½“å¯ä»¥ä¿ç•™è®¾å¤‡å†…éƒ¨çŠ¶æ€æˆ–æ´»åŠ¨ä¼šè¯ç­‰ç§æœ‰çŠ¶æ€ï¼Œå¹¶åœ¨æ²¡æœ‰é”çš„æƒ…å†µä¸‹è‡ªç”±æ›´æ–°ã€‚Actor model å¯ç¡®ä¿ä¸€æ¬¡åªå¤„ç†ä¸€æ¡æ¶ˆæ¯ã€‚\nFault Toleranceï¼šåœ¨æ„å»ºå¯èƒ½è¢«æ•°ç™¾ä¸‡è”ç½‘è®¾å¤‡ä½¿ç”¨çš„æœåŠ¡æ—¶ï¼Œæ‚¨éœ€è¦ä¸€ä¸ªåº”å¯¹ä¿¡æ¯æµçš„æ¨¡å‹ã€‚æ‚¨éœ€è¦å¯¹è®¾å¤‡æ•…éšœã€ä¿¡æ¯ä¸¢å¤±å’ŒæœåŠ¡å¤±è´¥æ—¶çš„æƒ…å†µè¿›è¡ŒæŠ½è±¡ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å¸¸å¸¸è®¤ä¸ºè°ƒç”¨å †æ ˆæ˜¯ç†æ‰€å½“ç„¶çš„ã€‚ä½†æ˜¯ï¼Œå®ƒä»¬å‘æ˜çš„å¹´ä»£ï¼Œç”±äºå¤š CPU ç³»ç»Ÿå¹¶ä¸å¸¸è§ï¼Œå¹¶å‘ç¼–ç¨‹å¹¶ä¸é‚£ä¹ˆé‡è¦ã€‚è°ƒç”¨æ ˆä¸èƒ½è·¨çº¿ç¨‹ï¼Œå› æ­¤ä¸èƒ½æ¨¡æ‹Ÿå¼‚æ­¥è°ƒç”¨é“¾ã€‚ ä¸Šå›¾æ˜¾ç¤ºäº†ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ã€‚å·¥ä½œçº¿ç¨‹å¦‚ä½•å¤„ç†è¿™ç§æƒ…å†µï¼Ÿå®ƒå¾ˆå¯èƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œå› ä¸ºå®ƒé€šå¸¸ä¸çŸ¥é“å¤±è´¥ä»»åŠ¡çš„ç›®çš„ã€‚è°ƒç”¨è€… \u0026ldquo;çº¿ç¨‹éœ€è¦å¾—åˆ°é€šçŸ¥ï¼Œä½†æ²¡æœ‰è°ƒç”¨æ ˆå¯ä»¥é‡Šæ”¾å¼‚å¸¸ã€‚å¤±è´¥é€šçŸ¥åªèƒ½é€šè¿‡ä¾§é€šé“å®Œæˆï¼Œä¾‹å¦‚ï¼Œåœ¨ \u0026ldquo;è°ƒç”¨è€… \u0026ldquo;çº¿ç¨‹å¸Œæœ›å¾—åˆ°ç»“æœçš„åœ°æ–¹æ”¾ç½®ä¸€ä¸ªé”™è¯¯ä»£ç ã€‚å¦‚æœæ²¡æœ‰è¿™ç§é€šçŸ¥ï¼Œ\u0026ldquo;è°ƒç”¨è€… \u0026ldquo;å°±æ°¸è¿œä¸ä¼šæ”¶åˆ°å¤±è´¥é€šçŸ¥ï¼Œä»»åŠ¡ä¹Ÿå°±ä¸¢å¤±äº†ï¼è¿™ä¸ç½‘ç»œç³»ç»Ÿçš„å·¥ä½œåŸç†æƒŠäººåœ°ç›¸ä¼¼ï¼Œåœ¨ç½‘ç»œç³»ç»Ÿä¸­ï¼Œä¿¡æ¯/è¯·æ±‚å¯èƒ½åœ¨æ²¡æœ‰ä»»ä½•é€šçŸ¥çš„æƒ…å†µä¸‹ä¸¢å¤±/å¤±è´¥ã€‚\næœ‰äº† actorï¼Œæˆ‘ä»¬å¯ä»¥å°† actor ç»„ç»‡æˆç›‘ç®¡å±‚æ¬¡ï¼Œå› æ­¤ï¼Œå•ä¸ª actor çš„é”™è¯¯ä¸ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿç˜«ç—ªã€‚\nLightWeightï¼šåŸºå‡†æµ‹è¯•è¡¨æ˜ï¼ŒAkka æ¨¡å‹æ¯åƒå…†å­—èŠ‚å †å†…å­˜å¯å¤„ç† 250 ä¸‡ä¸ªè§’è‰²ï¼Œå•æœºæ¯ç§’å¯å¤„ç† 5000 ä¸‡æ¡æ¶ˆæ¯ã€‚\nNetwork Protocol Decouplingï¼šåˆ©ç”¨ actor model ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®¹é”™åŠŸèƒ½ï¼Œå°†ä»£è¡¨è®¾å¤‡çš„è§’è‰²ä¸åº•å±‚é€šä¿¡åè®®åˆ†ç¦»å¼€æ¥ã€‚è¿™æ ·ï¼Œä»£è¡¨è®¾å¤‡å’Œè®¾å¤‡çŠ¶æ€çš„è§’è‰²å°±å¯ä»¥ä»ä»£è¡¨é€šä¿¡åè®®çš„ actor ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä»è€Œä½¿è®¾å¤‡ actor å…å—ç½‘ç»œé”™è¯¯çš„å½±å“ï¼Œå¹¶æé«˜å„ä¸ª actor çš„åŠŸèƒ½ä¸€è‡´æ€§ã€‚\nNon-blocking communicationsï¼šç‰©è”ç½‘åº”ç”¨ \u0026ldquo;å¿…é¡» \u0026ldquo;å…·æœ‰ååº”æ€§å’Œå¼‚æ­¥æ€§ã€‚å¤§å¤šæ•°ç‰©è”ç½‘åº”ç”¨ç¨‹åºéƒ½åº”èƒ½å¤Ÿå¤„ç†æ¥è‡ªè®¾å¤‡çš„è®¸å¤šè¿æ¥ä»¥åŠä»è®¾å¤‡ä¸­è·å–çš„æ‰€æœ‰ä¿¡æ¯ã€‚å¼‚æ­¥æ¶ˆæ¯ä¼ é€’å¹¿æ³›åº”ç”¨äºæœºå™¨å¯¹æœºå™¨é€šä¿¡ã€‚å¼‚æ­¥é€šä¿¡å…·æœ‰çµæ´»æ€§ï¼šåº”ç”¨ç¨‹åºå¯ä»¥å‘é€ä¸€æ¡ä¿¡æ¯ï¼Œç„¶åç»§ç»­å¤„ç†å…¶ä»–äº‹æƒ…ã€‚actor æ˜¯å”¯ä¸€å¯å¯»å€çš„ï¼Œæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„é‚®ç®±æˆ–æ¶ˆæ¯é˜Ÿåˆ—ã€‚å®ƒä»¬é€šè¿‡æ¶ˆæ¯ä¼ é€’æ”¯æŒéé˜»å¡é€šä¿¡ï¼Œå› æ­¤é€‚åˆæ„å»ºéé˜»å¡å’Œåˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿã€‚\nCustomizationï¼šæ‰€æœ‰è¡Œä¸ºä½“éƒ½æœ‰ä¸€ä¸ªå®šä¹‰æ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶é…æœ‰ç²¾è‡´çš„é’©å­ï¼Œå¦‚ç”¨äºç”Ÿå‘½å‘¨æœŸé€»è¾‘æ§åˆ¶çš„ preStart()ã€postRestart() å’Œ postStop()ã€‚åœ¨æ¨¡æ‹Ÿç‰©è”ç½‘è®¾å¤‡æ—¶ï¼Œå¯ä»¥è½»æ¾åœ°å°†è‡ªå®šä¹‰åˆå§‹åŒ–å’Œç»ˆæ­¢ä¾‹ç¨‹é”šå®šåˆ°ç›¸åº”çš„é’©å­ä¸Šã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 object Device { def props(deviceType: String, mqttPubSub: ActorRef) = //... } class Device(deviceType: String, mqttPubSub: ActorRef) extends Actor { import Device._ private var opState: OpState = InitialState(deviceType) override def preStart(): Unit = //Initialize device\u0026#39;s op-state... override def postStop(): Unit = //Reset/Shutdown device... def receive = { case ReportOpState =\u0026gt; //Assemble report data with OpState mqttPubSub ! new Publish(Mqtt.topicReport, reportData) case UpdateOpState(newState) =\u0026gt; //Update opState with newState mqttPubSub ! new Publish(Mqtt.topicUpdate, updateResult) case PowerOff =\u0026gt; //Shutdown device... } } view raw ä¸Šé¢çš„ç‰‡æ®µå±•ç¤ºäº†å¦‚ä½•åœ¨ Scala/Akka ä¸­æ„å»ºä¸€ä¸ªè®¾å¤‡è§’è‰²ï¼Œä½¿ç”¨è¡Œä¸šæ ‡å‡† MQTTï¼ˆæ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“ï¼‰å‘å¸ƒ-è®¢é˜…æ¶ˆæ¯åè®®å‘è®¢é˜…è€…å‘å¸ƒå…¶è¿è¡ŒçŠ¶æ€ä¿¡æ¯ã€‚è¿™é‡Œçš„ç›®çš„å¹¶ä¸æ˜¯ç ”ç©¶å¦‚ä½•ç”¨ Scala æˆ– Akka ç¼–ç¨‹ï¼Œè€Œæ˜¯æä¾›ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œè¯´æ˜ Akka è§’è‰²æ˜“äºç†è§£çš„é€»è¾‘æµç¨‹ã€‚\nResources https://www.brianstorti.com/the-actor-model/ http://akshantalpm.github.io/Actor-Model-For-IoT/ https://www.infoworld.com/article/3209728/why-akka-and-the-actor-model-shine-for-iot-applications.html ","permalink":"https://WFUing.github.io/posts/tech/architecture/distributed/iot/actor/","summary":"Actor Model CPU ä¸Šæœ‰å¤šä¸ªå†…æ ¸ã€‚å¦‚æœæˆ‘ä»¬æƒ³å……åˆ†åˆ©ç”¨ç°æœ‰çš„è¿™äº›ç¡¬ä»¶ï¼Œå°±éœ€è¦ä¸€ç§å¹¶å‘è¿è¡Œä»£ç çš„æ–¹æ³•ã€‚æ•°åå¹´æ¥æ— æ³•è¿½è¸ªçš„é”™è¯¯å’Œå¼€å‘äººå‘˜çš„æ²®ä¸§éƒ½è¡¨æ˜ï¼Œçº¿ç¨‹å¹¶ä¸æ˜¯è§£å†³é—®é¢˜çš„åŠæ³•ã€‚ä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘ä»¬è¿˜æœ‰å…¶ä»–å¾ˆå¥½çš„é€‰æ‹©ï¼Œä»Šå¤©æˆ‘è¦å‘ä½ å±•ç¤ºçš„å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼šactor modelã€‚\nactor model actor model æ˜¯ä¸€ç§å¤„ç†å¹¶å‘è®¡ç®—çš„æ¦‚å¿µæ¨¡å‹ã€‚å®ƒä¸ºç³»ç»Ÿç»„ä»¶çš„è¡Œä¸ºå’Œäº¤äº’æ–¹å¼å®šä¹‰äº†ä¸€äº›é€šç”¨è§„åˆ™ã€‚\nactors actor æ˜¯è®¡ç®—çš„åŸå§‹å•å…ƒã€‚å®ƒæ¥æ”¶ messageï¼Œå¹¶æ ¹æ® messageè¿›è¡ŒæŸç§è®¡ç®—ã€‚\nè¿™ç§æƒ³æ³•ä¸é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆobject-oriented languagesï¼‰ä¸­çš„æƒ³æ³•éå¸¸ç›¸ä¼¼ï¼šå¯¹è±¡æ¥æ”¶ messageï¼ˆæ–¹æ³•è°ƒç”¨ï¼‰ï¼Œå¹¶æ ¹æ®æ¥æ”¶åˆ°çš„ messageï¼ˆæˆ‘ä»¬è°ƒç”¨çš„æ–¹æ³•ï¼‰è¿›è¡Œæ“ä½œã€‚\nä¸»è¦åŒºåˆ«åœ¨äºï¼Œactors ä¹‹é—´æ˜¯å®Œå…¨éš”ç¦»çš„ï¼Œå®ƒä»¬æ°¸è¿œä¸ä¼šå…±äº«å†…å­˜ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ª actor å¯ä»¥ä¿æŒä¸€ä¸ªç§æœ‰çŠ¶æ€ï¼Œå…¶ä»– actor æ°¸è¿œæ— æ³•ç›´æ¥æ”¹å˜è¯¥çŠ¶æ€ã€‚\nä¸€ä¸ª actor ä¸æ˜¯ actorã€‚å®ƒä»¬æ˜¯ä»¥ç³»ç»Ÿçš„å½¢å¼å‡ºç°çš„ã€‚åœ¨ actor model ä¸­ï¼Œä¸€åˆ‡éƒ½æ˜¯ actorï¼Œå®ƒä»¬éœ€è¦æœ‰åœ°å€ï¼Œè¿™æ ·ä¸€ä¸ªè¡Œä¸ºè€…æ‰èƒ½å‘å¦ä¸€ä¸ª actor å‘é€ messageã€‚\nmailbox è™½ç„¶å¤šä¸ª actor å¯ä»¥åŒæ—¶è¿è¡Œï¼Œä½†ä¸€ä¸ª actor ä¼šæŒ‰é¡ºåºå¤„ç†ç»™å®šçš„ messageã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä½ å‘åŒä¸€ä¸ª actor å‘é€ 3 æ¡ messageï¼Œå®ƒåªä¼šä¸€æ¬¡æ‰§è¡Œä¸€æ¡ã€‚è¦åŒæ—¶æ‰§è¡Œè¿™ 3 æ¡ messageï¼Œä½ éœ€è¦åˆ›å»º 3 ä¸ª actorï¼Œæ¯ä¸ª actor å‘é€ä¸€æ¡ messageã€‚\nmessage æ˜¯å¼‚æ­¥å‘é€ç»™è§’è‰²çš„ï¼Œè§’è‰²åœ¨å¤„ç†å¦ä¸€æ¡æ¶ˆæ¯æ—¶éœ€è¦å°†æ¶ˆæ¯å­˜å‚¨åœ¨æŸä¸ªåœ°æ–¹ã€‚mailbox å°±æ˜¯å­˜å‚¨è¿™äº› message çš„åœ°æ–¹ã€‚\nactor ä¹‹é—´é€šè¿‡å‘é€å¼‚æ­¥æ¶ˆæ¯è¿›è¡Œé€šä¿¡ã€‚è¿™äº› message ä¼šä¿å­˜åœ¨å…¶ä»– actor çš„ mailbox ä¸­ï¼Œç›´åˆ°å®ƒä»¬è¢«å¤„ç†ã€‚","title":"Actor"},{"content":"Resources Demos https://github.com/gofireflyio/aiac https://github.com/JustAIGithub/AI-Code-Convert Blogs 25 Best AI Code Generators ","permalink":"https://WFUing.github.io/posts/tech/language/code-generation/ai-code-generators/","summary":"Resources Demos https://github.com/gofireflyio/aiac https://github.com/JustAIGithub/AI-Code-Convert Blogs 25 Best AI Code Generators ","title":"AI Code Generators"},{"content":"Resources git tutorial: https://wyag.thb.lt/ åŠ¨å›¾å±•ç¤º10å¤§Gitå‘½ä»¤: https://zhuanlan.zhihu.com/p/132573100 git intro: https://missing.csail.mit.edu/2020/version-control/ book: https://git-scm.com/book/en/v2 commit convention è§„èŒƒ: https://www.conventionalcommits.org/en/v1.0.0/#summary Write yourself a Gitï¼šhttps://wyag.thb.lt/ å¦‚ä½•ç¼–å†™Git Commit Message? ä¸ºäº†åˆ›å»ºä¸€ä¸ªæœ‰ç”¨çš„ revision history ï¼Œå›¢é˜Ÿåº”è¯¥é¦–å…ˆå°± commit message convention è¾¾æˆä¸€è‡´ï¼Œè‡³å°‘è¦å®šä¹‰ä»¥ä¸‹ä¸‰ç‚¹ï¼š\nStyleï¼šæ ‡è®°è¯­æ³•Markup syntax, æµå¼å¸ƒå±€wrap margins, è¯­æ³•grammar, å¤§å°å†™capitalization, æ ‡ç‚¹ç¬¦å·punctuationã€‚æŠŠè¿™äº›ä¸œè¥¿å†™å‡ºæ¥ï¼Œå»æ‰çŒœæµ‹ï¼Œè®©ä¸€åˆ‡å°½å¯èƒ½ç®€å•ã€‚ Contentï¼šæäº¤æ¶ˆæ¯çš„æ­£æ–‡åº”è¯¥åŒ…å«ä»€ä¹ˆæ ·çš„ä¿¡æ¯ï¼Ÿä¸åº”è¯¥åŒ…å«ä»€ä¹ˆï¼Ÿ Metadataï¼šå¦‚ä½•å¼•ç”¨ issue tracking IDsã€pull request numbers ç­‰ï¼Ÿ å¹¸è¿çš„æ˜¯ï¼ŒGitæäº¤ä¿¡æ¯çš„è§„èŒƒå·²ç»æœ‰äº†å¾ˆå¥½çš„çº¦å®šã€‚äº‹å®ä¸Šï¼Œå¾ˆå¤š Git å‘½ä»¤çš„åŠŸèƒ½ä¸­å°±åŒ…å«äº†è¿™äº›çº¦å®šã€‚æ‚¨ä¸éœ€è¦é‡æ–°å‘æ˜ä»€ä¹ˆã€‚åªè¦éµå¾ªä¸‹é¢çš„ä¸ƒæ¡è§„åˆ™ï¼Œæ‚¨å°±èƒ½åƒä¸“å®¶ä¸€æ · commit message äº†ã€‚\nThe seven rules of a great Git commit message\nSeparate subject from body with a blank line Limit the subject line to 50 characters Capitalize the subject line Do not end the subject line with a period Use the imperative mood in the subject line Wrap the body at 72 characters Use the body to explain what and why vs. how For example:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 Summarize changes in around 50 characters or less More detailed explanatory text, if necessary. Wrap it to about 72 characters or so. In some contexts, the first line is treated as the subject of the commit and the rest of the text as the body. The blank line separating the summary from the body is critical (unless you omit the body entirely); various tools like `log`, `shortlog` and `rebase` can get confused if you run the two together. Explain the problem that this commit is solving. Focus on why you are making this change as opposed to how (the code explains that). Are there side effects or other unintuitive consequences of this change? Here\u0026#39;s the place to explain them. Further paragraphs come after blank lines. - Bullet points are okay, too - Typically a hyphen or asterisk is used for the bullet, preceded by a single space, with blank lines in between, but conventions vary here If you use an issue tracker, put references to them at the bottom, like this: Resolves: #123 See also: #456, #789 1. Separate subject from body with a blank line From the git commit manpage:\n1 Though not required, it\u0026#39;s a good idea to begin the commit message with a single short (less than 50 character) line summarizing the change, followed by a blank line and then a more thorough description. The text up to the first blank line in a commit message is treated as the commit title, and that title is used throughout Git. For example, Git-format-patch(1) turns a commit into email, and it uses the title on the Subject line and the rest of the commit in the body. é¦–å…ˆï¼Œå¹¶éæ¯æ¬¡æäº¤éƒ½éœ€è¦ä¸»é¢˜å’Œæ­£æ–‡ã€‚æœ‰æ—¶ä¸€è¡Œå°±å¤Ÿäº†ï¼Œç‰¹åˆ«æ˜¯å½“ä¿®æ”¹éå¸¸ç®€å•ï¼Œä¸éœ€è¦æ›´å¤šä¸Šä¸‹æ–‡çš„æ—¶å€™ã€‚\n1 Fix typo in introduction to user guide å¦‚æœè¯»è€…æƒ³çŸ¥é“é”™åˆ«å­—æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥ç›´æ¥æŸ¥ typo æœ¬èº«ï¼Œå³ä½¿ç”¨ git show æˆ– git diff æˆ– git log -pã€‚\nå¦‚æœæ‚¨åœ¨å‘½ä»¤è¡Œæäº¤ç±»ä¼¼çš„å†…å®¹ï¼Œä½¿ç”¨ git commit çš„ -m é€‰é¡¹ä¹Ÿå¾ˆæ–¹ä¾¿\n1 $ git commit -m \u0026#34;Fix typo in introduction to user guide\u0026#34; ç„¶è€Œï¼Œå½“ä¸€ä¸ªæäº¤éœ€è¦ä¸€äº›è§£é‡Šå’Œä¸Šä¸‹æ–‡æ—¶ï¼Œä½ éœ€è¦å†™ä¸€ä¸ªæ­£æ–‡ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 Derezz the master control program MCP turned out to be evil and had become intent on world domination. This commit throws Tron\u0026#39;s disc into MCP (causing its deresolution) and turns it back into a chess game. ä½¿ç”¨ -m é€‰é¡¹ç¼–å†™å¸¦æ­£æ–‡çš„æäº¤ä¿¡æ¯å¹¶ä¸å®¹æ˜“ã€‚æœ€å¥½ä½¿ç”¨åˆé€‚çš„æ–‡æœ¬ç¼–è¾‘å™¨æ¥ç¼–å†™ã€‚\nåœ¨æµè§ˆæ—¥å¿—æ—¶ï¼Œä¸»ä½“ä¸ä¸»ä½“çš„åˆ†ç¦»æ˜¯æœ‰å¥½å¤„çš„ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„æ—¥å¿—è®°å½•ï¼š\n1 2 3 4 5 6 7 8 9 10 $ git log commit 42e769bdf4894310333942ffc5a15151222a87be Author: Kevin Flynn \u0026lt;kevin@flynnsarcade.com\u0026gt; Date: Fri Jan 01 00:00:00 1982 -0200 Derezz the master control program MCP turned out to be evil and had become intent on world domination. This commit throws Tron\u0026#39;s disc into MCP (causing its deresolution) and turns it back into a chess game. ç°åœ¨åªæ‰“å°ä¸»é¢˜è¡Œ git log --oneline ï¼š\n1 2 $ git log --oneline 42e769 Derezz the master control program æˆ–è€…ï¼ŒæŒ‰ç”¨æˆ·åˆ†ç»„æäº¤ï¼ŒåŒæ ·åªæ˜¾ç¤ºä¸»é¢˜è¡Œï¼Œgit shortlogï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 $ git shortlog Kevin Flynn (1): Derezz the master control program Alan Bradley (1): Introduce security program \u0026#34;Tron\u0026#34; Ed Dillinger (3): Rename chess program to \u0026#34;MCP\u0026#34; Modify chess program Upgrade chess program Walter Gibbs (1): Introduce protoype chess program åœ¨Gitä¸­ï¼Œä¸»é¢˜è¡Œå’Œæ­£æ–‡ä¹‹é—´çš„åŒºåˆ«è¿˜æœ‰å¾ˆå¤šï¼Œä½†å¦‚æœä¸­é—´æ²¡æœ‰ç©ºè¡Œï¼Œå®ƒä»¬éƒ½æ— æ³•æ­£å¸¸å·¥ä½œã€‚\n2. Limit the subject line to 50 characters 50ä¸ªå­—ç¬¦ä¸æ˜¯ç¡¬æ€§é™åˆ¶ï¼Œåªæ˜¯ä¸€ä¸ªç»éªŒæ³•åˆ™ã€‚å°†ä¸»é¢˜è¡Œä¿æŒåœ¨è¿™ä¸€é•¿åº¦å¯ç¡®ä¿å…¶å¯è¯»æ€§ï¼Œå¹¶è¿«ä½¿ä½œè€…æ€è€ƒå¦‚ä½•ä»¥æœ€ç®€æ´çš„æ–¹å¼è¯´æ˜å†…å®¹ã€‚\n1 Tip: If you\u0026#39;re having a hard time summarizing, you might be committing too many changes at once. Strive for atomic commits (a topic for a separate post). GitHub\u0026rsquo;s UI is fully aware of these conventions. It will warn you if you go past the 50 character limit and will truncate any subject line longer than 72 characters with an ellipsis.\n3. Capitalize the subject line This is as simple as it sounds. Begin all subject lines with a capital letter.\nFor example:\nAccelerate to 88 miles per hour Instead of:\naccelerate to 88 miles per hour 4. Do not end the subject line with a period Trailing punctuation is unnecessary in subject lines. Besides, space is precious when you\u0026rsquo;re trying to keep them to 50 chars or less.\nExample:\nOpen the pod bay doors Instead of:\nOpen the pod bay doors. 5. Use the imperative mood in the subject line Imperative mood just means \u0026ldquo;spoken or written as if giving a command or instruction\u0026rdquo;. A few examples:\nClean your room Close the door Take out the trash Git itself uses the imperative whenever it creates a commit on your behalf.\nä¾‹å¦‚ï¼Œä½¿ç”¨ git merge æ—¶åˆ›å»ºçš„é»˜è®¤ä¿¡æ¯å¦‚ä¸‹\n1 Merge branch \u0026#39;myfeature\u0026#39; å½“ä½¿ç”¨ git revert æ—¶ï¼Œ\n1 2 3 Revert \u0026#34;Add the thing with the stuff\u0026#34; This reverts commit cc87791524aedd593cff5a74532befe7ab69ce9d. æˆ– ç‚¹å‡» GitHub æ‹‰å–è¯·æ±‚ä¸Šçš„ Merge æŒ‰é’®æ—¶ï¼š\n1 Merge pull request #123 from someuser/somebranch å› æ­¤ï¼Œå½“æ‚¨åœ¨å‘½ä»¤è¡Œä¸­ç¼–å†™æäº¤ä¿¡æ¯æ—¶ï¼Œæ‚¨éµå¾ªçš„æ˜¯ Git è‡ªå¸¦çš„çº¦å®šã€‚ä¾‹å¦‚ï¼Œ\nRefactor subsystem X for readability Update getting started documentation Remove deprecated methods Release version 1.0.0 è¿™æ ·å†™ä¸€å¼€å§‹å¯èƒ½ä¼šæœ‰ç‚¹å°´å°¬ã€‚æˆ‘ä»¬æ›´ä¹ æƒ¯äºç”¨æŒ‡ç¤ºè¯­æ°”è¯´è¯ï¼Œè€ŒæŒ‡ç¤ºè¯­æ°”åˆ™æ˜¯æŠ¥å‘Šäº‹å®ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæäº¤çš„ä¿¡æ¯ç»å¸¸è¯»èµ·æ¥åƒè¿™æ ·ï¼š\nFixed bug with Y Changing behavior of X æœ‰æ—¶æ‰¿è¯ºä¿¡æ¯ä¼šè¢«å†™æˆå†…å®¹æè¿°ï¼š\nMore fixes for broken stuff Sweet new API methods ä¸ºäº†æ¶ˆé™¤ä»»ä½•æ··æ·†ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„è§„åˆ™ï¼Œä»¥ä¾¿æ¯æ¬¡éƒ½èƒ½æ­£ç¡®æ“ä½œã€‚\nä¸€ä¸ªæ­£ç¡®çš„Gitæäº¤ä¸»é¢˜è¡Œåº”è¯¥èƒ½å¤Ÿå®Œæˆä»¥ä¸‹å¥å­ï¼š\nIf applied, this commit will your subject line here For example:\nIf applied, this commit will refactor subsystem X for readability If applied, this commit will update getting started documentation If applied, this commit will remove deprecated methods If applied, this commit will release version 1.0.0 If applied, this commit will merge pull request #123 from user/branch Remember: Use of the imperative is important only in the subject line. You can relax this restriction when you\u0026rsquo;re writing the body.\n6. Wrap the body at 72 characters Git ä¸ä¼šè‡ªåŠ¨æ¢è¡Œã€‚å½“æ‚¨å†™æäº¤ä¿¡æ¯çš„æ­£æ–‡æ—¶ï¼Œå¿…é¡»æ³¨æ„å³è¾¹è·ï¼Œå¹¶æ‰‹åŠ¨æ¢è¡Œã€‚\nå»ºè®®åœ¨72ä¸ªå­—ç¬¦æ—¶è¿›è¡Œï¼Œè¿™æ ·Gitå°±æœ‰è¶³å¤Ÿçš„ç©ºé—´ç¼©è¿›æ–‡æœ¬ï¼ŒåŒæ—¶åˆèƒ½å°†æ‰€æœ‰å†…å®¹ä¿æŒåœ¨80ä¸ªå­—ç¬¦ä»¥å†…ã€‚\n7. Use the body to explain what and why vs. how Bitcoin Core çš„è¿™ä¸ª commit æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œå®ƒè§£é‡Šäº†æ”¹å˜çš„å†…å®¹å’ŒåŸå› ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 commit eb0b56b19017ab5c16c745e6da39c53126924ed6 Author: Pieter Wuille \u0026lt;pieter.wuille@gmail.com\u0026gt; Date: Fri Aug 1 22:57:55 2014 +0200 Simplify serialize.h\u0026#39;s exception handling Remove the \u0026#39;state\u0026#39; and \u0026#39;exceptmask\u0026#39; from serialize.h\u0026#39;s stream implementations, as well as related methods. As exceptmask always included \u0026#39;failbit\u0026#39;, and setstate was always called with bits = failbit, all it did was immediately raise an exception. Get rid of those variables, and replace the setstate with direct exception throwing (which also removes some dead code). As a result, good() is never reached after a failure (there are only 2 calls, one of which is in tests), and can just be replaced by !eof(). fail(), clear(n) and exceptions() are just never called. Delete them. çœ‹çœ‹å®Œæ•´çš„å·®å¼‚ï¼Œæƒ³æƒ³ä½œè€…èŠ±æ—¶é—´åœ¨æ­¤æ—¶æ­¤åœ°æä¾›è¿™äº›ä¸Šä¸‹æ–‡ï¼Œä¸ºåŒäº‹å’Œæœªæ¥çš„æäº¤è€…èŠ‚çœäº†å¤šå°‘æ—¶é—´ã€‚å¦‚æœä»–ä¸è¿™æ ·åšï¼Œè¿™äº›å†…å®¹å¯èƒ½ä¼šæ°¸è¿œä¸¢å¤±ã€‚\nåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥çœç•¥å…³äºå¦‚ä½•ä¿®æ”¹çš„ç»†èŠ‚ã€‚åœ¨è¿™æ–¹é¢ï¼Œä»£ç é€šå¸¸æ˜¯ä¸è¨€è‡ªæ˜çš„ï¼Œå¦‚æœä»£ç éå¸¸å¤æ‚ï¼Œéœ€è¦ç”¨æ•£æ–‡æ¥è§£é‡Šï¼Œé‚£å°±æ˜¯æºæ³¨é‡Šçš„ä½œç”¨ã€‚åªéœ€é‡ç‚¹è¯´æ˜æ‚¨é¦–å…ˆè¿›è¡Œä¿®æ”¹çš„åŸå› \u0026ndash;(ä¿®æ”¹å‰çš„å·¥ä½œæ–¹å¼ä»¥åŠæœ‰ä»€ä¹ˆé—®é¢˜)ã€ç°åœ¨çš„å·¥ä½œæ–¹å¼ï¼Œä»¥åŠæ‚¨ä¸ºä»€ä¹ˆå†³å®šä»¥è¿™ç§æ–¹å¼è§£å†³é—®é¢˜ã€‚\næœªæ¥æ„Ÿè°¢æ‚¨çš„ç»´æŠ¤è€…å¯èƒ½å°±æ˜¯æ‚¨è‡ªå·±ï¼\n","permalink":"https://WFUing.github.io/posts/tech/architecture/git/how-to-write-a-git-commit-message/","summary":"Resources git tutorial: https://wyag.thb.lt/ åŠ¨å›¾å±•ç¤º10å¤§Gitå‘½ä»¤: https://zhuanlan.zhihu.com/p/132573100 git intro: https://missing.csail.mit.edu/2020/version-control/ book: https://git-scm.com/book/en/v2 commit convention è§„èŒƒ: https://www.conventionalcommits.org/en/v1.0.0/#summary Write yourself a Gitï¼šhttps://wyag.thb.lt/ å¦‚ä½•ç¼–å†™Git Commit Message? ä¸ºäº†åˆ›å»ºä¸€ä¸ªæœ‰ç”¨çš„ revision history ï¼Œå›¢é˜Ÿåº”è¯¥é¦–å…ˆå°± commit message convention è¾¾æˆä¸€è‡´ï¼Œè‡³å°‘è¦å®šä¹‰ä»¥ä¸‹ä¸‰ç‚¹ï¼š\nStyleï¼šæ ‡è®°è¯­æ³•Markup syntax, æµå¼å¸ƒå±€wrap margins, è¯­æ³•grammar, å¤§å°å†™capitalization, æ ‡ç‚¹ç¬¦å·punctuationã€‚æŠŠè¿™äº›ä¸œè¥¿å†™å‡ºæ¥ï¼Œå»æ‰çŒœæµ‹ï¼Œè®©ä¸€åˆ‡å°½å¯èƒ½ç®€å•ã€‚ Contentï¼šæäº¤æ¶ˆæ¯çš„æ­£æ–‡åº”è¯¥åŒ…å«ä»€ä¹ˆæ ·çš„ä¿¡æ¯ï¼Ÿä¸åº”è¯¥åŒ…å«ä»€ä¹ˆï¼Ÿ Metadataï¼šå¦‚ä½•å¼•ç”¨ issue tracking IDsã€pull request numbers ç­‰ï¼Ÿ å¹¸è¿çš„æ˜¯ï¼ŒGitæäº¤ä¿¡æ¯çš„è§„èŒƒå·²ç»æœ‰äº†å¾ˆå¥½çš„çº¦å®šã€‚äº‹å®ä¸Šï¼Œå¾ˆå¤š Git å‘½ä»¤çš„åŠŸèƒ½ä¸­å°±åŒ…å«äº†è¿™äº›çº¦å®šã€‚æ‚¨ä¸éœ€è¦é‡æ–°å‘æ˜ä»€ä¹ˆã€‚åªè¦éµå¾ªä¸‹é¢çš„ä¸ƒæ¡è§„åˆ™ï¼Œæ‚¨å°±èƒ½åƒä¸“å®¶ä¸€æ · commit message äº†ã€‚\nThe seven rules of a great Git commit message\nSeparate subject from body with a blank line Limit the subject line to 50 characters Capitalize the subject line Do not end the subject line with a period Use the imperative mood in the subject line Wrap the body at 72 characters Use the body to explain what and why vs.","title":"How to Write a Git Commit Message"},{"content":"Linux çš„å‘½ä»¤ç¡®å®éå¸¸å¤šï¼Œç„¶è€Œç†Ÿæ‚‰ Linux çš„äººä»æ¥ä¸ä¼šå› ä¸º Linux çš„å‘½ä»¤å¤ªå¤šè€Œçƒ¦æ¼ã€‚å› ä¸ºæˆ‘ä»¬ä»…ä»…åªéœ€è¦æŒæ¡å¸¸ç”¨å‘½ä»¤ï¼Œå°±å®Œå…¨å¯ä»¥é©¾é©­ Linuxã€‚\næ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹éƒ½æœ‰é‚£äº›å¸¸ç”¨çš„ Linux å‘½ä»¤å§ï¼\nä¸€ã€æ–‡ä»¶ç›®å½•æ“ä½œ 1.ls å‘½ä»¤ ls å‘½ä»¤ä¸ä»…å¯ä»¥æŸ¥çœ‹ linux æ–‡ä»¶å¤¹åŒ…å«çš„æ–‡ä»¶è€Œä¸”å¯ä»¥æŸ¥çœ‹æ–‡ä»¶æƒé™ï¼ˆåŒ…æ‹¬ç›®å½•ã€æ–‡ä»¶å¤¹ã€æ–‡ä»¶æƒé™ï¼‰æŸ¥çœ‹ç›®å½•ä¿¡æ¯ç­‰ç­‰ã€‚\nå‘½ä»¤æ ¼å¼\n1 ls [é€‰é¡¹][ç›®å½•å] å¸¸ç”¨å‚æ•°\n-l ï¼šåˆ—å‡ºé•¿æ•°æ®ä¸²ï¼ŒåŒ…å«æ–‡ä»¶çš„å±æ€§ä¸æƒé™æ•°æ®ç­‰ -a ï¼šåˆ—å‡ºå…¨éƒ¨çš„æ–‡ä»¶ï¼Œè¿åŒéšè—æ–‡ä»¶ï¼ˆå¼€å¤´ä¸º.çš„æ–‡ä»¶ï¼‰ä¸€èµ·åˆ—å‡ºæ¥ï¼ˆå¸¸ç”¨ï¼‰ -d ï¼šä»…åˆ—å‡ºç›®å½•æœ¬èº«ï¼Œè€Œä¸æ˜¯åˆ—å‡ºç›®å½•çš„æ–‡ä»¶æ•°æ® -h ï¼šå°†æ–‡ä»¶å®¹é‡ä»¥è¾ƒæ˜“è¯»çš„æ–¹å¼ï¼ˆGBï¼ŒkBç­‰ï¼‰åˆ—å‡ºæ¥ -R ï¼šè¿åŒå­ç›®å½•çš„å†…å®¹ä¸€èµ·åˆ—å‡ºï¼ˆé€’å½’åˆ—å‡ºï¼‰ï¼Œç­‰äºè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šæ˜¾ç¤ºå‡ºæ¥ ä½¿ç”¨å®ä¾‹\n1.åˆ—å‡º home ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•çš„è¯¦ç»†èµ„æ–™ã€‚\n1 2 ls -a -l /home ls -al /home 2.åˆ—å‡ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰ä»¥\u0026quot;d\u0026quot;å¼€å¤´çš„æ–‡ä»¶ç›®å½•è¯¦æƒ…å†…å®¹ã€‚\n1 ls -l d* 2.cdå‘½ä»¤ æœ€åŸºæœ¬çš„å‘½ä»¤è¯­å¥ï¼Œå…¶ä»–çš„å‘½ä»¤è¯­å¥è¦è¿›è¡Œæ“ä½œï¼Œéƒ½æ˜¯å»ºç«‹åœ¨ä½¿ç”¨ cd å‘½ä»¤ä¸Šçš„ã€‚ç”¨äºåˆ‡æ¢å½“å‰ç›®å½•è‡³dirNameã€‚\nå‘½ä»¤æ ¼å¼\n1 cd [ç›®å½•å] æ“ä½œæ¡ˆä¾‹\n1.ä»å½“å‰ç›®å½•è¿›å…¥ç³»ç»Ÿæ ¹ç›®å½•ã€‚\n1 cd / 2.è·³è½¬åˆ° home/Code ç›®å½•ã€‚\n1 cd /home/Code 3.pwd å‘½ä»¤ æŸ¥çœ‹\u0026quot;å½“å‰å·¥ä½œç›®å½•\u0026quot;çš„å®Œæ•´è·¯å¾„ã€‚\nå‘½ä»¤æ ¼å¼\n1 pwd [é€‰é¡¹] å¸¸ç”¨å‚æ•°\n-P :æ˜¾ç¤ºå®é™…ç‰©ç†è·¯å¾„ï¼Œè€Œéä½¿ç”¨è¿æ¥ï¼ˆlinkï¼‰è·¯å¾„ -L :å½“ç›®å½•ä¸ºè¿æ¥è·¯å¾„æ—¶ï¼Œæ˜¾ç¤ºè¿æ¥è·¯å¾„ æ“ä½œæ¡ˆä¾‹\n1.æ˜¾ç¤ºå½“å‰æ‰€åœ¨è·¯å¾„ã€‚\n1 pwd 4.mkdir å‘½ä»¤ ç”¨æ¥åˆ›å»ºæŒ‡å®šçš„åç§°çš„ç›®å½•ï¼Œè¦æ±‚åˆ›å»ºç›®å½•çš„ç”¨æˆ·åœ¨å½“å‰ç›®å½•ä¸­å…·æœ‰å†™æƒé™ï¼Œå¹¶ä¸”æŒ‡å®šçš„ç›®å½•åä¸èƒ½æ˜¯å½“å‰ç›®å½•ä¸­å·²æœ‰çš„ç›®å½•ã€‚\nå‘½ä»¤æ ¼å¼\n1 mkdir [é€‰é¡¹] ç›®å½• å¸¸ç”¨å‚æ•°\n-m, \u0026ndash;mode=æ¨¡å¼ï¼Œè®¾å®šæƒé™\u0026lt;æ¨¡å¼\u0026gt; (ç±»ä¼¼ chmod)ï¼Œè€Œä¸æ˜¯ rwxrwxrwx å‡ umask -p, \u0026ndash;parents å¯ä»¥æ˜¯ä¸€ä¸ªè·¯å¾„åç§°ã€‚æ­¤æ—¶è‹¥è·¯å¾„ä¸­çš„æŸäº›ç›®å½•å°šä¸å­˜åœ¨,åŠ ä¸Šæ­¤é€‰é¡¹å,ç³»ç»Ÿå°†è‡ªåŠ¨å»ºç«‹å¥½é‚£äº›å°šä¸å­˜åœ¨çš„ç›®å½•,å³ä¸€æ¬¡å¯ä»¥å»ºç«‹å¤šä¸ªç›®å½•; -v, \u0026ndash;verbose æ¯æ¬¡åˆ›å»ºæ–°ç›®å½•éƒ½æ˜¾ç¤ºä¿¡æ¯ \u0026ndash;help æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º \u0026ndash;version è¾“å‡ºç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º ä½¿ç”¨å®ä¾‹\n1.åˆ›å»ºä¸€ä¸ªç©ºç›®å½•ã€‚\n1 mkdir test 2.é€’å½’åˆ›å»ºå¤šä¸ªç›®å½•ã€‚\n1 mkdir test/test1 3.åˆ›å»ºæƒé™ä¸º777çš„ç›®å½•ã€‚\n1 mkdir -m 777 test2 4.åˆ›å»ºç›®å½•éƒ½æ˜¾ç¤ºä¿¡æ¯ã€‚\n1 mkdir -v test4 5.rm å‘½ä»¤ åˆ é™¤ä¸€ä¸ªç›®å½•ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨- ré€‰é¡¹ï¼Œåˆ™rmä¸ä¼šåˆ é™¤ç›®å½•ã€‚å¦‚æœä½¿ç”¨ rm æ¥åˆ é™¤æ–‡ä»¶ï¼Œé€šå¸¸ä»å¯ä»¥å°†è¯¥æ–‡ä»¶æ¢å¤åŸçŠ¶ã€‚\nå‘½ä»¤æ ¼å¼\n1 rm [é€‰é¡¹] æ–‡ä»¶ å¸¸ç”¨å‚æ•°\n-f, \u0026ndash;force å¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä»ä¸ç»™å‡ºæç¤ºã€‚ -i, \u0026ndash;interactive è¿›è¡Œäº¤äº’å¼åˆ é™¤ -r, -R, \u0026ndash;recursive æŒ‡ç¤ºrmå°†å‚æ•°ä¸­åˆ—å‡ºçš„å…¨éƒ¨ç›®å½•å’Œå­ç›®å½•å‡é€’å½’åœ°åˆ é™¤ã€‚ -v, \u0026ndash;verbose è¯¦ç»†æ˜¾ç¤ºè¿›è¡Œçš„æ­¥éª¤ \u0026ndash;help æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º \u0026ndash;version è¾“å‡ºç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º ä½¿ç”¨å®ä¾‹\n1.åˆ é™¤æ–‡ä»¶ test.txt,ç³»ç»Ÿä¼šæç¤ºæ˜¯å¦åˆ é™¤ã€‚\n1 rm test.txt 2.å¼ºåˆ¶åˆ é™¤ test.txtï¼Œç³»ç»Ÿä¸å†æç¤ºã€‚\n1 rm -f test.txt 3.å°† test å­ç›®å½•åŠç›®å½•ä¸­æ‰€æœ‰æ¡£æ¡ˆåˆ é™¤ã€‚\n1 rm -r test 6.rmdir å‘½ä»¤ è¯¥å‘½ä»¤ä»ä¸€ä¸ªç›®å½•ä¸­åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå­ç›®å½•é¡¹ï¼Œåˆ é™¤æŸç›®å½•æ—¶ä¹Ÿå¿…é¡»å…·æœ‰å¯¹çˆ¶ç›®å½•çš„å†™æƒé™ã€‚\nå‘½ä»¤æ ¼å¼\n1 rmdir [é€‰é¡¹] ç›®å½• å¸¸ç”¨å‚æ•°\n-p é€’å½’åˆ é™¤ç›®å½•dirnameï¼Œå½“å­ç›®å½•åˆ é™¤åå…¶çˆ¶ç›®å½•ä¸ºç©ºæ—¶ï¼Œä¹Ÿä¸€åŒè¢«åˆ é™¤ã€‚å¦‚æœæ•´ä¸ªè·¯å¾„è¢«åˆ é™¤æˆ–è€…ç”±äºæŸç§åŸå› ä¿ç•™éƒ¨åˆ†è·¯å¾„ï¼Œåˆ™ç³»ç»Ÿåœ¨æ ‡å‡†è¾“å‡ºä¸Šæ˜¾ç¤ºç›¸åº”çš„ä¿¡æ¯ã€‚ -v, \u0026ndash;verbose æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ ä½¿ç”¨å®ä¾‹\n1.åˆ é™¤ç©ºç›®å½• test1ï¼Œéç©ºç›®å½•æ— æ³•åˆ é™¤ã€‚\n1 rmdir test1 2.å½“å­ç›®å½•è¢«åˆ é™¤åä½¿å®ƒä¹Ÿæˆä¸ºç©ºç›®å½•çš„è¯ï¼Œåˆ™é¡ºä¾¿ä¸€å¹¶åˆ é™¤\n1 rmdir -p test2 # test ç›®å½•ä¸‹ä»…æœ‰ test2 7. mv å‘½ä»¤ å¯ä»¥ç”¨æ¥ç§»åŠ¨æ–‡ä»¶æˆ–è€…å°†æ–‡ä»¶æ”¹åï¼ˆmove (rename) filesï¼‰ã€‚å½“ç¬¬äºŒä¸ªå‚æ•°ç±»å‹æ˜¯æ–‡ä»¶æ—¶ï¼Œmvå‘½ä»¤å®Œæˆæ–‡ä»¶é‡å‘½åã€‚å½“ç¬¬äºŒä¸ªå‚æ•°æ˜¯å·²å­˜åœ¨çš„ç›®å½•åç§°æ—¶ï¼Œæºæ–‡ä»¶æˆ–ç›®å½•å‚æ•°å¯ä»¥æœ‰å¤šä¸ªï¼Œmvå‘½ä»¤å°†å„å‚æ•°æŒ‡å®šçš„æºæ–‡ä»¶å‡ç§»è‡³ç›®æ ‡ç›®å½•ä¸­ã€‚\nå‘½ä»¤æ ¼å¼\n1 mv [é€‰é¡¹] æºæ–‡ä»¶æˆ–ç›®å½• ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½• å¸¸ç”¨å‚æ•°\n-b ï¼šè‹¥éœ€è¦†ç›–æ–‡ä»¶ï¼Œåˆ™è¦†ç›–å‰å…ˆè¡Œå¤‡ä»½ -f ï¼šforce å¼ºåˆ¶çš„æ„æ€ï¼Œå¦‚æœç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸ä¼šè¯¢é—®è€Œç›´æ¥è¦†ç›– -i ï¼šè‹¥ç›®æ ‡æ–‡ä»¶ (destination) å·²ç»å­˜åœ¨æ—¶ï¼Œå°±ä¼šè¯¢é—®æ˜¯å¦è¦†ç›– -u ï¼šè‹¥ç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸” source æ¯”è¾ƒæ–°ï¼Œæ‰ä¼šæ›´æ–°(update) -t ï¼š \u0026ndash;target-directory=DIRECTORY move all SOURCE arguments into DIRECTORYï¼Œå³æŒ‡å®šmvçš„ç›®æ ‡ç›®å½•ï¼Œè¯¥é€‰é¡¹é€‚ç”¨äºç§»åŠ¨å¤šä¸ªæºæ–‡ä»¶åˆ°ä¸€ä¸ªç›®å½•çš„æƒ…å†µï¼Œæ­¤æ—¶ç›®æ ‡ç›®å½•åœ¨å‰ï¼Œæºæ–‡ä»¶åœ¨å ä½¿ç”¨å®ä¾‹\n1.å°† test1.txt é‡å‘½åä¸º test2.txtã€‚\n1 mv test1.txt test2.txt 2.ç§»åŠ¨æ–‡ä»¶ test1.txt åˆ°ç›®å½• test2\n1 mv test1.txt test2 3.å°†æ–‡ä»¶ test1.txtã€test2.txtã€test3.txt ç§»åŠ¨åˆ°ç›®å½• test3ã€‚\n1 mv test1.txt test2.txt test3.txt test3 8.cp å‘½ä»¤ å°†æºæ–‡ä»¶å¤åˆ¶è‡³ç›®æ ‡æ–‡ä»¶ï¼Œæˆ–å°†å¤šä¸ªæºæ–‡ä»¶å¤åˆ¶è‡³ç›®æ ‡ç›®å½•ã€‚\nå‘½ä»¤æ ¼å¼\n1 cp [é€‰é¡¹] æºæ–‡ä»¶ ç›®å½• æˆ– cp [é€‰é¡¹] -t ç›®å½• æºæ–‡ä»¶ å¸¸ç”¨å‚æ•°\n-t \u0026ndash;target-directory æŒ‡å®šç›®æ ‡ç›®å½• -i \u0026ndash;interactive è¦†ç›–å‰è¯¢é—®ï¼ˆä½¿å‰é¢çš„ -n é€‰é¡¹å¤±æ•ˆï¼‰ -n \u0026ndash;no-clobber ä¸è¦è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶ï¼ˆä½¿å‰é¢çš„ -i é€‰é¡¹å¤±æ•ˆï¼‰ -f \u0026ndash;force å¼ºè¡Œå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•ï¼Œä¸è®ºç›®çš„æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å·²ç»å­˜åœ¨ -u \u0026ndash;update ä½¿ç”¨è¿™é¡¹å‚æ•°ä¹‹åï¼Œåªä¼šåœ¨æºæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´è¾ƒç›®çš„æ–‡ä»¶æ›´æ–°æ—¶ï¼Œæˆ–æ˜¯å¯¹åº”çš„ç›®çš„æ–‡ä»¶å¹¶ä¸å­˜åœ¨ï¼Œæ‰å¤åˆ¶æ–‡ä»¶ ä½¿ç”¨å®ä¾‹\n1.å¤åˆ¶æ–‡ä»¶ test1.txt åˆ° test1 ç›®å½•\n1 cp test1.txt test1 # è‹¥æ–‡ä»¶å­˜åœ¨ï¼Œä¼šæç¤ºæ˜¯å¦è¦†ç›–ã€‚è‹¥ä¸å­˜åœ¨ç›´æ¥å®Œæˆå¤åˆ¶ å¤åˆ¶ test1 æ•´ä¸ªç›®å½•åˆ° test2\n1 cp -a test1 test2 9.touch å‘½ä»¤ touchå‘½ä»¤å‚æ•°å¯æ›´æ”¹æ–‡æ¡£æˆ–ç›®å½•çš„æ—¥æœŸæ—¶é—´ï¼ŒåŒ…æ‹¬å­˜å–æ—¶é—´å’Œæ›´æ”¹æ—¶é—´ã€‚\nå‘½ä»¤æ ¼å¼\n1 touch [é€‰é¡¹] æ–‡ä»¶ å¸¸ç”¨å‚æ•°\n-a æˆ–\u0026ndash;time=atimeæˆ–\u0026ndash;time=accessæˆ–\u0026ndash;time=use åªæ›´æ”¹å­˜å–æ—¶é—´ -c æˆ–\u0026ndash;no-create ä¸å»ºç«‹ä»»ä½•æ–‡æ¡£ -d ä½¿ç”¨æŒ‡å®šçš„æ—¥æœŸæ—¶é—´ï¼Œè€Œéç°åœ¨çš„æ—¶é—´ -f æ­¤å‚æ•°å°†å¿½ç•¥ä¸äºˆå¤„ç†ï¼Œä»…è´Ÿè´£è§£å†³BSDç‰ˆæœ¬touchæŒ‡ä»¤çš„å…¼å®¹æ€§é—®é¢˜ -m æˆ–\u0026ndash;time=mtimeæˆ–\u0026ndash;time=modify åªæ›´æ”¹å˜åŠ¨æ—¶é—´ -r æŠŠæŒ‡å®šæ–‡æ¡£æˆ–ç›®å½•çš„æ—¥æœŸæ—¶é—´ï¼Œç»Ÿç»Ÿè®¾æˆå’Œå‚è€ƒæ–‡æ¡£æˆ–ç›®å½•çš„æ—¥æœŸæ—¶é—´ç›¸åŒ -t ä½¿ç”¨æŒ‡å®šçš„æ—¥æœŸæ—¶é—´ï¼Œè€Œéç°åœ¨çš„æ—¶é—´ ä½¿ç”¨å®ä¾‹\n1.åˆ›å»ºä¸å­˜åœ¨çš„æ–‡ä»¶test.txt\n1 touch test.txt 2.æ›´æ–° test.txt çš„å®è·µå’Œ test1.txt æ—¶é—´æˆ³ç›¸åŒ\n1 touch -r test.txt test1.txt 10.cat å‘½ä»¤ ç”¨æ¥æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œæˆ–è€…å°†å‡ ä¸ªæ–‡ä»¶è¿æ¥èµ·æ¥æ˜¾ç¤ºï¼Œæˆ–è€…ä»æ ‡å‡†è¾“å…¥è¯»å–å†…å®¹å¹¶æ˜¾ç¤ºï¼Œå®ƒå¸¸ä¸é‡å®šå‘ç¬¦å·é…åˆä½¿ç”¨ã€‚\nå‘½ä»¤æ ¼å¼\n1 cat [é€‰é¡¹] [æ–‡ä»¶] å¸¸ç”¨å‚æ•°\n-A, \u0026ndash;show-all ç­‰ä»·äº -vET -b, \u0026ndash;number-nonblank å¯¹éç©ºè¾“å‡ºè¡Œç¼–å· -e ç­‰ä»·äº -vE -E, \u0026ndash;show-ends åœ¨æ¯è¡Œç»“æŸå¤„æ˜¾ç¤º $ -n, \u0026ndash;number å¯¹è¾“å‡ºçš„æ‰€æœ‰è¡Œç¼–å·,ç”±1å¼€å§‹å¯¹æ‰€æœ‰è¾“å‡ºçš„è¡Œæ•°ç¼–å· -s, \u0026ndash;squeeze-blank æœ‰è¿ç»­ä¸¤è¡Œä»¥ä¸Šçš„ç©ºç™½è¡Œï¼Œå°±ä»£æ¢ä¸ºä¸€è¡Œçš„ç©ºç™½è¡Œ -t ä¸ -vT ç­‰ä»· -T, \u0026ndash;show-tabs å°†è·³æ ¼å­—ç¬¦æ˜¾ç¤ºä¸º ^I -u (è¢«å¿½ç•¥) -v, \u0026ndash;show-nonprinting ä½¿ç”¨ ^ å’Œ M- å¼•ç”¨ï¼Œé™¤äº† LFD å’Œ TAB ä¹‹å¤– ä½¿ç”¨å®ä¾‹\n1.æŠŠ test.log çš„æ–‡ä»¶å†…å®¹åŠ ä¸Šè¡Œå·åè¾“å…¥ test1.log è¿™ä¸ªæ–‡ä»¶é‡Œã€‚\n1 cat -n test.log test1.log å°† test.log çš„æ–‡ä»¶å†…å®¹åå‘æ˜¾ç¤ºã€‚\n1 tac test.log 11.nl å‘½ä»¤ è¾“å‡ºçš„æ–‡ä»¶å†…å®¹è‡ªåŠ¨çš„åŠ ä¸Šè¡Œå·ï¼å…¶é»˜è®¤çš„ç»“æœä¸ cat -n æœ‰ç‚¹ä¸å¤ªä¸€æ ·ï¼Œ nl å¯ä»¥å°†è¡Œå·åšæ¯”è¾ƒå¤šçš„æ˜¾ç¤ºè®¾è®¡ï¼ŒåŒ…æ‹¬ä½æ•°ä¸æ˜¯å¦è‡ªåŠ¨è¡¥é½ 0 ç­‰ç­‰çš„åŠŸèƒ½ã€‚\nå‘½ä»¤æ ¼å¼\n1 nl [é€‰é¡¹] [æ–‡ä»¶] å¸¸ç”¨å‚æ•°\n-b ï¼šæŒ‡å®šè¡Œå·æŒ‡å®šçš„æ–¹å¼ï¼Œä¸»è¦æœ‰ä¸¤ç§ï¼š -b a ï¼šè¡¨ç¤ºä¸è®ºæ˜¯å¦ä¸ºç©ºè¡Œï¼Œä¹ŸåŒæ ·åˆ—å‡ºè¡Œå·(ç±»ä¼¼ cat -n) -b t ï¼šå¦‚æœæœ‰ç©ºè¡Œï¼Œç©ºçš„é‚£ä¸€è¡Œä¸è¦åˆ—å‡ºè¡Œå·(é»˜è®¤å€¼) -n ï¼šåˆ—å‡ºè¡Œå·è¡¨ç¤ºçš„æ–¹æ³•ï¼Œä¸»è¦æœ‰ä¸‰ç§ï¼š -n ln ï¼šè¡Œå·åœ¨è¤å¹•çš„æœ€å·¦æ–¹æ˜¾ç¤º -n rn ï¼šè¡Œå·åœ¨è‡ªå·±æ ä½çš„æœ€å³æ–¹æ˜¾ç¤ºï¼Œä¸”ä¸åŠ  0 -n rz ï¼šè¡Œå·åœ¨è‡ªå·±æ ä½çš„æœ€å³æ–¹æ˜¾ç¤ºï¼Œä¸”åŠ  0 -w ï¼šè¡Œå·æ ä½çš„å ç”¨çš„ä½æ•° ä½¿ç”¨å®ä¾‹\nç”¨ nl åˆ—å‡º test.log çš„å†…å®¹ã€‚\n1 nl test.log ç”¨ nl åˆ—å‡º test.log çš„å†…å®¹ï¼Œç©ºæœ¬è¡Œä¹ŸåŠ ä¸Šè¡Œå·ã€‚\n1 nl -b a test.log 12.more å‘½ä»¤ more å‘½ä»¤å’Œ cat çš„åŠŸèƒ½ä¸€æ ·éƒ½æ˜¯æŸ¥çœ‹æ–‡ä»¶é‡Œçš„å†…å®¹ï¼Œä½†æœ‰æ‰€ä¸åŒçš„æ˜¯moreå¯ä»¥æŒ‰é¡µæ¥æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹ï¼Œè¿˜æ”¯æŒç›´æ¥è·³è½¬è¡Œç­‰åŠŸèƒ½ã€‚\nå‘½ä»¤æ ¼å¼\n1 more [-dlfpcsu ] [-num ] [+/ pattern] [+ linenum] [file ... ] å¸¸ç”¨å‚æ•°\n+n ä»ç¬«nè¡Œå¼€å§‹æ˜¾ç¤º -n å®šä¹‰å±å¹•å¤§å°ä¸ºnè¡Œ +/pattern åœ¨æ¯ä¸ªæ¡£æ¡ˆæ˜¾ç¤ºå‰æœå¯»è¯¥å­—ä¸²ï¼ˆpatternï¼‰ï¼Œç„¶åä»è¯¥å­—ä¸²å‰ä¸¤è¡Œä¹‹åå¼€å§‹æ˜¾ç¤º -c ä»é¡¶éƒ¨æ¸…å±ï¼Œç„¶åæ˜¾ç¤º -d æç¤ºPress space to continueï¼Œ'q' to quitï¼ˆæŒ‰ç©ºæ ¼é”®ç»§ç»­ï¼ŒæŒ‰qé”®é€€å‡ºï¼‰ï¼Œç¦ç”¨å“é“ƒåŠŸèƒ½ -l å¿½ç•¥Ctrl+lï¼ˆæ¢é¡µï¼‰å­—ç¬¦ -p é€šè¿‡æ¸…é™¤çª—å£è€Œä¸æ˜¯æ»šå±æ¥å¯¹æ–‡ä»¶è¿›è¡Œæ¢é¡µï¼Œä¸-cé€‰é¡¹ç›¸ä¼¼ -s æŠŠè¿ç»­çš„å¤šä¸ªç©ºè¡Œæ˜¾ç¤ºä¸ºä¸€è¡Œ -u æŠŠæ–‡ä»¶å†…å®¹ä¸­çš„ä¸‹ç”»çº¿å»æ‰ æ“ä½œæŒ‡ä»¤\nEnterï¼šå‘ä¸‹nè¡Œï¼Œéœ€è¦å®šä¹‰ã€‚é»˜è®¤ä¸º1è¡Œ Ctrl+Fï¼šå‘ä¸‹æ»šåŠ¨ä¸€å± ç©ºæ ¼é”®ï¼šå‘ä¸‹æ»šåŠ¨ä¸€å± Ctrl+Bï¼šè¿”å›ä¸Šä¸€å± = ï¼šè¾“å‡ºå½“å‰è¡Œçš„è¡Œå· ï¼šf ï¼šè¾“å‡ºæ–‡ä»¶åå’Œå½“å‰è¡Œçš„è¡Œå· V ï¼šè°ƒç”¨viç¼–è¾‘å™¨ !å‘½ä»¤ ï¼šè°ƒç”¨Shellï¼Œå¹¶æ‰§è¡Œå‘½ä»¤ q ï¼šé€€å‡ºmore ä½¿ç”¨å®ä¾‹\n1.æ˜¾ç¤ºæ–‡ä»¶ test.log ç¬¬3è¡Œèµ·å†…å®¹ã€‚\n1 more +3 test.log 2.ä»æ–‡ä»¶ test.log æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå‡ºç°\u0026quot;day3\u0026quot;å­—ç¬¦ä¸²çš„è¡Œï¼Œå¹¶ä»è¯¥å¤„å‰2è¡Œå¼€å§‹æ˜¾ç¤ºè¾“å‡ºã€‚\n1 more +/day3 test.log è®¾ç½®æ¯å±æ˜¾ç¤ºè¡Œæ•°\n1 more -5 test.log 13.less å‘½ä»¤ less ä¸ more ç±»ä¼¼ï¼Œä½†ä½¿ç”¨ less å¯ä»¥éšæ„æµè§ˆæ–‡ä»¶ï¼Œè€Œ more ä»…èƒ½å‘å‰ç§»åŠ¨ï¼Œå´ä¸èƒ½å‘åç§»åŠ¨ï¼Œè€Œä¸” less åœ¨æŸ¥çœ‹ä¹‹å‰ä¸ä¼šåŠ è½½æ•´ä¸ªæ–‡ä»¶ã€‚\nå‘½ä»¤æ ¼å¼\n1 less [å‚æ•°] æ–‡ä»¶ å¸¸ç”¨å‚æ•°\n-b \u0026lt;ç¼“å†²åŒºå¤§å°\u0026gt; è®¾ç½®ç¼“å†²åŒºçš„å¤§å° -e å½“æ–‡ä»¶æ˜¾ç¤ºç»“æŸåï¼Œè‡ªåŠ¨ç¦»å¼€ -f å¼ºè¿«æ‰“å¼€ç‰¹æ®Šæ–‡ä»¶ï¼Œä¾‹å¦‚å¤–å›´è®¾å¤‡ä»£å·ã€ç›®å½•å’ŒäºŒè¿›åˆ¶æ–‡ä»¶ -g åªæ ‡å¿—æœ€åæœç´¢çš„å…³é”®è¯ -i å¿½ç•¥æœç´¢æ—¶çš„å¤§å°å†™ -m æ˜¾ç¤ºç±»ä¼¼moreå‘½ä»¤çš„ç™¾åˆ†æ¯” -N æ˜¾ç¤ºæ¯è¡Œçš„è¡Œå· -o \u0026lt;æ–‡ä»¶å\u0026gt; å°†less è¾“å‡ºçš„å†…å®¹åœ¨æŒ‡å®šæ–‡ä»¶ä¸­ä¿å­˜èµ·æ¥ -Q ä¸ä½¿ç”¨è­¦å‘ŠéŸ³ -s æ˜¾ç¤ºè¿ç»­ç©ºè¡Œä¸ºä¸€è¡Œ -S è¡Œè¿‡é•¿æ—¶é—´å°†è¶…å‡ºéƒ¨åˆ†èˆå¼ƒ -x \u0026lt;æ•°å­—\u0026gt; å°†\u0026quot;tab\u0026quot;é”®æ˜¾ç¤ºä¸ºè§„å®šçš„æ•°å­—ç©ºæ ¼ æ“ä½œå‘½ä»¤\n/å­—ç¬¦ä¸²ï¼šå‘ä¸‹æœç´¢\u0026quot;å­—ç¬¦ä¸²\u0026quot;çš„åŠŸèƒ½ ?å­—ç¬¦ä¸²ï¼šå‘ä¸Šæœç´¢\u0026quot;å­—ç¬¦ä¸²\u0026quot;çš„åŠŸèƒ½ nï¼šé‡å¤å‰ä¸€ä¸ªæœç´¢ï¼ˆä¸ / æˆ– ? æœ‰å…³ï¼‰ Nï¼šåå‘é‡å¤å‰ä¸€ä¸ªæœç´¢ï¼ˆä¸ / æˆ– ? æœ‰å…³ï¼‰ b å‘åç¿»ä¸€é¡µ d å‘åç¿»åŠé¡µ h æ˜¾ç¤ºå¸®åŠ©ç•Œé¢ Q é€€å‡ºless å‘½ä»¤ u å‘å‰æ»šåŠ¨åŠé¡µ y å‘å‰æ»šåŠ¨ä¸€è¡Œ ç©ºæ ¼é”® æ»šåŠ¨ä¸€è¡Œ å›è½¦é”® æ»šåŠ¨ä¸€é¡µ [pagedown]ï¼š å‘ä¸‹ç¿»åŠ¨ä¸€é¡µ [pageup]ï¼š å‘ä¸Šç¿»åŠ¨ä¸€é¡µ ä½¿ç”¨å®ä¾‹\n1.æŸ¥çœ‹æ–‡ä»¶ test.logã€‚\n1 less test.log 14.head å‘½ä»¤ head ç”¨æ¥æ˜¾ç¤ºæ¡£æ¡ˆçš„å¼€å¤´è‡³æ ‡å‡†è¾“å‡ºä¸­ï¼Œé»˜è®¤ head å‘½ä»¤æ‰“å°å…¶ç›¸åº”æ–‡ä»¶çš„å¼€å¤´ 10 è¡Œã€‚\nå‘½ä»¤æ ¼å¼\n1 head [å‚æ•°] [æ–‡ä»¶] å¸¸ç”¨å‚æ•°\n-q éšè—æ–‡ä»¶å -v æ˜¾ç¤ºæ–‡ä»¶å -c\u0026lt;å­—èŠ‚\u0026gt; æ˜¾ç¤ºå­—èŠ‚æ•° -n\u0026lt;è¡Œæ•°\u0026gt; æ˜¾ç¤ºçš„è¡Œæ•° ä½¿ç”¨å®ä¾‹\n1.æ˜¾ç¤ºæ–‡ä»¶ test.log çš„å‰ 5 è¡Œ\n1 head -n 5 test.log 2.æ˜¾ç¤ºæ–‡ä»¶ test.log å‰ 20 ä¸ªå­—èŠ‚\n1 head -c 20 test.log 15.tail å‘½ä»¤ æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æœ«å°¾å†…å®¹ï¼Œä¸æŒ‡å®šæ–‡ä»¶æ—¶ï¼Œä½œä¸ºè¾“å…¥ä¿¡æ¯è¿›è¡Œå¤„ç†ã€‚å¸¸ç”¨æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ã€‚\nå‘½ä»¤æ ¼å¼\n1 tail [å¿…è¦å‚æ•°] [é€‰æ‹©å‚æ•°] [æ–‡ä»¶] å¸¸ç”¨å‚æ•°\n-f å¾ªç¯è¯»å– -q ä¸æ˜¾ç¤ºå¤„ç†ä¿¡æ¯ -v æ˜¾ç¤ºè¯¦ç»†çš„å¤„ç†ä¿¡æ¯ -c\u0026lt;æ•°ç›®\u0026gt; æ˜¾ç¤ºçš„å­—èŠ‚æ•° -n\u0026lt;è¡Œæ•°\u0026gt; æ˜¾ç¤ºè¡Œæ•° \u0026ndash;pid=PID ä¸-fåˆç”¨,è¡¨ç¤ºåœ¨è¿›ç¨‹ID,PIDæ­»æ‰ä¹‹åç»“æŸ. -q, \u0026ndash;quiet, \u0026ndash;silent ä»ä¸è¾“å‡ºç»™å‡ºæ–‡ä»¶åçš„é¦–éƒ¨ -s, \u0026ndash;sleep-interval=S ä¸-fåˆç”¨,è¡¨ç¤ºåœ¨æ¯æ¬¡åå¤çš„é—´éš”ä¼‘çœ Sç§’ ä½¿ç”¨å®ä¾‹\n1.æ˜¾ç¤ºæ–‡ä»¶ test.log æœ€å 5 è¡Œå†…å®¹ã€‚\n1 tail -n 5 test.log 2.å¾ªç¯æŸ¥çœ‹æ–‡ä»¶å†…å®¹\n1 tail -f test.log äºŒã€æ–‡ä»¶æŸ¥æ‰¾ 16.which å‘½ä»¤ whichæŒ‡ä»¤ä¼šåœ¨PATHå˜é‡æŒ‡å®šçš„è·¯å¾„ä¸­ï¼Œæœç´¢æŸä¸ªç³»ç»Ÿå‘½ä»¤çš„ä½ç½®ï¼Œå¹¶ä¸”è¿”å›ç¬¬ä¸€ä¸ªæœç´¢ç»“æœã€‚\nå‘½ä»¤æ ¼å¼\n1 which å¯æ‰§è¡Œæ–‡ä»¶åç§° å¸¸ç”¨å‚æ•°\n-n æŒ‡å®šæ–‡ä»¶åé•¿åº¦ï¼ŒæŒ‡å®šçš„é•¿åº¦å¿…é¡»å¤§äºæˆ–ç­‰äºæ‰€æœ‰æ–‡ä»¶ä¸­æœ€é•¿çš„æ–‡ä»¶å -p ä¸-nå‚æ•°ç›¸åŒï¼Œä½†æ­¤å¤„çš„åŒ…æ‹¬äº†æ–‡ä»¶çš„è·¯å¾„ -w æŒ‡å®šè¾“å‡ºæ—¶æ ä½çš„å®½åº¦ -V æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ ä½¿ç”¨å®ä¾‹\n1.æŸ¥æ‰¾æ–‡ä»¶ã€æ˜¾ç¤ºå‘½ä»¤è·¯å¾„ã€‚\n1 which pwd ç”¨ which å»æ‰¾å‡º which\n1 which which 17.whereis å‘½ä»¤ whereiså‘½ä»¤æ˜¯å®šä½å¯æ‰§è¡Œæ–‡ä»¶ã€æºä»£ç æ–‡ä»¶ã€å¸®åŠ©æ–‡ä»¶åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä½ç½®ã€‚\nå‘½ä»¤æ ¼å¼\n1 whereis [-bmsu] [BMS ç›®å½•å -f ] æ–‡ä»¶å å¸¸ç”¨å‚æ•°\n-b å®šä½å¯æ‰§è¡Œæ–‡ä»¶ -m å®šä½å¸®åŠ©æ–‡ä»¶ -s å®šä½æºä»£ç æ–‡ä»¶ -u æœç´¢é»˜è®¤è·¯å¾„ä¸‹é™¤å¯æ‰§è¡Œæ–‡ä»¶ã€æºä»£ç æ–‡ä»¶ã€å¸®åŠ©æ–‡ä»¶ä»¥å¤–çš„å…¶å®ƒæ–‡ä»¶ -B æŒ‡å®šæœç´¢å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ -M æŒ‡å®šæœç´¢å¸®åŠ©æ–‡ä»¶çš„è·¯å¾„ -S æŒ‡å®šæœç´¢æºä»£ç æ–‡ä»¶çš„è·¯å¾„ ä½¿ç”¨å®ä¾‹\n1.å°†å’Œ svn æ–‡ä»¶ç›¸å…³çš„æ–‡ä»¶éƒ½æŸ¥æ‰¾å‡ºæ¥ã€‚\n1 whereis svn 2.åªå°†äºŒè¿›åˆ¶æ–‡ä»¶æŸ¥æ‰¾å‡ºæ¥ã€‚\n1 whereis -b svn 18.locate å‘½ä»¤ å¯ä»¥å¾ˆå¿«é€Ÿçš„æœå¯»æ¡£æ¡ˆç³»ç»Ÿå†…æ˜¯å¦æœ‰æŒ‡å®šçš„æ¡£æ¡ˆã€‚\nå‘½ä»¤æ ¼å¼\n1 locate [é€‰æ‹©å‚æ•°] [æ ·å¼] å¸¸ç”¨å‚æ•°\n-e å°†æ’é™¤åœ¨å¯»æ‰¾çš„èŒƒå›´ä¹‹å¤–ã€‚ -1 å¦‚æœ æ˜¯ 1ï¼åˆ™å¯åŠ¨å®‰å…¨æ¨¡å¼ã€‚åœ¨å®‰å…¨æ¨¡å¼ä¸‹ï¼Œä½¿ç”¨è€…ä¸ä¼šçœ‹åˆ°æƒé™æ— æ³•çœ‹åˆ° çš„æ¡£æ¡ˆã€‚è¿™ä¼šå§‹é€Ÿåº¦å‡æ…¢ï¼Œå› ä¸º locate å¿…é¡»è‡³å®é™…çš„æ¡£æ¡ˆç³»ç»Ÿä¸­å–å¾—æ¡£æ¡ˆçš„ æƒé™èµ„æ–™ã€‚ -f å°†ç‰¹å®šçš„æ¡£æ¡ˆç³»ç»Ÿæ’é™¤åœ¨å¤–ï¼Œä¾‹å¦‚æˆ‘ä»¬æ²¡æœ‰åˆ°ç†è¦æŠŠ proc æ¡£æ¡ˆç³»ç»Ÿä¸­çš„æ¡£æ¡ˆ æ”¾åœ¨èµ„æ–™åº“ä¸­ã€‚ -q å®‰é™æ¨¡å¼ï¼Œä¸ä¼šæ˜¾ç¤ºä»»ä½•é”™è¯¯è®¯æ¯ã€‚ -n è‡³å¤šæ˜¾ç¤º nä¸ªè¾“å‡ºã€‚ -r ä½¿ç”¨æ­£è§„è¿ç®—å¼ åšå¯»æ‰¾çš„æ¡ä»¶ã€‚ -o æŒ‡å®šèµ„æ–™åº“å­˜çš„åç§°ã€‚ -d æŒ‡å®šèµ„æ–™åº“çš„è·¯å¾„ ä½¿ç”¨å®ä¾‹\n1.æŸ¥æ‰¾å’Œ pwd ç›¸å…³çš„æ‰€æœ‰æ–‡ä»¶ã€‚\n1 locate pwd æœç´¢etc ç›®å½•ä¸‹ï¼Œæ‰€æœ‰ä»¥ m å¼€å¤´çš„æ–‡ä»¶ã€‚\n1 bashå¤åˆ¶ä»£ç locate /etc/m 19.find å‘½ä»¤ ä¸»è¦ä½œç”¨æ˜¯æ²¿ç€æ–‡ä»¶å±‚æ¬¡ç»“æ„å‘ä¸‹éå†ï¼ŒåŒ¹é…ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚\nå‘½ä»¤æ ¼å¼\n1 find [é€‰é¡¹] [æœç´¢è·¯å¾„] [è¡¨è¾¾å¼] å¸¸ç”¨å‚æ•°\n-print find å‘½ä»¤å°†åŒ¹é…çš„æ–‡ä»¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º -exec find å‘½ä»¤å¯¹åŒ¹é…çš„æ–‡ä»¶æ‰§è¡Œè¯¥å‚æ•°æ‰€ç»™å‡ºçš„ shell å‘½ä»¤\n-name æŒ‰ç…§æ–‡ä»¶åæŸ¥æ‰¾æ–‡ä»¶ -type æŸ¥æ‰¾æŸä¸€ç±»å‹çš„æ–‡ä»¶ ä½¿ç”¨å®ä¾‹\n1.æ‰“å°å½“å‰ç›®å½•æ–‡ä»¶ç›®å½•åˆ—è¡¨ã€‚\n1 find . -print 2.æ‰“å°å½“å‰ç›®å½•ä¸‹æ‰€æœ‰ä¸ä»¥.txt ç»“å°¾çš„æ–‡ä»¶åã€‚\n1 find . ! -name \u0026#34;*.txt\u0026#34; 3.æ‰“å°å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æƒé™ä¸º 777 çš„ php æ–‡ä»¶ã€‚\n1 find . -type f -name \u0026#34;*.php\u0026#34; -perm 777 4.æ‰¾åˆ°å½“å‰ç›®å½•ä¸‹æ‰€æœ‰ php æ–‡ä»¶ï¼Œå¹¶æ˜¾ç¤ºå…¶è¯¦ç»†ä¿¡æ¯ã€‚\n1 find . -name \u0026#34;*.php\u0026#34; -exec ls -l {} \\; 5.æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹æ‰€æœ‰ c ä»£ç æ–‡ä»¶ï¼Œç»Ÿè®¡æ€»è¡Œæ•°ã€‚\n1 find . -type f -name \u0026#34;*.c\u0026#34; | xargs wc -l xargs å‘½ä»¤å¯ä»¥ä»æ ‡å‡†è¾“å…¥æ¥æ”¶è¾“å…¥ï¼Œå¹¶æŠŠè¾“å…¥è½¬æ¢ä¸ºä¸€ä¸ªç‰¹å®šçš„å‚æ•°åˆ—è¡¨ã€‚\nå‘½ä»¤æ ¼å¼\n1 command | xargs [é€‰é¡¹] [command] xargs å‘½ä»¤åº”è¯¥ç´§è·Ÿåœ¨ç®¡é“æ“ä½œç¬¦ä¹‹åï¼Œå› ä¸ºå®ƒä»¥æ ‡å‡†è¾“å…¥ä½œä¸ºä¸»è¦çš„æºæ•°æ®æµã€‚\nå¸¸ç”¨å‚æ•°\n-n æŒ‡å®šæ¯è¡Œæœ€å¤§çš„å‚æ•°æ•°é‡ -d æŒ‡å®šåˆ†éš”ç¬¦ ä¸‰ã€æ–‡ä»¶æ‰“åŒ…ä¸Šä¼ å’Œä¸‹è½½ 20.tar å‘½ä»¤ ç”¨æ¥å‹ç¼©å’Œè§£å‹æ–‡ä»¶ã€‚taræœ¬èº«ä¸å…·æœ‰å‹ç¼©åŠŸèƒ½ã€‚ä»–æ˜¯è°ƒç”¨å‹ç¼©åŠŸèƒ½å®ç°çš„ã€‚\nå‘½ä»¤æ ¼å¼\n1 tar [å¿…è¦å‚æ•°] [é€‰æ‹©å‚æ•°] [æ–‡ä»¶] å¸¸ç”¨å‚æ•°\nå¿…è¦å‚æ•°\n-A æ–°å¢å‹ç¼©æ–‡ä»¶åˆ°å·²å­˜åœ¨çš„å‹ç¼© -B è®¾ç½®åŒºå—å¤§å° -c å»ºç«‹æ–°çš„å‹ç¼©æ–‡ä»¶ -d è®°å½•æ–‡ä»¶çš„å·®åˆ« -r æ·»åŠ æ–‡ä»¶åˆ°å·²ç»å‹ç¼©çš„æ–‡ä»¶ -u æ·»åŠ æ”¹å˜äº†å’Œç°æœ‰çš„æ–‡ä»¶åˆ°å·²ç»å­˜åœ¨çš„å‹ç¼©æ–‡ä»¶ -x ä»å‹ç¼©çš„æ–‡ä»¶ä¸­æå–æ–‡ä»¶ -t æ˜¾ç¤ºå‹ç¼©æ–‡ä»¶çš„å†…å®¹ -z æ”¯æŒgzipè§£å‹æ–‡ä»¶ -j æ”¯æŒbzip2è§£å‹æ–‡ä»¶ -Z æ”¯æŒcompressè§£å‹æ–‡ä»¶ -v æ˜¾ç¤ºæ“ä½œè¿‡ç¨‹ -l æ–‡ä»¶ç³»ç»Ÿè¾¹ç•Œè®¾ç½® -k ä¿ç•™åŸæœ‰æ–‡ä»¶ä¸è¦†ç›– -m ä¿ç•™æ–‡ä»¶ä¸è¢«è¦†ç›– -W ç¡®è®¤å‹ç¼©æ–‡ä»¶çš„æ­£ç¡®æ€§ å¯é€‰å‚æ•°\n-b è®¾ç½®åŒºå—æ•°ç›® -C åˆ‡æ¢åˆ°æŒ‡å®šç›®å½• -f æŒ‡å®šå‹ç¼©æ–‡ä»¶ \u0026ndash;help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ \u0026ndash;version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ ä½¿ç”¨å®ä¾‹\n1.å°†æ–‡ä»¶æ‰“å…¨éƒ¨æ‰“åŒ…æˆtaråŒ…ã€‚\n1 2 3 4 5 tar -cvf test.tar test.log # ä»…æ‰“åŒ…ï¼Œä¸å‹ç¼©ï¼ tar -zcvf test.tar.gz test.log # æ‰“åŒ…åï¼Œä»¥ gzip å‹ç¼© tar -zcvf test.tar.bz2 test.log # æ‰“åŒ…åï¼Œä»¥ bzip2 å‹ç¼© 2.å°† tar åŒ…è§£å‹ç¼©\n1 tar -zxvf test.tar.gz 21.gzip å‘½ä»¤ ä½¿ç”¨å¹¿æ³›çš„å‹ç¼©ç¨‹åºï¼Œæ–‡ä»¶ç»å®ƒå‹ç¼©è¿‡åï¼Œå…¶åç§°åé¢ä¼šå¤šå‡º\u0026quot;.gz\u0026quot;çš„æ‰©å±•åã€‚\nå‘½ä»¤æ ¼å¼\n1 gzip [å‚æ•°] [æ–‡ä»¶æˆ–è€…ç›®å½•] å¸¸ç”¨å‚æ•°\n-aæˆ–\u0026ndash;ascii ä½¿ç”¨ASCIIæ–‡å­—æ¨¡å¼ã€‚ -cæˆ–\u0026ndash;stdoutæˆ–\u0026ndash;to-stdout æŠŠå‹ç¼©åçš„æ–‡ä»¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ï¼Œä¸å»æ›´åŠ¨åŸå§‹æ–‡ä»¶ã€‚ -dæˆ–\u0026ndash;decompressæˆ–\u0026mdash;-uncompress è§£å¼€å‹ç¼©æ–‡ä»¶ã€‚ -fæˆ–\u0026ndash;force å¼ºè¡Œå‹ç¼©æ–‡ä»¶ã€‚ä¸ç†ä¼šæ–‡ä»¶åç§°æˆ–ç¡¬è¿æ¥æ˜¯å¦å­˜åœ¨ä»¥åŠè¯¥æ–‡ä»¶æ˜¯å¦ä¸ºç¬¦å·è¿æ¥ã€‚ -hæˆ–\u0026ndash;help åœ¨çº¿å¸®åŠ©ã€‚ ä½¿ç”¨å®ä¾‹\n1.æŠŠ test1 ç›®å½•ä¸‹çš„æ¯ä¸ªæ–‡ä»¶å‹ç¼©æˆ.gz æ–‡ä»¶ã€‚\n1 gzip * å››ã€æ–‡ä»¶æƒé™è®¾ç½® 22.chmod å‘½ä»¤ ç”¨äºæ”¹å˜linuxç³»ç»Ÿæ–‡ä»¶æˆ–ç›®å½•çš„è®¿é—®æƒé™ã€‚\nå‘½ä»¤æ ¼å¼\n1 chmod [-cfvR] [--help] [--version] mode file å¸¸ç”¨å‚æ•°\nå¿…è¦å‚æ•°\n-c å½“å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒæŠ¥å‘Šå¤„ç†ä¿¡æ¯ -f é”™è¯¯ä¿¡æ¯ä¸è¾“å‡º -R å¤„ç†æŒ‡å®šç›®å½•ä»¥åŠå…¶å­ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ -v è¿è¡Œæ—¶æ˜¾ç¤ºè¯¦ç»†å¤„ç†ä¿¡æ¯ é€‰æ‹©å‚æ•°\n\u0026ndash;reference=\u0026lt;ç›®å½•æˆ–è€…æ–‡ä»¶\u0026gt; è®¾ç½®æˆå…·æœ‰æŒ‡å®šç›®å½•æˆ–è€…æ–‡ä»¶å…·æœ‰ç›¸åŒçš„æƒé™ \u0026ndash;version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ \u0026lt;æƒé™èŒƒå›´\u0026gt;+\u0026lt;æƒé™è®¾ç½®\u0026gt; ä½¿æƒé™èŒƒå›´å†…çš„ç›®å½•æˆ–è€…æ–‡ä»¶å…·æœ‰æŒ‡å®šçš„æƒé™ \u0026lt;æƒé™èŒƒå›´\u0026gt;-\u0026lt;æƒé™è®¾ç½®\u0026gt; åˆ é™¤æƒé™èŒƒå›´çš„ç›®å½•æˆ–è€…æ–‡ä»¶çš„æŒ‡å®šæƒé™ \u0026lt;æƒé™èŒƒå›´\u0026gt;=\u0026lt;æƒé™è®¾ç½®\u0026gt; è®¾ç½®æƒé™èŒƒå›´å†…çš„ç›®å½•æˆ–è€…æ–‡ä»¶çš„æƒé™ä¸ºæŒ‡å®šçš„å€¼ æƒé™èŒƒå›´\nu ï¼šç›®å½•æˆ–è€…æ–‡ä»¶çš„å½“å‰çš„ç”¨æˆ· g ï¼šç›®å½•æˆ–è€…æ–‡ä»¶çš„å½“å‰çš„ç¾¤ç»„ o ï¼šé™¤äº†ç›®å½•æˆ–è€…æ–‡ä»¶çš„å½“å‰ç”¨æˆ·æˆ–ç¾¤ç»„ä¹‹å¤–çš„ç”¨æˆ·æˆ–è€…ç¾¤ç»„ a ï¼šæ‰€æœ‰çš„ç”¨æˆ·åŠç¾¤ç»„ æƒé™ä»£å·\nrï¼šè¯»æƒé™ï¼Œç”¨æ•°å­—4è¡¨ç¤º wï¼šå†™æƒé™ï¼Œç”¨æ•°å­—2è¡¨ç¤º xï¼šæ‰§è¡Œæƒé™ï¼Œç”¨æ•°å­—1è¡¨ç¤º -ï¼šåˆ é™¤æƒé™ï¼Œç”¨æ•°å­—0è¡¨ç¤º ä½¿ç”¨å®ä¾‹\n1.å¢åŠ æ–‡ä»¶æ‰€æœ‰ç”¨æˆ·ç»„å¯æ‰§è¡Œæƒé™\n1 chmod a+x test.log åˆ é™¤æ‰€æœ‰ç”¨æˆ·çš„å¯æ‰§è¡Œæƒé™\n1 chmod a-x test.log 23.chgrp å‘½ä»¤ å¯é‡‡ç”¨ç¾¤ç»„åç§°æˆ–ç¾¤ç»„è¯†åˆ«ç çš„æ–¹å¼æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç¾¤ç»„ã€‚\nå‘½ä»¤æ ¼å¼\n1 chgrp [é€‰é¡¹] [ç»„] [æ–‡ä»¶] å¸¸ç”¨å‚æ•°\nå¿…è¦å‚æ•°\n-c å½“å‘ç”Ÿæ”¹å˜æ—¶è¾“å‡ºè°ƒè¯•ä¿¡æ¯ -f ä¸æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ -R å¤„ç†æŒ‡å®šç›®å½•ä»¥åŠå…¶å­ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ -v è¿è¡Œæ—¶æ˜¾ç¤ºè¯¦ç»†çš„å¤„ç†ä¿¡æ¯ \u0026ndash;dereference ä½œç”¨äºç¬¦å·é“¾æ¥çš„æŒ‡å‘ï¼Œè€Œä¸æ˜¯ç¬¦å·é“¾æ¥æœ¬èº« \u0026ndash;no-dereference ä½œç”¨äºç¬¦å·é“¾æ¥æœ¬èº« é€‰æ‹©å‚æ•°\n\u0026ndash;reference=\u0026lt;æ–‡ä»¶æˆ–è€…ç›®å½•\u0026gt; \u0026ndash;help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ \u0026ndash;version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ ä½¿ç”¨å®ä¾‹\n1.æ”¹å˜æ–‡ä»¶çš„ç¾¤ç»„å±æ€§\n1 chgrp -v bin test.log 2.æ”¹å˜æ–‡ä»¶test1.log çš„ç¾¤ç»„å±æ€§ï¼Œä½¿å¾—æ–‡ä»¶test1.logçš„ç¾¤ç»„å±æ€§å’Œå‚è€ƒæ–‡ä»¶test.logçš„ç¾¤ç»„å±æ€§ç›¸åŒ\n1 chgrp --reference=test.log test1.log 24.chown å‘½ä»¤ é€šè¿‡chownæ”¹å˜æ–‡ä»¶çš„æ‹¥æœ‰è€…å’Œç¾¤ç»„ã€‚\nå‘½ä»¤æ ¼å¼\n1 chown [é€‰é¡¹] [æ‰€æœ‰è€…] [:[ç»„]] æ–‡ä»¶ å¸¸ç”¨å‚æ•°\nå¿…è¦å‚æ•°\n-c æ˜¾ç¤ºæ›´æ”¹çš„éƒ¨åˆ†çš„ä¿¡æ¯ -f å¿½ç•¥é”™è¯¯ä¿¡æ¯ -h ä¿®å¤ç¬¦å·é“¾æ¥ -R å¤„ç†æŒ‡å®šç›®å½•ä»¥åŠå…¶å­ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ -v æ˜¾ç¤ºè¯¦ç»†çš„å¤„ç†ä¿¡æ¯ -deference ä½œç”¨äºç¬¦å·é“¾æ¥çš„æŒ‡å‘ï¼Œè€Œä¸æ˜¯é“¾æ¥æ–‡ä»¶æœ¬èº« é€‰æ‹©å‚æ•°\n\u0026ndash;reference=\u0026lt;ç›®å½•æˆ–æ–‡ä»¶\u0026gt; æŠŠæŒ‡å®šçš„ç›®å½•/æ–‡ä»¶ä½œä¸ºå‚è€ƒï¼ŒæŠŠæ“ä½œçš„æ–‡ä»¶/ç›®å½•è®¾ç½®æˆå‚è€ƒæ–‡ä»¶/ç›®å½•ç›¸åŒæ‹¥æœ‰è€…å’Œç¾¤ç»„ \u0026ndash;from=\u0026lt;å½“å‰ç”¨æˆ·ï¼šå½“å‰ç¾¤ç»„\u0026gt; åªæœ‰å½“å‰ç”¨æˆ·å’Œç¾¤ç»„è·ŸæŒ‡å®šçš„ç”¨æˆ·å’Œç¾¤ç»„ç›¸åŒæ—¶æ‰è¿›è¡Œæ”¹å˜ \u0026ndash;help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ \u0026ndash;version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ ä½¿ç”¨å®ä¾‹\n1.æ”¹å˜æ‹¥æœ‰è€…å’Œç¾¤ç»„\n1 chown mail:mail test.log äº”ã€ç£ç›˜å­˜å‚¨ 25.df å‘½ä»¤ æ˜¾ç¤ºæŒ‡å®šç£ç›˜æ–‡ä»¶çš„å¯ç”¨ç©ºé—´ã€‚\nå‘½ä»¤æ ¼å¼ 1 df [é€‰é¡¹] [æ–‡ä»¶] å¸¸ç”¨å‚æ•°\nå¿…è¦å‚æ•°\n-a å…¨éƒ¨æ–‡ä»¶ç³»ç»Ÿåˆ—è¡¨ -h æ–¹ä¾¿é˜…è¯»æ–¹å¼æ˜¾ç¤º -H ç­‰äº\u0026rsquo;-h\u0026rsquo;ï¼Œä½†æ˜¯è®¡ç®—å¼ï¼Œ1K=1000ï¼Œè€Œä¸æ˜¯1K=1024 -i æ˜¾ç¤ºinodeä¿¡æ¯ -k åŒºå—ä¸º1024å­—èŠ‚ -l åªæ˜¾ç¤ºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ -m åŒºå—ä¸º1048576å­—èŠ‚ \u0026ndash;no-sync å¿½ç•¥ sync å‘½ä»¤ -P è¾“å‡ºæ ¼å¼ä¸ºPOSIX \u0026ndash;sync åœ¨å–å¾—ç£ç›˜ä¿¡æ¯å‰ï¼Œå…ˆæ‰§è¡Œsyncå‘½ä»¤ -T æ–‡ä»¶ç³»ç»Ÿç±»å‹ é€‰æ‹©å‚æ•°\n\u0026ndash;block-size=\u0026lt;åŒºå—å¤§å°\u0026gt; æŒ‡å®šåŒºå—å¤§å° -t\u0026lt;æ–‡ä»¶ç³»ç»Ÿç±»å‹\u0026gt; åªæ˜¾ç¤ºé€‰å®šæ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ä¿¡æ¯ -x\u0026lt;æ–‡ä»¶ç³»ç»Ÿç±»å‹\u0026gt; ä¸æ˜¾ç¤ºé€‰å®šæ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ä¿¡æ¯ \u0026ndash;help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ \u0026ndash;version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ ä½¿ç”¨å®ä¾‹\n1.æ˜¾ç¤ºæŒ‡å®šç£ç›˜ä½¿ç”¨æƒ…å†µ\n1 df -t ext3 du å‘½ä»¤ æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶å’Œç›®å½•çš„ç£ç›˜ä½¿ç”¨ç©ºé—´ã€‚\nå‘½ä»¤æ ¼å¼\n1 du [é€‰é¡¹] [æ–‡ä»¶] å¸¸ç”¨å‚æ•°\n-aæˆ–-all æ˜¾ç¤ºç›®å½•ä¸­ä¸ªåˆ«æ–‡ä»¶çš„å¤§å°ã€‚ -bæˆ–-bytes æ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶å¤§å°æ—¶ï¼Œä»¥byteä¸ºå•ä½ã€‚ \u0026ndash; -cæˆ–\u0026ndash;total é™¤äº†æ˜¾ç¤ºä¸ªåˆ«ç›®å½•æˆ–æ–‡ä»¶çš„å¤§å°å¤–ï¼ŒåŒæ—¶ä¹Ÿæ˜¾ç¤ºæ‰€æœ‰ç›®å½•æˆ–æ–‡ä»¶çš„æ€»å’Œã€‚ -kæˆ–\u0026ndash;kilobytes ä»¥KB(1024bytes)ä¸ºå•ä½è¾“å‡ºã€‚ -mæˆ–\u0026ndash;megabytes ä»¥MBä¸ºå•ä½è¾“å‡ºã€‚ -sæˆ–\u0026ndash;summarize ä»…æ˜¾ç¤ºæ€»è®¡ï¼Œåªåˆ—å‡ºæœ€ååŠ æ€»çš„å€¼ã€‚ -hæˆ–\u0026ndash;human-readable ä»¥Kï¼ŒMï¼ŒGä¸ºå•ä½ï¼Œæé«˜ä¿¡æ¯çš„å¯è¯»æ€§ã€‚ -xæˆ–\u0026ndash;one-file-xystem ä»¥ä¸€å¼€å§‹å¤„ç†æ—¶çš„æ–‡ä»¶ç³»ç»Ÿä¸ºå‡†ï¼Œè‹¥é‡ä¸Šå…¶å®ƒä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿç›®å½•åˆ™ç•¥è¿‡ã€‚ -L\u0026lt;ç¬¦å·é“¾æ¥\u0026gt;æˆ–\u0026ndash;dereference\u0026lt;ç¬¦å·é“¾æ¥\u0026gt; æ˜¾ç¤ºé€‰é¡¹ä¸­æ‰€æŒ‡å®šç¬¦å·é“¾æ¥çš„æºæ–‡ä»¶å¤§å°ã€‚ -Sæˆ–\u0026ndash;separate-dirs æ˜¾ç¤ºä¸ªåˆ«ç›®å½•çš„å¤§å°æ—¶ï¼Œå¹¶ä¸å«å…¶å­ç›®å½•çš„å¤§å°ã€‚ -X\u0026lt;æ–‡ä»¶\u0026gt;æˆ–\u0026ndash;exclude-from=\u0026lt;æ–‡ä»¶\u0026gt; åœ¨\u0026lt;æ–‡ä»¶\u0026gt;æŒ‡å®šç›®å½•æˆ–æ–‡ä»¶ã€‚ \u0026ndash;exclude=\u0026lt;ç›®å½•æˆ–æ–‡ä»¶\u0026gt; ç•¥è¿‡æŒ‡å®šçš„ç›®å½•æˆ–æ–‡ä»¶ã€‚ -Dæˆ–\u0026ndash;dereference-args æ˜¾ç¤ºæŒ‡å®šç¬¦å·é“¾æ¥çš„æºæ–‡ä»¶å¤§å°ã€‚ -Hæˆ–\u0026ndash;si ä¸-hå‚æ•°ç›¸åŒï¼Œä½†æ˜¯Kï¼ŒMï¼ŒGæ˜¯ä»¥1000ä¸ºæ¢ç®—å•ä½ã€‚ -læˆ–\u0026ndash;count-links é‡å¤è®¡ç®—ç¡¬ä»¶é“¾æ¥çš„æ–‡ä»¶ã€‚ ä½¿ç”¨å®ä¾‹\n1.æ˜¾ç¤ºæŒ‡å®šç›®å½•æˆ–æ–‡ä»¶æ‰€å ç©ºé—´\n1 2 du test # ç›®å½• du test.log # æ–‡ä»¶ å…­ã€æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–å‘½ä»¤ 27.top å‘½ä»¤ æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿›ç¨‹IDã€å†…å­˜å ç”¨ç‡ã€CPUå ç”¨ç‡ç­‰ã€‚\nå‘½ä»¤æ ¼å¼\n1 top [å‚æ•°] å¸¸è§å‚æ•°\n-b æ‰¹å¤„ç† -c æ˜¾ç¤ºå®Œæ•´çš„æ²»å‘½ä»¤ -I å¿½ç•¥å¤±æ•ˆè¿‡ç¨‹ -s ä¿å¯†æ¨¡å¼ -S ç´¯ç§¯æ¨¡å¼ -i\u0026lt;æ—¶é—´\u0026gt; è®¾ç½®é—´éš”æ—¶é—´ -u\u0026lt;ç”¨æˆ·å\u0026gt; æŒ‡å®šç”¨æˆ·å -p\u0026lt;è¿›ç¨‹å·\u0026gt; æŒ‡å®šè¿›ç¨‹ -n\u0026lt;æ¬¡æ•°\u0026gt; å¾ªç¯æ˜¾ç¤ºçš„æ¬¡æ•° ä½¿ç”¨å®ä¾‹\næ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯\n1 top 28.free å‘½ä»¤ æ˜¾ç¤ºç³»ç»Ÿä½¿ç”¨å’Œç©ºé—²çš„å†…å­˜æƒ…å†µï¼ŒåŒ…æ‹¬ç‰©ç†å†…å­˜ã€äº¤äº’åŒºå†…å­˜(swap)å’Œå†…æ ¸ç¼“å†²åŒºå†…å­˜ã€‚\nå‘½ä»¤æ ¼å¼\n1 free [å‚æ•°] å¸¸è§å‚æ•°\n-b ä»¥Byteä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ -k ä»¥KBä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ -m ä»¥MBä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ -g ä»¥GBä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ -o ä¸æ˜¾ç¤ºç¼“å†²åŒºè°ƒèŠ‚åˆ— -s \u0026lt;é—´éš”ç§’æ•°\u0026gt; æŒç»­è§‚å¯Ÿå†…å­˜ä½¿ç”¨çŠ¶å†µ -t æ˜¾ç¤ºå†…å­˜æ€»å’Œåˆ—ã€‚ -V æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ ä½¿ç”¨å®ä¾‹\n1.æ˜¾ç¤ºå†…å­˜æƒ…å†µã€‚\n1 2 3 free free -g #ä»¥GBä¸ºå•ä½ free -m #ä»¥MBä¸ºå•ä½ 29.vmstat ç”¨æ¥æ˜¾ç¤ºè™šæ‹Ÿå†…å­˜çš„ä¿¡æ¯ã€‚\nå‘½ä»¤æ ¼å¼\n1 2 3 4 5 6 7 vmstat [-a] [-n] [-S unit] [delay [ count]] vmstat [-s] [-n] [-S unit] vmstat [-m] [-n] [delay [ count]] vmstat [-d] [-n] [delay [ count]] vmstat [-p disk partition] [-n] [delay [ count]] vmstat [-f] vmstat [-V] å¸¸è§å‚æ•°\n-aï¼šæ˜¾ç¤ºæ´»è·ƒå’Œéæ´»è·ƒå†…å­˜ -fï¼šæ˜¾ç¤ºä»ç³»ç»Ÿå¯åŠ¨è‡³ä»Šçš„forkæ•°é‡ -mï¼šæ˜¾ç¤ºslabinfo -nï¼šåªåœ¨å¼€å§‹æ—¶æ˜¾ç¤ºä¸€æ¬¡å„å­—æ®µåç§° -sï¼šæ˜¾ç¤ºå†…å­˜ç›¸å…³ç»Ÿè®¡ä¿¡æ¯åŠå¤šç§ç³»ç»Ÿæ´»åŠ¨æ•°é‡ delayï¼šåˆ·æ–°æ—¶é—´é—´éš”ã€‚å¦‚æœä¸æŒ‡å®šï¼Œåªæ˜¾ç¤ºä¸€æ¡ç»“æœ countï¼šåˆ·æ–°æ¬¡æ•°ã€‚å¦‚æœä¸æŒ‡å®šåˆ·æ–°æ¬¡æ•°ï¼Œä½†æŒ‡å®šäº†åˆ·æ–°æ—¶é—´é—´éš”ï¼Œè¿™æ—¶åˆ·æ–°æ¬¡æ•°ä¸ºæ— ç©· -dï¼šæ˜¾ç¤ºç£ç›˜ç›¸å…³ç»Ÿè®¡ä¿¡æ¯ -pï¼šæ˜¾ç¤ºæŒ‡å®šç£ç›˜åˆ†åŒºç»Ÿè®¡ä¿¡æ¯ -Sï¼šä½¿ç”¨æŒ‡å®šå•ä½æ˜¾ç¤ºã€‚å‚æ•°æœ‰ k ã€K ã€m ã€M ï¼Œåˆ†åˆ«ä»£è¡¨1000ã€1024ã€1000000ã€1048576å­—èŠ‚ï¼ˆbyteï¼‰ã€‚é»˜è®¤å•ä½ä¸ºKï¼ˆ1024 bytesï¼‰ ä½¿ç”¨å®ä¾‹\n1.æ˜¾ç¤ºæ´»è·ƒå’Œéæ´»è·ƒå†…å­˜ã€‚\n1 vmstat -a 5 5 # 5ç§’æ—¶é—´å†…è¿›è¡Œ5æ¬¡é‡‡æ · 30.lostat å‘½ä»¤ é€šè¿‡iostatæ–¹ä¾¿æŸ¥çœ‹CPUã€ç½‘å¡ã€ttyè®¾å¤‡ã€ç£ç›˜ã€CD-ROM ç­‰ç­‰è®¾å¤‡çš„æ´»åŠ¨æƒ…å†µ, è´Ÿè½½ä¿¡æ¯ã€‚\nå‘½ä»¤æ ¼å¼\n1 iostat [å‚æ•°] [æ—¶é—´] [æ¬¡æ•°] å¸¸è§å‚æ•°\n-C æ˜¾ç¤ºCPUä½¿ç”¨æƒ…å†µ -d æ˜¾ç¤ºç£ç›˜ä½¿ç”¨æƒ…å†µ -k ä»¥ KB ä¸ºå•ä½æ˜¾ç¤º -m ä»¥ M ä¸ºå•ä½æ˜¾ç¤º -N æ˜¾ç¤ºç£ç›˜é˜µåˆ—(LVM) ä¿¡æ¯ -n æ˜¾ç¤ºNFS ä½¿ç”¨æƒ…å†µ -p[ç£ç›˜] æ˜¾ç¤ºç£ç›˜å’Œåˆ†åŒºçš„æƒ…å†µ -t æ˜¾ç¤ºç»ˆç«¯å’ŒCPUçš„ä¿¡æ¯ -x æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ ä½¿ç”¨å®ä¾‹\n1.å®šæ—¶æ˜¾ç¤ºæ‰€æœ‰ä¿¡æ¯ã€‚\n1 iostat 2 3 #æ¯éš” 2ç§’åˆ·æ–°æ˜¾ç¤ºï¼Œä¸”æ˜¾ç¤º3æ¬¡ 31.lsof å‘½ä»¤ ç”¨äºæŸ¥çœ‹ä½ è¿›ç¨‹å¼€æ‰“çš„æ–‡ä»¶ï¼Œæ‰“å¼€æ–‡ä»¶çš„è¿›ç¨‹ï¼Œè¿›ç¨‹æ‰“å¼€çš„ç«¯å£(TCPã€UDP)ã€‚\nå‘½ä»¤æ ¼å¼\n1 lsof [å‚æ•°] [æ–‡ä»¶] å¸¸è§å‚æ•°\n-a åˆ—å‡ºæ‰“å¼€æ–‡ä»¶å­˜åœ¨çš„è¿›ç¨‹ -c\u0026lt;è¿›ç¨‹å\u0026gt; åˆ—å‡ºæŒ‡å®šè¿›ç¨‹æ‰€æ‰“å¼€çš„æ–‡ä»¶ -g åˆ—å‡ºGIDå·è¿›ç¨‹è¯¦æƒ… -d\u0026lt;æ–‡ä»¶å·\u0026gt; åˆ—å‡ºå ç”¨è¯¥æ–‡ä»¶å·çš„è¿›ç¨‹ +d\u0026lt;ç›®å½•\u0026gt; åˆ—å‡ºç›®å½•ä¸‹è¢«æ‰“å¼€çš„æ–‡ä»¶ +D\u0026lt;ç›®å½•\u0026gt; é€’å½’åˆ—å‡ºç›®å½•ä¸‹è¢«æ‰“å¼€çš„æ–‡ä»¶ -n\u0026lt;ç›®å½•\u0026gt; åˆ—å‡ºä½¿ç”¨NFSçš„æ–‡ä»¶ -i\u0026lt;æ¡ä»¶\u0026gt; åˆ—å‡ºç¬¦åˆæ¡ä»¶çš„è¿›ç¨‹ã€‚ï¼ˆ4ã€6ã€åè®®ã€:ç«¯å£ã€ @ip ï¼‰ -p\u0026lt;è¿›ç¨‹å·\u0026gt; åˆ—å‡ºæŒ‡å®šè¿›ç¨‹å·æ‰€æ‰“å¼€çš„æ–‡ä»¶ -u åˆ—å‡ºUIDå·è¿›ç¨‹è¯¦æƒ… ä½¿ç”¨å®ä¾‹\n1.æŸ¥çœ‹è°æ­£åœ¨ä½¿ç”¨bashæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´æŸ¥æ‰¾æŸä¸ªæ–‡ä»¶ç›¸å…³çš„è¿›ç¨‹ã€‚\n1 lsof /bin/bash ä¸ƒã€ç½‘ç»œå‘½ä»¤ 32.ifconfig å‘½ä»¤ ifconfig å‘½ä»¤ç”¨æ¥æŸ¥çœ‹å’Œé…ç½®ç½‘ç»œè®¾å¤‡ã€‚\nå‘½ä»¤æ ¼å¼\n1 ifconfig [ç½‘ç»œè®¾å¤‡] [å‚æ•°] å¸¸è§å‚æ•°\nup å¯åŠ¨æŒ‡å®šç½‘ç»œè®¾å¤‡/ç½‘å¡ down å…³é—­æŒ‡å®šç½‘ç»œè®¾å¤‡/ç½‘å¡ã€‚ arp è®¾ç½®æŒ‡å®šç½‘å¡æ˜¯å¦æ”¯æŒARPåè®® -promisc è®¾ç½®æ˜¯å¦æ”¯æŒç½‘å¡çš„promiscuousæ¨¡å¼ï¼Œå¦‚æœé€‰æ‹©æ­¤å‚æ•°ï¼Œç½‘å¡å°†æ¥æ”¶ç½‘ç»œä¸­å‘ç»™å®ƒæ‰€æœ‰çš„æ•°æ®åŒ… -allmulti è®¾ç½®æ˜¯å¦æ”¯æŒå¤šæ’­æ¨¡å¼ï¼Œå¦‚æœé€‰æ‹©æ­¤å‚æ•°ï¼Œç½‘å¡å°†æ¥æ”¶ç½‘ç»œä¸­æ‰€æœ‰çš„å¤šæ’­æ•°æ®åŒ… -a æ˜¾ç¤ºå…¨éƒ¨æ¥å£ä¿¡æ¯ -s æ˜¾ç¤ºæ‘˜è¦ä¿¡æ¯ï¼ˆç±»ä¼¼äº netstat -iï¼‰ add ç»™æŒ‡å®šç½‘å¡é…ç½®IPv6åœ°å€ del åˆ é™¤æŒ‡å®šç½‘å¡çš„IPv6åœ°å€ ä½¿ç”¨å®ä¾‹\n1.å¯åŠ¨å…³é—­æŒ‡å®šç½‘å¡\n1 2 ifconfig eth0 up ifconfig eth0 down 2.ç”¨ifconfigä¿®æ”¹MACåœ°å€\n1 ifconfig eth0 hw ether 00:AA:BB:CC:DD:EE 33.route å‘½ä»¤ Routeå‘½ä»¤æ˜¯ç”¨äºæ“ä½œåŸºäºå†…æ ¸ipè·¯ç”±è¡¨ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªé™æ€è·¯ç”±è®©æŒ‡å®šä¸€ä¸ªä¸»æœºæˆ–è€…ä¸€ä¸ªç½‘ç»œé€šè¿‡ä¸€ä¸ªç½‘ç»œæ¥å£ï¼Œå¦‚eth0ã€‚\nå‘½ä»¤æ ¼å¼\n1 route [-f] [-p] [Command [Destination] [mask Netmask] [Gateway] [metric Metric]] [if Interface]] å¸¸è§å‚æ•°\n-c æ˜¾ç¤ºæ›´å¤šä¿¡æ¯ -n ä¸è§£æåå­— -v æ˜¾ç¤ºè¯¦ç»†çš„å¤„ç†ä¿¡æ¯ -F æ˜¾ç¤ºå‘é€ä¿¡æ¯ -C æ˜¾ç¤ºè·¯ç”±ç¼“å­˜ -f æ¸…é™¤æ‰€æœ‰ç½‘å…³å…¥å£çš„è·¯ç”±è¡¨ã€‚ -p ä¸ add å‘½ä»¤ä¸€èµ·ä½¿ç”¨æ—¶ä½¿è·¯ç”±å…·æœ‰æ°¸ä¹…æ€§ã€‚ add:æ·»åŠ ä¸€æ¡æ–°è·¯ç”±ã€‚ del:åˆ é™¤ä¸€æ¡è·¯ç”±ã€‚ -net:ç›®æ ‡åœ°å€æ˜¯ä¸€ä¸ªç½‘ç»œã€‚ -host:ç›®æ ‡åœ°å€æ˜¯ä¸€ä¸ªä¸»æœºã€‚ netmask:å½“æ·»åŠ ä¸€ä¸ªç½‘ç»œè·¯ç”±æ—¶ï¼Œéœ€è¦ä½¿ç”¨ç½‘ç»œæ©ç ã€‚ gw:è·¯ç”±æ•°æ®åŒ…é€šè¿‡ç½‘å…³ã€‚æ³¨æ„ï¼Œä½ æŒ‡å®šçš„ç½‘å…³å¿…é¡»èƒ½å¤Ÿè¾¾åˆ°ã€‚ metricï¼šè®¾ç½®è·¯ç”±è·³æ•°ã€‚ Command æŒ‡å®šæ‚¨æƒ³è¿è¡Œçš„å‘½ä»¤ (Add/Change/Delete/Print)ã€‚ Destination æŒ‡å®šè¯¥è·¯ç”±çš„ç½‘ç»œç›®æ ‡ã€‚ ä½¿ç”¨å®ä¾‹\n1.æ˜¾ç¤ºå½“å‰è·¯ç”±\n1 2 route route -n 2.æ·»åŠ ç½‘å…³/è®¾ç½®ç½‘å…³\n1 route add -net 224.0.0.0 netmask 240.0.0.0 dev eth0 ping å‘½ä»¤ ç¡®å®šç½‘ç»œå’Œå„å¤–éƒ¨ä¸»æœºçš„çŠ¶æ€ï¼›è·Ÿè¸ªå’Œéš”ç¦»ç¡¬ä»¶å’Œè½¯ä»¶é—®é¢˜ï¼›æµ‹è¯•ã€è¯„ä¼°å’Œç®¡ç†ç½‘ç»œã€‚\nå‘½ä»¤æ ¼å¼\n1 ping [å‚æ•°] [ä¸»æœºåæˆ–IPåœ°å€] å¸¸è§å‚æ•°\n-d ä½¿ç”¨Socketçš„SO_DEBUGåŠŸèƒ½ -f æé™æ£€æµ‹ã€‚å¤§é‡ä¸”å¿«é€Ÿåœ°é€ç½‘ç»œå°åŒ…ç»™ä¸€å°æœºå™¨ï¼Œçœ‹å®ƒçš„å›åº” -n åªè¾“å‡ºæ•°å€¼ -q ä¸æ˜¾ç¤ºä»»ä½•ä¼ é€å°åŒ…çš„ä¿¡æ¯ï¼Œåªæ˜¾ç¤ºæœ€åçš„ç»“æœ -r å¿½ç•¥æ™®é€šçš„Routing Tableï¼Œç›´æ¥å°†æ•°æ®åŒ…é€åˆ°è¿œç«¯ä¸»æœºä¸Šã€‚é€šå¸¸æ˜¯æŸ¥çœ‹æœ¬æœºçš„ç½‘ç»œæ¥å£æ˜¯å¦æœ‰é—®é¢˜ -R è®°å½•è·¯ç”±è¿‡ç¨‹ -v è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹ -c æ•°ç›®ï¼šåœ¨å‘é€æŒ‡å®šæ•°ç›®çš„åŒ…ååœæ­¢ -i ç§’æ•°ï¼šè®¾å®šé—´éš”å‡ ç§’é€ä¸€ä¸ªç½‘ç»œå°åŒ…ç»™ä¸€å°æœºå™¨ï¼Œé¢„è®¾å€¼æ˜¯ä¸€ç§’é€ä¸€æ¬¡ -I ç½‘ç»œç•Œé¢ï¼šä½¿ç”¨æŒ‡å®šçš„ç½‘ç»œç•Œé¢é€å‡ºæ•°æ®åŒ… -l å‰ç½®è½½å…¥ï¼šè®¾ç½®åœ¨é€å‡ºè¦æ±‚ä¿¡æ¯ä¹‹å‰ï¼Œå…ˆè¡Œå‘å‡ºçš„æ•°æ®åŒ… -p èŒƒæœ¬æ ·å¼ï¼šè®¾ç½®å¡«æ»¡æ•°æ®åŒ…çš„èŒƒæœ¬æ ·å¼ -s å­—èŠ‚æ•°ï¼šæŒ‡å®šå‘é€çš„æ•°æ®å­—èŠ‚æ•°ï¼Œé¢„è®¾å€¼æ˜¯56ï¼ŒåŠ ä¸Š8å­—èŠ‚çš„ICMPå¤´ï¼Œä¸€å…±æ˜¯64ICMPæ•°æ®å­—èŠ‚ -t å­˜æ´»æ•°å€¼ï¼šè®¾ç½®å­˜æ´»æ•°å€¼TTLçš„å¤§å° ä½¿ç”¨å®ä¾‹\nping ç½‘å…³\n1 ping -b 192.168.120.1 35.traceroute å‘½ä»¤\nè®©ä½ è¿½è¸ªç½‘ç»œæ•°æ®åŒ…çš„è·¯ç”±é€”å¾„ï¼Œé¢„è®¾æ•°æ®åŒ…å¤§å°æ˜¯40Bytesï¼Œç”¨æˆ·å¯å¦è¡Œè®¾ç½®ã€‚\nå‘½ä»¤æ ¼å¼\n1 traceroute [å‚æ•°] [ä¸»æœº] å¸¸è§å‚æ•°\n-d ä½¿ç”¨Socketå±‚çº§çš„æ’é”™åŠŸèƒ½ -f è®¾ç½®ç¬¬ä¸€ä¸ªæ£€æµ‹æ•°æ®åŒ…çš„å­˜æ´»æ•°å€¼TTLçš„å¤§å° -F è®¾ç½®å‹¿ç¦»æ–­ä½ -g è®¾ç½®æ¥æºè·¯ç”±ç½‘å…³ï¼Œæœ€å¤šå¯è®¾ç½®8ä¸ª -i ä½¿ç”¨æŒ‡å®šçš„ç½‘ç»œç•Œé¢é€å‡ºæ•°æ®åŒ… -I ä½¿ç”¨ICMPå›åº”å–ä»£UDPèµ„æ–™ä¿¡æ¯ -m è®¾ç½®æ£€æµ‹æ•°æ®åŒ…çš„æœ€å¤§å­˜æ´»æ•°å€¼TTLçš„å¤§å° -n ç›´æ¥ä½¿ç”¨IPåœ°å€è€Œéä¸»æœºåç§° -p è®¾ç½®UDPä¼ è¾“åè®®çš„é€šä¿¡ç«¯å£ -r å¿½ç•¥æ™®é€šçš„Routing Tableï¼Œç›´æ¥å°†æ•°æ®åŒ…é€åˆ°è¿œç«¯ä¸»æœºä¸Š -s è®¾ç½®æœ¬åœ°ä¸»æœºé€å‡ºæ•°æ®åŒ…çš„IPåœ°å€ -t è®¾ç½®æ£€æµ‹æ•°æ®åŒ…çš„TOSæ•°å€¼ -v è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹ -w è®¾ç½®ç­‰å¾…è¿œç«¯ä¸»æœºå›æŠ¥çš„æ—¶é—´ -x å¼€å¯æˆ–å…³é—­æ•°æ®åŒ…çš„æ­£ç¡®æ€§æ£€éªŒ ä½¿ç”¨å®ä¾‹\n1.traceroute ç”¨æ³•ç®€å•ã€æœ€å¸¸ç”¨çš„ç”¨æ³•\n1 traceroute www.baidu.com è·³æ•°è®¾ç½®\n1 traceroute -m 10 www.baidu.com 36.netstat å‘½ä»¤ ç”¨äºæ˜¾ç¤ºä¸IPã€TCPã€UDPå’ŒICMPåè®®ç›¸å…³çš„ç»Ÿè®¡æ•°æ®ï¼Œä¸€èˆ¬ç”¨äºæ£€éªŒæœ¬æœºå„ç«¯å£çš„ç½‘ç»œè¿æ¥æƒ…å†µã€‚\nå‘½ä»¤æ ¼å¼\n1 netstat [-acCeFghilMnNoprstuvVwx] [-A\u0026lt;ç½‘ç»œç±»å‹\u0026gt;] [--ip] å¸¸è§å‚æ•°\n-aæˆ–-all æ˜¾ç¤ºæ‰€æœ‰è¿çº¿ä¸­çš„Socket -A\u0026lt;ç½‘ç»œç±»å‹\u0026gt;æˆ–-\u0026lt;ç½‘ç»œç±»å‹\u0026gt; åˆ—å‡ºè¯¥ç½‘ç»œç±»å‹è¿çº¿ä¸­çš„ç›¸å…³åœ°å€ -cæˆ–-continuous æŒç»­åˆ—å‡ºç½‘ç»œçŠ¶æ€ -Cæˆ–-cache æ˜¾ç¤ºè·¯ç”±å™¨é…ç½®çš„å¿«å–ä¿¡æ¯ -eæˆ–-extend æ˜¾ç¤ºç½‘ç»œå…¶ä»–ç›¸å…³ä¿¡æ¯ -Fæˆ–-fib æ˜¾ç¤ºFIB -gæˆ–-groups æ˜¾ç¤ºå¤šé‡å¹¿æ’­åŠŸèƒ½ç¾¤ç»„ç»„å‘˜åå• -hæˆ–-help åœ¨çº¿å¸®åŠ© -iæˆ–-interfaces æ˜¾ç¤ºç½‘ç»œç•Œé¢ä¿¡æ¯è¡¨å• -læˆ–-listening æ˜¾ç¤ºç›‘æ§ä¸­çš„æœåŠ¡å™¨çš„Socket -Mæˆ–-masquerade æ˜¾ç¤ºä¼ªè£…çš„ç½‘ç»œè¿çº¿ -næˆ–-numeric ç›´æ¥ä½¿ç”¨IPåœ°å€ï¼Œè€Œä¸é€šè¿‡åŸŸåæœåŠ¡å™¨ -Næˆ–-netlinkæˆ–-symbolic æ˜¾ç¤ºç½‘ç»œç¡¬ä»¶å¤–å›´è®¾å¤‡çš„ç¬¦å·è¿æ¥åç§° -oæˆ–-timers æ˜¾ç¤ºè®¡æ—¶å™¨ -pæˆ–-programs æ˜¾ç¤ºæ­£åœ¨ä½¿ç”¨Socketçš„ç¨‹åºè¯†åˆ«ç å’Œç¨‹åºåç§° -ræˆ–-route æ˜¾ç¤ºRouting Table -sæˆ–-statistice æ˜¾ç¤ºç½‘ç»œå·¥ä½œä¿¡æ¯ç»Ÿè®¡è¡¨ -tæˆ–-tcp æ˜¾ç¤ºTCPä¼ è¾“åè®®çš„è¿çº¿çŠ¶å†µ -uæˆ–-udp æ˜¾ç¤ºUDPä¼ è¾“åè®®çš„è¿çº¿çŠ¶å†µ -væˆ–-verbose æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ -Væˆ–-version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ -wæˆ–-raw æ˜¾ç¤ºRAWä¼ è¾“åè®®çš„è¿çº¿çŠ¶å†µ -xæˆ–-unix æ­¤å‚æ•°çš„æ•ˆæœå’ŒæŒ‡å®š\u0026quot;-A unix\u0026quot;å‚æ•°ç›¸åŒ -ipæˆ–-inet æ­¤å‚æ•°çš„æ•ˆæœå’ŒæŒ‡å®š\u0026quot;-A inet\u0026quot;å‚æ•°ç›¸åŒ ä½¿ç”¨å®ä¾‹\nåˆ—å‡ºæ‰€æœ‰ç«¯å£\n1 netstat -a 37.telnet å‘½ä»¤ æ‰§è¡ŒtelnetæŒ‡ä»¤å¼€å¯ç»ˆç«¯æœºé˜¶æ®µä½œä¸šï¼Œå¹¶ç™»å…¥è¿œç«¯ä¸»æœºã€‚\nå‘½ä»¤æ ¼å¼\n1 telnet [å‚æ•°] [ä¸»æœº] å¸¸è§å‚æ•°\n-8 å…è®¸ä½¿ç”¨8ä½å­—ç¬¦èµ„æ–™ï¼ŒåŒ…æ‹¬è¾“å…¥ä¸è¾“å‡º -a å°è¯•è‡ªåŠ¨ç™»å…¥è¿œç«¯ç³»ç»Ÿ -b\u0026lt;ä¸»æœºåˆ«å\u0026gt; ä½¿ç”¨åˆ«åæŒ‡å®šè¿œç«¯ä¸»æœºåç§° -c ä¸è¯»å–ç”¨æˆ·ä¸“å±ç›®å½•é‡Œçš„.telnetrcæ–‡ä»¶ -d å¯åŠ¨æ’é”™æ¨¡å¼ -e\u0026lt;è„±ç¦»å­—ç¬¦\u0026gt; è®¾ç½®è„±ç¦»å­—ç¬¦ -E æ»¤é™¤è„±ç¦»å­—ç¬¦ -f æ­¤å‚æ•°çš„æ•ˆæœå’ŒæŒ‡å®š\u0026quot;-F\u0026quot;å‚æ•°ç›¸åŒ ä½¿ç”¨å®ä¾‹\n1.è¿œç¨‹æœåŠ¡å™¨æ— æ³•è®¿é—®\n1 telnet 192.168.120.206 å…«ã€å…¶ä»–å‘½ä»¤ 38.ln å‘½ä»¤ ä¸ºæŸä¸€ä¸ªæ–‡ä»¶åœ¨å¦å¤–ä¸€ä¸ªä½ç½®å»ºç«‹ä¸€ä¸ªåŒæ­¥çš„é“¾æ¥.å½“æˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„ç›®å½•ï¼Œç”¨åˆ°ç›¸åŒçš„æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨æ¯ä¸€ä¸ªéœ€è¦çš„ç›®å½•ä¸‹éƒ½æ”¾ä¸€ä¸ªå¿…é¡»ç›¸åŒçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬åªè¦åœ¨æŸä¸ªå›ºå®šçš„ç›®å½•ï¼Œæ”¾ä¸Šè¯¥æ–‡ä»¶ï¼Œç„¶ååœ¨ å…¶å®ƒçš„ç›®å½•ä¸‹ç”¨lnå‘½ä»¤é“¾æ¥ï¼ˆlinkï¼‰å®ƒå°±å¯ä»¥ï¼Œä¸å¿…é‡å¤çš„å ç”¨ç£ç›˜ç©ºé—´ã€‚\nå‘½ä»¤æ ¼å¼\n1 ln [å‚æ•°] [æºæ–‡ä»¶æˆ–ç›®å½•] [ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•] å¸¸ç”¨å‚æ•°\nå¿…è¦å‚æ•°\n-b åˆ é™¤ï¼Œè¦†ç›–ä»¥å‰å»ºç«‹çš„é“¾æ¥ -d å…è®¸è¶…çº§ç”¨æˆ·åˆ¶ä½œç›®å½•çš„ç¡¬é“¾æ¥ -f å¼ºåˆ¶æ‰§è¡Œ -i äº¤äº’æ¨¡å¼ï¼Œæ–‡ä»¶å­˜åœ¨åˆ™æç¤ºç”¨æˆ·æ˜¯å¦è¦†ç›– -n æŠŠç¬¦å·é“¾æ¥è§†ä¸ºä¸€èˆ¬ç›®å½• -s è½¯é“¾æ¥(ç¬¦å·é“¾æ¥) -v æ˜¾ç¤ºè¯¦ç»†çš„å¤„ç†è¿‡ç¨‹ é€‰æ‹©å‚æ•°\n-S -S\u0026lt;å­—å°¾å¤‡ä»½å­—ç¬¦ä¸²\u0026gt; æˆ– --suffix=\u0026lt;å­—å°¾å¤‡ä»½å­—ç¬¦ä¸²\u0026gt; -V -V\u0026lt;å¤‡ä»½æ–¹å¼\u0026gt; æˆ– --version-control=\u0026lt;å¤‡ä»½æ–¹å¼\u0026gt;\nä½¿ç”¨å®ä¾‹\n1.ä¸º test.logæ–‡ä»¶åˆ›å»ºè½¯é“¾æ¥linktest\n1 ln -s test.log linktest 2.ä¸º test.logåˆ›å»ºç¡¬é“¾æ¥lntestã€‚\n1 ln test.log lntest 39.diff å‘½ä»¤ æ¯”è¾ƒå•ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•å†…å®¹ã€‚\nå‘½ä»¤æ ¼å¼\n1 diff [å‚æ•°] [æ–‡ä»¶1æˆ–ç›®å½•1] [æ–‡ä»¶2æˆ–ç›®å½•2] å¸¸ç”¨å‚æ•°\n-c ä¸Šä¸‹æ–‡æ¨¡å¼ï¼Œæ˜¾ç¤ºå…¨éƒ¨å†…æ–‡ï¼Œå¹¶æ ‡å‡ºä¸åŒä¹‹å¤„ -u ç»Ÿä¸€æ¨¡å¼ï¼Œä»¥åˆå¹¶çš„æ–¹å¼æ¥æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„ä¸åŒ -a åªä¼šé€è¡Œæ¯”è¾ƒæ–‡æœ¬æ–‡ä»¶ -N åœ¨æ¯”è¾ƒç›®å½•æ—¶ï¼Œè‹¥æ–‡ä»¶ A ä»…å‡ºç°åœ¨æŸä¸ªç›®å½•ä¸­ï¼Œé¢„è®¾ä¼šæ˜¾ç¤ºï¼šOnly in ç›®å½•ã€‚è‹¥ä½¿ç”¨ -N å‚æ•°ï¼Œåˆ™ diff ä¼šå°†æ–‡ä»¶ A ä¸ä¸€ä¸ªç©ºç™½çš„æ–‡ä»¶æ¯”è¾ƒ -r é€’å½’æ¯”è¾ƒç›®å½•ä¸‹çš„æ–‡ä»¶ ä½¿ç”¨å®ä¾‹\n1.æ˜¾ç¤º test1.txt å’Œ test2.txt ä¸¤ä¸ªæ–‡ä»¶å·®å¼‚ã€‚\n1 diff test1.txt test2.txt 40.grep å‘½ä»¤ ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬æœç´¢å·¥å…·ï¼Œå®ƒèƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢æ–‡æœ¬ï¼Œå¹¶æŠŠåŒ¹ é…çš„è¡Œæ‰“å°å‡ºæ¥ã€‚\nå‘½ä»¤æ ¼å¼\n1 grep [option] pattern file å¸¸ç”¨å‚æ•°\n-c è®¡ç®—æ‰¾åˆ°\u0026rsquo;æœå¯»å­—ç¬¦ä¸²\u0026rsquo;ï¼ˆå³ patternï¼‰çš„æ¬¡æ•° -i å¿½ç•¥å¤§å°å†™çš„ä¸åŒï¼Œæ‰€ä»¥å¤§å°å†™è§†ä¸ºç›¸åŒ -n è¾“å‡ºè¡Œå· -v åå‘é€‰æ‹©ï¼Œæ‰“å°ä¸åŒ¹é…çš„è¡Œ -r é€’å½’æœç´¢ \u0026ndash;color=auto å°†æ‰¾åˆ°çš„å…³é”®è¯éƒ¨åˆ†åŠ ä¸Šé¢œè‰²æ˜¾ç¤º ä½¿ç”¨å®ä¾‹\n1.å°† /etc/passwd æ–‡ä»¶ä¸­å‡ºç° root çš„è¡Œå–å‡ºæ¥ï¼Œå…³é”®è¯éƒ¨åˆ†åŠ ä¸Šé¢œè‰²æ˜¾ç¤ºã€‚\n1 2 grep \u0026#34;root\u0026#34; /etc/passwd --color=auto cat /etc/passwd | grep \u0026#34;root\u0026#34; --color=auto 2.å°† /etc/passwd æ–‡ä»¶ä¸­æ²¡æœ‰å‡ºç° root å’Œ nologin çš„è¡Œå–å‡ºæ¥ã€‚\n1 grep -v \u0026#34;root\u0026#34; /etc/passwd | grep -v \u0026#34;nologin\u0026#34; 41.wc å‘½ä»¤ ç”¨æ¥æ˜¾ç¤ºæ–‡ä»¶æ‰€åŒ…å«çš„è¡Œã€å­—å’Œå­—èŠ‚æ•°ã€‚\nå‘½ä»¤æ ¼å¼\n1 wc [é€‰é¡¹] [æ–‡ä»¶] å¸¸ç”¨å‚æ•°\n-c ç»Ÿè®¡å­—èŠ‚æ•° -l ç»Ÿè®¡è¡Œæ•° -m ç»Ÿè®¡å­—ç¬¦æ•°ï¼Œè¿™ä¸ªæ ‡å¿—ä¸èƒ½ä¸ -c æ ‡å¿—ä¸€èµ·ä½¿ç”¨ -w ç»Ÿè®¡å­—æ•°ï¼Œä¸€ä¸ªå­—è¢«å®šä¹‰ä¸ºç”±ç©ºç™½ã€è·³æ ¼æˆ–æ¢è¡Œå­—ç¬¦åˆ†éš”çš„å­—ç¬¦ä¸² -L æ‰“å°æœ€é•¿è¡Œçš„é•¿åº¦ ä½¿ç”¨å®ä¾‹\n1.ç»Ÿè®¡æ–‡ä»¶çš„å­—èŠ‚æ•°ã€è¡Œæ•°å’Œå­—ç¬¦æ•°ã€‚\n1 2 3 wc -c test.txt wc -l test.txt wc -m test.txt 2.ç»Ÿè®¡æ–‡ä»¶çš„å­—èŠ‚æ•°ã€è¡Œæ•°å’Œå­—ç¬¦æ•°ï¼Œåªæ‰“å°æ•°å­—ï¼Œä¸æ‰“å°æ–‡ä»¶åã€‚\n1 2 3 cat test.txt | wc -c cat test.txt | wc -l cat test.txt | wc -m 42.ps å‘½ä»¤ ç”¨æ¥æ˜¾ç¤ºå½“å‰è¿›ç¨‹çš„çŠ¶æ€ã€‚\nå‘½ä»¤æ ¼å¼\n1 ps[å‚æ•°] å¸¸ç”¨å‚æ•°\na æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ -a æ˜¾ç¤ºåŒä¸€ç»ˆç«¯ä¸‹çš„æ‰€æœ‰ç¨‹åº -A æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ c æ˜¾ç¤ºè¿›ç¨‹çš„çœŸå®åç§° -N åå‘é€‰æ‹© -e ç­‰äº-A e æ˜¾ç¤ºç¯å¢ƒå˜é‡ f æ˜¾ç¤ºç¨‹åºé—´çš„å…³ç³» -H æ˜¾ç¤ºæ ‘çŠ¶ç»“æ„ r æ˜¾ç¤ºå½“å‰ç»ˆç«¯çš„è¿›ç¨‹ T æ˜¾ç¤ºå½“å‰ç»ˆç«¯çš„æ‰€æœ‰ç¨‹åº u æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰è¿›ç¨‹ -au æ˜¾ç¤ºè¾ƒè¯¦ç»†çš„èµ„è®¯ -aux æ˜¾ç¤ºæ‰€æœ‰åŒ…å«å…¶ä»–ä½¿ç”¨è€…çš„è¡Œç¨‹ -C\u0026lt;å‘½ä»¤\u0026gt; åˆ—å‡ºæŒ‡å®šå‘½ä»¤çš„çŠ¶å†µ \u0026ndash;lines\u0026lt;è¡Œæ•°\u0026gt; æ¯é¡µæ˜¾ç¤ºçš„è¡Œæ•° \u0026ndash;width\u0026lt;å­—ç¬¦æ•°\u0026gt; æ¯é¡µæ˜¾ç¤ºçš„å­—ç¬¦æ•° ä½¿ç”¨å®ä¾‹\n1.æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ä¿¡æ¯ã€‚\n1 ps -A æ˜¾ç¤ºæŒ‡å®šç”¨æˆ·ä¿¡æ¯ã€‚\n1 ps -u root æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ä¿¡æ¯ï¼Œè¿åŒå‘½ä»¤è¡Œã€‚\n1 ps -ef 43.watch å‘½ä»¤\nå¯ä»¥å°†å‘½ä»¤çš„è¾“å‡ºç»“æœè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ï¼Œå¤šç”¨äºå‘¨æœŸæ€§æ‰§è¡Œå‘½ä»¤/å®šæ—¶æ‰§è¡Œå‘½ä»¤ã€‚\nå‘½ä»¤æ ¼å¼\n1 watch [å‚æ•°] [å‘½ä»¤] å¸¸ç”¨å‚æ•°\n-næˆ–\u0026ndash;interval watchç¼ºçœæ¯2ç§’è¿è¡Œä¸€ä¸‹ç¨‹åºï¼Œå¯ä»¥ç”¨-næˆ–-intervalæ¥æŒ‡å®šé—´éš”çš„æ—¶é—´ã€‚ -dæˆ–\u0026ndash;differences ç”¨-dæˆ–\u0026ndash;differences é€‰é¡¹watch ä¼šé«˜äº®æ˜¾ç¤ºå˜åŒ–çš„åŒºåŸŸã€‚ è€Œ-d=cumulativeé€‰é¡¹ä¼šæŠŠå˜åŠ¨è¿‡çš„åœ°æ–¹(ä¸ç®¡æœ€è¿‘çš„é‚£æ¬¡æœ‰æ²¡æœ‰å˜åŠ¨)éƒ½é«˜äº®æ˜¾ç¤ºå‡ºæ¥ã€‚ -t æˆ–-no-title ä¼šå…³é—­watchå‘½ä»¤åœ¨é¡¶éƒ¨çš„æ—¶é—´é—´éš”,å‘½ä»¤ï¼Œå½“å‰æ—¶é—´çš„è¾“å‡ºã€‚ -h, \u0026ndash;help æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ ä½¿ç”¨å®ä¾‹\n1.æ¯éš”ä¸€ç§’é«˜äº®æ˜¾ç¤ºç½‘ç»œé“¾æ¥æ•°çš„å˜åŒ–æƒ…å†µ\n1 watch -n 1 -d netstat -ant 2.æ¯éš”ä¸€ç§’é«˜äº®æ˜¾ç¤ºhttpé“¾æ¥æ•°çš„å˜åŒ–æƒ…å†µ\n1 watch -n 1 -d \u0026#39;pstree|grep http\u0026#39; 44.at å‘½ä»¤ åœ¨ä¸€ä¸ªæŒ‡å®šçš„æ—¶é—´æ‰§è¡Œä¸€ä¸ªæŒ‡å®šä»»åŠ¡ï¼Œåªèƒ½æ‰§è¡Œä¸€æ¬¡ã€‚ï¼ˆéœ€å¼€å¯atdè¿›ç¨‹ï¼‰\nå‘½ä»¤æ ¼å¼\n1 at [å‚æ•°] [æ—¶é—´] å¸¸ç”¨å‚æ•°\n-m å½“æŒ‡å®šçš„ä»»åŠ¡è¢«å®Œæˆä¹‹åï¼Œå°†ç»™ç”¨æˆ·å‘é€é‚®ä»¶ï¼Œå³ä½¿æ²¡æœ‰æ ‡å‡†è¾“å‡º -I atqçš„åˆ«å -d atrmçš„åˆ«å -v æ˜¾ç¤ºä»»åŠ¡å°†è¢«æ‰§è¡Œçš„æ—¶é—´ -c æ‰“å°ä»»åŠ¡çš„å†…å®¹åˆ°æ ‡å‡†è¾“å‡º -V æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ -q\u0026lt;åˆ—é˜Ÿ\u0026gt; ä½¿ç”¨æŒ‡å®šçš„åˆ—é˜Ÿ -f\u0026lt;æ–‡ä»¶\u0026gt; ä»æŒ‡å®šæ–‡ä»¶è¯»å…¥ä»»åŠ¡è€Œä¸æ˜¯ä»æ ‡å‡†è¾“å…¥è¯»å…¥ -t\u0026lt;æ—¶é—´å‚æ•°\u0026gt; ä»¥æ—¶é—´å‚æ•°çš„å½¢å¼æäº¤è¦è¿è¡Œçš„ä»»åŠ¡ ä½¿ç”¨å®ä¾‹\n1.3å¤©åçš„ä¸‹åˆ5ç‚¹æ‰§è¡Œ/bin/ls\n1 2 3 at 5pm+3 days at\u0026gt; /bin/ls at\u0026gt; \u0026lt;EOT\u0026gt; 45.crontab å‘½ä»¤ åœ¨å›ºå®šçš„é—´éš”æ—¶é—´æ‰§è¡ŒæŒ‡å®šçš„ç³»ç»ŸæŒ‡ä»¤æˆ– shell scriptè„šæœ¬ã€‚æ—¶é—´é—´éš”çš„å•ä½å¯ä»¥æ˜¯åˆ†é’Ÿã€å°æ—¶ã€æ—¥ã€æœˆã€å‘¨åŠä»¥ä¸Šçš„ä»»æ„ç»„åˆã€‚(éœ€å¼€å¯crondæœåŠ¡)\nå‘½ä»¤æ ¼å¼\n1 2 crontab [-u user] file æˆ– crontab [-u user] [ -e | -l | -r ] å¸¸ç”¨å‚æ•°\n-u userï¼šç”¨æ¥è®¾å®šæŸä¸ªç”¨æˆ·çš„crontabæœåŠ¡ï¼Œä¾‹å¦‚ï¼Œ-u ixdbaè¡¨ç¤ºè®¾å®šixdbaç”¨æˆ·çš„crontabæœåŠ¡ï¼Œæ­¤å‚æ•°ä¸€èˆ¬æœ‰rootç”¨æˆ·æ¥è¿è¡Œã€‚ fileï¼šfileæ˜¯å‘½ä»¤æ–‡ä»¶çš„åå­—,è¡¨ç¤ºå°†fileåšä¸ºcrontabçš„ä»»åŠ¡åˆ—è¡¨æ–‡ä»¶å¹¶è½½å…¥crontabã€‚å¦‚æœåœ¨å‘½ä»¤è¡Œä¸­æ²¡æœ‰æŒ‡å®šè¿™ä¸ªæ–‡ä»¶ï¼Œcrontabå‘½ä»¤å°†æ¥å—æ ‡å‡†è¾“å…¥ï¼ˆé”®ç›˜ï¼‰ä¸Šé”®å…¥çš„å‘½ä»¤ï¼Œå¹¶å°†å®ƒä»¬è½½å…¥crontabã€‚ -eï¼šç¼–è¾‘æŸä¸ªç”¨æˆ·çš„crontabæ–‡ä»¶å†…å®¹ã€‚å¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œåˆ™è¡¨ç¤ºç¼–è¾‘å½“å‰ç”¨æˆ·çš„crontabæ–‡ä»¶ã€‚ -lï¼šæ˜¾ç¤ºæŸä¸ªç”¨æˆ·çš„crontabæ–‡ä»¶å†…å®¹ï¼Œå¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œåˆ™è¡¨ç¤ºæ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„crontabæ–‡ä»¶å†…å®¹ã€‚ -rï¼šä»/var/spool/cronç›®å½•ä¸­åˆ é™¤æŸä¸ªç”¨æˆ·çš„crontabæ–‡ä»¶ï¼Œå¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œåˆ™é»˜è®¤åˆ é™¤å½“å‰ç”¨æˆ·çš„crontabæ–‡ä»¶ã€‚ -iï¼šåœ¨åˆ é™¤ç”¨æˆ·çš„crontabæ–‡ä»¶æ—¶ç»™ç¡®è®¤æç¤ºã€‚ ä½¿ç”¨å®ä¾‹\n1.åˆ—å‡º crontab æ–‡ä»¶ã€‚\n1 crontab -l 2.ç¼–è¾‘crontab æ–‡ä»¶ã€‚\n1 crontab -e Crontab ä»»åŠ¡å®ä¾‹\n1.æ¯1åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡command\n1 * * * * * command 2.æ¯å°æ—¶çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ\n1 3,15 * * * * command 3.åœ¨ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ\n1 3,15 8-11 * * * command ","permalink":"https://WFUing.github.io/posts/tech/os/linux-instructions/","summary":"Linux çš„å‘½ä»¤ç¡®å®éå¸¸å¤šï¼Œç„¶è€Œç†Ÿæ‚‰ Linux çš„äººä»æ¥ä¸ä¼šå› ä¸º Linux çš„å‘½ä»¤å¤ªå¤šè€Œçƒ¦æ¼ã€‚å› ä¸ºæˆ‘ä»¬ä»…ä»…åªéœ€è¦æŒæ¡å¸¸ç”¨å‘½ä»¤ï¼Œå°±å®Œå…¨å¯ä»¥é©¾é©­ Linuxã€‚\næ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹éƒ½æœ‰é‚£äº›å¸¸ç”¨çš„ Linux å‘½ä»¤å§ï¼\nä¸€ã€æ–‡ä»¶ç›®å½•æ“ä½œ 1.ls å‘½ä»¤ ls å‘½ä»¤ä¸ä»…å¯ä»¥æŸ¥çœ‹ linux æ–‡ä»¶å¤¹åŒ…å«çš„æ–‡ä»¶è€Œä¸”å¯ä»¥æŸ¥çœ‹æ–‡ä»¶æƒé™ï¼ˆåŒ…æ‹¬ç›®å½•ã€æ–‡ä»¶å¤¹ã€æ–‡ä»¶æƒé™ï¼‰æŸ¥çœ‹ç›®å½•ä¿¡æ¯ç­‰ç­‰ã€‚\nå‘½ä»¤æ ¼å¼\n1 ls [é€‰é¡¹][ç›®å½•å] å¸¸ç”¨å‚æ•°\n-l ï¼šåˆ—å‡ºé•¿æ•°æ®ä¸²ï¼ŒåŒ…å«æ–‡ä»¶çš„å±æ€§ä¸æƒé™æ•°æ®ç­‰ -a ï¼šåˆ—å‡ºå…¨éƒ¨çš„æ–‡ä»¶ï¼Œè¿åŒéšè—æ–‡ä»¶ï¼ˆå¼€å¤´ä¸º.çš„æ–‡ä»¶ï¼‰ä¸€èµ·åˆ—å‡ºæ¥ï¼ˆå¸¸ç”¨ï¼‰ -d ï¼šä»…åˆ—å‡ºç›®å½•æœ¬èº«ï¼Œè€Œä¸æ˜¯åˆ—å‡ºç›®å½•çš„æ–‡ä»¶æ•°æ® -h ï¼šå°†æ–‡ä»¶å®¹é‡ä»¥è¾ƒæ˜“è¯»çš„æ–¹å¼ï¼ˆGBï¼ŒkBç­‰ï¼‰åˆ—å‡ºæ¥ -R ï¼šè¿åŒå­ç›®å½•çš„å†…å®¹ä¸€èµ·åˆ—å‡ºï¼ˆé€’å½’åˆ—å‡ºï¼‰ï¼Œç­‰äºè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šæ˜¾ç¤ºå‡ºæ¥ ä½¿ç”¨å®ä¾‹\n1.åˆ—å‡º home ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•çš„è¯¦ç»†èµ„æ–™ã€‚\n1 2 ls -a -l /home ls -al /home 2.åˆ—å‡ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰ä»¥\u0026quot;d\u0026quot;å¼€å¤´çš„æ–‡ä»¶ç›®å½•è¯¦æƒ…å†…å®¹ã€‚\n1 ls -l d* 2.cdå‘½ä»¤ æœ€åŸºæœ¬çš„å‘½ä»¤è¯­å¥ï¼Œå…¶ä»–çš„å‘½ä»¤è¯­å¥è¦è¿›è¡Œæ“ä½œï¼Œéƒ½æ˜¯å»ºç«‹åœ¨ä½¿ç”¨ cd å‘½ä»¤ä¸Šçš„ã€‚ç”¨äºåˆ‡æ¢å½“å‰ç›®å½•è‡³dirNameã€‚\nå‘½ä»¤æ ¼å¼\n1 cd [ç›®å½•å] æ“ä½œæ¡ˆä¾‹\n1.ä»å½“å‰ç›®å½•è¿›å…¥ç³»ç»Ÿæ ¹ç›®å½•ã€‚\n1 cd / 2.è·³è½¬åˆ° home/Code ç›®å½•ã€‚\n1 cd /home/Code 3.pwd å‘½ä»¤ æŸ¥çœ‹\u0026quot;å½“å‰å·¥ä½œç›®å½•\u0026quot;çš„å®Œæ•´è·¯å¾„ã€‚","title":"45 ä¸ªå¸¸ç”¨Linux å‘½ä»¤ï¼Œè®©ä½ è½»æ¾ç©è½¬Linuxï¼"},{"content":"Six strategies for getting better results Write clear instructions GPT æ— æ³•è¯»æ‡‚ä½ çš„å¿ƒæ€ã€‚å¦‚æœäº§å‡ºå¤ªé•¿ï¼Œè¯·è¦æ±‚ç®€çŸ­å›å¤ã€‚å¦‚æœç»“æœå¤ªç®€å•ï¼Œè¦æ±‚ä¸“å®¶çº§çš„å†™ä½œã€‚å¦‚æœæ‚¨ä¸å–œæ¬¢æ ¼å¼ï¼Œè¯·æ¼”ç¤ºæ‚¨å¸Œæœ›çœ‹åˆ°çš„æ ¼å¼ã€‚GPT è¶Šå°‘éœ€è¦çŒœæµ‹ä½ æƒ³è¦ä»€ä¹ˆï¼Œä½ å°±è¶Šæœ‰å¯èƒ½å¾—åˆ°å®ƒã€‚\nåœ¨æ‚¨çš„è¯¢é—®ä¸­åŒ…å«è¯¦ç»†ä¿¡æ¯ï¼Œä»¥è·å¾—æ›´å¤šç›¸å…³ç­”æ¡ˆï¼šä¸ºäº†å¾—åˆ°é«˜åº¦ç›¸å…³çš„å›å¤ï¼Œè¯·ç¡®ä¿è¯·æ±‚æä¾›äº†ä»»ä½•é‡è¦çš„ç»†èŠ‚æˆ–ä¸Šä¸‹æ–‡ã€‚å¦åˆ™ï¼Œæ‚¨å°±åªèƒ½è®©æ¨¡å‹æ¥çŒœæµ‹æ‚¨çš„æ„æ€äº†ã€‚ è¦æ±‚æ¨¡ç‰¹é‡‡ç”¨ä¸€ä¸ªè§’è‰²ï¼šç³»ç»Ÿä¿¡æ¯å¯ç”¨äºæŒ‡å®šæ¨¡å‹åœ¨å›å¤ä¸­ä½¿ç”¨çš„è§’è‰²ã€‚ ä½¿ç”¨åˆ†éš”ç¬¦æ¸…æ¥šæ ‡æ˜è¾“å…¥å†…å®¹çš„ä¸åŒéƒ¨åˆ†ï¼šä¸‰å¼•å·ã€XML æ ‡è®°ã€ç« èŠ‚æ ‡é¢˜ç­‰åˆ†éš”ç¬¦å¯ä»¥å¸®åŠ©åˆ’åˆ†éœ€è¦åŒºåˆ«å¯¹å¾…çš„æ–‡æœ¬éƒ¨åˆ†ã€‚ æŒ‡å®šå®Œæˆä»»åŠ¡æ‰€éœ€çš„æ­¥éª¤ï¼šæœ‰äº›ä»»åŠ¡æœ€å¥½ä»¥ä¸€è¿ä¸²çš„æ­¥éª¤æ¥æŒ‡å®šã€‚æ˜ç¡®å†™å‡ºè¿™äº›æ­¥éª¤å¯ä»¥è®©æ¨¡å‹æ›´å®¹æ˜“åœ°éµå¾ªå®ƒä»¬ã€‚ ä¸¾ä¾‹è¯´æ˜ï¼šæä¾›é€‚ç”¨äºæ‰€æœ‰ç¤ºä¾‹çš„ä¸€èˆ¬è¯´æ˜é€šå¸¸æ¯”é€šè¿‡ç¤ºä¾‹æ¼”ç¤ºä»»åŠ¡çš„æ‰€æœ‰æ’åˆ—ç»„åˆæ›´æœ‰æ•ˆï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæä¾›ç¤ºä¾‹å¯èƒ½æ›´å®¹æ˜“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ‰“ç®—è®©æ¨¡å‹å¤åˆ¶ä¸€ç§éš¾ä»¥æ˜ç¡®æè¿°çš„å›åº”ç”¨æˆ·è¯¢é—®çš„ç‰¹å®šé£æ ¼ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ \u0026ldquo;å°‘é‡ \u0026ldquo;æç¤ºã€‚è¿™å°±æ˜¯æ‰€è°“çš„ \u0026ldquo;å°‘é‡ \u0026ldquo;æç¤ºã€‚ æŒ‡å®šæ‰€éœ€çš„è¾“å‡ºé•¿åº¦ï¼šæ‚¨å¯ä»¥è¦æ±‚æ¨¡å‹ç”Ÿæˆå…·æœ‰ç»™å®šç›®æ ‡é•¿åº¦çš„è¾“å‡ºã€‚å¯ä»¥ç”¨å­—æ•°ã€å¥æ•°ã€æ®µè½æ•°ã€è¦ç‚¹æ•°ç­‰æ¥æŒ‡å®šç›®æ ‡è¾“å‡ºé•¿åº¦ã€‚ä½†è¯·æ³¨æ„ï¼ŒæŒ‡ç¤ºæ¨¡å‹ç”Ÿæˆç‰¹å®šå­—æ•°çš„ç²¾ç¡®åº¦å¹¶ä¸é«˜ã€‚æ¨¡å‹å¯ä»¥æ›´å¯é åœ°ç”Ÿæˆå…·æœ‰ç‰¹å®šæ®µè½æ•°æˆ–è¦ç‚¹æ•°çš„è¾“å‡ºç»“æœã€‚ Provide reference text GPT å¯ä»¥è‡ªä¿¡åœ°ç¼–é€ è™šå‡ç­”æ¡ˆï¼Œå°¤å…¶æ˜¯åœ¨è¢«é—®åŠæ·±å¥¥çš„è¯é¢˜æˆ–å¼•ç”¨å’Œ URL æ—¶ã€‚å°±åƒä¸€å¼ ç¬”è®°èƒ½å¸®åŠ©å­¦ç”Ÿåœ¨è€ƒè¯•ä¸­å–å¾—æ›´å¥½çš„æˆç»©ä¸€æ ·ï¼Œä¸º GPT æä¾›å‚è€ƒæ–‡æœ¬ä¹Ÿèƒ½å¸®åŠ©ä»–ä»¬åœ¨ä½œç­”æ—¶å‡å°‘æ— ä¸­ç”Ÿæœ‰çš„æƒ…å†µã€‚\næŒ‡å¯¼æ¨¡å‹ä½¿ç”¨å‚è€ƒæ–‡æœ¬ä½œç­”ï¼šå¦‚æœæˆ‘ä»¬èƒ½ä¸ºæ¨¡å‹æä¾›ä¸å½“å‰æŸ¥è¯¢ç›¸å…³çš„å¯ä¿¡ä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŒ‡ç¤ºæ¨¡å‹ä½¿ç”¨æ‰€æä¾›çš„ä¿¡æ¯æ¥æ’°å†™ç­”æ¡ˆã€‚ æŒ‡å¯¼èŒƒä¾‹å¼•ç”¨å‚è€ƒæ–‡çŒ®å›ç­”é—®é¢˜ï¼šå¦‚æœè¾“å…¥å†…å®¹ä¸­å·²ç»è¡¥å……äº†ç›¸å…³çŸ¥è¯†ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥è¦æ±‚æ¨¡å‹é€šè¿‡å¼•ç”¨æ‰€æä¾›æ–‡æ¡£ä¸­çš„æ®µè½æ¥ä¸ºå…¶ç­”æ¡ˆæ·»åŠ å¼•æ–‡ã€‚è¯·æ³¨æ„ï¼Œè¾“å‡ºä¸­çš„å¼•ç”¨å¯ä»¥é€šè¿‡æ‰€æä¾›æ–‡æ¡£ä¸­çš„å­—ç¬¦ä¸²åŒ¹é…è¿›è¡Œç¼–ç¨‹éªŒè¯ã€‚ Split complex tasks into simpler subtasks åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œå°†ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿåˆ†è§£æˆä¸€ç³»åˆ—æ¨¡å—åŒ–ç»„ä»¶æ˜¯ä¸€ç§å¾ˆå¥½çš„åšæ³•ï¼Œæäº¤ç»™ GPT çš„ä»»åŠ¡ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å¤æ‚ä»»åŠ¡çš„é”™è¯¯ç‡å¾€å¾€é«˜äºç®€å•ä»»åŠ¡ã€‚æ­¤å¤–ï¼Œå¤æ‚ä»»åŠ¡é€šå¸¸å¯ä»¥é‡æ–°å®šä¹‰ä¸ºè¾ƒç®€å•ä»»åŠ¡çš„å·¥ä½œæµç¨‹ï¼Œå…¶ä¸­å‰æœŸä»»åŠ¡çš„è¾“å‡ºè¢«ç”¨äºæ„å»ºåæœŸä»»åŠ¡çš„è¾“å…¥ã€‚\nä½¿ç”¨æ„å›¾åˆ†ç±»æ¥ç¡®å®šä¸ç”¨æˆ·æŸ¥è¯¢æœ€ç›¸å…³çš„æŒ‡ä»¤ï¼šå¯¹äºéœ€è¦å¤§é‡ç‹¬ç«‹æŒ‡ä»¤é›†æ¥å¤„ç†ä¸åŒæƒ…å†µçš„ä»»åŠ¡ï¼Œé¦–å…ˆå¯¹æŸ¥è¯¢ç±»å‹è¿›è¡Œåˆ†ç±»ï¼Œå¹¶åˆ©ç”¨è¯¥åˆ†ç±»æ¥ç¡®å®šéœ€è¦å“ªäº›æŒ‡ä»¤ï¼Œå¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚è¿™å¯ä»¥é€šè¿‡å®šä¹‰å›ºå®šç±»åˆ«å’Œç¡¬ç¼–ç ä¸å¤„ç†ç‰¹å®šç±»åˆ«ä»»åŠ¡ç›¸å…³çš„æŒ‡ä»¤æ¥å®ç°ã€‚è¿™ä¸€è¿‡ç¨‹ä¹Ÿå¯ä»¥é€’å½’åº”ç”¨ï¼Œå°†ä»»åŠ¡åˆ†è§£ä¸ºä¸€ç³»åˆ—é˜¶æ®µã€‚è¿™ç§æ–¹æ³•çš„ä¼˜åŠ¿åœ¨äºï¼Œæ¯æ¬¡æŸ¥è¯¢åªåŒ…å«æ‰§è¡Œä»»åŠ¡ä¸‹ä¸€é˜¶æ®µæ‰€éœ€çš„æŒ‡ä»¤ï¼Œä¸ä½¿ç”¨å•æ¬¡æŸ¥è¯¢æ‰§è¡Œæ•´ä¸ªä»»åŠ¡ç›¸æ¯”ï¼Œé”™è¯¯ç‡æ›´ä½ã€‚è¿™è¿˜å¯ä»¥é™ä½æˆæœ¬ï¼Œå› ä¸ºè¿è¡Œè¾ƒå¤§çš„æç¤ºéœ€è¦èŠ±è´¹æ›´å¤šçš„æˆæœ¬ã€‚ å¯¹äºéœ€è¦å†—é•¿å¯¹è¯çš„å¯¹è¯åº”ç”¨ç¨‹åºï¼Œæ€»ç»“æˆ–è¿‡æ»¤ä¹‹å‰çš„å¯¹è¯ï¼šç”±äº GPT çš„ä¸Šä¸‹æ–‡é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œå› æ­¤ç”¨æˆ·å’ŒåŠ©æ‰‹ä¹‹é—´çš„å¯¹è¯ï¼ˆæ•´ä¸ªå¯¹è¯éƒ½åŒ…å«åœ¨ä¸Šä¸‹æ–‡çª—å£ä¸­ï¼‰ä¸å¯èƒ½æ— é™æœŸåœ°è¿›è¡Œä¸‹å»ã€‚è§£å†³è¿™ä¸ªé—®é¢˜æœ‰å¤šç§å˜é€šæ–¹æ³•ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯æ€»ç»“å¯¹è¯ä¸­çš„å‰å‡ è½®å¯¹è¯ã€‚ä¸€æ—¦è¾“å…¥çš„å¤§å°è¾¾åˆ°é¢„å®šçš„é˜ˆå€¼é•¿åº¦ï¼Œå°±ä¼šè§¦å‘ä¸€ä¸ªå¯¹éƒ¨åˆ†å¯¹è¯è¿›è¡Œæ€»ç»“çš„æŸ¥è¯¢ï¼Œè€Œä¹‹å‰å¯¹è¯çš„æ€»ç»“å¯ä»¥ä½œä¸ºç³»ç»Ÿæ¶ˆæ¯çš„ä¸€éƒ¨åˆ†ã€‚æˆ–è€…ï¼Œä¹Ÿå¯ä»¥åœ¨æ•´ä¸ªå¯¹è¯è¿‡ç¨‹ä¸­åœ¨åå°å¼‚æ­¥æ€»ç»“ä¹‹å‰çš„å¯¹è¯ã€‚ å¯¹é•¿æ–‡æ¡£è¿›è¡Œåˆ†å—æ‘˜è¦ï¼Œå¹¶é€’å½’æ„å»ºå®Œæ•´æ‘˜è¦ï¼šç”±äº GPT æœ‰å›ºå®šçš„ä¸Šä¸‹æ–‡é•¿åº¦ï¼Œå› æ­¤åœ¨å•æ¬¡æŸ¥è¯¢ä¸­ï¼ŒGPT æ— æ³•ç”¨äºæ‘˜è¦é•¿åº¦è¶…è¿‡ä¸Šä¸‹æ–‡é•¿åº¦å‡å»ç”Ÿæˆæ‘˜è¦é•¿åº¦çš„æ–‡æœ¬ã€‚ Give GPTs time to \u0026ldquo;think\u0026rdquo; å¦‚æœè¦æ±‚ä½ ç”¨ 17 ä¹˜ä»¥ 28ï¼Œä½ å¯èƒ½ä¸ä¼šé©¬ä¸ŠçŸ¥é“ï¼Œä½†èŠ±ç‚¹æ—¶é—´è¿˜æ˜¯èƒ½ç®—å‡ºæ¥çš„ã€‚åŒæ ·ï¼ŒGPT å­¦ç”Ÿåœ¨è¯•å›¾ç«‹å³å›ç­”è€Œä¸æ˜¯èŠ±æ—¶é—´æ¨ç†å‡ºç­”æ¡ˆæ—¶ï¼Œä¼šçŠ¯æ›´å¤šçš„æ¨ç†é”™è¯¯ã€‚åœ¨å›ç­”é—®é¢˜ä¹‹å‰ï¼Œè¦æ±‚å­¦ç”Ÿè¿›è¡Œä¸€è¿ä¸²çš„æ¨ç†ï¼Œå¯ä»¥å¸®åŠ© GPT å­¦ç”Ÿæ›´å¯é åœ°æ¨ç†å‡ºæ­£ç¡®ç­”æ¡ˆã€‚\nåœ¨åŒ†å¿™å¾—å‡ºç»“è®ºä¹‹å‰ï¼ŒæŒ‡ç¤ºæ¨¡å‹è‡ªå·±æ‰¾å‡ºè§£å†³æ–¹æ¡ˆï¼šå¦‚æœæˆ‘ä»¬æ˜ç¡®æŒ‡ç¤ºæ¨¡å‹åœ¨å¾—å‡ºç»“è®ºä¹‹å‰å…ˆä»ç¬¬ä¸€æ€§åŸç†è¿›è¡Œæ¨ç†ï¼Œä¼šå¾—åˆ°æ›´å¥½çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦ä¸€ä¸ªæ¨¡å‹æ¥è¯„ä¼°å­¦ç”Ÿå¯¹æ•°å­¦é—®é¢˜çš„è§£ç­”ã€‚æœ€æ˜æ˜¾çš„æ–¹æ³•æ˜¯ç®€å•åœ°é—®æ¨¡å‹å­¦ç”Ÿçš„è§£æ³•æ˜¯å¦æ­£ç¡®ã€‚ ä½¿ç”¨å†…å¿ƒç‹¬ç™½æˆ–ä¸€ç³»åˆ—æŸ¥è¯¢æ¥éšè—æ¨¡å‹çš„æ¨ç†è¿‡ç¨‹ï¼šå‰é¢çš„ç­–ç•¥è¡¨æ˜ï¼Œåœ¨å›ç­”å…·ä½“é—®é¢˜ä¹‹å‰ï¼Œæ¨¡å‹æœ‰æ—¶å¿…é¡»å¯¹é—®é¢˜è¿›è¡Œè¯¦ç»†æ¨ç†ã€‚å¯¹äºæŸäº›åº”ç”¨ï¼Œæ¨¡å‹å¾—å‡ºæœ€ç»ˆç­”æ¡ˆçš„æ¨ç†è¿‡ç¨‹ä¸å®œä¸ç”¨æˆ·å…±äº«ã€‚ä¾‹å¦‚ï¼Œåœ¨è¾…å¯¼åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›é¼“åŠ±å­¦ç”Ÿè‡ªå·±æ‰¾å‡ºç­”æ¡ˆï¼Œä½†æ¨¡å‹å¯¹å­¦ç”Ÿè§£å†³æ–¹æ¡ˆçš„æ¨ç†è¿‡ç¨‹å¯èƒ½ä¼šå‘å­¦ç”Ÿé€éœ²ç­”æ¡ˆã€‚å†…å¿ƒç‹¬ç™½æ˜¯ä¸€ç§å¯ä»¥ç”¨æ¥ç¼“è§£è¿™ç§æƒ…å†µçš„ç­–ç•¥ã€‚å†…å¿ƒç‹¬ç™½çš„åŸç†æ˜¯æŒ‡ç¤ºæ¨¡å‹å°†è¾“å‡ºç»“æœä¸­ä¸å¯¹ç”¨æˆ·å…¬å¼€çš„éƒ¨åˆ†è½¬åŒ–ä¸ºç»“æ„åŒ–æ ¼å¼ï¼Œä»¥ä¾¿äºè§£æã€‚ç„¶åï¼Œåœ¨å‘ç”¨æˆ·å±•ç¤ºè¾“å‡ºç»“æœä¹‹å‰ï¼Œå…ˆå¯¹è¾“å‡ºç»“æœè¿›è¡Œè§£æï¼Œåªè®©éƒ¨åˆ†è¾“å‡ºç»“æœå¯è§ã€‚ Use external tools å‘ GPT æä¾›å…¶ä»–å·¥å…·çš„è¾“å‡ºç»“æœï¼Œå¼¥è¡¥ GPT çš„ä¸è¶³ã€‚ä¾‹å¦‚ï¼Œæ–‡æœ¬æ£€ç´¢ç³»ç»Ÿå¯ä»¥å‘Šè¯‰ GPT ç›¸å…³æ–‡æ¡£çš„ä¿¡æ¯ã€‚ä»£ç æ‰§è¡Œå¼•æ“å¯ä»¥å¸®åŠ© GPT è¿›è¡Œæ•°å­¦è¿ç®—å’Œè¿è¡Œä»£ç ã€‚å¦‚æœæŸé¡¹ä»»åŠ¡å¯ä»¥é€šè¿‡å·¥å…·è€Œä¸æ˜¯ GPT æ›´å¯é æˆ–æ›´é«˜æ•ˆåœ°å®Œæˆï¼Œé‚£ä¹ˆå°±å°†å…¶å¸è½½ï¼Œä»¥è·å¾—ä¸¤è€…çš„æœ€ä½³æ•ˆæœã€‚\nåˆ©ç”¨åµŒå…¥å¼æœç´¢å®ç°é«˜æ•ˆçŸ¥è¯†æ£€ç´¢ï¼šå¦‚æœå°†å¤–éƒ¨ä¿¡æ¯æºä½œä¸ºè¾“å…¥çš„ä¸€éƒ¨åˆ†ï¼Œæ¨¡å‹å¯ä»¥åˆ©ç”¨å¤–éƒ¨ä¿¡æ¯æºã€‚è¿™å¯ä»¥å¸®åŠ©æ¨¡å‹ç”Ÿæˆæ›´å¤šä¿¡æ¯å’Œæœ€æ–°å›å¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·è¯¢é—®æœ‰å…³ç‰¹å®šç”µå½±çš„é—®é¢˜ï¼Œé‚£ä¹ˆåœ¨æ¨¡å‹è¾“å…¥ä¸­æ·»åŠ æœ‰å…³ç”µå½±çš„é«˜è´¨é‡ä¿¡æ¯ï¼ˆå¦‚æ¼”å‘˜ã€å¯¼æ¼”ç­‰\u0026hellip;\u0026hellip;ï¼‰å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚åµŒå…¥å¯ç”¨äºå®ç°é«˜æ•ˆçš„çŸ¥è¯†æ£€ç´¢ï¼Œä»¥ä¾¿åœ¨è¿è¡Œæ—¶å°†ç›¸å…³ä¿¡æ¯åŠ¨æ€æ·»åŠ åˆ°æ¨¡å‹è¾“å…¥ä¸­ã€‚æ–‡æœ¬åµŒå…¥æ˜¯ä¸€ä¸ªå¯ä»¥è¡¡é‡æ–‡æœ¬å­—ç¬¦ä¸²ä¹‹é—´ç›¸å…³æ€§çš„å‘é‡ã€‚ç›¸ä¼¼æˆ–ç›¸å…³çš„å­—ç¬¦ä¸²ä¼šæ¯”ä¸ç›¸å…³çš„å­—ç¬¦ä¸²é å¾—æ›´è¿‘ã€‚è¿™ä¸€äº‹å®ä»¥åŠå¿«é€Ÿå‘é‡æœç´¢ç®—æ³•çš„å­˜åœ¨ï¼Œæ„å‘³ç€åµŒå…¥å¯ä»¥ç”¨æ¥å®ç°é«˜æ•ˆçš„çŸ¥è¯†æ£€ç´¢ã€‚ç‰¹åˆ«æ˜¯ï¼Œæ–‡æœ¬è¯­æ–™åº“å¯ä»¥åˆ†å‰²æˆè‹¥å¹²å—ï¼Œæ¯ä¸ªå—éƒ½å¯ä»¥åµŒå…¥å’Œå­˜å‚¨ã€‚ç„¶åï¼Œå¯ä»¥åµŒå…¥ç»™å®šçš„æŸ¥è¯¢ï¼Œå¹¶æ‰§è¡ŒçŸ¢é‡æœç´¢ï¼Œä»è¯­æ–™åº“ä¸­æ‰¾åˆ°ä¸æŸ¥è¯¢æœ€ç›¸å…³çš„åµŒå…¥æ–‡æœ¬å—ï¼ˆå³åœ¨åµŒå…¥ç©ºé—´ä¸­æœ€æ¥è¿‘çš„æ–‡æœ¬å—ï¼‰ã€‚ ä½¿ç”¨ä»£ç æ‰§è¡Œæ¥æ‰§è¡Œæ›´ç²¾ç¡®çš„è®¡ç®—æˆ–è°ƒç”¨å¤–éƒ¨åº”ç”¨ç¨‹åºæ¥å£ï¼šä¸èƒ½ä¾é  GPT è‡ªè¡Œå‡†ç¡®æ‰§è¡Œç®—æœ¯è¿ç®—æˆ–é•¿æ—¶é—´è®¡ç®—ã€‚åœ¨éœ€è¦çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æŒ‡ç¤ºæ¨¡å‹ç¼–å†™å’Œè¿è¡Œä»£ç ï¼Œè€Œä¸æ˜¯è‡ªå·±è¿›è¡Œè®¡ç®—ã€‚ç‰¹åˆ«æ˜¯ï¼Œå¯ä»¥æŒ‡ç¤ºæ¨¡å‹å°†éœ€è¦è¿è¡Œçš„ä»£ç æ”¾å…¥æŒ‡å®šæ ¼å¼ï¼ˆå¦‚ä¸‰é‡å›æº¯ï¼‰ä¸­ã€‚äº§ç”Ÿè¾“å‡ºåï¼Œå¯æå–å¹¶è¿è¡Œä»£ç ã€‚æœ€åï¼Œå¦‚æœ‰å¿…è¦ï¼Œå¯å°†ä»£ç æ‰§è¡Œå¼•æ“ï¼ˆå³ Python è§£é‡Šå™¨ï¼‰çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€æ¬¡æŸ¥è¯¢çš„æ¨¡å‹è¾“å…¥ã€‚ è®©æ¨¡å‹è®¿é—®ç‰¹å®šåŠŸèƒ½ï¼šèŠå¤©å®Œæˆ API å…è®¸åœ¨è¯·æ±‚ä¸­ä¼ é€’å‡½æ•°æè¿°åˆ—è¡¨ã€‚è¿™æ ·ï¼Œæ¨¡å‹å°±èƒ½æ ¹æ®æä¾›çš„æ¨¡å¼ç”Ÿæˆå‡½æ•°å‚æ•°ã€‚ç”Ÿæˆçš„å‡½æ•°å‚æ•°ç”± API ä»¥ JSON æ ¼å¼è¿”å›ï¼Œå¯ç”¨äºæ‰§è¡Œå‡½æ•°è°ƒç”¨ã€‚ç„¶åï¼Œå‡½æ•°è°ƒç”¨æä¾›çš„è¾“å‡ºå¯ä»¥åœ¨ä¸‹ä¸€ä¸ªè¯·æ±‚ä¸­åé¦ˆåˆ°æ¨¡å‹ä¸­ï¼Œä»¥ç»“æŸå¾ªç¯ã€‚è¿™æ˜¯ä½¿ç”¨ GPT æ¨¡å‹è°ƒç”¨å¤–éƒ¨å‡½æ•°çš„æ¨èæ–¹å¼ã€‚ Test changes systematically å¦‚æœèƒ½å¯¹æ€§èƒ½è¿›è¡Œæµ‹é‡ï¼Œæé«˜æ€§èƒ½å°±ä¼šå˜å¾—æ›´å®¹æ˜“ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯¹æç¤ºç¬¦çš„ä¿®æ”¹ä¼šåœ¨ä¸€äº›å­¤ç«‹çš„ç¤ºä¾‹ä¸Šå–å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œä½†åœ¨æ›´å…·ä»£è¡¨æ€§çš„ç¤ºä¾‹é›†ä¸Šå´ä¼šå¯¼è‡´æ•´ä½“æ€§èƒ½ä¸‹é™ã€‚å› æ­¤ï¼Œä¸ºäº†ç¡®ä¿ä¿®æ”¹å¯¹æ€§èƒ½çš„å‡€ç§¯æå½±å“ï¼Œå¯èƒ½æœ‰å¿…è¦å®šä¹‰ä¸€ä¸ªç»¼åˆæµ‹è¯•å¥—ä»¶ï¼ˆä¹Ÿç§°ä¸º \u0026ldquo;è¯„ä¼°\u0026rdquo;ï¼‰ã€‚\nResources https://platform.openai.com/docs/guides/gpt-best-practices https://github.com/mattnigh/ChatGPT3-Free-Prompt-List https://style.mla.org/citing-generative-ai/ ","permalink":"https://WFUing.github.io/posts/tech/algorithm/ai/chatgpt-guide/","summary":"Six strategies for getting better results Write clear instructions GPT æ— æ³•è¯»æ‡‚ä½ çš„å¿ƒæ€ã€‚å¦‚æœäº§å‡ºå¤ªé•¿ï¼Œè¯·è¦æ±‚ç®€çŸ­å›å¤ã€‚å¦‚æœç»“æœå¤ªç®€å•ï¼Œè¦æ±‚ä¸“å®¶çº§çš„å†™ä½œã€‚å¦‚æœæ‚¨ä¸å–œæ¬¢æ ¼å¼ï¼Œè¯·æ¼”ç¤ºæ‚¨å¸Œæœ›çœ‹åˆ°çš„æ ¼å¼ã€‚GPT è¶Šå°‘éœ€è¦çŒœæµ‹ä½ æƒ³è¦ä»€ä¹ˆï¼Œä½ å°±è¶Šæœ‰å¯èƒ½å¾—åˆ°å®ƒã€‚\nåœ¨æ‚¨çš„è¯¢é—®ä¸­åŒ…å«è¯¦ç»†ä¿¡æ¯ï¼Œä»¥è·å¾—æ›´å¤šç›¸å…³ç­”æ¡ˆï¼šä¸ºäº†å¾—åˆ°é«˜åº¦ç›¸å…³çš„å›å¤ï¼Œè¯·ç¡®ä¿è¯·æ±‚æä¾›äº†ä»»ä½•é‡è¦çš„ç»†èŠ‚æˆ–ä¸Šä¸‹æ–‡ã€‚å¦åˆ™ï¼Œæ‚¨å°±åªèƒ½è®©æ¨¡å‹æ¥çŒœæµ‹æ‚¨çš„æ„æ€äº†ã€‚ è¦æ±‚æ¨¡ç‰¹é‡‡ç”¨ä¸€ä¸ªè§’è‰²ï¼šç³»ç»Ÿä¿¡æ¯å¯ç”¨äºæŒ‡å®šæ¨¡å‹åœ¨å›å¤ä¸­ä½¿ç”¨çš„è§’è‰²ã€‚ ä½¿ç”¨åˆ†éš”ç¬¦æ¸…æ¥šæ ‡æ˜è¾“å…¥å†…å®¹çš„ä¸åŒéƒ¨åˆ†ï¼šä¸‰å¼•å·ã€XML æ ‡è®°ã€ç« èŠ‚æ ‡é¢˜ç­‰åˆ†éš”ç¬¦å¯ä»¥å¸®åŠ©åˆ’åˆ†éœ€è¦åŒºåˆ«å¯¹å¾…çš„æ–‡æœ¬éƒ¨åˆ†ã€‚ æŒ‡å®šå®Œæˆä»»åŠ¡æ‰€éœ€çš„æ­¥éª¤ï¼šæœ‰äº›ä»»åŠ¡æœ€å¥½ä»¥ä¸€è¿ä¸²çš„æ­¥éª¤æ¥æŒ‡å®šã€‚æ˜ç¡®å†™å‡ºè¿™äº›æ­¥éª¤å¯ä»¥è®©æ¨¡å‹æ›´å®¹æ˜“åœ°éµå¾ªå®ƒä»¬ã€‚ ä¸¾ä¾‹è¯´æ˜ï¼šæä¾›é€‚ç”¨äºæ‰€æœ‰ç¤ºä¾‹çš„ä¸€èˆ¬è¯´æ˜é€šå¸¸æ¯”é€šè¿‡ç¤ºä¾‹æ¼”ç¤ºä»»åŠ¡çš„æ‰€æœ‰æ’åˆ—ç»„åˆæ›´æœ‰æ•ˆï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæä¾›ç¤ºä¾‹å¯èƒ½æ›´å®¹æ˜“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ‰“ç®—è®©æ¨¡å‹å¤åˆ¶ä¸€ç§éš¾ä»¥æ˜ç¡®æè¿°çš„å›åº”ç”¨æˆ·è¯¢é—®çš„ç‰¹å®šé£æ ¼ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ \u0026ldquo;å°‘é‡ \u0026ldquo;æç¤ºã€‚è¿™å°±æ˜¯æ‰€è°“çš„ \u0026ldquo;å°‘é‡ \u0026ldquo;æç¤ºã€‚ æŒ‡å®šæ‰€éœ€çš„è¾“å‡ºé•¿åº¦ï¼šæ‚¨å¯ä»¥è¦æ±‚æ¨¡å‹ç”Ÿæˆå…·æœ‰ç»™å®šç›®æ ‡é•¿åº¦çš„è¾“å‡ºã€‚å¯ä»¥ç”¨å­—æ•°ã€å¥æ•°ã€æ®µè½æ•°ã€è¦ç‚¹æ•°ç­‰æ¥æŒ‡å®šç›®æ ‡è¾“å‡ºé•¿åº¦ã€‚ä½†è¯·æ³¨æ„ï¼ŒæŒ‡ç¤ºæ¨¡å‹ç”Ÿæˆç‰¹å®šå­—æ•°çš„ç²¾ç¡®åº¦å¹¶ä¸é«˜ã€‚æ¨¡å‹å¯ä»¥æ›´å¯é åœ°ç”Ÿæˆå…·æœ‰ç‰¹å®šæ®µè½æ•°æˆ–è¦ç‚¹æ•°çš„è¾“å‡ºç»“æœã€‚ Provide reference text GPT å¯ä»¥è‡ªä¿¡åœ°ç¼–é€ è™šå‡ç­”æ¡ˆï¼Œå°¤å…¶æ˜¯åœ¨è¢«é—®åŠæ·±å¥¥çš„è¯é¢˜æˆ–å¼•ç”¨å’Œ URL æ—¶ã€‚å°±åƒä¸€å¼ ç¬”è®°èƒ½å¸®åŠ©å­¦ç”Ÿåœ¨è€ƒè¯•ä¸­å–å¾—æ›´å¥½çš„æˆç»©ä¸€æ ·ï¼Œä¸º GPT æä¾›å‚è€ƒæ–‡æœ¬ä¹Ÿèƒ½å¸®åŠ©ä»–ä»¬åœ¨ä½œç­”æ—¶å‡å°‘æ— ä¸­ç”Ÿæœ‰çš„æƒ…å†µã€‚\næŒ‡å¯¼æ¨¡å‹ä½¿ç”¨å‚è€ƒæ–‡æœ¬ä½œç­”ï¼šå¦‚æœæˆ‘ä»¬èƒ½ä¸ºæ¨¡å‹æä¾›ä¸å½“å‰æŸ¥è¯¢ç›¸å…³çš„å¯ä¿¡ä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŒ‡ç¤ºæ¨¡å‹ä½¿ç”¨æ‰€æä¾›çš„ä¿¡æ¯æ¥æ’°å†™ç­”æ¡ˆã€‚ æŒ‡å¯¼èŒƒä¾‹å¼•ç”¨å‚è€ƒæ–‡çŒ®å›ç­”é—®é¢˜ï¼šå¦‚æœè¾“å…¥å†…å®¹ä¸­å·²ç»è¡¥å……äº†ç›¸å…³çŸ¥è¯†ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥è¦æ±‚æ¨¡å‹é€šè¿‡å¼•ç”¨æ‰€æä¾›æ–‡æ¡£ä¸­çš„æ®µè½æ¥ä¸ºå…¶ç­”æ¡ˆæ·»åŠ å¼•æ–‡ã€‚è¯·æ³¨æ„ï¼Œè¾“å‡ºä¸­çš„å¼•ç”¨å¯ä»¥é€šè¿‡æ‰€æä¾›æ–‡æ¡£ä¸­çš„å­—ç¬¦ä¸²åŒ¹é…è¿›è¡Œç¼–ç¨‹éªŒè¯ã€‚ Split complex tasks into simpler subtasks åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œå°†ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿåˆ†è§£æˆä¸€ç³»åˆ—æ¨¡å—åŒ–ç»„ä»¶æ˜¯ä¸€ç§å¾ˆå¥½çš„åšæ³•ï¼Œæäº¤ç»™ GPT çš„ä»»åŠ¡ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å¤æ‚ä»»åŠ¡çš„é”™è¯¯ç‡å¾€å¾€é«˜äºç®€å•ä»»åŠ¡ã€‚æ­¤å¤–ï¼Œå¤æ‚ä»»åŠ¡é€šå¸¸å¯ä»¥é‡æ–°å®šä¹‰ä¸ºè¾ƒç®€å•ä»»åŠ¡çš„å·¥ä½œæµç¨‹ï¼Œå…¶ä¸­å‰æœŸä»»åŠ¡çš„è¾“å‡ºè¢«ç”¨äºæ„å»ºåæœŸä»»åŠ¡çš„è¾“å…¥ã€‚\nä½¿ç”¨æ„å›¾åˆ†ç±»æ¥ç¡®å®šä¸ç”¨æˆ·æŸ¥è¯¢æœ€ç›¸å…³çš„æŒ‡ä»¤ï¼šå¯¹äºéœ€è¦å¤§é‡ç‹¬ç«‹æŒ‡ä»¤é›†æ¥å¤„ç†ä¸åŒæƒ…å†µçš„ä»»åŠ¡ï¼Œé¦–å…ˆå¯¹æŸ¥è¯¢ç±»å‹è¿›è¡Œåˆ†ç±»ï¼Œå¹¶åˆ©ç”¨è¯¥åˆ†ç±»æ¥ç¡®å®šéœ€è¦å“ªäº›æŒ‡ä»¤ï¼Œå¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚è¿™å¯ä»¥é€šè¿‡å®šä¹‰å›ºå®šç±»åˆ«å’Œç¡¬ç¼–ç ä¸å¤„ç†ç‰¹å®šç±»åˆ«ä»»åŠ¡ç›¸å…³çš„æŒ‡ä»¤æ¥å®ç°ã€‚è¿™ä¸€è¿‡ç¨‹ä¹Ÿå¯ä»¥é€’å½’åº”ç”¨ï¼Œå°†ä»»åŠ¡åˆ†è§£ä¸ºä¸€ç³»åˆ—é˜¶æ®µã€‚è¿™ç§æ–¹æ³•çš„ä¼˜åŠ¿åœ¨äºï¼Œæ¯æ¬¡æŸ¥è¯¢åªåŒ…å«æ‰§è¡Œä»»åŠ¡ä¸‹ä¸€é˜¶æ®µæ‰€éœ€çš„æŒ‡ä»¤ï¼Œä¸ä½¿ç”¨å•æ¬¡æŸ¥è¯¢æ‰§è¡Œæ•´ä¸ªä»»åŠ¡ç›¸æ¯”ï¼Œé”™è¯¯ç‡æ›´ä½ã€‚è¿™è¿˜å¯ä»¥é™ä½æˆæœ¬ï¼Œå› ä¸ºè¿è¡Œè¾ƒå¤§çš„æç¤ºéœ€è¦èŠ±è´¹æ›´å¤šçš„æˆæœ¬ã€‚ å¯¹äºéœ€è¦å†—é•¿å¯¹è¯çš„å¯¹è¯åº”ç”¨ç¨‹åºï¼Œæ€»ç»“æˆ–è¿‡æ»¤ä¹‹å‰çš„å¯¹è¯ï¼šç”±äº GPT çš„ä¸Šä¸‹æ–‡é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œå› æ­¤ç”¨æˆ·å’ŒåŠ©æ‰‹ä¹‹é—´çš„å¯¹è¯ï¼ˆæ•´ä¸ªå¯¹è¯éƒ½åŒ…å«åœ¨ä¸Šä¸‹æ–‡çª—å£ä¸­ï¼‰ä¸å¯èƒ½æ— é™æœŸåœ°è¿›è¡Œä¸‹å»ã€‚è§£å†³è¿™ä¸ªé—®é¢˜æœ‰å¤šç§å˜é€šæ–¹æ³•ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯æ€»ç»“å¯¹è¯ä¸­çš„å‰å‡ è½®å¯¹è¯ã€‚ä¸€æ—¦è¾“å…¥çš„å¤§å°è¾¾åˆ°é¢„å®šçš„é˜ˆå€¼é•¿åº¦ï¼Œå°±ä¼šè§¦å‘ä¸€ä¸ªå¯¹éƒ¨åˆ†å¯¹è¯è¿›è¡Œæ€»ç»“çš„æŸ¥è¯¢ï¼Œè€Œä¹‹å‰å¯¹è¯çš„æ€»ç»“å¯ä»¥ä½œä¸ºç³»ç»Ÿæ¶ˆæ¯çš„ä¸€éƒ¨åˆ†ã€‚æˆ–è€…ï¼Œä¹Ÿå¯ä»¥åœ¨æ•´ä¸ªå¯¹è¯è¿‡ç¨‹ä¸­åœ¨åå°å¼‚æ­¥æ€»ç»“ä¹‹å‰çš„å¯¹è¯ã€‚ å¯¹é•¿æ–‡æ¡£è¿›è¡Œåˆ†å—æ‘˜è¦ï¼Œå¹¶é€’å½’æ„å»ºå®Œæ•´æ‘˜è¦ï¼šç”±äº GPT æœ‰å›ºå®šçš„ä¸Šä¸‹æ–‡é•¿åº¦ï¼Œå› æ­¤åœ¨å•æ¬¡æŸ¥è¯¢ä¸­ï¼ŒGPT æ— æ³•ç”¨äºæ‘˜è¦é•¿åº¦è¶…è¿‡ä¸Šä¸‹æ–‡é•¿åº¦å‡å»ç”Ÿæˆæ‘˜è¦é•¿åº¦çš„æ–‡æœ¬ã€‚ Give GPTs time to \u0026ldquo;think\u0026rdquo; å¦‚æœè¦æ±‚ä½ ç”¨ 17 ä¹˜ä»¥ 28ï¼Œä½ å¯èƒ½ä¸ä¼šé©¬ä¸ŠçŸ¥é“ï¼Œä½†èŠ±ç‚¹æ—¶é—´è¿˜æ˜¯èƒ½ç®—å‡ºæ¥çš„ã€‚åŒæ ·ï¼ŒGPT å­¦ç”Ÿåœ¨è¯•å›¾ç«‹å³å›ç­”è€Œä¸æ˜¯èŠ±æ—¶é—´æ¨ç†å‡ºç­”æ¡ˆæ—¶ï¼Œä¼šçŠ¯æ›´å¤šçš„æ¨ç†é”™è¯¯ã€‚åœ¨å›ç­”é—®é¢˜ä¹‹å‰ï¼Œè¦æ±‚å­¦ç”Ÿè¿›è¡Œä¸€è¿ä¸²çš„æ¨ç†ï¼Œå¯ä»¥å¸®åŠ© GPT å­¦ç”Ÿæ›´å¯é åœ°æ¨ç†å‡ºæ­£ç¡®ç­”æ¡ˆã€‚\nåœ¨åŒ†å¿™å¾—å‡ºç»“è®ºä¹‹å‰ï¼ŒæŒ‡ç¤ºæ¨¡å‹è‡ªå·±æ‰¾å‡ºè§£å†³æ–¹æ¡ˆï¼šå¦‚æœæˆ‘ä»¬æ˜ç¡®æŒ‡ç¤ºæ¨¡å‹åœ¨å¾—å‡ºç»“è®ºä¹‹å‰å…ˆä»ç¬¬ä¸€æ€§åŸç†è¿›è¡Œæ¨ç†ï¼Œä¼šå¾—åˆ°æ›´å¥½çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦ä¸€ä¸ªæ¨¡å‹æ¥è¯„ä¼°å­¦ç”Ÿå¯¹æ•°å­¦é—®é¢˜çš„è§£ç­”ã€‚æœ€æ˜æ˜¾çš„æ–¹æ³•æ˜¯ç®€å•åœ°é—®æ¨¡å‹å­¦ç”Ÿçš„è§£æ³•æ˜¯å¦æ­£ç¡®ã€‚ ä½¿ç”¨å†…å¿ƒç‹¬ç™½æˆ–ä¸€ç³»åˆ—æŸ¥è¯¢æ¥éšè—æ¨¡å‹çš„æ¨ç†è¿‡ç¨‹ï¼šå‰é¢çš„ç­–ç•¥è¡¨æ˜ï¼Œåœ¨å›ç­”å…·ä½“é—®é¢˜ä¹‹å‰ï¼Œæ¨¡å‹æœ‰æ—¶å¿…é¡»å¯¹é—®é¢˜è¿›è¡Œè¯¦ç»†æ¨ç†ã€‚å¯¹äºæŸäº›åº”ç”¨ï¼Œæ¨¡å‹å¾—å‡ºæœ€ç»ˆç­”æ¡ˆçš„æ¨ç†è¿‡ç¨‹ä¸å®œä¸ç”¨æˆ·å…±äº«ã€‚ä¾‹å¦‚ï¼Œåœ¨è¾…å¯¼åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›é¼“åŠ±å­¦ç”Ÿè‡ªå·±æ‰¾å‡ºç­”æ¡ˆï¼Œä½†æ¨¡å‹å¯¹å­¦ç”Ÿè§£å†³æ–¹æ¡ˆçš„æ¨ç†è¿‡ç¨‹å¯èƒ½ä¼šå‘å­¦ç”Ÿé€éœ²ç­”æ¡ˆã€‚å†…å¿ƒç‹¬ç™½æ˜¯ä¸€ç§å¯ä»¥ç”¨æ¥ç¼“è§£è¿™ç§æƒ…å†µçš„ç­–ç•¥ã€‚å†…å¿ƒç‹¬ç™½çš„åŸç†æ˜¯æŒ‡ç¤ºæ¨¡å‹å°†è¾“å‡ºç»“æœä¸­ä¸å¯¹ç”¨æˆ·å…¬å¼€çš„éƒ¨åˆ†è½¬åŒ–ä¸ºç»“æ„åŒ–æ ¼å¼ï¼Œä»¥ä¾¿äºè§£æã€‚ç„¶åï¼Œåœ¨å‘ç”¨æˆ·å±•ç¤ºè¾“å‡ºç»“æœä¹‹å‰ï¼Œå…ˆå¯¹è¾“å‡ºç»“æœè¿›è¡Œè§£æï¼Œåªè®©éƒ¨åˆ†è¾“å‡ºç»“æœå¯è§ã€‚ Use external tools å‘ GPT æä¾›å…¶ä»–å·¥å…·çš„è¾“å‡ºç»“æœï¼Œå¼¥è¡¥ GPT çš„ä¸è¶³ã€‚ä¾‹å¦‚ï¼Œæ–‡æœ¬æ£€ç´¢ç³»ç»Ÿå¯ä»¥å‘Šè¯‰ GPT ç›¸å…³æ–‡æ¡£çš„ä¿¡æ¯ã€‚ä»£ç æ‰§è¡Œå¼•æ“å¯ä»¥å¸®åŠ© GPT è¿›è¡Œæ•°å­¦è¿ç®—å’Œè¿è¡Œä»£ç ã€‚å¦‚æœæŸé¡¹ä»»åŠ¡å¯ä»¥é€šè¿‡å·¥å…·è€Œä¸æ˜¯ GPT æ›´å¯é æˆ–æ›´é«˜æ•ˆåœ°å®Œæˆï¼Œé‚£ä¹ˆå°±å°†å…¶å¸è½½ï¼Œä»¥è·å¾—ä¸¤è€…çš„æœ€ä½³æ•ˆæœã€‚","title":"chatGPT ä½¿ç”¨æŒ‡å—"},{"content":"Resources githubï¼šhttps://github.com/fatedier/frp documentï¼šhttps://gofrp.org/docs/ finalshellï¼šhttps://sourceforge.net/projects/finalshell/ vscode remote sshï¼šhttps://code.visualstudio.com/docs/remote/ssh ä¸‹é¢ç»™å‡ºä¸€äº›blogï¼Œéƒ½è¯¦ç»†å†™äº†å¦‚ä½•ä½¿ç”¨frpæ­å»ºå†…ç½‘ç©¿é€ï¼Œåœ¨æœ¬æ–‡ä¸­å°±ä¸å†èµ˜è¿°ã€‚\nä½¿ç”¨frpè¿›è¡Œå†…ç½‘ç©¿é€ï¼šhttps://sspai.com/post/52523 åŸºäºfrp docker è¿›è¡Œå†…ç½‘ç©¿é€ï¼šhttps://izhaong.com/pages/b387de/ CentOS7ä¸‹é€šè¿‡frpåšå†…ç½‘ç©¿é€ï¼šhttps://blog.fengdis.com/2019/12/25/CentOS%E4%B8%8B%E9%80%9A%E8%BF%87frp%E5%81%9A%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/ è¿™ä¸€ç¯‡blogçš„05èŠ‚å†™äº†é‡åˆ°çš„å¸¸è§é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æ–‡å…³å¿ƒçš„ã€‚\nå¸¸è§é—®é¢˜ï¼šhttps://www.derrors.cn/index.php/it-tech/frp.html Questions å¤§éƒ¨åˆ†éƒ½æ˜¯ç½‘ç»œç«¯å£ä¸Šçš„é—®é¢˜ï¼Œä¸‹é¢å…ˆç»™å‡ºä¸€å¼ frpçš„åŸç†å›¾ã€‚\nssh: connect to host xx.xx.xx.xx port xx: Operation timed out\nä½¿ç”¨sshè¿æ¥æ—¶ï¼Œè¿æ¥è¶…æ—¶ åŸå› ï¼šæœåŠ¡å™¨é˜²ç«å¢™æœªå¼€æ”¾frpé…ç½®ä¸­å¯¹åº”çš„remote_portç«¯å£ï¼› è§£å†³ï¼šåœ¨æœåŠ¡å™¨çš„é˜²ç«å¢™ä¸­å¼€æ”¾ç›¸åº”ç«¯å£ã€‚ ssh: connect to host xx.xx.xx.xx port xx: Connection refused\nè¿æ¥è¢«æ‹’ç» åŸå› ï¼šæœåŠ¡å™¨é˜²ç«å¢™æœªå¼€æ”¾frpé…ç½®ä¸­å¯¹åº”çš„server_portç«¯å£ï¼› è§£å†³ï¼šåœ¨æœåŠ¡å™¨çš„é˜²ç«å¢™ä¸­å¼€æ”¾ç›¸åº”ç«¯å£ã€‚ å½“ç„¶äº‘æœåŠ¡å™¨ç«¯ï¼Œä¹Ÿä¼šæœ‰å®‰å…¨ç»„æˆ–è€…é˜²ç«å¢™ï¼Œéœ€è¦æŠŠç›¸åº”çš„éƒ½å¼€èµ·æ¥\n1 2 3 4 5 6 7 8 9 #å¼€æ”¾ç«¯å£ firewall-cmd --zone=public --add-port=7000/tcp --permanent firewall-cmd --zone=public --add-port=6000/tcp --permanent #æŸ¥çœ‹å¼€æ”¾ç«¯å£åˆ—è¡¨ firewall-cmd --permanent --zone=public --list-ports #é˜²ç«å¢™reload firewall-cmd --reload firewalld æ‹“å±• è¿™è¾¹å¾ˆå¤šçš„é—®é¢˜éƒ½è·Ÿé˜²ç«å¢™æœ‰å…³ç³»ï¼Œè¿™è¾¹ç»™å‡º firewalld çš„ç›¸å…³æŒ‡ä»¤ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 source: æ ¹æ®æºåœ°å€è¿‡æ»¤ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰ interface: æ ¹æ®ç½‘å¡è¿‡æ»¤ï¼ˆä¼˜å…ˆçº§æ¬¡é«˜ï¼‰ service: æ ¹æ®æœåŠ¡åè¿‡æ»¤ port: æ ¹æ®ç«¯å£è¿‡æ»¤ icmp-block: icmp æŠ¥æ–‡è¿‡æ»¤ï¼ŒæŒ‰ç…§ icmp ç±»å‹é…ç½® masquerade: ip åœ°å€ä¼ªè£… forward-port: ç«¯å£è½¬å‘ rule: è‡ªå®šä¹‰è§„åˆ™ # æŸ¥çœ‹æ˜¯å¦å¼€å¯ systemctl status firewalld.service # æ‰“å¼€é˜²ç«å¢™ systemctl start firewalld.service # åœç”¨é˜²ç«å¢™ systemctl disable firewalld # ç¦ç”¨é˜²ç«å¢™ systemctl stop firewalld.service # å¼€æœºå¯åŠ¨ systemctl enable firewalld # å–æ¶ˆå¼€æœºå¯åŠ¨ systemctl disable firewalld # æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ firewall-cmd --state # æŸ¥çœ‹æ¥å£ä¿¡æ¯ firewall-cmd --list-all # æ›´æ–°é˜²ç«å¢™è§„åˆ™æ–¹æ³•1:æ— éœ€æ–­å¼€è¿æ¥ï¼ŒåŠ¨æ€æ›´æ”¹è§„åˆ™ firewall-cmd --reload # æ›´æ–°é˜²ç«å¢™è§„åˆ™æ–¹æ³•2:æ–­å¼€è¿æ¥ï¼Œä»¥é‡å¯çš„æ–¹å¼æ›´æ”¹è§„åˆ™ firewall-cmd --complete-reload # æŸ¥çœ‹å¸®åŠ© firewall-cmd --help --zone=NAME # æŒ‡å®š Zone --permanent # ä¸ºæ°¸ä¹…ç”Ÿæ•ˆ --timeout=seconds # æŒç»­ä¸€æ®µæ—¶é—´ï¼Œåˆ°æœŸåè‡ªåŠ¨ç§»é™¤ï¼Œç»å¸¸ç”¨äºè°ƒè¯•ï¼Œä¸”ä¸èƒ½ä¸ --permanent åŒæ—¶ä½¿ç”¨ # è¿½åŠ ä¸€ä¸ª8181ç«¯å£ï¼Œæ°¸ä¹…æœ‰æ•ˆ firewall-cmd --add-port=8181/tcp --permanent # è¿½åŠ ä¸€æ®µç«¯å£èŒƒå›´ firewall-cmd --add-port=6000-6600/tcp # å¼€æ”¾ ftp æœåŠ¡ firewall-cmd --add-service=ftp # æ·»åŠ eth0 æ¥å£è‡³ public ä¿¡ä»»ç­‰çº§ï¼Œæ°¸ä¹…æœ‰æ•ˆ firewall-cmd --zone=public --add-interface=eth0 --permanent # å…³é—­é˜²ç«å¢™ sudo systemctl stop firewalld # å…³é—­ç«¯å£ sudo firewall-cmd --remove-port=3000/tcp --permanent # é…ç½® public zone çš„ç«¯å£è½¬å‘ firewall-cmd --zone=public --add-masquerade # ç„¶åè½¬å‘ tcp 22 ç«¯å£è‡³ 9527 firewall-cmd --zone=public --add-forward-port=port=22:proto=tcp:toport=9527 # è½¬å‘ 22 ç«¯å£æ•°æ®è‡³å¦ä¸€ä¸ª ip çš„ç›¸åŒç«¯å£ä¸Š firewall-cmd --zone=public --add-forward-port=port=22:proto=tcp:toaddr=192.168.1.123 # è½¬å‘ 22 ç«¯å£æ•°æ®è‡³å¦ä¸€ ip çš„ 9527 ç«¯å£ä¸Š firewall-cmd --zone=public --add-forward-port=port=22:proto=tcp:toport=9527:toaddr=192.168.1.100 # IP å°ç¦ firewall-cmd --permanent --add-rich-rule=\u0026#34;rule family=\u0026#39;ipv4\u0026#39; source address=\u0026#39;192.168.1.123\u0026#39; reject\u0026#34; # é€šè¿‡ ipset æ¥å°ç¦ ip firewall-cmd --permanent --zone=public --new-ipset=blacklist --type=hash:ip firewall-cmd --permanent --zone=public --ipset=blacklist --add-entry=192.168.1.123 # å°ç¦ç½‘æ®µ firewall-cmd --permanent --zone=public --new-ipset=blacklist --type=hash:net firewall-cmd --permanent --zone=public --ipset=blacklist --add-entry=192.168.1.0/24 # å€’å…¥ ipset è§„åˆ™ blacklistï¼Œç„¶åå°ç¦ blacklist firewall-cmd --permanent --zone=public --new-ipset-from-file=/path/blacklist.xml firewall-cmd --permanent --zone=public --add-rich-rule=\u0026#39;rule source ipset=blacklist drop\u0026#39; ","permalink":"https://WFUing.github.io/posts/tech/network/frp-nat-traversal/","summary":"Resources githubï¼šhttps://github.com/fatedier/frp documentï¼šhttps://gofrp.org/docs/ finalshellï¼šhttps://sourceforge.net/projects/finalshell/ vscode remote sshï¼šhttps://code.visualstudio.com/docs/remote/ssh ä¸‹é¢ç»™å‡ºä¸€äº›blogï¼Œéƒ½è¯¦ç»†å†™äº†å¦‚ä½•ä½¿ç”¨frpæ­å»ºå†…ç½‘ç©¿é€ï¼Œåœ¨æœ¬æ–‡ä¸­å°±ä¸å†èµ˜è¿°ã€‚\nä½¿ç”¨frpè¿›è¡Œå†…ç½‘ç©¿é€ï¼šhttps://sspai.com/post/52523 åŸºäºfrp docker è¿›è¡Œå†…ç½‘ç©¿é€ï¼šhttps://izhaong.com/pages/b387de/ CentOS7ä¸‹é€šè¿‡frpåšå†…ç½‘ç©¿é€ï¼šhttps://blog.fengdis.com/2019/12/25/CentOS%E4%B8%8B%E9%80%9A%E8%BF%87frp%E5%81%9A%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/ è¿™ä¸€ç¯‡blogçš„05èŠ‚å†™äº†é‡åˆ°çš„å¸¸è§é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æ–‡å…³å¿ƒçš„ã€‚\nå¸¸è§é—®é¢˜ï¼šhttps://www.derrors.cn/index.php/it-tech/frp.html Questions å¤§éƒ¨åˆ†éƒ½æ˜¯ç½‘ç»œç«¯å£ä¸Šçš„é—®é¢˜ï¼Œä¸‹é¢å…ˆç»™å‡ºä¸€å¼ frpçš„åŸç†å›¾ã€‚\nssh: connect to host xx.xx.xx.xx port xx: Operation timed out\nä½¿ç”¨sshè¿æ¥æ—¶ï¼Œè¿æ¥è¶…æ—¶ åŸå› ï¼šæœåŠ¡å™¨é˜²ç«å¢™æœªå¼€æ”¾frpé…ç½®ä¸­å¯¹åº”çš„remote_portç«¯å£ï¼› è§£å†³ï¼šåœ¨æœåŠ¡å™¨çš„é˜²ç«å¢™ä¸­å¼€æ”¾ç›¸åº”ç«¯å£ã€‚ ssh: connect to host xx.xx.xx.xx port xx: Connection refused\nè¿æ¥è¢«æ‹’ç» åŸå› ï¼šæœåŠ¡å™¨é˜²ç«å¢™æœªå¼€æ”¾frpé…ç½®ä¸­å¯¹åº”çš„server_portç«¯å£ï¼› è§£å†³ï¼šåœ¨æœåŠ¡å™¨çš„é˜²ç«å¢™ä¸­å¼€æ”¾ç›¸åº”ç«¯å£ã€‚ å½“ç„¶äº‘æœåŠ¡å™¨ç«¯ï¼Œä¹Ÿä¼šæœ‰å®‰å…¨ç»„æˆ–è€…é˜²ç«å¢™ï¼Œéœ€è¦æŠŠç›¸åº”çš„éƒ½å¼€èµ·æ¥\n1 2 3 4 5 6 7 8 9 #å¼€æ”¾ç«¯å£ firewall-cmd --zone=public --add-port=7000/tcp --permanent firewall-cmd --zone=public --add-port=6000/tcp --permanent #æŸ¥çœ‹å¼€æ”¾ç«¯å£åˆ—è¡¨ firewall-cmd --permanent --zone=public --list-ports #é˜²ç«å¢™reload firewall-cmd --reload firewalld æ‹“å±• è¿™è¾¹å¾ˆå¤šçš„é—®é¢˜éƒ½è·Ÿé˜²ç«å¢™æœ‰å…³ç³»ï¼Œè¿™è¾¹ç»™å‡º firewalld çš„ç›¸å…³æŒ‡ä»¤ã€‚","title":"Frp Nat Traversal"},{"content":"Resources url: https://www.telosys.org/ tutorial: https://tomassetti.me/telosys-code-generation-tool/ ","permalink":"https://WFUing.github.io/posts/tech/language/code-generation/telosys-code-generation-tool/","summary":"Resources url: https://www.telosys.org/ tutorial: https://tomassetti.me/telosys-code-generation-tool/ ","title":"Telosys: a Code Generation Tool by Laurent Guerin"},{"content":"åŠ¨æ€è§„åˆ’ ã€LeetCode 55ã€‘è·³è·ƒæ¸¸æˆ ã€LeetCode 72ã€‘ç¼–è¾‘è·ç¦» ã€LeetCode 115ã€‘ä¸åŒçš„å­åºåˆ— ã€LeetCode 124ã€‘äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ ã€LeetCode 174ã€‘åœ°ä¸‹åŸæ¸¸æˆ ã€LeetCode 188ã€‘ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIV ã€LeetCode 198ã€‘æ‰“å®¶åŠ«èˆ ã€LeetCode 213ã€‘æ‰“å®¶åŠ«èˆII ã€LeetCode 233ã€‘æ•°å­—1çš„ä¸ªæ•° ã€LeetCode 300ã€‘æœ€é•¿é€’å¢å­åºåˆ— ã€LeetCode 309ã€‘æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ ã€LeetCode 312ã€‘æˆ³æ°”çƒ ã€LeetCode 337ã€‘æ‰“å®¶åŠ«èˆIII ã€LeetCode 354ã€‘ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜ ã€LeetCode 376ã€‘æ‘†åŠ¨åºåˆ— ã€LeetCode 390ã€‘æ¶ˆé™¤æ¸¸æˆ ã€LeetCode 689ã€‘ä¸‰ä¸ªæ— é‡å å­æ•°ç»„çš„æœ€å¤§å’Œ ã€LeetCode 714ã€‘ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹ ã€LeetCode 907ã€‘å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ ã€LeetCode 943ã€‘æœ€çŸ­è¶…çº§ä¸² ã€LeetCode 1031ã€‘ä¸¤ä¸ªéé‡å å­æ•°ç»„çš„æœ€å¤§å’Œ ã€LeetCode 1039ã€‘å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ† ã€LeetCode 1186ã€‘åˆ é™¤ä¸€æ¬¡å¾—åˆ°å­æ•°ç»„æœ€å¤§å’Œ ã€LeetCode ç³»åˆ—ã€‘ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº ã€LeetCode é¢è¯•é¢˜ 08.11ã€‘ç¡¬å¸ è´ªå¿ƒç®—æ³• ã€LeetCode 55ã€‘è·³è·ƒæ¸¸æˆ ã€LeetCode 121ã€‘ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº ã€LeetCode 122ã€‘ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII ã€LeetCode 123ã€‘ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIII ã€LeetCode 42ã€‘æ¥é›¨æ°´ ã€LeetCode 135ã€‘åˆ†å‘ç³–æœ ","permalink":"https://WFUing.github.io/posts/tech/algorithm/leetcode/","summary":"åŠ¨æ€è§„åˆ’ ã€LeetCode 55ã€‘è·³è·ƒæ¸¸æˆ ã€LeetCode 72ã€‘ç¼–è¾‘è·ç¦» ã€LeetCode 115ã€‘ä¸åŒçš„å­åºåˆ— ã€LeetCode 124ã€‘äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ ã€LeetCode 174ã€‘åœ°ä¸‹åŸæ¸¸æˆ ã€LeetCode 188ã€‘ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIV ã€LeetCode 198ã€‘æ‰“å®¶åŠ«èˆ ã€LeetCode 213ã€‘æ‰“å®¶åŠ«èˆII ã€LeetCode 233ã€‘æ•°å­—1çš„ä¸ªæ•° ã€LeetCode 300ã€‘æœ€é•¿é€’å¢å­åºåˆ— ã€LeetCode 309ã€‘æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ ã€LeetCode 312ã€‘æˆ³æ°”çƒ ã€LeetCode 337ã€‘æ‰“å®¶åŠ«èˆIII ã€LeetCode 354ã€‘ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜ ã€LeetCode 376ã€‘æ‘†åŠ¨åºåˆ— ã€LeetCode 390ã€‘æ¶ˆé™¤æ¸¸æˆ ã€LeetCode 689ã€‘ä¸‰ä¸ªæ— é‡å å­æ•°ç»„çš„æœ€å¤§å’Œ ã€LeetCode 714ã€‘ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹ ã€LeetCode 907ã€‘å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ ã€LeetCode 943ã€‘æœ€çŸ­è¶…çº§ä¸² ã€LeetCode 1031ã€‘ä¸¤ä¸ªéé‡å å­æ•°ç»„çš„æœ€å¤§å’Œ ã€LeetCode 1039ã€‘å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ† ã€LeetCode 1186ã€‘åˆ é™¤ä¸€æ¬¡å¾—åˆ°å­æ•°ç»„æœ€å¤§å’Œ ã€LeetCode ç³»åˆ—ã€‘ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº ã€LeetCode é¢è¯•é¢˜ 08.11ã€‘ç¡¬å¸ è´ªå¿ƒç®—æ³• ã€LeetCode 55ã€‘è·³è·ƒæ¸¸æˆ ã€LeetCode 121ã€‘ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº ã€LeetCode 122ã€‘ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII ã€LeetCode 123ã€‘ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIII ã€LeetCode 42ã€‘æ¥é›¨æ°´ ã€LeetCode 135ã€‘åˆ†å‘ç³–æœ ","title":"Leetcode"},{"content":"DSL å’Œ DSL å·¥å…·çš„ä¸€ä¸ªé‡è¦æ–¹é¢æ˜¯ä»£ç ç”Ÿæˆã€‚DSL æœ¬èº«åœ¨å½¢å¼åŒ–ã€æŒ‡å®šå’Œäº¤æµå†…å®¹æ–¹é¢å…·æœ‰ä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰ç‰¹å®šé¢†åŸŸçš„æ€§è´¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœèƒ½ä»æŒ‡å®šçš„å†…å®¹ä¸­æ¨å¯¼å‡ºå®ç°ä»£ç ï¼Œå°±èƒ½å¤§å¤§æé«˜å·¥ä½œæ•ˆç‡ã€‚\nResources blogs https://www.typefox.io/blog/code-generation-for-langium-based-dsls/ https://www.typefox.io/blog/code-generation-for-langium-based-dsls-2 https://www.typefox.io/blog/code-generation-for-langium-based-dsls-3/ github repo: https://github.com/TypeFox/langium-in-browser-codegen-example/tree/main https://github.com/eclipse-langium/langium/blob/main/examples/arithmetics è¿è¡Œç¤ºä¾‹ æœ¬å¸–ä¸­çš„è¿è¡Œç¤ºä¾‹ä½¿ç”¨ Langium çš„ Arithmetics ç¤ºä¾‹å®ç°ã€‚Arithmetics çš„ grammar è§ arithmetics.langium\nä»£ç ç”Ÿæˆå™¨çš„è¾“å…¥ç¤ºä¾‹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 MODULE priceCalculator DEF materialPerUnit: 100; DEF laborPerUnit: 200; DEF costPerUnit: materialPerUnit + laborPerUnit; DEF expectedNoOfSales: 200; DEF costOfGoodsSold: expectedNoOfSales * costPerUnit; DEF generalExpensesAndSales: 10000; DEF desiredProfitPerUnit: 50; DEF netPrice: (costOfGoodsSold + generalExpensesAndSales) / expectedNoOfSales + desiredProfitPerUnit; DEF vat: 0.15; DEF calcGrossListPrice(net, tax): net / (1 - tax); calcGrossListPrice(netPrice, vat); æœ¬æ¨¡å—ä»‹ç»ä¸€ç§éå¸¸ç®€å•çš„äº§å“ä»·æ ¼è®¡ç®—æ–¹æ³•ã€‚å®ƒåŒ…æ‹¬ç»™å˜é‡åˆ†é…å¸¸é‡å€¼å’Œè®¡ç®—å€¼ã€‚æœ€åï¼Œä¸€ä¸ªåä¸º calcGrossListPrice çš„å‡½æ•°è¢«è°ƒç”¨ï¼Œå‚æ•°æ˜¯ä¹‹å‰å®šä¹‰çš„ netPrice å’Œ taxã€‚ä¸‹å›¾å±•ç¤ºäº† Langium åœ¨è§£æè¾“å…¥æ—¶åˆ›å»ºçš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ã€‚\nç°åœ¨ï¼Œè®©æˆ‘ä»¬å°†å…¶è½¬åŒ–ä¸ºçº¯ JavaScript ä»£ç ã€‚ä¸ºäº†åˆæˆæ‰€éœ€çš„ä»£ç æ®µï¼Œç”Ÿæˆå™¨éœ€è¦è®¿é—® AST å¹¶æ£€æŸ¥ç›¸åº”çš„éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªçº¯ JavaScript æ¨¡æ¿æ¥å®šä¹‰ç”Ÿæˆå™¨çš„å…¥å£å‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå®ƒä¼šè´¡çŒ®ä¸€äº›é™æ€æ¡†æ¶ä»£ç ï¼š\n1 2 3 4 5 6 7 8 function generateModule(root: Module): string { return ` Â·Â·Â·Â·Â·Â·Â·Â·\u0026#34;use strict\u0026#34;; Â·Â·Â·Â·Â·Â·Â·Â·(() =\u0026gt; { Â·Â·Â·Â·Â·Â·Â·Â· ${generateModuleContent(root)} Â·Â·Â·Â·Â·Â·Â·Â·}) `; } è®©æˆ‘ä»¬ä¹Ÿå®šä¹‰ generateModuleContent(Module) å¹¶æŒ‰å¦‚ä¸‹æ–¹å¼å®ç°å®ƒï¼Œç”±äºéœ€è¦å¾ªç¯ï¼Œæ‰€ä»¥è¿™æ¬¡ä½¿ç”¨ç»å…¸çš„å­—ç¬¦ä¸²è¿æ¥ï¼š\n1 2 3 4 5 6 7 8 9 function generateModuleContent(module: Module): string { let result = `let ${lastComputableExpressionValueVarName};\\n`; for (const s of module.statements) { result += generateStatement(s) + \u0026#39;\\n\u0026#39;; } result += `\\n` result += `return ${lastComputableExpressionValueVarName};`; return result; } é—®é¢˜ 1ï¼šå¯¹äºå¤šè¡Œæ¨¡æ¿æ–‡å­—ï¼Œç”Ÿæˆçš„ä»£ç å°†åŒ…å«ç”± Â·Â·Â·Â·Â·Â·Â·Â· åœ¨ generateModule() ä¸­æŒ‡ç¤ºçš„ç©ºç™½ã€‚æˆ‘æ·»åŠ äº†ç©ºç™½ï¼Œä»¥ä½¿ç”Ÿæˆå™¨ç¬¦åˆæˆ‘ä»¬çš„æ ¼å¼è§„åˆ™ã€‚\nç¼ºç‚¹ï¼šä¼šä½¿ç”Ÿæˆç»“æœå˜å¾—æ··ä¹±ã€‚\né—®é¢˜ 2ï¼šè®¿é—®åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æ¯ä¸ªè¯­å¥çš„ç”Ÿæˆç‰‡æ®µåæ’å…¥æ¢è¡Œç¬¦ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»æ³¨æ„ for å¾ªç¯å‰åçš„æ¢è¡Œç¬¦ã€‚æœ€åï¼Œè¿˜æœ‰ \\n ä¸ \\r\\n çš„é—®é¢˜ã€‚\nè™½ç„¶è¿™ä¸ªé—®é¢˜åœ¨è¿™é‡Œå¾ˆç®€å•ï¼Œä½†å¦‚æœå‡ºç°æœ‰æ¡ä»¶é™„åŠ çš„ä»£ç æ®µæˆ–è€…è¿ç»­å¤šä¸ªå¾ªç¯ï¼Œå°±ä¼šå˜å¾—ç›¸å½“å›°éš¾ã€‚\né—®é¢˜ 3ï¼šgenerateModuleContent() ä¸­çš„å­—ç¬¦ä¸²è¿æ¥æ²¡æœ‰æ³¨æ„ generateModule() ä¸­è°ƒç”¨è¯¥å‡½æ•°ä¹‹å‰çš„ç¼©è¿›ã€‚\nç”Ÿæˆçš„ä»£ç å°†å¦‚ä¸‹æ‰€ç¤ºï¼Œå…·ä½“å–å†³äº generateStatement() çš„å®ç°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 Â·Â·Â·Â·Â·Â·Â·Â·\u0026#34;use strict\u0026#34;; Â·Â·Â·Â·Â·Â·Â·Â·(() =\u0026gt; { Â·Â·Â·Â·Â·Â·Â·Â· let lastComputableExpressionValue; const materialPerUnit = lastComputableExpressionValue = 100; const laborPerUnit = lastComputableExpressionValue = 200; . . . return lastComputableExpressionValue; Â·Â·Â·Â·Â·Â·Â·Â·}) .... è¿™ä¸ªç¤ºä¾‹å¾ˆå¥½åœ°è¯´æ˜äº†ç”Ÿæˆä»£ç ä¸­çš„ç¼©è¿›æ˜¯å¦‚ä½•å‡ºé”™çš„ã€‚å‘¨å›´çš„é™æ€ä»£ç ç¼©è¿›äº†ï¼Œä½†ä¸åº”è¯¥ç¼©è¿›ï¼Œè€Œæ‹¬å¼§ä¸­çš„è¯­å¥æ²¡æœ‰ç¼©è¿›ï¼Œä½†åº”è¯¥ç¼©è¿›ã€‚\nSolution A: Smart tagged templates Solution Aï¼šLangium æä¾›äº†ä¸€ä¸ªåä¸º expandToString çš„æ ‡ç­¾å‡½æ•°ï¼Œå¯æ™ºèƒ½å¤„ç†ç©ºç™½ã€‚\nåœ¨ generateModule(Module) ç¬¬ 2 è¡Œçš„å¼€å¤´å›è½¦ä¹‹å‰ç›´æ¥æ’å…¥ expandToString å¼•ç”¨ï¼Œå¯å°†åç»­æ¨¡æ¿è½¬æ¢ä¸ºæ ‡è®°æ¨¡æ¿ï¼Œè¯·å‚è§ generateModule2(Module)ï¼š\n1 2 3 4 5 6 7 8 9 10 import { expandToString } from \u0026#39;langium\u0026#39;; function generateModule2(root: Module): string { return expandToString` Â·Â·Â·Â·Â·Â·Â·Â·\u0026#34;use strict\u0026#34;; Â·Â·Â·Â·Â·Â·Â·Â·(() =\u0026gt; { Â·Â·Â·Â·Â·Â·Â·Â· ${generateModuleContent(root)} Â·Â·Â·Â·Â·Â·Â·Â·}) `; } è¿™æ ·å°±å¾—åˆ°äº†ä¸‹é¢çš„ç”Ÿæˆç»“æœï¼š\n1 2 3 4 5 6 7 8 9 10 11 \u0026#34;use strict\u0026#34;; (() =\u0026gt; { let lastComputableExpressionValue; const materialPerUnit = lastComputableExpressionValue = 100; const laborPerUnit = lastComputableExpressionValue = 200; . . . return lastComputableExpressionValue; }) expandToString å®ç°ä»¥ä¸‹è¿™äº›åŠŸèƒ½ï¼š\nåœ¨æ¨¡æ¿çš„æ‰€æœ‰éç©ºè¡Œä¸­è¯†åˆ«å’Œä¿®å‰ªå…±åŒçš„å‰å¯¼ç©ºæ ¼ ç¡®å®šç”¨ ${} åŒ…è£…çš„è¡¨è¾¾å¼çš„åç§»é‡ ä¿®å‰ª single leading and trailing line breaks åˆå¹¶æ¨¡æ¿å†…çš„æ¢è¡Œç¬¦ å› æ­¤ï¼Œ\nåŠŸèƒ½ 1 åˆ é™¤äº†ç”Ÿæˆæ¨¡å— 2(Module) ä¸­ç”± Â·Â·Â·Â·Â·Â·Â·Â· è¡¨ç¤ºçš„ç©ºç™½ï¼Œè¿™ä½¿å¾—é™æ€ä»£ç ä»åç§»é‡ 0 å¼€å§‹ï¼Œå³ç”Ÿæˆæ—¶æ²¡æœ‰ä»»ä½•ç¼©è¿›ã€‚ åŠŸèƒ½ 2 å°† ${generateModuleContent(root)} è¡Œå†…çš„é¢å¤–ç¼©è¿› (â£â£) åº”ç”¨åˆ°æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€è¡Œã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œè¿™å°†äº§ç”Ÿæ­£ç¡®ç¼©è¿›çš„è¯­å¥å®ç°ç‰‡æ®µï¼Œè€Œç¼©è¿›åªéœ€æŒ‡å®šä¸€æ¬¡ã€‚ åŠŸèƒ½ 3 ä¸¢å¼ƒäº†ç´§éšå¼€å¤´å›è½¦ç¬¦ä¹‹åçš„åˆå§‹æ¢è¡Œç¬¦ï¼Œä»¥åŠåŒ…æ‹¬ç»“å°¾å›è½¦ç¬¦ç¼©è¿›åœ¨å†…çš„å°¾éƒ¨æ¢è¡Œç¬¦ã€‚è¿™ä¸ç”Ÿæˆå™¨å…¥å£å‡½æ•°ï¼ˆå¦‚ generateModule2(Module)ï¼‰å…³ç³»ä¸å¤§ï¼Œä½†ä¸ä»å…¶ä»–æ ‡è®°æ¨¡æ¿ï¼ˆå¦‚ generateModuleContent(Module)ï¼‰ä¸­è°ƒç”¨çš„ç”Ÿæˆå™¨å‡½æ•°ï¼ˆå¦‚ generateModuleContent(Module)ï¼‰éå¸¸ç›¸å…³ï¼Œå› ä¸ºå‘¨å›´çš„æ¢è¡Œç¬¦å°†ç”±è°ƒç”¨æ¨¡æ¿å†³å®šã€‚æœ€åä½†å¹¶éæœ€ä¸é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œ åŠŸèƒ½ 4 ä½¿æ‰€æœ‰æ¢è¡Œç¬¦éƒ½ä¸ç³»ç»Ÿæ¢è¡Œç¬¦ä¸€è‡´ã€‚è¿™ä¸€ç‚¹éå¸¸å¯å–ï¼Œå› ä¸ºç”Ÿæˆçš„ä»£ç é€šå¸¸ä¼šè¢«æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼Œå¹¶å¸Œæœ›ä¸å¹³å°ä¿æŒä¸€è‡´ã€‚ ç°åœ¨ï¼Œè®©æˆ‘ä»¬å†æ¥çœ‹çœ‹ generateModuleContent(Module) æ¨¡å—ï¼š\n1 2 3 4 5 6 7 8 9 function generateModuleContent(module: Module): string { let result = `let ${lastComputableExpressionValueVarName};\\n`; for (const s of module.statements) { result += generateStatement(s) + \u0026#39;\\n\u0026#39;; } result += `\\n` result += `return ${lastComputableExpressionValueVarName};`; return result; } å°†å¾ªç¯é‡å†™ä¸º map;join è¡¨è¾¾å¼åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ ‡è®°æ¨¡æ¿å’Œ expandToString æ¥å®ç°å­—ç¬¦ä¸²è¿æ¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n1 2 3 4 5 6 7 8 function generateModuleContent2(module: Module): string { return expandToString` let ${lastComputableExpressionValueVarName}; ${ module.statements.map(generateStatement).join(\u0026#39;\\n\u0026#39;) } return ${lastComputableExpressionValueVarName}; `; } è¿æ¥æ“ä½œä¸­çš„åˆ†éš”ç¬¦ä¼šè¢«åŠŸèƒ½ 4 expandToString å¤„ç†ï¼Œå¦‚æœåœ¨ MS Windows æœºå™¨ä¸Šæ‰§è¡Œï¼Œå®ƒä¼šç”¨ \\r\\n æ›¿æ¢å•ä¸ª \\nã€‚\næˆ‘ä»¬ä¸Šé¢çš„ä»·æ ¼è®¡ç®—ç¤ºä¾‹çš„æ•´ä¸ªè¾“å‡ºç»“æœå¯èƒ½å¦‚ä¸‹ï¼Œæˆ‘åœ¨è¿™é‡Œè·³è¿‡äº†ç¼ºå¤±çš„ç”Ÿæˆå™¨éƒ¨åˆ†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 \u0026#34;use strict\u0026#34;; (() =\u0026gt; { let lastComputableExpressionValue; const materialPerUnit = lastComputableExpressionValue = 100; const laborPerUnit = lastComputableExpressionValue = 200; const expectedNoOfSales = lastComputableExpressionValue = 200; const costPerUnit = lastComputableExpressionValue = materialPerUnit + laborPerUnit; const costOfGoodsSold = lastComputableExpressionValue = expectedNoOfSales * costPerUnit; const generalExpensesAndSales = lastComputableExpressionValue = 10000; const desiredProfitPerUnit = lastComputableExpressionValue = 50; const netPrice = lastComputableExpressionValue = ((costOfGoodsSold + generalExpensesAndSales) / expectedNoOfSales) + desiredProfitPerUnit; const vat = lastComputableExpressionValue = 0.15; const calcGrossListPrice = (net, tax) =\u0026gt; net / (1 - tax); lastComputableExpressionValue = calcGrossListPrice( netPrice, vat ); return lastComputableExpressionValue; }) é™¤äº†æ™®é€šå…³é”®å­—ã€æ ‡è¯†ç¬¦å’Œè¿ç®—ç¬¦çš„è¿æ¥å¤–ï¼Œæˆ‘çš„ç”Ÿæˆå™¨è¿˜æ’å…¥äº†å…¸å‹çš„æ‹¬å·å¤åˆè¡¨è¾¾å¼ï¼Œæ¯”å¦‚åœ¨è®¡ç®— netPrice çš„å€¼æ—¶ã€‚æ­¤å¤–ï¼Œåƒ calcGrossListPrice è¿™æ ·çš„å‡½æ•°è°ƒç”¨ä¼šåœ¨å¤šè¡Œä¸­ç”Ÿæˆï¼Œä»è€Œä½¿å‚æ•°æ›´æ˜“äºé˜…è¯»ã€‚\nç»“è®ºï¼šå¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨ JavaScript æ¨¡æ¿è¡¨è¾¾å¼è€Œä¸æ˜¯æ™®é€šçš„å­—ç¬¦ä¸²è¿æ¥æ¥å®ç°ä»£ç ç”Ÿæˆå™¨ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è·å¾—æ­£ç¡®æ ¼å¼åŒ–çš„ç”Ÿæˆä»£ç ä»¥åŠæ­£ç¡®æ ¼å¼åŒ–çš„æ¨¡æ¿ï¼Œé‚£ä¹ˆ expandToString å°†ä¸ºæˆ‘ä»¬æä¾›æå¤§çš„å¸®åŠ©ã€‚\nå¤‡æ³¨ï¼šé‡è¦çš„æ˜¯è¦ä¿æŒæ¨¡æ¿è¡Œç¼©è¿›ä¸€è‡´ï¼Œç‰¹åˆ«æ˜¯ä¸è¦æ··åˆä½¿ç”¨åˆ¶è¡¨ç¬¦å’Œç©ºæ ¼ï¼VS ä»£ç æä¾›äº†ä¸€ä¸ªæ˜¾ç¤ºç©ºç™½å­—ç¬¦çš„ä¾¿æ·é€‰é¡¹ï¼Œåä¸º Toggle Render Whitespaceã€‚\nSolution B: two stage code generation è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæŸäº›è¡Œåæ²¡æœ‰æ·»åŠ å†…å®¹ï¼Œæ‚¨å¸Œæœ›è·³è¿‡è¿™äº›è¡Œçš„æ¢è¡Œç¬¦ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œæ‚¨éœ€è¦å¯¹ä»£ç ç‰‡æ®µçš„ç¼©è¿›è¿›è¡Œé…ç½®ï¼Œæˆ–è€…éœ€è¦å¯¹ç”Ÿæˆçš„ä»£ç è¿›è¡Œåå¤„ç†å’Œè°ƒæ•´ï¼Œä»¥æ»¡è¶³ç‰¹å®šæ¡ä»¶ã€‚åœ¨ç”Ÿæˆ Java æˆ– JavaScript ç­‰è¯­è¨€æ—¶ï¼Œå¯ä»¥è€ƒè™‘æ·»åŠ å¯¼å…¥å­å¥ï¼ŒåŒæ—¶åœ¨ä»£ç ä¸­æ·»åŠ ç¬¦å·å¼•ç”¨ã€‚ç”Ÿæˆä¸°å¯Œçš„è¡¨è¾¾å¼è¯­æ³•ä¹Ÿå¯èƒ½éœ€è¦æ¯”çº¯å­—ç¬¦ä¸²æ›´å¤šçš„æŠ½è±¡ã€‚æœ€åä½†å¹¶éæœ€ä¸é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›å°†ç”Ÿæˆçš„ä»£ç æ®µä¸å®ƒä»¬åœ¨æ–‡æœ¬ä¸­ä»£è¡¨çš„æºå®šä¹‰åŒºåŸŸå…³è”èµ·æ¥ã€‚è¿™æ ·çš„è¦æ±‚éœ€è¦ä¸€ç§ä¸åŒçš„æ–¹æ³•ã€‚\nåœ¨æœ¬éƒ¨åˆ†ä¸­ï¼Œå°†é‡ç‚¹ä»‹ç»ä¸¤é˜¶æ®µä»£ç ç”Ÿæˆæ–¹æ³•ï¼Œå¹¶å±•ç¤ºå¦‚ä½•å°†å…¶ä¸ Solution A ä¸­ä½¿ç”¨çš„ Tagged Templates æ•´åˆåœ¨ä¸€èµ·ã€‚\nGeneration tree è¦æ»¡è¶³ä¸Šè¿°è¦æ±‚ï¼Œä¸€ç§å¯è¡Œçš„æ–¹æ³•æ˜¯å°†ç”Ÿæˆä»»åŠ¡ä¸€åˆ†ä¸ºäºŒï¼Œå¹¶ä½¿ç”¨æ¯”å­—ç¬¦ä¸²æ›´å…·è¡¨ç°åŠ›çš„æ•°æ®ç»“æ„æ¥æ•è·ä¸­é—´ç»“æœã€‚ä»»åŠ¡ 1 å»ºç«‹å¾…ç”Ÿæˆä»£ç çš„æè¿°ï¼Œä»»åŠ¡ 2 åˆ™æ¸²æŸ“æ‰€éœ€çš„è¾“å‡ºç»“æœã€‚\nåœ¨æˆ‘ä»¬çš„æ—¥å¸¸å®è·µä¸­ï¼Œäº‹å®è¯æ˜æ ‘çŠ¶æ•°æ®ç»“æ„éå¸¸æœ‰ç”¨ã€‚æˆ‘ä»¬å®šä¹‰äº†ä»¥ä¸‹æ•°æ®ç±»å‹çš„è”ç›Ÿï¼Œå¹¶å°†å…¶ç§°ä¸º Generated ç±»å‹ï¼š\n1 2 type Generated = string | GeneratorNode | undefined; type GeneratorNode = CompositeGeneratorNode | IndentNode | NewLineNode; ç”Ÿæˆä»»åŠ¡ 1 çš„ç»“æœå¯èƒ½å·²ç»æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä¾‹å¦‚ï¼Œå¦‚æœç»“æœéå¸¸çŸ­ã€‚é€šå¸¸ï¼Œå®ƒçš„ç±»å‹æ˜¯ GeneratorNodeã€‚æ­¤å¤–ï¼Œå®ƒè¿˜å¯èƒ½æ˜¯ undefined çš„ã€‚è¿™åœ¨é¡¶å±‚æ²¡æœ‰å¤ªå¤§æ„ä¹‰ï¼Œä½†åœ¨å°†æ¨¡æ¿çš„éƒ¨åˆ†å†…å®¹è½¬ç§»åˆ°å­ä¾‹ç¨‹æ—¶å´éå¸¸æœ‰ç”¨ã€‚æœªå®šä¹‰çš„å¯èƒ½ç»“æœå…è®¸è¿™äº›å‡½æ•°å‘å…¶è°ƒç”¨è€…å‘å‡ºä¿¡å·ï¼Œè¡¨æ˜è¯¥å‡½æ•°ä¸ä¼šç”Ÿæˆä»»ä½•ä¸œè¥¿ï¼Œè¿™ä¸ç©ºå­—ç¬¦ä¸²ç­‰å…¶ä»–ä¸œè¥¿ä¸åŒã€‚\nCompositeGeneratorNode å®ç°äº†å¤åˆè®¾è®¡æ¨¡å¼ã€‚è¯¥ç±»å‹çš„å®ä¾‹æ˜¯å®¹å™¨ï¼Œå¯å®¹çº³ä¸€ç³»åˆ—å…¶ä»–å­—ç¬¦ä¸²å’Œç”Ÿæˆå™¨èŠ‚ç‚¹ã€‚IndentNode æ˜¯ CompositeGeneratorNode çš„ç‰¹åŒ–ï¼Œæä¾›ç¼©è¿›ä¿¡æ¯ã€‚NewLineNode çš„å®ä¾‹ç”¨äºæè¿°æ¢è¡Œï¼Œå®ƒä»¬çš„ä¸¥æ ¼ç¨‹åº¦æ˜¯å¯å‚æ•°åŒ–çš„ã€‚\nåœ¨æ—©æœŸçš„ Langium ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä»¥ç¼–ç¨‹æ–¹å¼åˆæˆç”Ÿæˆå™¨æè¿°æ¥æ„å»ºä»£ç ç”Ÿæˆå™¨ï¼Œä¾‹å¦‚ Langium CLI ä¸­åŒ…å«çš„æè¿°ã€‚è¿™æ ·ä¸€æ¥ï¼Œä»£ç ç”Ÿæˆå™¨çš„å®ç°å°±ä¼šè¢«å¤§é‡çš„ node.append(...) æˆ– node.children.push(...) æŒ‡ä»¤æ‰€æ”¯é…ï¼Œè€Œæ‰€éœ€ç”Ÿæˆçš„ä»£ç ç»“æ„å¾ˆå¿«å°±ä¼šè¢«æ··æ·†ã€‚\né€šè¿‡ tagged templates åœ¨ Langium v1.0 ä¸­ï¼Œå‘å¸ƒäº†å¦ä¸€ä¸ªåä¸º expandToNode çš„æ ‡ç­¾å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆ Bã€‚è¯·å›é¡¾ç®—æœ¯è¯­è¨€ç¤ºä¾‹ä¸­çš„ generateModule2 ç¤ºä¾‹ï¼š\n1 2 3 4 5 6 7 8 function generateModule2(root: Module): string { return expandToString` Â·Â·Â·Â·Â·Â·Â·Â·\u0026#34;use strict\u0026#34;; Â·Â·Â·Â·Â·Â·Â·Â·(() =\u0026gt; { Â·Â·Â·Â·Â·Â·Â·Â· ${generateModuleContent(root)} Â·Â·Â·Â·Â·Â·Â·Â·}) `; } å°†æ ‡ç­¾å‡½æ•°æ›¿æ¢ä¸º expandToNode å¹¶å°†è¿”å›ç±»å‹æ›´æ”¹ä¸º Generatedï¼Œå°±å¯ä»¥è½»æ¾å°†å…¶è½¬æ¢ä¸ºä¸¤é˜¶æ®µç”Ÿæˆã€‚\n1 2 3 4 5 6 7 8 function generateModule3(root: Module): Generated { return expandToNode` Â·Â·Â·Â·Â·Â·Â·Â·\u0026#34;use strict\u0026#34;; Â·Â·Â·Â·Â·Â·Â·Â·(() =\u0026gt; { Â·Â·Â·Â·Â·Â·Â·Â· ${generateModuleContent2(root)} Â·Â·Â·Â·Â·Â·Â·Â·}) `; } ä¸ expandToString ä¸€æ ·ï¼Œæ¨¡æ¿ä¸­ä¼šè‡ªåŠ¨åˆ é™¤ Â·Â·Â·Â·Â·Â·Â·Â· æ‰€æŒ‡ç¤ºçš„ç¼©è¿›ã€‚æ­¤å¤–ï¼Œè¿˜çœç•¥äº†å¼€å¤´ \\n åçš„åˆå§‹æ¢è¡Œï¼Œä»¥åŠç»“å°¾ \\n å‰çš„æ¢è¡Œå’Œéšåçš„ç©ºç™½ã€‚\nç„¶åï¼Œå¿…é¡»å°† generateModule3(Module) çš„ç»“æœè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œè¿™å°±æ˜¯æˆ‘ä¸Šæ–‡æåˆ°çš„ç”Ÿæˆä»»åŠ¡ 2ã€‚ä¸ºæ­¤ï¼ŒLangium æä¾›äº†åä¸º toString(unknown) çš„å‡½æ•°ã€‚å¦‚æœè°ƒç”¨ toString æ—¶ä½¿ç”¨äº† GeneratorNode ç±»å‹çš„å‚æ•°ï¼Œå®ƒå°±ä¼šå°†è¯¥å‚æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¦åˆ™å°±ä¼šå§”æ‰˜ JavaScript çš„é»˜è®¤å­—ç¬¦ä¸²æ„é€ å‡½æ•°æ¥å¤„ç†ã€‚\nç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹ generateModuleContent2(Module) çš„å®ç°ï¼Œè¿™ä¹Ÿæ˜¯ä¸Šæ¬¡çš„å†…å®¹ï¼š\n1 2 3 4 5 6 7 8 function generateModuleContent2(module: Module): string { return expandToString` let ${lastComputableExpressionValueVarName}; ${ module.statements.map(generateStatement).join(\u0026#39;\\n\u0026#39;) } return ${lastComputableExpressionValueVarName}; `; } åŒæ ·ï¼Œæˆ‘æ›¿æ¢äº†ä¸Šé¢çš„æ ‡è®°å‡½æ•°å’Œè¿”å›ç±»å‹ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¹¶ä¸æƒ³ç«‹å³å°†è¯­å¥å…ƒç´ çš„ç”Ÿæˆç»“æœè¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ç›¸åï¼Œæˆ‘ä»¬æƒ³ä¸ºæ¯ä¸ªå…ƒç´ åˆ›å»ºç”Ÿæˆæè¿°ï¼Œå¹¶å°†å…¶åŒ…å«åœ¨è¯¥æ¨¡æ¿çš„ç»“æœä¸­ã€‚ä¸ºæ­¤ï¼ŒLangium æä¾›äº† joinToNode() å‡½æ•°ã€‚è¯¥å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•å°†åœ¨ generateModuleContent3(Module) ä¸­è¿›è¡Œè¯´æ˜ï¼š\n1 2 3 4 5 6 7 8 function generateModuleContent3(module: Module): Generated { return expandToNode` let ${lastComputableExpressionValueVarName}; ${ joinToNode(module.statements, generateStatement, { appendNewLineIfNotEmpty: true }) } return ${lastComputableExpressionValueVarName}; `; } joinToNode çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªè¦è®¿é—®çš„å…ƒç´ é›†åˆã€ä¸€ä¸ªä¸ºæ¯ä¸ªå…ƒç´ åˆ›å»ºç”Ÿæˆæè¿°çš„å‡½æ•°ï¼Œä»¥åŠä¸€ä¸ªå¯é€‰çš„é…ç½®å¯¹è±¡ï¼Œç”¨äºç¡®å®šåˆ†éš”ç¬¦æˆ–æ³¨å†Œå…¶ä»–å›è°ƒï¼ˆå¦‚ element filter å’Œ prefix/suffix æä¾›ç¨‹åºï¼‰ã€‚å¦‚æœè¾“å…¥é›†åˆä¸ºç©ºï¼Œæˆ–è€…æ‰€æœ‰å…ƒç´ éƒ½æ²¡æœ‰ç”Ÿæˆï¼ŒjoinToNode ä¹Ÿä¸ä¼šè¿”å›ä»»ä½•ç»“æœï¼Œå®é™…ä¸Šç”¨ undefined æ¥è¡¨ç¤ºã€‚\nä¸ºä»€ä¹ˆè¦åŒºåˆ† undefined ï¼Ÿ tl;drï¼šexpandToNode å¯ä»¥å°†æ¢è¡Œç¬¦é…ç½®ä¸ºå¯çœç•¥ã€‚å¦‚æœæŸè¡Œçš„æœ€åä¸€ä¸ªæ›¿æ¢æ˜¯æœªå®šä¹‰çš„æˆ– GeneratorNode ç±»å‹çš„å¯¹è±¡ï¼Œå®ƒå°±ä¼šè¿™æ ·åšã€‚å¦‚æœè¯¥è¡Œçš„å‰©ä½™éƒ¨åˆ†åªåŒ…å«ç©ºç™½å­—ç¬¦ï¼Œåˆ™æ•´è¡Œå°†è¢«çœç•¥ï¼ŒåŒæ—¶å‘ˆç°æ‰€éœ€çš„è¾“å‡ºç»“æœã€‚\n1 2 3 let lastComputableExpressionValueVarName return lastComputableExpressionValueVarName; è°ƒç”¨ joinToNode(\u0026hellip;) æ²¡æœ‰ä»»ä½•ç»“æœã€‚ä¸è¿‡ï¼Œå®ƒçš„å°¾éƒ¨æ¢è¡Œç¬¦ä¼šè¢«é™„åŠ åˆ°ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œå¹¶äº§ç”Ÿç¬¬ä¸€ä¸ªç©ºè¡Œã€‚ç„¶åï¼Œæˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­è¯·æ±‚çš„ç©ºè¡Œä¹Ÿä¼šè¢«é™„åŠ åˆ°ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œè¿™æ ·å°±è¿ç»­ç”Ÿæˆäº†ä¸¤è¡Œç©ºè¡Œã€‚ä¸è¿‡ï¼Œæˆ‘ä¸ªäººï¼ˆä¹Ÿè®¸ä½ ä¹Ÿä¸€æ ·ï¼‰æ›´å€¾å‘äºçœç•¥åŒ…å« joinToNode(\u0026hellip;) è°ƒç”¨çš„æ•´è¡Œï¼Œå³å¿½ç•¥æ›¿æ¢åçš„æ¢è¡Œã€‚ä¸ºäº†å®ç°è¿™ä¸€é¦–é€‰è¡Œä¸ºï¼ŒexpandToNode ä¼šæ£€æŸ¥æ¯ä¸€è¡Œæ˜¯å¦æœ‰å ä½ç¬¦/æ›¿æ¢ã€‚å¦‚æœåŒ…å«æ›¿æ¢ï¼Œåˆ™æŒ‰ä»¥ä¸‹æ–¹å¼è¯„ä¼°æœ€åä¸€ä¸ªæ›¿æ¢çš„å€¼ï¼š\nå¦‚æœæ›¿æ¢å€¼æœªå®šä¹‰æˆ–å±äº GeneratorNode ç±»å‹ï¼Œåˆ™é…ç½®è¯¥è¡Œçš„ç»ˆç«¯ NewLineNodeï¼Œä½¿å…¶ä»…åœ¨å‰ä¸€è¡Œä¸ºéç©ºæ—¶æ‰æ˜¾ç¤ºä¸ºæ¢è¡Œç¬¦ã€‚å¦åˆ™ï¼Œé…ç½® NewLineNode ä¸ºæ— æ¡ä»¶æ¢è¡Œã€‚\nåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒgenerateModuleContent3(Module) çš„è¯­å¥åˆ—è¡¨ä¸ºç©ºï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å°†åœ¨ç¬¬ 1 è¡Œæœ«å°¾å¾—åˆ°ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œå› ä¸ºè¯¥è¡Œè‡³å°‘åŒ…å«é™æ€å­—ç¬¦ä¸² letï¼Œå³éç©ºå­—ç¬¦ä¸²ã€‚å‡†ç¡®åœ°è¯´ï¼Œæ— è®ºå…¶é…ç½®å¦‚ä½•ï¼Œæ·»åŠ åˆ°ç”Ÿæˆæè¿°ä¸­çš„ NewLineNode éƒ½ä¼šå¯¼è‡´æ¢è¡Œã€‚ç¬¬ 2 è¡Œçš„å ä½ç¬¦å°†è§£æä¸º undefined çš„ \u0026ldquo;å€¼\u0026rdquo;ã€‚å› æ­¤ï¼Œéšåä»£è¡¨ç¬¬ 2 è¡Œæœ«å°¾æ¢è¡Œç¬¦çš„ NewLineNode å°†è¢«æ ‡è®°ä¸º ifNotEmptyï¼Œå¦‚ä¸Šæ‰€è¿°ã€‚åœ¨ç¨åçš„å­—ç¬¦ä¸²å‘ˆç°è¿‡ç¨‹ä¸­ï¼ˆä»»åŠ¡ 2ï¼‰ï¼Œç¬¬ 2 è¡Œå°†è¢«è¯„ä¼°ä¸ºç©ºï¼Œä»è€Œä½¿ç»“æŸç¬¦ NewLineNode å‘ˆç°ä¸ºç©ºã€‚\nç¬¬ 3 è¡Œä»…åŒ…å«ä¸€ä¸ªæ¢è¡Œç¬¦ï¼ˆä¸åŒ…å«ä»»ä½•æ›¿æ¢ï¼‰ï¼Œå¹¶å¯¼è‡´åœ¨ç”Ÿæˆæè¿°ä¸­æ— æ¡ä»¶æ·»åŠ ä¸€ä¸ª NewLineNodeã€‚ç¬¬ 4 è¡Œè¦æ±‚åœ¨ç”Ÿæˆè¯´æ˜ä¸­æ·»åŠ  return- ä»¥åŠ lastComputableExpressionValueVarName å†…å®¹çš„å­—ç¬¦ä¸²å€¼ã€‚ç”±äºæ¨¡æ¿å°†åœ¨ä¸‹ä¸€è¡Œå…³é—­ï¼Œå› æ­¤ç»“æŸç¬¦å°†è¢«å¿½ç•¥ã€‚\nè¿™ç§æ–¹æ³•è¿˜å…è®¸å¯¹ä»…åŒ…å«ç©ºç™½å’Œå¯èƒ½å¯¼è‡´ undefined çš„æ›¿æ¢çš„è¡Œå¼ºåˆ¶æ‰§è¡Œæ— æ¡ä»¶æ¢è¡Œã€‚åªéœ€å°† ??'' åˆ°ï¼ˆæœ€åä¸€ä¸ªï¼‰æ›¿æ¢å†…å®¹ä¸­ï¼Œæˆ–è€…åœ¨è¡Œå°¾å†æ·»åŠ ä¸€ä¸ªç±»ä¼¼ ${''} çš„æ›¿æ¢ã€‚expandToNode å°±ä¼šæ’å…¥ä¸€ä¸ªæ— æ¡ä»¶çš„ NewLineNodeã€‚é¡ºä¾¿è¯´ä¸€ä¸‹ï¼šåä¸€ä¸ªé€‰é¡¹ä¹Ÿé€‚ç”¨äºåŒ…å«å¯èƒ½ä¸ºç©ºçš„ CompositeGeneratorNodes çš„æ›¿æ¢ã€‚\nBenefits å‡½æ•° expandToNode è¿”å› CompositeGeneratorNode çš„ä¸€ä¸ªå®ä¾‹ï¼Œä»£è¡¨æŸæ®µæ–‡æœ¬çš„ç”Ÿæˆæè¿°ã€‚æ­¤ç±»å¯¹è±¡å¯ä»»æ„ç»„åˆï¼Œä¹Ÿå¯éšæ„æ“ä½œã€‚å…ƒç´ å¯ä»¥æ·»åŠ ã€åˆ é™¤æˆ–æ”¹å˜é¡ºåºã€‚æ­¤å¤–ï¼Œç”±äºå¤åˆç”Ÿæˆå™¨èŠ‚ç‚¹ï¼ˆCompositeGeneratorNodeï¼‰æ‰€æè¿°çš„æŸäº›æ–‡æœ¬ç‰‡æ®µçš„å…·ä½“ç¼©è¿›æœ€ç»ˆæ˜¯åœ¨å…¶è·¨å®¹å™¨ï¼ˆä»»åŠ¡ 2ï¼‰çš„æ–‡æœ¬æ¸²æŸ“æ—¶ç¡®å®šçš„ï¼Œå› æ­¤çˆ¶èŠ‚ç‚¹å’ŒæŸäº›å­èŠ‚ç‚¹çš„åˆ›å»ºå’Œç»„åˆå¯èƒ½å®Œå…¨ç‹¬ç«‹äºå½¼æ­¤ã€‚ä¸€ä¸ªå­èŠ‚ç‚¹ç”šè‡³å¯èƒ½åŒ…å«åœ¨åŒä¸€ç”Ÿæˆæè¿°ä¸­ä¸åŒç¼©è¿›çº§åˆ«çš„ä¸åŒä½ç½®ã€‚æ­¤å¤–ï¼Œåœ¨è¦è¿æ¥çš„å­—ç¬¦ä¸²æ¨¡æ¿æˆ–è¡¨è¾¾å¼ä¸­ï¼Œä¸å†éœ€è¦ç¡¬ç¼–ç çš„æ¢è¡Œç¬¦ã€‚\næ­¤å¤–ï¼Œç”Ÿæˆå™¨å®ç°å¯ä»¥åœ¨åŸºäºæ ‡è®°æ¨¡æ¿çš„å®ç°é£æ ¼å’ŒåŸºäºæ™®é€šæ–¹æ³•è°ƒç”¨çš„é£æ ¼ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œè¿™å–å†³äºå“ªç§é£æ ¼æœ€é€‚åˆã€‚ç”±äº CompositeGeneratorNode å®šä¹‰äº†æ›´å¤šçš„æ–¹ä¾¿æ–¹æ³•ï¼Œå› æ­¤è¿™ä¸¤è€…ä¹‹é—´çš„ç•Œé™å¹¶ä¸æ˜æ˜¾ã€‚ä¸‹é¢å°†æåˆ°å…¶ä¸­ä¸€äº›æ–¹æ³•ï¼Œæœ‰å…³å®ƒä»¬çš„ç²¾ç¡®å®šä¹‰ï¼Œè¯·å‚é˜… Langium ä»£ç åº“ï¼š\nappend(\u0026hellip;Generated[]) appendNewLine() appendNewLineIfNotEmpty() appendIf(boolean, \u0026hellip;Generated[]) appendTemplate\u0026lt;template content\u0026gt; appendTemplateIf(boolean)\u0026lt;template content\u0026gt; indent(Generated[]) â€¦ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ç§æ–¹å¼å¯èƒ½æ›´å¥½ã€‚\n1 2 3 4 5 6 7 8 9 10 11 function generateModuleContent3(module: Module): Generated { return expandToNode` let ${lastComputableExpressionValueVarName}; `.appendNewLine() .appendIf(module.statements.length !== 0, joinToNode(module.statements, generateStatement, { appendNewLineIfNotEmpty: true }) ).appendTemplate` return ${lastComputableExpressionValueVarName}; `; } The avigation between DSL source and generated code åœ¨ Solution A å’Œ Solution B ä¸­ï¼Œå·²ç»ä½¿ TypeScript å’Œ JavaScript ä¸­çš„ä»£ç ç”Ÿæˆå˜å¾—ç®€å•ä¸”å¯æ‰©å±•ï¼Œç°åœ¨æ˜¯æ—¶å€™æ¥è®¨è®ºä¸€äº›å®é™…é—®é¢˜äº†ï¼Œå³å¦‚ä½•å¤„ç†ç”Ÿæˆçš„ä»£ç ï¼Œè€Œä¸æ˜¯çº¯ç²¹çš„å­—ç¬¦ä¸²æ®µè¿æ¥ã€‚\nè¿™åŒ…æ‹¬åœ¨é›†æˆå¼€å‘ç¯å¢ƒä¸­å¯¼èˆªç”Ÿæˆçš„å·¥ä»¶åŠå…¶ç›¸åº”çš„æºä»£ç ï¼ˆä¾‹å¦‚ï¼Œç”¨äºæ‰‹åŠ¨å®¡æŸ¥ï¼‰ï¼Œä»¥åŠåœ¨è°ƒè¯•ç”Ÿæˆçš„ä»£ç æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°åŸºäº DSL çš„æºä»£ç ã€‚ä¸ºäº†åœ¨åŸºäº DSL çš„å¼€å‘å·¥å…·ä¸­å¯ç”¨è¿™äº›åŠŸèƒ½ï¼Œä»£ç ç”Ÿæˆå™¨éœ€è¦æ”¶é›†æ•°æ®ï¼Œäº†è§£å“ªäº›æºå®šä¹‰ç”Ÿæˆäº†å“ªäº›ä»£ç ã€‚\nç”¨ä¸‹é¢çš„æˆªå›¾æ¥è¯´æ˜ DSL æºä»£ç å’Œç”Ÿæˆä»£ç ä¹‹é—´çš„æ¥å›å¯¼èˆªã€‚DSL å·¥å…·çš„ç”¨æˆ·å¯èƒ½æƒ³äº†è§£ä»£ç ç”Ÿæˆå™¨ä¸ºæŸä¸ªä¸“ç”¨è¯­å¥ç”Ÿæˆäº†ä»€ä¹ˆä»£ç ã€‚DSL å¼€å‘å·¥å…·å¯èƒ½ä¼šæä¾›è¿™æ ·çš„å®¡æŸ¥å·¥å…·ï¼Œä¾‹å¦‚é€šè¿‡é€‰æ‹©æ•æ„Ÿçš„ä¸Šä¸‹æ–‡èœå•é¡¹ï¼Œå¦‚ç¬¬ä¸€å¼ æˆªå›¾æ‰€ç¤ºã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œå…¶ä»–é›†æˆï¼šåœ¨ç”Ÿæˆçš„å·¥ä»¶ä¸­ï¼Œå¯èƒ½æœ‰å¤šä¸ªåœ°æ–¹ä¼šå—åˆ°æŸä¸ªè¯­å¥æˆ–å®šä¹‰çš„å½±å“ã€‚\nå¦ä¸€æ–¹é¢ï¼Œç”¨æˆ·å¯èƒ½å¸Œæœ›æˆ–éœ€è¦è°ƒæŸ¥ä¸ºä»€ä¹ˆç”Ÿæˆå™¨ä¼šå°†æŸäº›è¯­å¥æ”¾å…¥ç”Ÿæˆçš„å·¥ä»¶ä¸­ï¼Œå³æºä»£ç ä¸­çš„å“ªäº›å®šä¹‰ã€‚å¦‚ç¬¬äºŒå¼ æˆªå›¾æ‰€ç¤ºï¼Œå¦‚æœæœ‰æœºä¼šè®©å¼€å‘å·¥å…·è¯´æ˜ç”Ÿæˆä»£ç ä¸­æŸäº›è¯­å¥çš„åŸå› æˆ–æ¥æºï¼Œå¯èƒ½ä¼šç®€åŒ–æ­¤ç±»ä»»åŠ¡ã€‚\né™¤äº†è¿™ç±»é™æ€ä»£ç åˆ†æå¤–ï¼Œè¿˜å¸Œæœ›è¿è¡Œç”Ÿæˆçš„ä»£ç ï¼Œåœ¨æŸä¸ªå…¥å£ç‚¹è®¾ç½®æ–­ç‚¹ï¼Œå¹¶é€šè¿‡é€æ­¥æµè§ˆ DSL ç¼–å†™çš„æºä»£ç æ¥é€æ­¥å®ç°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\nåœ¨è¿™é‡Œï¼Œä¸€ä¸ªè£…æœ‰ Langium Arithmetics ç¤ºä¾‹è¯­è¨€çš„ Monaco editor è¢«æ·»åŠ åˆ°äº†ä¸€ä¸ªæ™®é€šç½‘ç«™ä¸Šï¼Œå¹¶è¾“å…¥äº†åœ¨ Solution A ä¸­ä»‹ç»çš„æ­£åœ¨è¿è¡Œçš„ç¤ºä¾‹è„šæœ¬ã€‚åŸºäº Langium çš„è¯­è¨€æœåŠ¡å™¨å·²ç»å¤„ç†äº†è¾“å…¥ï¼Œç¡®å®šæ²¡æœ‰éªŒè¯é”™è¯¯ï¼Œå¹¶è°ƒç”¨äº†ç”Ÿæˆå™¨ã€‚ç„¶åå¯¹è·å¾—çš„ JavaScript ä»£ç å’Œç›¸åº”çš„æºæ˜ å°„è¿›è¡Œè¯„ä¼°ã€‚æºæ˜ å°„æ˜¯æ ¹æ® JavaScript ä»£ç ç”Ÿæˆè¿‡ç¨‹ä¸­æ•è·çš„è·Ÿè¸ªæ•°æ®åˆ›å»ºçš„ã€‚\nè·å–è¿½è¸ªæ•°æ® ä¸ºäº†å®ç°ä¸Šè¿°åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦æ•è·è·Ÿè¸ªæ•°æ®ï¼Œå°†æºæ•°æ®ä¸­çš„ç›¸å…³æ–‡æœ¬åŒºåŸŸä¸ generated artifacts ä¸­çš„ç›¸åº”æ–‡æœ¬åŒºåŸŸå…³è”èµ·æ¥ã€‚åœ¨æ­¤ï¼Œæˆ‘ä»¬å‡å®šæºæ•°æ®æ˜¯ä»¥äººç±»å¯è¯»æ–‡æœ¬çš„å½¢å¼ï¼ˆé€šå¸¸æ˜¯æ ¹æ®æŸç§ DSLï¼‰ç¼–åˆ¶çš„ï¼Œå¹¶ä¿å­˜åœ¨ disc ä¸Šçš„æ–‡ä»¶ä¸­ï¼ˆè‡³å°‘ä¸æŸä¸ª URI ç›¸å…³è”ï¼‰ï¼Œè€Œ generated artifacts åˆ™å‡å®šç”± a stream of characters ç»„æˆã€‚\nå›é¡¾æœ¬ç³»åˆ—çš„ç¬¬äºŒéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†ä»£ç ç”Ÿæˆä»»åŠ¡åˆ†ä¸ºä¸¤é¡¹ï¼š\nthe composition of a generation description the rendering of the description into the desired text å¼•å…¥äº†ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„æ¥æ•è·æè¿°ï¼Œå®ƒç”±å‡ ç§ä¸åŒçš„æ•°æ®ç±»å‹ç»„æˆï¼Œè¿™äº›æ•°æ®ç±»å‹éƒ½å½’å±äºè”åˆç±»å‹ GeneratorNodeã€‚æ—¢ç„¶å·²ç»å¼•å…¥äº†è¿™æ ·ä¸€ç§ä¸“ç”¨æ•°æ®ç»“æ„ï¼Œå°±å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½ä¸ºè¿™äº›æ•°æ®æ·»åŠ é¢å¤–çš„ä¿¡æ¯ã€‚è¿˜è®°å¾—ä¸Šæ¬¡çš„æ¨¡æ¿æ ‡ç­¾å‡½æ•° expandToNodeï¼Œå®ƒåœ¨ä»»åŠ¡ï¼ˆ1ï¼‰ä¸­ä¸ºç»™å®šçš„ JavaScript æ¨¡æ¿æ–‡å­—å»ºç«‹äº† GeneratorNode å®ä¾‹ï¼Œä»¥åŠç”Ÿæˆå™¨å‡½æ•° generateModuleContent3(Module)ï¼š\n1 2 3 4 5 6 7 8 function generateModuleContent3(module: Module): Generated { return expandToNode` let ${lastComputableExpressionValueVarName}; ${ joinToNode(module.statements, generateStatement, { appendNewLineIfNotEmpty: true }) } return ${lastComputableExpressionValueVarName}; `; } æ— è®ºæ‰€æä¾›çš„æ¨¡å—ä¸­å®šä¹‰äº†å“ªäº›è¯­å¥ï¼Œæ‰€åŒ…å«çš„æ¨¡æ¿éƒ½ä¼šç”Ÿæˆé™æ€ä»£ç ï¼Œè€Œç”Ÿæˆçš„è¾“å‡ºåˆ™ä»£è¡¨æ¨¡å—æ‰€åŒ…å«çš„è¯­å¥ã€‚è¿™äº›è¯­å¥çš„ç”Ÿæˆç”±å‡½æ•° generateStatement(Statement) å®Œæˆï¼Œè¯¥å‡½æ•°æä¾›ç»™ç¬¬ 4 è¡Œçš„ joinToNode(\u0026hellip;) è°ƒç”¨ã€‚å› æ­¤ï¼Œæ¨¡æ¿ç¬¬ 3 è¡Œã€ç¬¬ 5 è¡Œå’Œç¬¬ 6 è¡Œçš„å†…å®¹åªèƒ½ä¸ module ç›¸å…³è”ï¼Œå› ä¸ºè¿™æ˜¯å®ƒä»¬è¢«æ·»åŠ åˆ°è¾“å‡ºä¸­çš„åŸå› ã€‚ä¸æ­¤ç›¸åï¼ŒgenerateStatement(Statement) äº§ç”Ÿçš„è¾“å‡ºå¯ä»¥ä¸ module å…³è”ï¼Œå› ä¸ºè¿™äº›è¯­å¥åŒ…å«åœ¨ module ä¸­ï¼Œä½†æ›´å…·ä½“åœ°è¯´ï¼Œå®ƒä»¬åº”è¯¥ä¸ module.statements ä¸­åŒ…å«çš„ç›¸åº” Statement å®ä¾‹å…³è”ã€‚ä¸ºäº†å®ç°è¿™ä¸¤ä¸ªç›®çš„ï¼ŒLangium æä¾›äº†ä»¥ä¸‹å‡½æ•°ï¼š\nexpandTracedToNode\u0026lt;T extends AstNode\u0026gt;(T, Properties\u0026lt;T\u0026gt;?, number?) joinTracedToNode\u0026lt;T extends AstNode\u0026gt;(T, Properties\u0026lt;T\u0026gt;?) æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›å‡½æ•°æ•è·æ‰€éœ€çš„è·Ÿè¸ªæ•°æ®ï¼Œå¹¶é‡å†™ generateModuleContent3 å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 function generateModuleContent4(module: Module): Generated { return expandTracedToNode(module)` let ${lastComputableExpressionValueVarName}; ${ joinTracedToNode(module, \u0026#39;statements\u0026#39;)(module.statements, generateStatement, { appendNewLineIfNotEmpty: true }) } return ${lastComputableExpressionValueVarName}; `; } è¯·æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šå†æ¬¡è¿”å›å‡½æ•°ã€‚è¿”å›å‡½æ•°çš„ç­¾åä¸ expandToNode å’Œ joinToNode çš„ç­¾åå®Œå…¨ä¸€è‡´ã€‚å› æ­¤ï¼ŒexpandTracedToNode(module) çš„ç»“æœæ˜¯ä¸€ä¸ªå°†æ¨¡æ¿å­—é¢æ„ä¹‰è½¬æ¢ä¸ºæ ‡è®°æ¨¡æ¿çš„æ ‡è®°å‡½æ•°ã€‚å®ƒåœ¨å†…éƒ¨å§”æ‰˜ç»™ expandToNodeï¼Œå¹¶åœ¨ç»„æˆçš„ GeneratorNode ä¸­æ³¨é‡Šäº†æ¨¡å—æ˜¯ç›¸åº”æºå¯¹è±¡çš„ä¿¡æ¯ã€‚\nåŒæ ·çš„åŸç†ä¹Ÿé€‚ç”¨äº joinTracedToNode(æ¨¡å—, \u0026lsquo;è¯­å¥\u0026rsquo;)ã€‚å®ƒè¿”å›ä¸€ä¸ªä¸ joinToNode(\u0026hellip;) æ¥å£ç›¸åŒçš„å‡½æ•°ã€‚ç¬¬ 4 è¡Œä¸­å¯¹ generateModuleContent4(Module) çš„è°ƒç”¨æ˜¯æŒ‡ï¼šå¯¹ module.statements ä¸­çš„æ¯ä¸ªå…ƒç´ åº”ç”¨ generateStatement(Statement)ï¼Œä¸ºç”Ÿæˆçš„æ¯ä¸ª GeneratorNode æ³¨é‡Šè·Ÿè¸ªä¿¡æ¯ï¼Œè¯´æ˜ç”Ÿæˆçš„éƒ¨åˆ†ä»£è¡¨çˆ¶å¯¹è±¡æ¨¡å—ä¸­åä¸º statements çš„å±æ€§ï¼ˆé›†åˆï¼‰çš„ç¬¬ i ä¸ªå…ƒç´ ï¼Œå°†æ‰€æœ‰è¿™äº›ç”Ÿæˆå™¨èŠ‚ç‚¹æ·»åŠ åˆ°ä¸€ä¸ªå®¹å™¨ GeneratorNode ä¸­ï¼Œå¹¶ä¸ºè¯¥å®¹å™¨æ³¨é‡Šä¿¡æ¯ï¼Œè¯´æ˜ç”Ÿæˆçš„éƒ¨åˆ†ä»£è¡¨æºå¯¹è±¡æ¨¡å—ä¸­ statements å±æ€§çš„å…¨éƒ¨å†…å®¹ã€‚\nè¿½è¸ªæ•°æ®å‰–æ Langium ä¼šåœ¨ç”Ÿæˆä»»åŠ¡ï¼ˆ2ï¼‰ä¸­å¯¹è·Ÿè¸ªæ•°æ®è¿›è¡Œè¯„ä¼°å’Œè®¡ç®—ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡½æ•° toStringAndTrace(GeneratorNode) å°†å–ä»£ Langium çš„ toString(unknown)ã€‚å®ƒè¿”å›ä¸€ä¸ªå½¢çŠ¶ä¸º { text: string, traceï¼štraceRegion }ï¼Œå…¶ä¸­ text æ˜¯å¸Œæœ›ç”Ÿæˆçš„æ–‡æœ¬ï¼Œtrace æ˜¯æè¿°åµŒå¥—è·Ÿè¸ªåŒºåŸŸçš„å¤åˆç»“æ„ï¼Œå°†ç”Ÿæˆæ–‡æœ¬ä¸­çš„åŒºåŸŸä¸æºæ–‡ä»¶ä¸­çš„åŒºåŸŸå…³è”èµ·æ¥ã€‚æ•°æ®ç±»å‹ TraceRegion çš„å®šä¹‰å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 interface TraceRegion { sourceRegion?: TextRegion; targetRegion: TextRegion; children?: TraceRegion[]; } interface TextRegion { fileURI?: string; offset: number; end: number; length?: number; range?: Range; } å‡å®šæºæ•°æ®æ˜¯ Langium é€šè¿‡è§£æ DSL è¯­æ³•è¡¨è¿°çš„æ–‡æœ¬è€Œåˆ›å»ºçš„æœ‰æ•ˆ AST å…ƒç´ ï¼ŒAstNode å®ä¾‹å°±ä¼šè¢«æ³¨é‡Šä¸ºä»£è¡¨ç›¸åº”å…·ä½“è¯­æ³•èŠ‚ç‚¹çš„å¯¹è±¡ã€‚åè€…åè¿‡æ¥åˆæä¾›äº†å…¶ DSL æ–‡æ¡£ä¸­çš„èµ·å§‹å’Œç»“æŸä½ç½®ä»¥åŠæ–‡æ¡£çš„æ–‡ä»¶ URIã€‚é€šè¿‡è¿™äº›ä¿¡æ¯ï¼ŒtoStringAndTrace(GeneratorNode) è®¡ç®—å‡ºç”Ÿæˆå™¨èŠ‚ç‚¹çš„æºåŒºåŸŸã€‚åœ¨æ–‡æœ¬æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡è®°å½•ç”Ÿæˆå™¨èŠ‚ç‚¹ç”Ÿæˆæ–‡æœ¬çš„å¼€å§‹å’Œç»“æŸä½ç½®ï¼Œè®¡ç®—å‡ºç›¸åº”çš„ç›®æ ‡åŒºåŸŸã€‚æ­¤æ—¶ï¼Œç›®æ ‡ TextRegion çš„ fileURI å±æ€§æ°¸è¿œä¸ä¼šè¢«è®¾ç½®ï¼Œå› ä¸ºæ­¤æ—¶è¿˜ä¸çŸ¥é“ç”Ÿæˆçš„æ–‡æœ¬æ˜¯å¦ä¼šè¢«å†™å…¥æŸä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œæ–‡ä»¶çš„ URI å¯èƒ½æ˜¯ä»€ä¹ˆã€‚\nè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä»¥ä¸‹è¾“å…¥å’Œç›¸åº”è¾“å‡ºçš„ç®€åŒ–ç¤ºä¾‹ï¼š\n1 2 3 4 Module priceCalculator DEF materialPerUnit: 100; DEF laborPerUnit: 200; 1 2 3 4 5 let lastComputableExpressionValue; const materialPerUnit = lastComputableExpressionValue = 100; const laborPerUnit = lastComputableExpressionValue = 200; return lastComputableExpressionValue; ä¸‹é¢çš„æˆªå›¾ä¸­å±•ç¤ºäº†æ‰€å¾—åˆ°çš„è½¨è¿¹åŒºåŸŸï¼š\nç«ç‘°è‰²èƒŒæ™¯æ‰€é™å®šçš„åŒºåŸŸä»£è¡¨è·Ÿè¸ªæ‰€æè¿°çš„æ ¹è·Ÿè¸ªåŒºåŸŸï¼Œè¯¥åŒºåŸŸæ¥è‡ª generateModuleContent4(module) æ‰€è¿”å›çš„ç”Ÿæˆå™¨èŠ‚ç‚¹ã€‚ æ·¡é»„è‰²çŸ©å½¢è¡¨ç¤ºçš„åŒºåŸŸæ¥è‡ª generateModuleContent4(Module) ã€‚ç¬¬ 4 è¡Œä¸­è°ƒç”¨ joinTracedToNode(\u0026hellip;)(\u0026hellip;) ç”Ÿæˆå™¨èŠ‚ç‚¹ç”Ÿæˆçš„åŒºåŸŸã€‚æºåŒºåŸŸç­‰äºå¯¹è±¡æ¨¡å—å±æ€§ \u0026ldquo;è¯­å¥ \u0026ldquo;ä¸­æ‰€æœ‰å…ƒç´ å®šä¹‰çš„ \u0026ldquo;è¾¹ç•Œæ¡†\u0026rdquo;ï¼Œç›®æ ‡åŒºåŸŸç­‰äºç¬¬ 4 è¡Œä¸­ joinTracedToNode(\u0026hellip;)(\u0026hellip;) è°ƒç”¨ generateStatement(Statement) çš„ç»“æœæ‰€æè¿°çš„æ‰€æœ‰æ–‡æœ¬ç‰‡æ®µçš„ \u0026ldquo;è¾¹ç•Œæ¡†\u0026rdquo;ï¼ŒåŠ ä¸Š { appendNewLineIfNotEmpty: true } æ‰€è¦æ±‚çš„æ’å…¥åˆ†éš”çº¿ã€‚åŒ…å«è¿™äº›æºæ–‡æœ¬åŒºåŸŸå’Œç›®æ ‡æ–‡æœ¬åŒºåŸŸæè¿°çš„ TraceRegion å®ä¾‹å¯é€šè¿‡æ ¹è·Ÿè¸ªå¯¹è±¡çš„å­å±æ€§ï¼ˆå³ trace.children[0]ï¼‰è®¿é—®ã€‚ è“è‰²èƒŒæ™¯åŒºåŸŸè¡¨ç¤ºè·Ÿè¸ªåŒºåŸŸï¼ŒåŒ…æ‹¬å¯¹è±¡æ¨¡å—å±æ€§ \u0026ldquo;statements \u0026ldquo;æ¡ç›® 0 å®šä¹‰æ‰€æ¶‰åŠçš„æºæ–‡æœ¬åŒºåŸŸï¼Œä»¥åŠæ‰§è¡Œ generateStatement(module.statements[0])åè¿”å›çš„ç”Ÿæˆå™¨èŠ‚ç‚¹æ‰€æè¿°çš„ç›®æ ‡åŒºåŸŸã€‚è·Ÿè¸ªåŒºåŸŸæè¿°å¯¹è±¡å¯é€šè¿‡ trace.children[0].children[0] è®¿é—®ã€‚åŒæ ·çš„æƒ…å†µä¹Ÿé€‚ç”¨äºç»¿è‰²èƒŒæ™¯åŒºåŸŸï¼Œä½†å®ƒä»¬è¡¨ç¤º module.statements çš„æ¡ç›® 1 çš„å®šä¹‰å’Œç”Ÿæˆæ–‡æœ¬ã€‚è¯¥è·Ÿè¸ªåŒºåŸŸæè¿°å¯é€šè¿‡ trace.children[0].children[1] è®¿é—®ã€‚ å®é™…ä¸Šï¼Œè¿™ç§æ·±åº¦çš„è·Ÿè¸ªæ•°æ®æ•è·å¹¶ä¸æ˜¯ç»ˆç‚¹ã€‚å¦‚æœæˆ‘ä»¬ç»§ç»­å°† expandTracedToNode(\u0026hellip;) åº”ç”¨äºåœ¨ generateStatement(Module) ä¸­è¦åŒºåˆ†çš„æ‰€æœ‰ç‰¹æ®Šæƒ…å†µï¼Œæˆ‘ä»¬å°±ä¼šå¾—åˆ°å®Œå…¨æ·±åº¦è§£æå’Œç»†ç²’åº¦çš„è·Ÿè¸ªåŒºåŸŸï¼Œç›´è‡³æ¯ä¸ªæ ‡è¯†ç¬¦ã€è¿ç®—ç¬¦å’Œæ•°å­—å­—é¢ã€‚\nå°†è·Ÿè¸ªæ•°æ®è½¬æ¢ä¸º JavaScript æºæ˜ å°„ å¦‚ä»Šçš„æµè§ˆå™¨å’Œ VS Code éƒ½æ”¯æŒæºæ˜ å°„çš„æ¦‚å¿µï¼Œä»¥ä¾¿äºè°ƒè¯•å·²ç¼–è¯‘ã€è½¬è¯‘æˆ–æœ€å°åŒ–çš„ä»£ç ã€‚æºæ˜ å°„å¯ä»¥ä½œä¸ºå•ç‹¬æ–‡ä»¶é™„åŠ åˆ°ç”Ÿäº§çš„ JavaScript ä»£ç ä¸­ï¼Œç”šè‡³å¯ä»¥å†…è”åˆ°ç”Ÿäº§çš„ä»£ç ä¸­ï¼ˆè¿™é€šå¸¸ä¼šå¤§å¤§å¢åŠ è¦ä¼ è¾“çš„ä»£ç ï¼‰ã€‚å› æ­¤ï¼Œä¸ºäº†å®ç°èƒ½å¤Ÿè°ƒè¯•ç”¨ç®—æœ¯ DSL ç¼–å†™çš„è„šæœ¬è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬ä¸ä»…éœ€è¦æ•è·è·Ÿè¸ªä¿¡æ¯ï¼Œè¿˜éœ€è¦ä½¿ç”¨å®ƒä»¬æ¥åˆæˆç¬¦åˆæºæ˜ å°„æ ¼å¼çš„æ•°æ®ã€‚å¥½æ¶ˆæ¯æ˜¯æˆ‘ä»¬ä¸éœ€è¦å®Œå…¨é è‡ªå·±ã€‚https://npmjs.com ä¸Šå‘å¸ƒçš„ source-map è½¯ä»¶åŒ…å¯ä»¥å¸®æˆ‘ä»¬å®Œæˆå¤§éƒ¨åˆ†å·¥ä½œã€‚\nåœ¨ langium-in-browser-codegen-example GitHub ä»£ç åº“ä¸­ï¼Œæˆ‘å®ç°äº†æºåœ°å›¾æ•°æ®çš„ç»„åˆï¼Œå¹¶å°†å…¶å†…è”åˆ°ç”Ÿæˆçš„ JavaScript ä»£ç ä¸­ã€‚å¦‚æœå†…è”ï¼Œæºåœ°å›¾æ•°æ®å¿…é¡»è¿›è¡Œ base64 ç¼–ç \u0026ndash;è¿™æ„å‘³ç€æˆ‘ä»¬åŸºæœ¬ä¸Šæ²¡æœ‰æœºä¼šå®¡æŸ¥æˆ‘ä»¬å®é™…ç”Ÿæˆçš„å†…å®¹ã€‚ä¸è¿‡ï¼Œsokra å’Œå…¶ä»–ä¸€äº›å¥½å¿ƒäººå»ºç«‹äº†ä¸€ä¸ªå·¥å…· https://sokra.github.io/source-map-visualization/ã€‚å®ƒå…è®¸æˆ‘ä»¬ä¸Šä¼ ç”Ÿæˆçš„ä»£ç ï¼ŒåŒ…æ‹¬æºåœ°å›¾æ•°æ®ï¼ˆæˆ–å°†æºåœ°å›¾æ•°æ®ä½œä¸ºå•ç‹¬æ–‡ä»¶ä¸Šä¼ ï¼‰ã€‚ä¸‹é¢ï¼Œæˆ‘æ·»åŠ äº†ä¸€å¼ æ‰€æä¾›çš„å¯è§†åŒ–æˆªå›¾ã€‚åŸå§‹é¡µé¢ç”šè‡³å…è®¸é€šè¿‡å°†é¼ æ ‡æ‚¬åœåœ¨æŸä¸ªåŒºåŸŸä¸Šï¼Œè§‚å¯Ÿå…¶å¯¹åº”åŒºåŸŸçš„é«˜äº®åº¦ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œä»¥äº¤äº’æ–¹å¼æŸ¥çœ‹æºåŒºåŸŸå’Œç›®æ ‡åŒºåŸŸã€‚\n","permalink":"https://WFUing.github.io/posts/tech/language/code-generation/code-generation-for-langium-based-dsls/","summary":"DSL å’Œ DSL å·¥å…·çš„ä¸€ä¸ªé‡è¦æ–¹é¢æ˜¯ä»£ç ç”Ÿæˆã€‚DSL æœ¬èº«åœ¨å½¢å¼åŒ–ã€æŒ‡å®šå’Œäº¤æµå†…å®¹æ–¹é¢å…·æœ‰ä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰ç‰¹å®šé¢†åŸŸçš„æ€§è´¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœèƒ½ä»æŒ‡å®šçš„å†…å®¹ä¸­æ¨å¯¼å‡ºå®ç°ä»£ç ï¼Œå°±èƒ½å¤§å¤§æé«˜å·¥ä½œæ•ˆç‡ã€‚\nResources blogs https://www.typefox.io/blog/code-generation-for-langium-based-dsls/ https://www.typefox.io/blog/code-generation-for-langium-based-dsls-2 https://www.typefox.io/blog/code-generation-for-langium-based-dsls-3/ github repo: https://github.com/TypeFox/langium-in-browser-codegen-example/tree/main https://github.com/eclipse-langium/langium/blob/main/examples/arithmetics è¿è¡Œç¤ºä¾‹ æœ¬å¸–ä¸­çš„è¿è¡Œç¤ºä¾‹ä½¿ç”¨ Langium çš„ Arithmetics ç¤ºä¾‹å®ç°ã€‚Arithmetics çš„ grammar è§ arithmetics.langium\nä»£ç ç”Ÿæˆå™¨çš„è¾“å…¥ç¤ºä¾‹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 MODULE priceCalculator DEF materialPerUnit: 100; DEF laborPerUnit: 200; DEF costPerUnit: materialPerUnit + laborPerUnit; DEF expectedNoOfSales: 200; DEF costOfGoodsSold: expectedNoOfSales * costPerUnit; DEF generalExpensesAndSales: 10000; DEF desiredProfitPerUnit: 50; DEF netPrice: (costOfGoodsSold + generalExpensesAndSales) / expectedNoOfSales + desiredProfitPerUnit; DEF vat: 0.","title":"Code generation for Langium-based DSLs"},{"content":"æ¨¡æ¿å¼•æ“ æ¨¡æ¿å¼•æ“ï¼ˆä¹Ÿç§°ä¸ºæ¨¡æ¿å¤„ç†å™¨æˆ–æ¨¡æ¿è§£æå™¨ï¼‰æ˜¯è®¾è®¡ç”¨äºå°†æ¨¡æ¿ä¸æ•°æ®æ¨¡å‹ç»“åˆèµ·æ¥ä»¥ç”Ÿæˆç»“æœæ–‡æ¡£çš„è½¯ä»¶ï¼Œç¼–å†™æ¨¡æ¿æ‰€ç”¨çš„è¯­è¨€ç§°ä¸ºæ¨¡æ¿è¯­è¨€æˆ–æ¨¡æ¿è¯­è¨€ã€‚æ¨¡æ¿å¼•æ“é€šå¸¸ä½œä¸º Web æ¨¡æ¿ç³»ç»Ÿæˆ–åº”ç”¨ç¨‹åºæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥ç”¨ä½œé¢„å¤„ç†å™¨æˆ–è¿‡æ»¤å™¨ã€‚æµè¡Œçš„æ¨¡æ¿å¼•æ“åŒ…æ‹¬ Ejsã€Jadeã€Pugã€Mustacheã€HandlebarsJSã€Jinja2 å’Œ Bladeã€‚\næ¨¡æ¿å¼•æ“å¦‚ä½•å·¥ä½œ ä¸Šå›¾è¯´æ˜äº†æ¨¡æ¿å¼•æ“çš„æ‰€æœ‰åŸºæœ¬å…ƒç´ å’Œå¤„ç†æµç¨‹ã€‚\nä½¿ç”¨æ¨¡æ¿å¼•æ“æ„å»ºæœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºæ—¶ï¼Œæ¨¡æ¿å¼•æ“ä¼šå°†æ¨¡æ¿æ–‡ä»¶ä¸­çš„å˜é‡æ›¿æ¢ä¸ºå®é™…å€¼ï¼Œå¹¶å°†æ­¤å€¼æ˜¾ç¤ºç»™å®¢æˆ·ç«¯ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½æ›´è½»æ¾åœ°å¿«é€Ÿæ„å»ºåº”ç”¨ç¨‹åºã€‚\nä½¿ç”¨ expressJS å’Œ ejs æ¨¡æ¿å¼•æ“çš„ç¤ºä¾‹ å¯¹äºä½¿ç”¨ NodeJS è¿è¡Œæ—¶ç¼–å†™çš„æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿å¼•æ“ã€‚\nä»¥ä¸‹æ­¥éª¤æ¼”ç¤ºäº†æ¨¡æ¿å¼•æ“å¦‚ä½•ä½¿ç”¨ expressJs å’Œ ejs æ¨¡æ¿å¼•æ“å·¥ä½œã€‚ä¸‹é¢çš„ç¤ºä¾‹åœ¨ç½‘é¡µä¸Šæ¸²æŸ“ç”¨æˆ·æ•°æ®ã€‚\næ­¥éª¤ 1ï¼šå®‰è£… express å’Œ ejs æ¨¡æ¿å¼•æ“\nå®‰è£… ejs æ¨¡æ¿å¼•æ“å’Œ express æ¡†æ¶ï¼Œ\n1 npm install express ejs æ­¥éª¤ 2ï¼šè®¾ç½®è§†å›¾å¼•æ“\n1 2 3 4 5 6 7 8 const express = require(\u0026#34;express\u0026#34;) const app = express(); // Set the View Engine or Template Engine app.set(\u0026#39;view engine\u0026#39;, \u0026#39;ejs\u0026#39;); app.listen(3000) åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº† express åº”ç”¨ç¨‹åºã€‚è¯¥åº”ç”¨ç¨‹åºé€šè¿‡ 3000 ç«¯å£ç›‘å¬ã€‚\napp.set('view engine', 'ejs'); å‘Šè¯‰æˆ‘ä»¬çš„ express åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ EJS ä½œä¸ºæ¨¡æ¿å¼•æ“ã€‚\næ­¥éª¤ 3ï¼šè®¾ç½®è§†å›¾æ–‡ä»¶å¤¹\nåˆ›å»ºä¸€ä¸ªåä¸º view çš„æ–‡ä»¶å¤¹ã€‚è§†å›¾æ–‡ä»¶å¤¹åº”åŒ…å«æˆ‘ä»¬çš„æ¨¡æ¿ã€‚å…¶ä¸­ä¸€ä¸ªæ¨¡æ¿æ˜¯ index.ejsï¼Œå®ƒå°†ç”Ÿæˆæˆ‘ä»¬çš„é¦–é¡µã€‚ç¬¬äºŒä¸ªæ¨¡æ¿æ˜¯ user.ejsï¼Œç”¨äºä»æœåŠ¡å™¨ç«¯ä¼ é€’ç”¨æˆ·æ•°æ®ï¼Œå¹¶ç«‹å³åœ¨ç½‘é¡µä¸Šå‘ˆç°ã€‚\n1 2 3 4 index.js \u0026gt;view index.ejs user.ejs æ­¥éª¤ 4ï¼šè®¾ç½® routes\nè®©æˆ‘ä»¬ä¸ºä¸»é¡µå’Œç”¨æˆ·é¡µé¢åˆ›å»ºroutesã€‚\nè¯·æ³¨æ„ä¸‹é¢çš„ res.render() æ–¹æ³•ã€‚è¿™å°±æ˜¯åœ¨ expressJS ä¸­æ¸²æŸ“æ¨¡æ¿çš„æ–¹æ³•ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 app.get(\u0026#39;/\u0026#39;, function (req, res) { res.render(\u0026#34;index\u0026#34;); }) app.get(\u0026#34;/user\u0026#34;, function(req,res){ const user = { name: \u0026#34;Theodore Kelechukwu O.\u0026#34;, stack: \u0026#34;MERN\u0026#34;, email: \u0026#34;theodoreonyejiaku@gmail.com\u0026#34;, hubby: [\u0026#34;singing\u0026#34;, \u0026#34;playing guitar\u0026#34;, \u0026#34;reading\u0026#34;, \u0026#34;philosoph\u0026#34;] } res.render(\u0026#34;user\u0026#34;, {user}); }) æ­£å¦‚æˆ‘ä»¬æ‰€è§ï¼Œè®¿é—®é»˜è®¤è·¯ç”±\u0026quot;\u0026quot;æ—¶ï¼Œä¼šæ˜¾ç¤ºæˆ–æ¸²æŸ“ index.ejs é¡µé¢ã€‚åŒæ—¶ï¼Œ\u0026quot;\\user \u0026ldquo;ä¼šæ˜¾ç¤º user.ejs é¡µé¢ã€‚\næˆ‘ä»¬å°†ç”¨æˆ·å¯¹è±¡ä¼ é€’ç»™ render å¯¹è±¡ï¼Œä»¥ä¾¿å°†ç”¨æˆ·å±æ€§ä¼ é€’ç»™ç½‘é¡µå¹¶è¿›è¡Œæ¸²æŸ“ã€‚\næ­¥éª¤ 5ï¼šæ¨¡æ¿åŒ–æˆ‘ä»¬çš„è§†å›¾æ–‡ä»¶\nç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»ä»æœåŠ¡å™¨ç«¯ä¼ é€’äº†ç”¨æˆ·æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ç«‹å³åœ¨å‰ç«¯æˆ–ç½‘é¡µä¸Šæ˜¾ç¤ºè¿™äº›æ•°æ®ã€‚\nindex.ejs\n1 2 3 4 5 6 7 8 9 10 \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;This is the title\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Welcome to Template Engines\u0026lt;/p\u0026gt; \u0026lt;a href=\u0026#34;/user\u0026#34;\u0026gt;View User\u0026lt;/a\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; user.ejs\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;This is the title\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;Welcome to User Details\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt;\u0026lt;b\u0026gt;Name:\u0026lt;/b\u0026gt; \u0026lt;%= user.name %\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;\u0026lt;b\u0026gt;Email:\u0026lt;/b\u0026gt; \u0026lt;%= user.email %\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;\u0026lt;b\u0026gt;Stack:\u0026lt;/b\u0026gt; \u0026lt;%= user.stack %\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;u\u0026gt;\u0026lt;b\u0026gt;Hubbies\u0026lt;/b\u0026gt;\u0026lt;/u\u0026gt; \u0026lt;% user.hubby.forEach(hubby =\u0026gt;{ %\u0026gt; \u0026lt;li\u0026gt;\u0026lt;%= hubby %\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;% })%\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; æ³¨æ„æ˜¾ç¤ºå€¼çš„ \u0026lt;%= variable %\u0026gt; æ¨¡å¼ã€‚è¿™æ˜¯åœ¨ ejs ä¸­ä½¿ç”¨çš„æ–¹å¼ã€‚è¿˜è¦æ³¨æ„ user.forEach(); è¿™æ˜¯ä¸ºäº†æ˜¾ç¤ºæ¨¡æ¿å¼•æ“æœ‰å¤šä¹ˆå¼ºå¤§ã€‚\nResources https://en.wikipedia.org/wiki/Template_processor https://www.educative.io/answers/what-are-template-engines ","permalink":"https://WFUing.github.io/posts/tech/language/code-generation/template-engine/","summary":"æ¨¡æ¿å¼•æ“ æ¨¡æ¿å¼•æ“ï¼ˆä¹Ÿç§°ä¸ºæ¨¡æ¿å¤„ç†å™¨æˆ–æ¨¡æ¿è§£æå™¨ï¼‰æ˜¯è®¾è®¡ç”¨äºå°†æ¨¡æ¿ä¸æ•°æ®æ¨¡å‹ç»“åˆèµ·æ¥ä»¥ç”Ÿæˆç»“æœæ–‡æ¡£çš„è½¯ä»¶ï¼Œç¼–å†™æ¨¡æ¿æ‰€ç”¨çš„è¯­è¨€ç§°ä¸ºæ¨¡æ¿è¯­è¨€æˆ–æ¨¡æ¿è¯­è¨€ã€‚æ¨¡æ¿å¼•æ“é€šå¸¸ä½œä¸º Web æ¨¡æ¿ç³»ç»Ÿæˆ–åº”ç”¨ç¨‹åºæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥ç”¨ä½œé¢„å¤„ç†å™¨æˆ–è¿‡æ»¤å™¨ã€‚æµè¡Œçš„æ¨¡æ¿å¼•æ“åŒ…æ‹¬ Ejsã€Jadeã€Pugã€Mustacheã€HandlebarsJSã€Jinja2 å’Œ Bladeã€‚\næ¨¡æ¿å¼•æ“å¦‚ä½•å·¥ä½œ ä¸Šå›¾è¯´æ˜äº†æ¨¡æ¿å¼•æ“çš„æ‰€æœ‰åŸºæœ¬å…ƒç´ å’Œå¤„ç†æµç¨‹ã€‚\nä½¿ç”¨æ¨¡æ¿å¼•æ“æ„å»ºæœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºæ—¶ï¼Œæ¨¡æ¿å¼•æ“ä¼šå°†æ¨¡æ¿æ–‡ä»¶ä¸­çš„å˜é‡æ›¿æ¢ä¸ºå®é™…å€¼ï¼Œå¹¶å°†æ­¤å€¼æ˜¾ç¤ºç»™å®¢æˆ·ç«¯ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½æ›´è½»æ¾åœ°å¿«é€Ÿæ„å»ºåº”ç”¨ç¨‹åºã€‚\nä½¿ç”¨ expressJS å’Œ ejs æ¨¡æ¿å¼•æ“çš„ç¤ºä¾‹ å¯¹äºä½¿ç”¨ NodeJS è¿è¡Œæ—¶ç¼–å†™çš„æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿å¼•æ“ã€‚\nä»¥ä¸‹æ­¥éª¤æ¼”ç¤ºäº†æ¨¡æ¿å¼•æ“å¦‚ä½•ä½¿ç”¨ expressJs å’Œ ejs æ¨¡æ¿å¼•æ“å·¥ä½œã€‚ä¸‹é¢çš„ç¤ºä¾‹åœ¨ç½‘é¡µä¸Šæ¸²æŸ“ç”¨æˆ·æ•°æ®ã€‚\næ­¥éª¤ 1ï¼šå®‰è£… express å’Œ ejs æ¨¡æ¿å¼•æ“\nå®‰è£… ejs æ¨¡æ¿å¼•æ“å’Œ express æ¡†æ¶ï¼Œ\n1 npm install express ejs æ­¥éª¤ 2ï¼šè®¾ç½®è§†å›¾å¼•æ“\n1 2 3 4 5 6 7 8 const express = require(\u0026#34;express\u0026#34;) const app = express(); // Set the View Engine or Template Engine app.set(\u0026#39;view engine\u0026#39;, \u0026#39;ejs\u0026#39;); app.listen(3000) åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº† express åº”ç”¨ç¨‹åºã€‚è¯¥åº”ç”¨ç¨‹åºé€šè¿‡ 3000 ç«¯å£ç›‘å¬ã€‚","title":"Template Engine"},{"content":"ä»Šå¤©èŠ±äº†ä¸€ç‚¹æ—¶é—´æ­å»ºäº†è‡ªå·±çš„GitHubçš„åšå®¢ï¼Œå½“ç„¶å’¯ï¼Œè¯•éªŒé˜¶æ®µæ€»ä¼šå‘ç”Ÿå¾ˆå¤šä¹±ä¸ƒå…«ç³Ÿçš„é—®é¢˜ï¼Œè®°å½•ä¸‹å¤„ç†é—®é¢˜è¿‡ç¨‹ä¸­å‡ ä¸ªæ¯”è¾ƒ nice çš„ blog\nResources ç³»åˆ—æ–‡ç« ï¼Œç”¨hugoçš„PaperMod Theme å»ºç«™: https://www.sulvblog.cn/posts/blog/ Hugo + GitHub Actionï¼Œæ­å»ºä½ çš„åšå®¢è‡ªåŠ¨å‘å¸ƒç³»ç»Ÿ: https://www.pseudoyu.com/zh/2022/05/29/deploy_your_blog_using_hugo_and_github_action/ PaperModä¸»é¢˜ä¼˜åŒ–ï¼š https://kdjlyy.cn/posts/site/hugo-papermod-optimization https://dvel.me/posts/hugo-papermod-config/ ","permalink":"https://WFUing.github.io/posts/tech/architecture/git/how-to-build-github-blog-with-hugo/","summary":"ä»Šå¤©èŠ±äº†ä¸€ç‚¹æ—¶é—´æ­å»ºäº†è‡ªå·±çš„GitHubçš„åšå®¢ï¼Œå½“ç„¶å’¯ï¼Œè¯•éªŒé˜¶æ®µæ€»ä¼šå‘ç”Ÿå¾ˆå¤šä¹±ä¸ƒå…«ç³Ÿçš„é—®é¢˜ï¼Œè®°å½•ä¸‹å¤„ç†é—®é¢˜è¿‡ç¨‹ä¸­å‡ ä¸ªæ¯”è¾ƒ nice çš„ blog\nResources ç³»åˆ—æ–‡ç« ï¼Œç”¨hugoçš„PaperMod Theme å»ºç«™: https://www.sulvblog.cn/posts/blog/ Hugo + GitHub Actionï¼Œæ­å»ºä½ çš„åšå®¢è‡ªåŠ¨å‘å¸ƒç³»ç»Ÿ: https://www.pseudoyu.com/zh/2022/05/29/deploy_your_blog_using_hugo_and_github_action/ PaperModä¸»é¢˜ä¼˜åŒ–ï¼š https://kdjlyy.cn/posts/site/hugo-papermod-optimization https://dvel.me/posts/hugo-papermod-config/ ","title":"How to Build Github Blog With Hugo"},{"content":"ä¸ºä»€ä¹ˆè¦ç”¨ä»£ç ç”Ÿæˆ productivityï¼šä½¿ç”¨ä»£ç ç”Ÿæˆï¼Œåªéœ€ç¼–å†™ä¸€æ¬¡ generator ï¼Œå°±å¯ä»¥æ ¹æ®éœ€è¦å¤šæ¬¡é‡å¤ä½¿ç”¨ã€‚å‘ generator æä¾›ç‰¹å®šè¾“å…¥å¹¶è°ƒç”¨å®ƒæ¯”æ‰‹åŠ¨ç¼–å†™ä»£ç è¦å¿«å¾—å¤šï¼Œå› æ­¤ä»£ç ç”Ÿæˆå¯ä»¥èŠ‚çœæ—¶é—´ã€‚ Simplificationï¼šé€šè¿‡ä»£ç ç”Ÿæˆï¼Œä½ å¯ä»¥ä»ä¸€äº›æŠ½è±¡çš„æè¿°ä¸­ç”Ÿæˆä»£ç ã€‚éœ€è¦ç»´æŠ¤çš„éƒ¨åˆ†å˜æˆäº† generator çš„è¾“å…¥éƒ¨åˆ†ï¼Œè¯¥éƒ¨åˆ†é€šå¸¸æ˜¯ä»£ç çš„æè¿°ï¼Œè€Œä¸æ˜¯ä»£ç æœ¬èº«ï¼Œä¸æ•´ä¸ªç”Ÿæˆçš„ä»£ç ç›¸æ¯”ï¼Œè¯¥æè¿°é€šå¸¸æ›´å®¹æ˜“åˆ†æå’Œæ£€æŸ¥ã€‚ Portabilityï¼šä¸€æ—¦ä½ æœ‰äº†ä¸ºæŸç§è¯­è¨€æˆ–æ¡†æ¶ç”Ÿæˆä»£ç çš„ç¨‹åºï¼Œä½ å°±å¯ä»¥ç®€å•åœ°æ›´æ”¹ generator ï¼Œå¹¶ä»¥ä¸åŒçš„è¯­è¨€æˆ–æ¡†æ¶ä¸ºç›®æ ‡ã€‚æ‚¨è¿˜å¯ä»¥åŒæ—¶é’ˆå¯¹å¤šä¸ªå¹³å°ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨è§£æå™¨ç”Ÿæˆå™¨ï¼Œæ‚¨å¯ä»¥è·å¾— C#ã€Java å’Œ C++ çš„ parserã€‚ å¦ä¸€ä¸ªä¾‹å­ï¼šæ‚¨å¯èƒ½ä¼šç¼–å†™ä¸€ä¸ª UML å›¾è¡¨ï¼Œç„¶åä½¿ç”¨ä»£ç ç”Ÿæˆå™¨ç”¨ C# åˆ›å»ºä¸€ä¸ªéª¨æ¶ç±»ï¼Œå¹¶ç”¨ SQL ä»£ç ä¸º MySQL åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ã€‚å› æ­¤ï¼Œç›¸åŒçš„æŠ½è±¡æè¿°å¯ç”¨äºç”Ÿæˆä¸åŒç±»å‹çš„å·¥ä»¶ã€‚ Consistencyï¼šæœ‰äº†ä»£ç ç”Ÿæˆï¼Œä½ æ€»èƒ½å¾—åˆ°ä½ æ‰€æœŸæœ›çš„ä»£ç ã€‚ç”Ÿæˆçš„ä»£ç æ˜¯æ ¹æ®ç›¸åŒçš„åŸåˆ™è®¾è®¡çš„ï¼Œå‘½åè§„åˆ™ç­‰ä¹Ÿæ˜¯ä¸€è‡´çš„ã€‚å½“ç„¶ï¼Œé™¤äº†ç”Ÿæˆå™¨ä¸­çš„ bug ä¹‹å¤–ï¼Œä»£ç æ€»æ˜¯èƒ½æŒ‰ç…§ä½ æ‰€æœŸæœ›çš„æ–¹å¼è¿è¡Œï¼Œä»£ç è´¨é‡å§‹ç»ˆå¦‚ä¸€ã€‚å¦‚æœç”¨æ‰‹å·¥ç¼–å†™ä»£ç ï¼Œä¸åŒçš„å¼€å‘äººå‘˜å¯èƒ½ä¼šä½¿ç”¨ä¸åŒçš„é£æ ¼ï¼Œå³ä½¿æ˜¯æœ€é‡å¤çš„ä»£ç ä¹Ÿä¼šå¶å°”å‡ºç°é”™è¯¯ã€‚ ä¸ºä»€ä¹ˆä¸è¦ç”¨ä»£ç ç”Ÿæˆ Maintenanceï¼šå½“æ‚¨ä½¿ç”¨ä»£ç ç”Ÿæˆå·¥å…·æ—¶ï¼Œæ‚¨çš„ä»£ç å°±ä¼šä¾èµ–äºå®ƒã€‚ä»£ç ç”Ÿæˆå·¥å…·å¿…é¡»å¾—åˆ°ç»´æŠ¤ã€‚å¦‚æœä½ åˆ›å»ºäº†å®ƒï¼Œä½ å°±å¿…é¡»ä¸æ–­æ›´æ–°å®ƒï¼›å¦‚æœä½ åªæ˜¯ä½¿ç”¨ç°æœ‰çš„å·¥å…·ï¼Œä½ å°±å¿…é¡»å¸Œæœ›æœ‰äººç»§ç»­ç»´æŠ¤å®ƒï¼Œæˆ–è€…ä½ å¿…é¡»è‡ªå·±æ¥æ‰‹ã€‚å› æ­¤ï¼Œä»£ç ç”Ÿæˆçš„ä¼˜åŠ¿å¹¶ä¸æ˜¯å…è´¹çš„ã€‚å¦‚æœä½ æ²¡æœ‰æˆ–æ‰¾ä¸åˆ°åˆé€‚çš„èƒ½åŠ›æ¥ç»´æŠ¤ä»£ç ç”Ÿæˆå™¨ï¼Œé£é™©å°±ä¼šæ›´å¤§ã€‚ Complexityï¼šè‡ªåŠ¨ç”Ÿæˆçš„ä»£ç å¾€å¾€æ¯”æ‰‹å·¥ç¼–å†™çš„ä»£ç æ›´å¤æ‚ã€‚æœ‰æ—¶ï¼Œè¿™ä¸å°†ä¸åŒéƒ¨åˆ†è¿æ¥åœ¨ä¸€èµ·æ‰€éœ€çš„èƒ¶æ°´ä»£ç æœ‰å…³ï¼Œæˆ–è€…ä¸ç”Ÿæˆå™¨æ”¯æŒçš„ç”¨ä¾‹å¤šäºæ‚¨æ‰€éœ€çš„ç”¨ä¾‹æœ‰å…³ã€‚åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œç”Ÿæˆçš„ä»£ç å¯ä»¥åšæ¯”ä½ æƒ³è¦çš„æ›´å¤šçš„äº‹æƒ…ï¼Œä½†è¿™å¹¶ä¸ä¸€å®šæ˜¯ä¸€ç§ä¼˜åŠ¿ã€‚ç”Ÿæˆä»£ç çš„ä¼˜åŒ–ç¨‹åº¦è‚¯å®šä¹Ÿä¸å¦‚æ‰‹å·¥ç¼–å†™çš„ä»£ç ã€‚æœ‰æ—¶è¿™ç§å·®å¼‚å¾ˆå°ï¼Œå¹¶ä¸æ˜æ˜¾ï¼Œä½†å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºéœ€è¦å°½å¯èƒ½åœ°æé«˜æ€§èƒ½ï¼Œé‚£ä¹ˆç”Ÿæˆçš„ä»£ç å¯¹æ‚¨æ¥è¯´å¯èƒ½å¹¶ä¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚ å¦‚ä½•ä½¿ç”¨ä»£ç ç”Ÿæˆ? æ ¹æ®å…·ä½“æƒ…å†µï¼Œä»£ç ç”Ÿæˆæ—¢å¯ä»¥æé«˜å·¥ä½œæ•ˆç‡ï¼Œä¹Ÿå¯ä»¥æˆä¸ºå¼€å‘è¿‡ç¨‹ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚è®¸å¤šç°ä»£é›†æˆå¼€å‘ç¯å¢ƒå°±æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„ä¾‹å­ï¼šåªéœ€ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œå°±èƒ½åˆ›å»ºä¸€ä¸ªéª¨æ¶ç±»æ¥å®ç°æ¥å£æˆ–ç±»ä¼¼åŠŸèƒ½ã€‚ä½ å®Œå…¨å¯ä»¥è‡ªå·±ç¼–å†™è¿™æ ·çš„ä»£ç ï¼Œåªä¸è¿‡ä¼šæµªè´¹ä¸€äº›æ—¶é—´æ¥å®Œæˆçç¢çš„ä»»åŠ¡ã€‚\nè®¾è®¡ä»£ç ç”Ÿæˆæµæ°´çº¿çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ã€‚åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸¤ä¸ªè¦ç´ ï¼š\nInputï¼šç”¨äºç”Ÿæˆä»£ç çš„ä¿¡æ¯æ¥è‡ªä½•å¤„ã€‚ Outputï¼šå¦‚ä½•è·å¾—ç”Ÿæˆçš„ä»£ç ã€‚ æ‚¨ä¹Ÿå¯ä»¥åœ¨è¾“å…¥å’Œè¾“å‡ºä¹‹é—´è®¾ç½®è½¬æ¢æ­¥éª¤ã€‚è¿™äº›æ­¥éª¤å¯ä»¥ç®€åŒ–è¾“å‡ºå±‚ï¼Œå¹¶ä½¿è¾“å…¥å’Œè¾“å‡ºæ›´åŠ ç‹¬ç«‹ã€‚\nPossible Inputs\nA DSLï¼šä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ANTLR æ¥æè¿°ä¸€ç§è¯­è¨€çš„è¯­æ³•ã€‚ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆä¸€ä¸ªè§£æå™¨ã€‚ code in other formatsï¼šæ•°æ®åº“æ¨¡å¼ã€‚æ ¹æ®æ•°æ®åº“æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆ DAOã€‚ wizardsï¼šå®ƒä»¬å…è®¸å‘ç”¨æˆ·è¯¢é—®ä¿¡æ¯ã€‚ reverse engineeringï¼šå¯é€šè¿‡å¤„ç†å¤æ‚çš„ä»£ç å·¥ä»¶è·å¾—ä¿¡æ¯ã€‚ data sourcesï¼šæ¯”å¦‚ä¸€ä¸ªDBï¼Œä¸€ä¸ªcsvæ–‡ä»¶æˆ–è€…ä¸€ä¸ªç”µå­è¡¨æ ¼ã€‚ Possible Outputs\ntemplate engineï¼šå¤§å¤šæ•°ç½‘ç»œç¨‹åºå‘˜éƒ½çŸ¥é“æ¨¡æ¿å¼•æ“ï¼Œå®ƒç”¨äºåœ¨ HTML UI ä¸­å¡«å……æ•°æ®ã€‚ code building APIsï¼šä¾‹å¦‚ï¼ŒJavaparser å¯ç”¨äºä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»º Java æ–‡ä»¶ã€‚ Some Pipelines\nç°åœ¨è®©æˆ‘ä»¬æ¥æ£€æŸ¥ä¸€äº› pipelinesï¼š\nparser generationï¼šæœ¬ç½‘ç«™çš„è¯»è€…ä¸€å®šå¾ˆç†Ÿæ‚‰ ANTLR å’Œå…¶ä»–æ­¤ç±»ä»å½¢å¼è¯­æ³•è‡ªåŠ¨ç”Ÿæˆè§£æå™¨çš„å·¥å…·ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å…¥æ˜¯ä¸€ä¸ª DSLï¼Œè¾“å‡ºåˆ™æ˜¯ä½¿ç”¨ template engine ç”Ÿæˆçš„ã€‚ model driven designï¼šé›†æˆå¼€å‘ç¯å¢ƒæˆ–ç‹¬ç«‹é›†æˆå¼€å‘ç¯å¢ƒçš„æ’ä»¶ï¼Œå¯ä»¥æè¿°åº”ç”¨ç¨‹åºçš„æ¨¡å‹ï¼Œæœ‰æ—¶è¿˜æä¾›å›¾å½¢ç•Œé¢ï¼Œå¹¶æ®æ­¤ç”Ÿæˆæ•´ä¸ªåº”ç”¨ç¨‹åºæˆ–ä»…ç”Ÿæˆå…¶éª¨æ¶ã€‚ database-related codeï¼šè¿™ç§ç”¨æ³•å¯è§†ä¸ºæ¨¡å‹é©±åŠ¨è®¾è®¡å’Œæ¨¡æ¿å¼•æ“çš„äº§ç‰©ã€‚é€šå¸¸ï¼Œç¨‹åºå‘˜ä¼šå®šä¹‰ä¸€ä¸ªæ•°æ®åº“æ¨¡å¼ï¼Œå¹¶æ®æ­¤ç”Ÿæˆæ•´ä¸ª CRUD åº”ç”¨ç¨‹åºæˆ–å¤„ç†æ•°æ®åº“çš„ä»£ç ã€‚ä¹Ÿæœ‰ä¸€äº›å·¥å…·å¯ä»¥æ‰§è¡Œç›¸åçš„è¿‡ç¨‹ï¼šæ ¹æ®ç°æœ‰æ•°æ®åº“åˆ›å»ºæ•°æ®åº“æ¨¡å¼æˆ–å¤„ç†æ•°æ®åº“çš„ä»£ç ã€‚ meta-programming languagesï¼šè¿™äº›è¯­è¨€ç»„åŒ…æ‹¬å¯å¯¹ç¨‹åºä»£ç è¿›è¡Œè¿‘ä¹å®Œå…¨æ“ä½œçš„è¯­è¨€ï¼Œæºä»£ç åªæ˜¯å¦ä¸€ç§å¯æ“ä½œçš„æ•°æ®ç»“æ„ã€‚ ad hoc applicationsï¼šè¿™ä¸€ç±»åŒ…æ‹¬æ‰€æœ‰å†…å®¹ï¼šä»ä¸ºå¤„ç†ä¸€ä»¶äº‹æƒ…è€Œè®¾è®¡çš„å·¥å…·åˆ°ä¼ä¸šç¯å¢ƒä¸­ä½¿ç”¨çš„ä¸´æ—¶ç³»ç»Ÿï¼Œè¿™äº›ç³»ç»Ÿå¯ä»¥æ ¹æ®æ­£å¼çš„è‡ªå®šä¹‰æè¿°ç”Ÿæˆæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚è¿™äº›åº”ç”¨ç¨‹åºé€šå¸¸æ˜¯ç‰¹å®šå·¥ä½œæµç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œå®¢æˆ·ä½¿ç”¨å›¾å½¢ç•Œé¢æè¿°ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä¸€ä¸ªä¸´æ—¶ç³»ç»Ÿä¼šç”Ÿæˆæ”¯æŒè¯¥åº”ç”¨ç¨‹åºçš„æ•°æ®åº“æ¨¡å¼ï¼Œå¦ä¸€ä¸ªç³»ç»Ÿä¼šç”Ÿæˆ CRUD ç•Œé¢ç­‰ã€‚ IDE generated codeï¼šè®¸å¤šé™æ€ç±»å‹è¯­è¨€éœ€è¦ç¼–å†™å¤§é‡çš„æ¨¡æ¿ä»£ç ï¼Œè€Œé›†æˆå¼€å‘ç¯å¢ƒé€šå¸¸å¯ä»¥ç”Ÿæˆå…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼šä¸ºè¦å®ç°çš„æ–¹æ³•æä¾›å­˜æ ¹çš„ç±»ã€æ ‡å‡†çš„ç­‰å€¼ã€hashCode å’Œ toString æ–¹æ³•ã€æ‰€æœ‰ç°æœ‰å±æ€§çš„è·å–å™¨å’Œè®¾ç½®å™¨ã€‚ ä»£ç ç”Ÿæˆå·¥å…· æ¨¡æ¿å¼•æ“ æ¨¡æ¿å¼•æ“ç»„ (Template Engine) å¯èƒ½æ˜¯æœ€è‘—åå’Œæœ€å¸¸ç”¨çš„ã€‚æ¨¡æ¿å¼•æ“åŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªèƒ½ç†è§£ç®€å•æ¨¡æ¿è¯­è¨€çš„è¿·ä½ ç¼–è¯‘å™¨ã€‚æ¨¡æ¿æ–‡ä»¶åŒ…å«å¯ç”±æ¨¡æ¿å¼•æ“è§£é‡Šçš„ç‰¹æ®Šç¬¦å·ã€‚å®ƒèƒ½åšçš„æœ€ç®€å•çš„äº‹æƒ…å°±æ˜¯ç”¨è¿è¡Œæ—¶ç»™å‡ºçš„é€‚å½“æ•°æ®æ›¿æ¢è¿™äº›ç‰¹æ®Šç¬¦å·ã€‚å¤§å¤šæ•°æ¨¡æ¿å¼•æ“è¿˜æ”¯æŒç®€å•çš„æµç¨‹æ§åˆ¶å‘½ä»¤ï¼ˆå¦‚ for å¾ªç¯ã€if-else è¯­å¥ï¼‰ï¼Œå…è®¸ç”¨æˆ·æè¿°ç®€å•çš„ç»“æ„ã€‚\næœ‰å¾ˆå¤šä¾‹å­ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸¤ä¸ªä»£è¡¨å¤§å¤šæ•°æ¨¡æ¿å¼•æ“è¡Œä¸ºæ–¹å¼çš„ä¾‹å­ã€‚\nJinja2 Jinja2 æ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„ Python æ¨¡æ¿å¼•æ“ã€‚å®ƒèƒ½åšæ‰€æœ‰æ¨¡æ¿å¼•æ“éƒ½èƒ½åšçš„äº‹æƒ…ï¼šæ ¹æ®æä¾›çš„æ•°æ®åˆ›å»ºç‹¬ä¸€æ— äºŒçš„æ–‡æ¡£ã€‚ å®ƒæ”¯æŒæ¨¡å—åŒ–æ¨¡æ¿ã€æ§åˆ¶æµã€å˜é‡ç­‰ã€‚ä¸è¿‡ï¼Œå®ƒä¹Ÿæœ‰å¼ºå¤§çš„å®‰å…¨æªæ–½ï¼šHTML è½¬ä¹‰ç³»ç»Ÿå’Œæ²™ç®±ç¯å¢ƒï¼Œå¯ä»¥æ§åˆ¶å¯¹å±é™©å±æ€§çš„è®¿é—®ã€‚\n1 2 3 4 5 6 \u0026lt;title\u0026gt;{% block title %}{% endblock %}\u0026lt;/title\u0026gt; \u0026lt;ul\u0026gt; {% for user in users %} \u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{{ user.url }}\u0026#34;\u0026gt;{{ user.username }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; {% endfor %} \u0026lt;/ul\u0026gt; Jinja2 ç‰¹åˆ«æ”¯æŒç”Ÿæˆ HTML é¡µé¢ï¼Œè¿™ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„åŠŸèƒ½ã€‚ä¸è¿‡ï¼Œå®ƒä¹Ÿå¯ç”¨äºåˆ›å»ºå…¶ä»–ç±»å‹çš„æ–‡ä»¶ã€‚\nPug Pug æ˜¯ä¸€ä¸ªæ·±å— Haml å½±å“çš„é«˜æ€§èƒ½æ¨¡æ¿å¼•æ“ï¼Œä½¿ç”¨ JavaScript å®ç°ï¼Œé€‚ç”¨äº Node.js å’Œæµè§ˆå™¨ã€‚åœ¨è®¸å¤šæ–¹é¢ï¼ŒPug ä¸è®¸å¤šå…¶ä»–æ¨¡æ¿å¼•æ“ä¸€æ ·ï¼šå®ƒæ”¯æŒæ¨¡å—åŒ–æ¨¡æ¿ã€æ§åˆ¶æµç­‰ã€‚ä¸åŒçš„æ˜¯ï¼ŒPug çœ‹èµ·æ¥åƒ DSLï¼Œè€Œä¸”åªé€‚ç”¨äº HTMLã€‚å› æ­¤ï¼ŒPug æ¨¡æ¿çœ‹èµ·æ¥éå¸¸ç®€æ´ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 doctype html html(lang=\u0026#34;en\u0026#34;) head title= pageTitle script(type=\u0026#39;text/javascript\u0026#39;). if (foo) bar(1 + 5) body h1 Pug - node template engine #container.col if youAreUsingPug p You are amazing else p Get on it! p. Pug is a terse and simple templating language with a strong focus on performance and powerful features. è§£æå™¨ç”Ÿæˆå™¨ è§£æå™¨ç”Ÿæˆå™¨ (Parser Generation) æ˜¯ä¸€ç§è‡ªåŠ¨å¿«é€Ÿåˆ›å»ºè¯­è¨€è§£æå™¨çš„å·¥å…·ã€‚å®ƒä»¬éå¸¸æˆåŠŸä¸”å¯Œæœ‰æˆæ•ˆï¼Œå› ä¸ºäººä»¬å·²ç»å¯¹è¯­è¨€è§£æé—®é¢˜è¿›è¡Œäº†å¹¿æ³›çš„ç ”ç©¶ã€‚å› æ­¤ï¼Œæœ‰ä¸€äº›è§£å†³æ–¹æ¡ˆå¯ä»¥ä¿è¯è§£æäººä»¬éœ€è¦è§£æçš„å¤§å¤šæ•°è¯­è¨€ã€‚\nANTLR ANTLR å¯èƒ½æ˜¯ä½¿ç”¨æœ€å¤šçš„è§£æå™¨ç”Ÿæˆå™¨ã€‚è¿™æ„å‘³ç€æœ‰å¾ˆå¤šç¤ºä¾‹ã€‚ç„¶è€Œï¼Œåºå¤§ç¤¾åŒºçš„çœŸæ­£é™„åŠ ä»·å€¼åœ¨äºå¤§é‡å¯ç”¨çš„è¯­æ³•ã€‚\nANTLR çš„è¾“å…¥æ˜¯è¯­æ³•ï¼šå¯¹è¯­è¨€çš„æ­£å¼æè¿°ã€‚è§£æå™¨çš„è¾“å‡ºæ˜¯ä¸€æ£µè§£ææ ‘ï¼šä¸€ç§åŒ…å«æºä»£ç çš„ç»“æ„ï¼Œå…¶è½¬æ¢æ–¹å¼ä¾¿äºç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ä½¿ç”¨ã€‚ANTLR è¿˜æä¾›äº†ä¸¤ç§èµ°è§£ææ ‘çš„æ–¹æ³•ï¼šè®¿é—®è€…å’Œç›‘å¬è€…ã€‚ç¬¬ä¸€ç§é€‚ç”¨äºéœ€è¦å¯¹è§£ææ ‘ä¸­çš„å…ƒç´ è¿›è¡Œæ“ä½œæˆ–äº¤äº’çš„æƒ…å†µï¼Œè€Œç¬¬äºŒç§åˆ™é€‚ç”¨äºåªéœ€è¦åœ¨è§„åˆ™åŒ¹é…æ—¶åšä¸€äº›äº‹æƒ…çš„æƒ…å†µã€‚\n1 2 3 4 5 6 7 grammar simple; basic : NAME \u0026#39;:\u0026#39; NAME ; NAME : [a-zA-Z]* ; COMMENT : \u0026#39;/*\u0026#39; .*? \u0026#39;*/\u0026#39; -\u0026gt; skip ; æ¨¡å‹é©±åŠ¨è®¾è®¡ è¿™äº›é€šå¸¸æ˜¯é›†æˆå¼€å‘ç¯å¢ƒçš„æ’ä»¶æˆ–ç‹¬ç«‹çš„é›†æˆå¼€å‘ç¯å¢ƒï¼Œå¯ä»¥é€šè¿‡å›¾å½¢ç•Œé¢æè¿°åº”ç”¨ç¨‹åºçš„æ¨¡å‹ï¼Œå¹¶ç”±æ­¤ç”Ÿæˆåº”ç”¨ç¨‹åºçš„éª¨æ¶ã€‚ä¹‹æ‰€ä»¥ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œæ˜¯å› ä¸ºæ¨¡å‹é©±åŠ¨è®¾è®¡çš„åŸºç¡€æ˜¯æŠ½è±¡æ¨¡å‹ï¼Œå¯ä»¥ç”¨ UML å›¾è¡¨æˆ– DSL æ¥å®šä¹‰ã€‚ä¸€æ—¦ç¨‹åºçš„ä¸»è¦ç‰¹å¾å¯ä»¥æ ¹æ®æ¨¡å‹è¿›è¡Œæè¿°ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½è‡ªåŠ¨ç”Ÿæˆè¯¥ç¨‹åºçš„è¡¨ç¤ºæ³•ã€‚è¿™ç§ä»£ç ä¸­çš„æ¨¡å‹è¡¨ç¤ºæ³•ä¼šè‡ªåŠ¨ç”Ÿæˆç»“æ„ï¼Œä½†è¡Œä¸ºé€šå¸¸å¿…é¡»ç”±å¼€å‘äººå‘˜è‡ªå·±ç›´æ¥å®ç°ã€‚\nAcceleo Acceleo 3 æ˜¯ä¸€æ¬¾å®ç° OMG æ¨¡å‹åˆ°æ–‡æœ¬è§„èŒƒçš„ä»£ç ç”Ÿæˆå™¨ã€‚å®ƒä¸ºå¼€å‘äººå‘˜æä¾›äº†é«˜è´¨é‡ä»£ç ç”Ÿæˆé›†æˆå¼€å‘ç¯å¢ƒæ‰€åº”å…·å¤‡çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼šç®€å•çš„è¯­æ³•ã€é«˜æ•ˆçš„ä»£ç ç”Ÿæˆã€å…ˆè¿›çš„å·¥å…·ä»¥åŠä¸ JDT ä¸ç›¸ä¸Šä¸‹çš„åŠŸèƒ½ã€‚Acceleo å¯å¸®åŠ©å¼€å‘äººå‘˜å¤„ç†ä»£ç ç”Ÿæˆå™¨çš„ç”Ÿå‘½å‘¨æœŸã€‚å¾—ç›ŠäºåŸºäºåŸå‹çš„æ–¹æ³•ï¼Œæ‚¨å¯ä»¥ä»ç°æœ‰åŸå‹çš„æºä»£ç ä¸­å¿«é€Ÿã€è½»æ¾åœ°åˆ›å»ºç¬¬ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œç„¶ååˆ©ç”¨ Acceleo å·¥å…·çš„æ‰€æœ‰åŠŸèƒ½ï¼ˆå¦‚é‡æ„å·¥å…·ï¼‰ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°æ”¹è¿›ç”Ÿæˆå™¨ï¼Œå®ç°å®Œæ•´çš„ä»£ç ç”Ÿæˆå™¨ã€‚\nAcceleo çš„å·¥ä½œï¼šå®æ–½æ¨¡å‹é©±åŠ¨è®¾è®¡åŸåˆ™ã€‚ä½†ç¼ºå°‘çš„æ˜¯å¯¹ Acceleo å·¥ä½œä½“éªŒçš„æè¿°ã€‚Acceleo åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ª Eclipse æ’ä»¶ï¼Œå®ƒä¸ºæ‚¨æä¾›äº†ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥æ ¹æ®æ‚¨æŒ‡å®šçš„æ¨¡æ¿ï¼Œä» EMF æ¨¡å‹å¼€å§‹åˆ›å»º Java ä»£ç ã€‚EMF æ¨¡å‹å¯ä»¥é€šè¿‡ä¸åŒæ–¹å¼å®šä¹‰ï¼šUML å›¾è¡¨æˆ–è‡ªå®šä¹‰ DSLã€‚\nUmple Umple æ˜¯ä¸€ç§å»ºæ¨¡å·¥å…·å’Œç¼–ç¨‹è¯­è¨€ç³»åˆ—ï¼Œå¯å®ç°ä½œè€…æ‰€è¯´çš„é¢å‘æ¨¡å‹çš„ç¼–ç¨‹ã€‚å®ƒåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚ Javaã€C++ã€PHP å’Œ Rubyï¼‰ä¸­æ·»åŠ äº†å…³è”ã€å±æ€§å’ŒçŠ¶æ€æœºç­‰æŠ½è±¡æ¦‚å¿µï¼Œè¿™äº›æŠ½è±¡æ¦‚å¿µæºè‡ª UMLã€‚Umple è¿˜å¯ç”¨äºä»¥æ–‡æœ¬æ–¹å¼åˆ›å»º UML ç±»å›¾å’ŒçŠ¶æ€å›¾ã€‚\nUmple æ˜¯ä¸€ç§å°† UML æ¨¡å¼ä¸ä¼ ç»Ÿç¼–ç¨‹è¯­è¨€ç»“æ„åŒ–ç»“åˆçš„å·¥å…·ã€‚å®ƒçš„è¯ç”Ÿæ˜¯ä¸ºäº†ç®€åŒ–æ¨¡å‹é©±åŠ¨å¼€å‘çš„è¿‡ç¨‹ï¼Œè€Œä¼ ç»Ÿçš„æ¨¡å‹é©±åŠ¨å¼€å‘éœ€è¦ç‰¹å®šè€Œå¤æ‚çš„å·¥å…·ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œæ”¯æŒ UMLï¼ˆç±»å’ŒçŠ¶æ€ï¼‰å›¾å®šä¹‰æ¨¡å‹çš„åŠŸèƒ½ã€‚ç„¶åï¼ŒUmple ä»£ç ä¼šè¢«å…¶ç¼–è¯‘å™¨è½¬æ¢ä¸º Java æˆ– PHP ç­‰ä¼ ç»Ÿè¯­è¨€ã€‚\nUmple å¯ä»¥æœ‰å¤šç§ç”¨æ³•ï¼š\nå¯ç”¨äºä»¥æ–‡æœ¬æ–¹å¼æè¿° UML å›¾è¡¨ å¯ä¸ä¼ ç»Ÿè¯­è¨€ç»“åˆä½¿ç”¨ï¼Œä½œä¸ºè¯¥ç›®æ ‡è¯­è¨€çš„é¢„å¤„ç†å™¨æˆ–æ‰©å±•ç¨‹åºã€‚Umple ç¼–è¯‘å™¨åœ¨ç›®æ ‡è¯­è¨€ä¸­è½¬æ¢ Umple ä»£ç ï¼Œå¹¶ä¿æŒç°æœ‰ç›®æ ‡è¯­è¨€ä¸å˜ã€‚ ç”±äºå…¶å¯¹ UML çŠ¶æ€æœºçš„å¤§é‡æ”¯æŒï¼Œå®ƒå¯ä»¥ä½œä¸ºçŠ¶æ€æœºç”Ÿæˆå™¨ä½¿ç”¨ã€‚æ ¹æ® Umple å¯¹çŠ¶æ€æœºçš„æè¿°ï¼Œå¯ä»¥ç”Ÿæˆè®¸å¤šç›®æ ‡è¯­è¨€çš„å®ç°ã€‚ 1 2 3 4 5 6 7 8 9 10 class Student {} class CourseSection {} class Registration { String grade; * -- 1 Student; * -- 1 CourseSection; } ä¸‹é¢çš„ Umple ä»£ç æè¿°çš„æ˜¯ä¸€ä¸ªçŠ¶æ€æœºã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class GarageDoor { status { Open { buttonOrObstacle -\u0026gt; Closing; } Closing { buttonOrObstacle -\u0026gt; Opening; reachBottom -\u0026gt; Closed; } Closed { buttonOrObstacle -\u0026gt; Opening; } Opening { buttonOrObstacle -\u0026gt; HalfOpen; reachTop -\u0026gt; Open; } HalfOpen { buttonOrObstacle -\u0026gt; Opening; } } } Telosys Telosys è®¾è®¡ç”¨äºç”Ÿæˆæ‰€æœ‰ç®¡é“å’Œé‡å¤ä»£ç ã€‚å®ƒä¸éœ€è¦ä½¿ç”¨ UMLï¼Œä½†å…è®¸ç”¨æˆ·ä»èµ·å§‹æ•°æ®åº“æˆ–ä½¿ç”¨ DSL ç”Ÿæˆæ¨¡å‹ã€‚å®ƒæ˜¯ä¸€ä¸ªæœ‰è¶£ä¸”æ˜“äºä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œè¿˜ä»¥ Eclipse æ’ä»¶çš„å½¢å¼æä¾› IDE æ”¯æŒã€‚\nurlï¼šhttps://tomassetti.me/telosys-code-generation-tool/ æ•°æ®åº“ç›¸å…³ä»£ç  è¿™ä¸€åˆ‡éƒ½å›´ç»•ç€ä¸€ä¸ªæ•°æ®åº“æ¨¡å¼å±•å¼€ï¼Œè€Œä»£ç å°±æ˜¯ä»è¿™ä¸ªæ¨¡å¼ä¸­ç”Ÿæˆçš„ï¼Œæˆ–è€…æ˜¯ä»ä¸€ä¸ªæ•°æ®åº“ä¸­ç”Ÿæˆä¸€ä¸ªæ¨¡å¼ã€‚ä¹‹æ‰€ä»¥å¯ä»¥ä½¿ç”¨è¿™äº›ç”Ÿæˆå™¨ï¼Œæœ‰ä¸¤ä¸ªåŸå› ï¼š\nå…³ç³»æ•°æ®åº“æ”¯æŒä¸ä¹‹äº¤äº’çš„æ ‡å‡†è¯­è¨€ï¼ˆSQLï¼‰ ç¼–ç¨‹è¯­è¨€ä¸­å­˜åœ¨ä¸æ•°æ®åº“äº¤äº’çš„å¹¿æ³›æ¨¡å¼å’Œåº“ è¿™ä¸¤ä¸ªåŸå› ä¿è¯äº†åœ¨ç¼–ç¨‹è¯­è¨€å’ŒåŒ…å«ç¨‹åºæ‰€éœ€æ•°æ®çš„æ•°æ®åº“ä¹‹é—´åˆ›å»ºæ ‡å‡†èƒ¶åˆä»£ç æˆä¸ºå¯èƒ½ã€‚åœ¨å®è·µä¸­ï¼Œæ•°æ®åº“æ¨¡å¼å¯ä»¥ä½œä¸ºä¸€ä¸ªç®€å•çš„æ¨¡å‹ï¼Œç”¨æ¥ç”Ÿæˆä»£ç ã€‚\nè®¸å¤šæ¡†æ¶æˆ–é›†æˆå¼€å‘ç¯å¢ƒéƒ½åŒ…å«ä»ç±»ç”Ÿæˆæ•°æ®åº“æ¨¡å¼çš„åŸºæœ¬å·¥å…·ï¼Œåä¹‹äº¦ç„¶ï¼Œç”Ÿæˆä¸æ•°æ®åº“è¡¨äº¤äº’çš„ç±»ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä¸€ä¸ªå¯ä»¥åšæ›´å¤šäº‹æƒ…çš„å·¥å…·ç¤ºä¾‹ã€‚\nCelerio Celerio æ˜¯é¢å‘æ•°æ®åº”ç”¨ç¨‹åºçš„ä»£ç ç”Ÿæˆå·¥å…·ã€‚\nCelerio æ˜¯ä¸€æ¬¾ Java å·¥å…·ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ªæ•°æ®åº“æå–å™¨ï¼Œç”¨äºä»ç°æœ‰æ•°æ®åº“ä¸­è·å–æ•°æ®åº“æ¨¡å¼ã€‚ç„¶åï¼Œå®ƒå°†ç”Ÿæˆçš„æ¨¡å¼ä¸é…ç½®æ–‡ä»¶ç»“åˆèµ·æ¥ï¼Œç„¶åå¯åŠ¨æ¨¡æ¿å¼•æ“ï¼Œä»¥åˆ›å»ºæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚æå–çš„æ•°æ®åº“æ¨¡å¼ä¸º XML æ ¼å¼ã€‚\nDomain Specific Languageï¼ˆDSLï¼‰ DSL æ˜¯ä»¥æ­£è§„åŒ–æ–¹å¼æ•æ‰ä¸šåŠ¡é€»è¾‘çš„å¥½æ–¹æ³•ã€‚ä¹‹åï¼Œéœ€è¦ä»¥æŸç§æ–¹å¼æ‰§è¡Œè¿™äº›é€»è¾‘ã€‚è™½ç„¶æœ‰æ—¶ä¼šä½¿ç”¨è§£é‡Šå™¨å’Œç¼–è¯‘å™¨æ¥æ‰§è¡Œ DSLï¼Œä½†ä»£ç ç”Ÿæˆå™¨å´ç»å¸¸è¢«ä½¿ç”¨ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒDSL å¯ä»¥è¢«ç¿»è¯‘æˆå·²ç»å­˜åœ¨ç¼–è¯‘å™¨çš„è¯­è¨€ï¼Œå¦‚ Java æˆ– C#ã€‚\nç°åœ¨ï¼Œå¯ä»¥ä½¿ç”¨è¯­è¨€å·¥ä½œå°æ¥æ„å»º DSLï¼Œè¯­è¨€å·¥ä½œå°æ˜¯ä¸“é—¨ä¸ºè®¾è®¡å’Œå®ç° DSL è€Œè®¾è®¡çš„é›†æˆå¼€å‘ç¯å¢ƒã€‚è¯­è¨€å·¥ä½œå°ä¹‹æ‰€ä»¥æœ‰ç”¨ï¼Œæ˜¯å› ä¸ºå®ƒä»¬è¿˜èƒ½ä»¥è¾ƒä½çš„æˆæœ¬ä¸º DSL å®šä¹‰ç¼–è¾‘å™¨å’Œå…¶ä»–æ”¯æŒå·¥å…·ã€‚è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œå› ä¸ºéå¼€å‘äººå‘˜ä¹Ÿå¯ä»¥ä½¿ç”¨ DSLï¼Œä»–ä»¬éœ€è¦å®šåˆ¶çš„ç¼–è¾‘å™¨æ¥åˆ©ç”¨è¯­è¨€çš„åŠŸèƒ½ï¼Œæˆ–è€…æ ¹æœ¬æ— æ³•ä½¿ç”¨æ™®é€šçš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚é™¤å…¶ä»–åŠŸèƒ½å¤–ï¼Œè¯­è¨€å·¥ä½œå°é€šå¸¸è¿˜é›†æˆäº†ä»£ç ç”ŸæˆåŠŸèƒ½ã€‚è®©æˆ‘ä»¬æ¥çœ‹å‡ ä¸ªä¾‹å­ã€‚\nJetBrains MPS\nJetBrains MPS æ˜¯åŸºäºé¡¹ç›®ç¼–è¾‘å™¨çš„è¯­è¨€å·¥ä½œå°ã€‚æ‚¨å¯ä»¥ç”¨å®ƒåˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ª DSLã€‚å®ƒè¿˜å¯ç”¨äºæ‰©å±•ç°æœ‰è¯­è¨€ã€‚ä¾‹å¦‚ï¼Œmbeddr å°±æ˜¯åŸºäº JetBrains MPS çš„ C è¯­è¨€æ‰©å±•ï¼Œç”¨äºæ”¹è¿›åµŒå…¥å¼ç¼–ç¨‹ã€‚\næ‰€è°“æŠ•å½±å¼ç¼–è¾‘å™¨ï¼Œæ˜¯æŒ‡ MPS ä¼šä¿ç•™æ•°æ®çš„åŸºæœ¬ç»“æ„ï¼Œå¹¶ä»¥æ˜“äºç¼–è¾‘çš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥ã€‚è¿™ä¸ªæ¦‚å¿µå¯èƒ½æœ‰ç‚¹éš¾ä»¥ç†è§£ã€‚æƒ³æƒ³ä¼ ç»Ÿçš„ç¼–ç¨‹ï¼šä½ å†™å‡ºæºä»£ç ï¼Œç„¶åç¼–è¯‘å™¨å°†æºä»£ç è½¬æ¢ä¸ºé€»è¾‘è¡¨ç¤ºï¼Œå³è§£ææ ‘ã€‚ç¼–è¯‘å™¨ä½¿ç”¨è¿™ç§è¡¨ç¤ºæ³•æ¥æ‰§è¡Œä¸€äº›æ“ä½œï¼Œå¦‚ä¼˜åŒ–æˆ–å°†å…¶è½¬æ¢ä¸ºæœºå™¨ä»£ç æ¥æ‰§è¡Œã€‚ä½¿ç”¨é¡¹ç›®ç¼–è¾‘å™¨ï¼Œæ‚¨å¯ä»¥ç›´æ¥å¤„ç†é€»è¾‘è¡¨ç¤ºï¼šè§£ææ ‘ã€‚ä¸è¿‡ï¼Œæ‚¨åªèƒ½æŒ‰ç…§ç¼–è¾‘å™¨ï¼ˆMPSï¼‰å…è®¸çš„æ–¹å¼å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚\nè¿™æ ·åšçš„ä¸»è¦åæœæ˜¯ï¼Œå½“ä½¿ç”¨ JetBrains MPS åˆ›å»º DSL æ—¶ï¼Œæ‚¨éœ€è¦æ•´ä¸ªé›†æˆå¼€å‘ç¯å¢ƒåŠå…¶æ‰€æœ‰åŠŸèƒ½å’ŒåŠŸèƒ½ã€‚æ‚¨å¯ä»¥è·å¾—è¯­æ³•é«˜äº®ã€ä»£ç è‡ªåŠ¨è¡¥å…¨ã€é¡¹ç›®ç®¡ç†ç­‰åŠŸèƒ½ã€‚\nä¸è¿‡ï¼Œè¿™ç§æ–¹æ³•çš„ä¼˜åŠ¿åœ¨äºï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªä½¿ç”¨ä»»ä½•å½¢å¼çš„è¾“å…¥æ¥ä¿®æ”¹ä»£ç çš„ DSLï¼Œå› æ­¤æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå›¾å½¢ç¼–è¾‘å™¨ã€ä¸€ä¸ªè¡¨æ ¼è¾“å…¥ï¼Œç”šè‡³æ˜¯æ™®é€šæ–‡æœ¬ã€‚è¿™ä¸€ä¼˜åŠ¿ä½¿å¾—åˆ›å»ºéç¨‹åºå‘˜ä¹Ÿèƒ½ä½¿ç”¨çš„ DSL ç‰¹åˆ«æœ‰ç”¨ã€‚\nXtext Xtext æ˜¯ä¸€ç§è¯­è¨€å·¥ä½œå°ï¼Œæ„å»ºäº Eclipse å’Œ Eclipse Modeling Framework ä¹‹ä¸Šã€‚å®ƒå¯ç”¨äºè®¾è®¡æ–‡æœ¬ DSL å¹¶ä¸ºå…¶è·å–ç¼–è¾‘å™¨ã€‚ ä»åŠŸèƒ½ä¸Šè®²ï¼ŒXtext æ˜¯ä¸åŒå·¥å…·ï¼ˆå¦‚ç”¨äºè§£æçš„ ANTLRã€ç”¨äºç”¨æˆ·ç•Œé¢çš„ Eclipse ç­‰ï¼‰çš„ç»„åˆï¼Œç”¨äºç”Ÿæˆ DSLã€‚\nJulia è®©æˆ‘ä»¬çœ‹çœ‹ Julia ä¸­å®çš„ç¤ºä¾‹ï¼ŒJulia æ˜¯ä¸€ç§å— Lisp å¯å‘çš„è¯­è¨€ï¼Œå®ƒçš„è¯­æ³•æ›´æ˜“äºç†è§£ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 julia\u0026gt; macro twostep(arg) println(\u0026#34;I execute at parse time. The argument is: \u0026#34;, arg) return :(println(\u0026#34;I execute at runtime. The argument is: \u0026#34;, $arg)) end @twostep (macro with 1 method) julia\u0026gt; ex = macroexpand( :(@twostep :(1, 2, 3)) ); julia\u0026gt; ex # the macro itself :((println)(\u0026#34;I execute at runtime. The argument is: \u0026#34;, $(Expr(:copyast, :($(QuoteNode(:((1, 2, 3))))))))) julia\u0026gt; eval(ex) # execution of the macro I execute at runtime. The argument is: (1, 2, 3) å¯ä»¥çœ‹å‡ºï¼Œæ‰§è¡Œå®å’Œæ‰§è¡Œå®è¿”å›çš„è¡¨è¾¾å¼æ˜¯ä¸¤ç äº‹ã€‚\nè¿™ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½å¯ä»¥ç”¨äºä»£ç ç”Ÿæˆï¼šä½ ä¸éœ€è¦å¤–éƒ¨å·¥å…·æ¥åˆ›å»ºæ¨¡æ¿ä»£ç ï¼Œä½ å¯ä»¥ä»å†…éƒ¨åˆ›å»ºã€‚åœ¨ä¸‹é¢æ‘˜è‡ª Julia æ–‡æ¡£çš„ç¤ºä¾‹ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒæ˜¯å¦‚ä½•å®šä¹‰ä¸€ç³»åˆ—æ–°çš„ä¸‰å…ƒè¿ç®—ç¬¦çš„ã€‚\n1 2 3 for op = (:+, :*, :\u0026amp;, :|, :$) eval(:(($op)(a,b,c) = ($op)(($op)(a,b),c))) end ä»£ç åˆ©ç”¨å·²å®šä¹‰çš„äºŒå…ƒè¿ç®—ç¬¦å®šä¹‰äº†è¿™äº›æ–°çš„ä¸‰å…ƒè¿ç®—ç¬¦ï¼š\nåœ¨å‰ä¸¤ä¸ªå…ƒç´ ä¹‹é—´è¿›è¡ŒåŸºæœ¬çš„äºŒè¿›åˆ¶è¿ç®— ç„¶ååœ¨ç¬¬ä¸€ä¸ªè¿ç®—ç»“æœå’Œç¬¬ä¸‰ä¸ªå…ƒç´ ä¹‹é—´å†æ¬¡è¿›è¡Œè¿ç®— è¯·æ³¨æ„ï¼ŒJulia çš„æ ‡å‡†è¯­æ³•ä¸ä¼ ç»Ÿè¯­è¨€ç±»ä¼¼ï¼šæ²¡æœ‰å¥‡æ€ªçš„æ‹¬å·ï¼Œè¡¨è¾¾å¼æ­£å¸¸ç­‰ã€‚ç„¶è€Œï¼Œå½“æ‚¨ä½¿ç”¨å…ƒç¼–ç¨‹åŠŸèƒ½æ—¶ï¼Œæ‚¨å°†ä½¿ç”¨ç±»ä¼¼ Lisp çš„å†…éƒ¨è¯­æ³•ã€‚\nè¿™åªæ˜¯å†°å±±ä¸€è§’ï¼Œä½ å¯ä»¥æŸ¥é˜… Julia æ‰‹å†Œï¼Œè¿›ä¸€æ­¥äº†è§£å…ƒç¼–ç¨‹çš„å¼ºå¤§åŠŸèƒ½ã€‚\nRacket å¦‚æœä½ æƒ³åœ¨å…ƒç¼–ç¨‹æ–¹é¢åšå¾—æ›´å¤šï¼Œå¯ä»¥ä½¿ç”¨ Racketï¼Œè¿™æ˜¯ä¸€ç§å— Lisp å’Œ Schemeï¼ˆå¦ä¸€ç§å— Lisp å½±å“çš„è¯­è¨€ï¼‰å¯å‘çš„è¯­è¨€ã€‚\nRacket åŒæ—¶æ˜¯ä¸€ç§è¯­è¨€å’Œä¸€ä¸ªå¹³å°ï¼Œå®ƒè¢«è®¾è®¡æˆä¸€ç§å¯ä»¥å®šä¹‰å…¶ä»–è¯­è¨€çš„è¯­è¨€ã€‚å› æ­¤ï¼Œå®ƒç”šè‡³å¯ä»¥ä½¿ç”¨æ¯”å®æ›´å¼ºå¤§çš„å…ƒç¼–ç¨‹åŠŸèƒ½ã€‚Racket å¯ä»¥å®šä¹‰å…¨æ–°çš„è¯­è¨€ï¼Œæ”¹å˜åŸºæœ¬è¯­è¨€çš„è¯­æ³•ã€‚å®ƒä¹‹æ‰€ä»¥èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼ŒåŸºæœ¬ä¸Šæ˜¯å› ä¸ºå®ƒå…è®¸ä½ æ”¹å˜è§£ææœ¬èº«ã€‚\nRacket çš„ä¼ ç»Ÿè¯­æ³•ç±»ä¼¼ Lispã€‚\n1 2 3 (define (four p) (define two-p (hc-append p p)) (vc-append two-p two-p)) ä½ å¯ä»¥æ”¹å˜å®ƒï¼Œä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ç§è¯­è¨€æ¥å®šä¹‰æ–‡æ¡£ï¼šScribble\n1 2 3 4 5 6 #lang scribble/base @title{On the Cookie-Eating Habits of Mice} If you give a mouse a cookie, he\u0026#39;s going to ask for a glass of milk. è¯¥è¯­è¨€å…è®¸æ‚¨åˆ›å»º HTMLã€PDF ç­‰æ–‡ä»¶ã€‚æ‚¨å¯ä»¥åœ¨è¯­è¨€ä¸­å®šä¹‰ç»“æ„ï¼Œç„¶åç”Ÿæˆæ‰€éœ€çš„ä»»ä½•è¾“å‡ºã€‚\nè¿™æ˜¯ä¸€ä¸ªä¸å…ƒç¼–ç¨‹å’Œ DSL ç›¸åŒ¹é…çš„å…¨æ–°å±‚æ¬¡ï¼šæ‚¨å¯ä»¥ä½¿ç”¨ç±»ä¼¼ DSL çš„æ˜“ç”¨ç•Œé¢è½»æ¾åˆ›å»ºè‡ªå®šä¹‰ç”Ÿæˆå™¨ã€‚å½“ç›®æ ‡å—ä¼—æ˜¯å…¶ä»–å¼€å‘äººå‘˜æ—¶ï¼Œå¯ä»¥é‡‡ç”¨è¿™ç§æ–¹æ³•ã€‚è¿™æ˜¯å› ä¸ºæ‚¨è™½ç„¶è·å¾—äº†ä¸€ç§åŠŸèƒ½å¼ºå¤§çš„è¯­è¨€ï¼Œä½†å®ƒä»…ä»…æ˜¯ä¸€ç§è¯­è¨€è€Œå·²ã€‚å¦‚æœä½¿ç”¨è¯­è¨€å·¥ä½œå°ï¼Œæ‚¨å°±å¯ä»¥æ‹¥æœ‰ä¸€æ•´å¥—å¼ºå¤§çš„ç¼–è¾‘å·¥å…·ï¼Œå¸®åŠ©æ™®é€šç”¨æˆ·ä½¿ç”¨è¯­è¨€ã€‚\nAd-Hoc Applications è¿™ä¸€ç±»åŒ…æ‹¬æ‰€æœ‰å†…å®¹ï¼šä»ä¸ºå¤„ç†ä¸€ä»¶äº‹æƒ…è€Œè®¾è®¡çš„å·¥å…·åˆ°åœ¨ä¼ä¸šç¯å¢ƒä¸­ä½¿ç”¨çš„ä¸´æ—¶ç³»ç»Ÿï¼Œè¿™äº›ç³»ç»Ÿå¯ä»¥æ ¹æ®æ­£å¼çš„è‡ªå®šä¹‰æè¿°ç”Ÿæˆæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚è¿™äº›åº”ç”¨ç¨‹åºé€šå¸¸æ˜¯ç‰¹å®šå·¥ä½œæµç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œå®¢æˆ·ä½¿ç”¨å›¾å½¢ç•Œé¢æè¿°ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä¸€ä¸ªä¸´æ—¶ç³»ç»Ÿä¼šç”Ÿæˆæ”¯æŒè¯¥åº”ç”¨ç¨‹åºçš„æ•°æ®åº“æ¨¡å¼ï¼Œå¦ä¸€ä¸ªç³»ç»Ÿä¼šç”Ÿæˆ CRUD ç•Œé¢ç­‰ã€‚\nè¿™ä¸æ˜¯ä¸€ä¸ªæ­£ç¡®å®šä¹‰çš„ç±»åˆ«ï¼Œè€Œæ˜¯ä¸€ä¸ªæ€»æ‹¬ç±»åˆ«ï¼ŒåŒ…æ‹¬ä¸å±äºç‰¹å®šç»„åˆ«çš„æ‰€æœ‰å†…å®¹ã€‚è¿™æ„å‘³ç€è¿™ç»„ç¨‹åºæ²¡æœ‰æ ‡å‡†ç»“æ„ã€‚è¿™ä¹Ÿè¯æ˜äº†ä»£ç ç”Ÿæˆçš„å¤šåŠŸèƒ½æ€§ï¼šå¦‚æœä½ èƒ½åˆ›å»ºä¸€ä¸ªé—®é¢˜æ¨¡å‹æˆ–æè¿°ï¼Œé‚£ä¹ˆä½ å°±èƒ½ç”¨ä»£ç ç”Ÿæˆæ¥è§£å†³é—®é¢˜ã€‚å½“ç„¶ï¼Œä½ è¿˜å¿…é¡»äº†è§£è§£å†³ä¸€èˆ¬é—®é¢˜å’Œåˆ›å»ºä»£ç ç”Ÿæˆå·¥å…·æ˜¯å¦æœ‰æ„ä¹‰ï¼Œè¿˜æ˜¯ç›´æ¥è§£å†³é—®é¢˜æ›´å¥½ã€‚\nåœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä¸¤ç§å·¥å…·ï¼šCMake æ˜¯ä¸€æ¬¾å¼€å‘å·¥å…·ï¼Œè€Œ Yeoman åˆ™æ˜¯ä¸€æ¬¾è„šæ‰‹æ¶å·¥å…·ã€‚å‰è€…ä¸»è¦æ˜¯ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼šä¸ºå…¶ä»–è½¯ä»¶æä¾›æ”¯æŒçš„è½¯ä»¶ã€‚ç¬¬äºŒç§å·¥å…·ç®€åŒ–äº†å¼€å‘äººå‘˜çš„å·¥ä½œï¼Œæä¾›äº†ä¸€ç§åˆ›å»ºå³ç”¨é¡¹ç›®çš„æ–¹æ³•ï¼Œå¯é’ˆå¯¹ç‰¹å®šè½¯ä»¶å¹³å°ã€åº“æˆ–éœ€æ±‚è¿›è¡Œä¼˜åŒ–ã€‚\nCMake CMake æ˜¯ä¸€ä¸ªå¼€æºã€è·¨å¹³å°çš„å·¥å…·ç³»åˆ—ï¼Œç”¨äºæ„å»ºã€æµ‹è¯•å’Œæ‰“åŒ…è½¯ä»¶ã€‚\nCMake åŒ…æ‹¬ä¸‰ä¸ªå¼€å‘å·¥å…·ï¼Œç”¨äºå¸®åŠ©å¼€å‘ C å’Œ C++ã€‚ä¸»è¦å·¥å…·æ—¨åœ¨ä¸ºä¸åŒå¹³å°å’Œå·¥å…·é“¾ç”Ÿæˆæ„å»ºæ–‡ä»¶ï¼ˆå³ makefile å’Œé¡¹ç›®æ–‡ä»¶ï¼‰ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥ç”Ÿæˆ Linux çš„ makefile å’Œ Visual Studio é¡¹ç›®æ–‡ä»¶ã€‚\nCMake ä¸æ˜¯ç¼–è¯‘å™¨ã€‚ç”¨æˆ·ä»¥ CMake æ ¼å¼å®šä¹‰é¡¹ç›®ç»“æ„ï¼Œç„¶åè¯¥å·¥å…·ä¼šç”Ÿæˆä¼ ç»Ÿæ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ™®é€šæ„å»ºæ–‡ä»¶ã€‚\nCMake æ–‡ä»¶çœ‹èµ·æ¥åƒä¸€ç³»åˆ—å‘½ä»¤/å®ï¼Œç”¨äºä¸ºç¼–è¯‘å™¨è®¾ç½®é€‰é¡¹/æ ‡å¿—ã€é“¾æ¥åº“ã€æ‰§è¡Œè‡ªå®šä¹‰å‘½ä»¤ç­‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 cmake_minimum_required(VERSION 2.8) project(\u0026#34;Antlr-cpp-tutorial\u0026#34;) [..] if (NOT WIN32) set(CMAKE_CXX_FLAGS \u0026#34;-Wdeprecated -Wno-attributes\u0026#34; ) endif() [..] if(APPLE) add_custom_command(TARGET antlr4-tutorial POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different \u0026#34;${PROJECT_SOURCE_DIR}/libs/antlr4-runtime.dylib\u0026#34; $\u0026lt;TARGET_FILE_DIR:antlr4-tutorial\u0026gt;) endif() Yeoman Yeoman æ˜¯ä¸€ä¸ªé€šç”¨çš„è„šæ‰‹æ¶ç³»ç»Ÿï¼Œå¯ä»¥åˆ›å»ºä»»ä½•ç±»å‹çš„åº”ç”¨ç¨‹åºã€‚\nå¦‚ä»Šï¼Œè¦æˆä¸ºä¸€åä¼˜ç§€çš„ç¨‹åºå‘˜ï¼Œæ„å‘³ç€ä¸ä»…ä»…è¦çŸ¥é“å¦‚ä½•ç¼–ç ã€‚ä½ éœ€è¦äº†è§£ä½ æ‰€ä½¿ç”¨çš„æ¯ç§å·¥å…·çš„æœ€ä½³å®è·µï¼Œå¹¶è®°ä½æ¯æ¬¡éƒ½è¦æ‰§è¡Œå®ƒä»¬ã€‚ç¼–å†™ä»£ç æœ¬èº«å°±å·²ç»å¾ˆå›°éš¾äº†ï¼Œå¦‚æœè¿˜éœ€è¦æ­£ç¡®ç¼–å†™é…ç½®æ–‡ä»¶å’Œä½¿ç”¨æ­£ç¡®çš„é¡¹ç›®ç»“æ„ï¼Œé‚£å°±æ›´éš¾äº†ã€‚è¿™å°±æ˜¯åƒ Yeoman è¿™æ ·çš„å·¥å…·çš„ç”¨æ­¦ä¹‹åœ°ï¼šå®ƒæ˜¯ä¸€æ¬¾è„šæ‰‹æ¶å·¥å…·ï¼Œåªéœ€ä¸€æ¡å‘½ä»¤å°±èƒ½ç”Ÿæˆä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå¹¶ç«‹å³å®æ–½æ‰€æœ‰æœ€ä½³å®è·µã€‚\nYeoman çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ç”Ÿæ€ç³»ç»Ÿï¼Œå¼€å‘äººå‘˜å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šæ„å»ºè‡ªå·±çš„æ¨¡æ¿ã€‚è¯¥å·¥å…·éå¸¸å—æ¬¢è¿ï¼Œå·²æœ‰æ•°åƒä¸ªæ¨¡æ¿å¯ä¾›ä½¿ç”¨ã€‚\nYeoman æ˜¯ä¸€æ¬¾ JavaScript åº”ç”¨ç¨‹åºï¼Œå› æ­¤ç¼–å†™ç”Ÿæˆå™¨åªéœ€ç¼–å†™ JavaScript ä»£ç å¹¶ä½¿ç”¨æä¾›çš„ API å³å¯ã€‚å·¥ä½œæµç¨‹ä¹Ÿéå¸¸ç®€å•ï¼šå‘ç”¨æˆ·è¯¢é—®é¡¹ç›®ä¿¡æ¯ï¼ˆå¦‚åç§°ï¼‰ï¼Œæ”¶é›†é…ç½®ä¿¡æ¯ï¼Œç„¶åç”Ÿæˆé¡¹ç›®ã€‚\nä»¥ä¸‹ä»£ç å±•ç¤ºäº†ç”Ÿæˆå™¨çš„éƒ¨åˆ†ç¤ºä¾‹ï¼Œç”¨äºåˆ›å»º Yeoman æ¨¡æ¿ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 function makeGeneratorName(name) { name = _.kebabCase(name); name = name.indexOf(\u0026#39;generator-\u0026#39;) === 0 ? name : \u0026#39;generator-\u0026#39; + name; return name; } module.exports = class extends Generator { initializing() { this.props = {}; } prompting() { return askName( { name: \u0026#39;name\u0026#39;, message: \u0026#39;Your generator name\u0026#39;, default: makeGeneratorName(path.basename(process.cwd())), filter: makeGeneratorName, validate: str =\u0026gt; { return str.length \u0026gt; \u0026#39;generator-\u0026#39;.length; } }, this ).then(props =\u0026gt; { this.props.name = props.name; }); } [..] writing() { const pkg = this.fs.readJSON(this.destinationPath(\u0026#39;package.json\u0026#39;), {}); const generatorGeneratorPkg = require(\u0026#39;../package.json\u0026#39;); [..] this.fs.writeJSON(this.destinationPath(\u0026#39;package.json\u0026#39;), pkg); } conflicts() { this.fs.append(this.destinationPath(\u0026#39;.eslintignore\u0026#39;), \u0026#39;**/templatesn\u0026#39;); } install() { this.installDependencies({ bower: false }); } }; Resources https://tomassetti.me/code-generation/ ","permalink":"https://WFUing.github.io/posts/tech/language/code-generation/a-guide-to-code-generation/","summary":"ä¸ºä»€ä¹ˆè¦ç”¨ä»£ç ç”Ÿæˆ productivityï¼šä½¿ç”¨ä»£ç ç”Ÿæˆï¼Œåªéœ€ç¼–å†™ä¸€æ¬¡ generator ï¼Œå°±å¯ä»¥æ ¹æ®éœ€è¦å¤šæ¬¡é‡å¤ä½¿ç”¨ã€‚å‘ generator æä¾›ç‰¹å®šè¾“å…¥å¹¶è°ƒç”¨å®ƒæ¯”æ‰‹åŠ¨ç¼–å†™ä»£ç è¦å¿«å¾—å¤šï¼Œå› æ­¤ä»£ç ç”Ÿæˆå¯ä»¥èŠ‚çœæ—¶é—´ã€‚ Simplificationï¼šé€šè¿‡ä»£ç ç”Ÿæˆï¼Œä½ å¯ä»¥ä»ä¸€äº›æŠ½è±¡çš„æè¿°ä¸­ç”Ÿæˆä»£ç ã€‚éœ€è¦ç»´æŠ¤çš„éƒ¨åˆ†å˜æˆäº† generator çš„è¾“å…¥éƒ¨åˆ†ï¼Œè¯¥éƒ¨åˆ†é€šå¸¸æ˜¯ä»£ç çš„æè¿°ï¼Œè€Œä¸æ˜¯ä»£ç æœ¬èº«ï¼Œä¸æ•´ä¸ªç”Ÿæˆçš„ä»£ç ç›¸æ¯”ï¼Œè¯¥æè¿°é€šå¸¸æ›´å®¹æ˜“åˆ†æå’Œæ£€æŸ¥ã€‚ Portabilityï¼šä¸€æ—¦ä½ æœ‰äº†ä¸ºæŸç§è¯­è¨€æˆ–æ¡†æ¶ç”Ÿæˆä»£ç çš„ç¨‹åºï¼Œä½ å°±å¯ä»¥ç®€å•åœ°æ›´æ”¹ generator ï¼Œå¹¶ä»¥ä¸åŒçš„è¯­è¨€æˆ–æ¡†æ¶ä¸ºç›®æ ‡ã€‚æ‚¨è¿˜å¯ä»¥åŒæ—¶é’ˆå¯¹å¤šä¸ªå¹³å°ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨è§£æå™¨ç”Ÿæˆå™¨ï¼Œæ‚¨å¯ä»¥è·å¾— C#ã€Java å’Œ C++ çš„ parserã€‚ å¦ä¸€ä¸ªä¾‹å­ï¼šæ‚¨å¯èƒ½ä¼šç¼–å†™ä¸€ä¸ª UML å›¾è¡¨ï¼Œç„¶åä½¿ç”¨ä»£ç ç”Ÿæˆå™¨ç”¨ C# åˆ›å»ºä¸€ä¸ªéª¨æ¶ç±»ï¼Œå¹¶ç”¨ SQL ä»£ç ä¸º MySQL åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ã€‚å› æ­¤ï¼Œç›¸åŒçš„æŠ½è±¡æè¿°å¯ç”¨äºç”Ÿæˆä¸åŒç±»å‹çš„å·¥ä»¶ã€‚ Consistencyï¼šæœ‰äº†ä»£ç ç”Ÿæˆï¼Œä½ æ€»èƒ½å¾—åˆ°ä½ æ‰€æœŸæœ›çš„ä»£ç ã€‚ç”Ÿæˆçš„ä»£ç æ˜¯æ ¹æ®ç›¸åŒçš„åŸåˆ™è®¾è®¡çš„ï¼Œå‘½åè§„åˆ™ç­‰ä¹Ÿæ˜¯ä¸€è‡´çš„ã€‚å½“ç„¶ï¼Œé™¤äº†ç”Ÿæˆå™¨ä¸­çš„ bug ä¹‹å¤–ï¼Œä»£ç æ€»æ˜¯èƒ½æŒ‰ç…§ä½ æ‰€æœŸæœ›çš„æ–¹å¼è¿è¡Œï¼Œä»£ç è´¨é‡å§‹ç»ˆå¦‚ä¸€ã€‚å¦‚æœç”¨æ‰‹å·¥ç¼–å†™ä»£ç ï¼Œä¸åŒçš„å¼€å‘äººå‘˜å¯èƒ½ä¼šä½¿ç”¨ä¸åŒçš„é£æ ¼ï¼Œå³ä½¿æ˜¯æœ€é‡å¤çš„ä»£ç ä¹Ÿä¼šå¶å°”å‡ºç°é”™è¯¯ã€‚ ä¸ºä»€ä¹ˆä¸è¦ç”¨ä»£ç ç”Ÿæˆ Maintenanceï¼šå½“æ‚¨ä½¿ç”¨ä»£ç ç”Ÿæˆå·¥å…·æ—¶ï¼Œæ‚¨çš„ä»£ç å°±ä¼šä¾èµ–äºå®ƒã€‚ä»£ç ç”Ÿæˆå·¥å…·å¿…é¡»å¾—åˆ°ç»´æŠ¤ã€‚å¦‚æœä½ åˆ›å»ºäº†å®ƒï¼Œä½ å°±å¿…é¡»ä¸æ–­æ›´æ–°å®ƒï¼›å¦‚æœä½ åªæ˜¯ä½¿ç”¨ç°æœ‰çš„å·¥å…·ï¼Œä½ å°±å¿…é¡»å¸Œæœ›æœ‰äººç»§ç»­ç»´æŠ¤å®ƒï¼Œæˆ–è€…ä½ å¿…é¡»è‡ªå·±æ¥æ‰‹ã€‚å› æ­¤ï¼Œä»£ç ç”Ÿæˆçš„ä¼˜åŠ¿å¹¶ä¸æ˜¯å…è´¹çš„ã€‚å¦‚æœä½ æ²¡æœ‰æˆ–æ‰¾ä¸åˆ°åˆé€‚çš„èƒ½åŠ›æ¥ç»´æŠ¤ä»£ç ç”Ÿæˆå™¨ï¼Œé£é™©å°±ä¼šæ›´å¤§ã€‚ Complexityï¼šè‡ªåŠ¨ç”Ÿæˆçš„ä»£ç å¾€å¾€æ¯”æ‰‹å·¥ç¼–å†™çš„ä»£ç æ›´å¤æ‚ã€‚æœ‰æ—¶ï¼Œè¿™ä¸å°†ä¸åŒéƒ¨åˆ†è¿æ¥åœ¨ä¸€èµ·æ‰€éœ€çš„èƒ¶æ°´ä»£ç æœ‰å…³ï¼Œæˆ–è€…ä¸ç”Ÿæˆå™¨æ”¯æŒçš„ç”¨ä¾‹å¤šäºæ‚¨æ‰€éœ€çš„ç”¨ä¾‹æœ‰å…³ã€‚åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œç”Ÿæˆçš„ä»£ç å¯ä»¥åšæ¯”ä½ æƒ³è¦çš„æ›´å¤šçš„äº‹æƒ…ï¼Œä½†è¿™å¹¶ä¸ä¸€å®šæ˜¯ä¸€ç§ä¼˜åŠ¿ã€‚ç”Ÿæˆä»£ç çš„ä¼˜åŒ–ç¨‹åº¦è‚¯å®šä¹Ÿä¸å¦‚æ‰‹å·¥ç¼–å†™çš„ä»£ç ã€‚æœ‰æ—¶è¿™ç§å·®å¼‚å¾ˆå°ï¼Œå¹¶ä¸æ˜æ˜¾ï¼Œä½†å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºéœ€è¦å°½å¯èƒ½åœ°æé«˜æ€§èƒ½ï¼Œé‚£ä¹ˆç”Ÿæˆçš„ä»£ç å¯¹æ‚¨æ¥è¯´å¯èƒ½å¹¶ä¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚ å¦‚ä½•ä½¿ç”¨ä»£ç ç”Ÿæˆ? æ ¹æ®å…·ä½“æƒ…å†µï¼Œä»£ç ç”Ÿæˆæ—¢å¯ä»¥æé«˜å·¥ä½œæ•ˆç‡ï¼Œä¹Ÿå¯ä»¥æˆä¸ºå¼€å‘è¿‡ç¨‹ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚è®¸å¤šç°ä»£é›†æˆå¼€å‘ç¯å¢ƒå°±æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„ä¾‹å­ï¼šåªéœ€ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œå°±èƒ½åˆ›å»ºä¸€ä¸ªéª¨æ¶ç±»æ¥å®ç°æ¥å£æˆ–ç±»ä¼¼åŠŸèƒ½ã€‚ä½ å®Œå…¨å¯ä»¥è‡ªå·±ç¼–å†™è¿™æ ·çš„ä»£ç ï¼Œåªä¸è¿‡ä¼šæµªè´¹ä¸€äº›æ—¶é—´æ¥å®Œæˆçç¢çš„ä»»åŠ¡ã€‚\nè®¾è®¡ä»£ç ç”Ÿæˆæµæ°´çº¿çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ã€‚åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸¤ä¸ªè¦ç´ ï¼š\nInputï¼šç”¨äºç”Ÿæˆä»£ç çš„ä¿¡æ¯æ¥è‡ªä½•å¤„ã€‚ Outputï¼šå¦‚ä½•è·å¾—ç”Ÿæˆçš„ä»£ç ã€‚ æ‚¨ä¹Ÿå¯ä»¥åœ¨è¾“å…¥å’Œè¾“å‡ºä¹‹é—´è®¾ç½®è½¬æ¢æ­¥éª¤ã€‚è¿™äº›æ­¥éª¤å¯ä»¥ç®€åŒ–è¾“å‡ºå±‚ï¼Œå¹¶ä½¿è¾“å…¥å’Œè¾“å‡ºæ›´åŠ ç‹¬ç«‹ã€‚\nPossible Inputs\nA DSLï¼šä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ANTLR æ¥æè¿°ä¸€ç§è¯­è¨€çš„è¯­æ³•ã€‚ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆä¸€ä¸ªè§£æå™¨ã€‚ code in other formatsï¼šæ•°æ®åº“æ¨¡å¼ã€‚æ ¹æ®æ•°æ®åº“æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆ DAOã€‚ wizardsï¼šå®ƒä»¬å…è®¸å‘ç”¨æˆ·è¯¢é—®ä¿¡æ¯ã€‚ reverse engineeringï¼šå¯é€šè¿‡å¤„ç†å¤æ‚çš„ä»£ç å·¥ä»¶è·å¾—ä¿¡æ¯ã€‚ data sourcesï¼šæ¯”å¦‚ä¸€ä¸ªDBï¼Œä¸€ä¸ªcsvæ–‡ä»¶æˆ–è€…ä¸€ä¸ªç”µå­è¡¨æ ¼ã€‚ Possible Outputs\ntemplate engineï¼šå¤§å¤šæ•°ç½‘ç»œç¨‹åºå‘˜éƒ½çŸ¥é“æ¨¡æ¿å¼•æ“ï¼Œå®ƒç”¨äºåœ¨ HTML UI ä¸­å¡«å……æ•°æ®ã€‚ code building APIsï¼šä¾‹å¦‚ï¼ŒJavaparser å¯ç”¨äºä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»º Java æ–‡ä»¶ã€‚ Some Pipelines","title":"A Guide to Code Generation"},{"content":"æ¡ˆä¾‹é©±åŠ¨ é€šè¿‡å‡ ä¸ªç®€å•çš„ä¾‹å­æ¥è§£é‡Šå’Œæ€»ç»“ä»€ä¹ˆæ˜¯äº¤å‰ç†µï¼ˆCross Entropyï¼‰ä»¥åŠæœºå™¨å­¦ä¹ åˆ†ç±»é—®é¢˜ä¸­ä¸ºä»€ä¹ˆä½¿ç”¨äº¤å‰ç†µã€‚\nç¬¬ä¸€ä¸ªä¾‹å­ å‡è®¾éšæœºä»ä¸€ä¸ªå£è¢‹é‡Œå–ç¡¬å¸ï¼Œå£è¢‹é‡Œæœ‰ä¸€ä¸ªè“è‰²çš„ï¼Œä¸€ä¸ªçº¢è‰²çš„ï¼Œä¸€ä¸ªç»¿è‰²çš„ï¼Œä¸€ä¸ªæ©˜è‰²çš„ã€‚å–å‡ºä¸€ä¸ªç¡¬å¸ä¹‹åï¼Œæ¯æ¬¡é—®ä¸€ä¸ªé—®é¢˜ï¼Œç„¶ååšå‡ºåˆ¤æ–­ï¼Œç›®æ ‡æ˜¯ï¼Œé—®æœ€å°‘çš„é—®é¢˜ï¼Œå¾—åˆ°æ­£ç¡®ç­”æ¡ˆã€‚å…¶ä¸­ä¸€ä¸ªæœ€å¥½çš„è®¾è®¡é—®é¢˜çš„ç­–ç•¥å¦‚ä¸‹ï¼š\næ¯ä¸€ä¸ªç¡¬å¸æœ‰ $\\frac{1}{4}$ çš„æ¦‚ç‡è¢«é€‰ä¸­ï¼Œ$\\frac{1}{4}æœºç‡ * 2é“é¢˜ç›® * 4é¢—çƒ = 2$ï¼Œå¹³å‡éœ€è¦é—®ä¸¤é“é¢˜ç›®æ‰èƒ½æ‰¾å‡ºä¸åŒé¢œè‰²çš„çƒï¼Œä¹Ÿå°±æ˜¯è¯´æœŸæœ›å€¼ä¸º $2$ï¼Œå°±æ˜¯ç†µï¼ˆentropyï¼‰ã€‚\nç¬¬äºŒä¸ªä¾‹å­ ä¾‹å­å˜äº†ï¼Œå˜æˆäº†è¢‹å­ä¸­ $\\frac{1}{8}$ çš„ç¡¬å¸æ˜¯ç»¿è‰²çš„ï¼Œ$\\frac{1}{8}$ çš„æ˜¯æ©˜è‰²çš„ï¼Œ$\\frac{1}{4}$ æ˜¯çº¢è‰²çš„ï¼Œ$\\frac{1}{2}$ æ˜¯è“è‰²çš„ï¼Œè¿™æ—¶æœ€ä¼˜çš„é—®é¢˜çš„ç­–ç•¥å¦‚ä¸‹:\n$\\frac{1}{2}$ çš„æ¦‚ç‡æ˜¯è“è‰²ï¼Œåªéœ€è¦ $1$ ä¸ªé—®é¢˜å°±å¯ä»¥çŸ¥é“æ˜¯æˆ–è€…ä¸æ˜¯ï¼Œ$\\frac{1}{4}$ çš„æ¦‚ç‡æ˜¯çº¢è‰²ï¼Œéœ€è¦2ä¸ªé—®é¢˜ï¼ŒæŒ‰ç…§è¿™ä¸ªé€»è¾‘ï¼ŒçŒœä¸­ç¡¬å¸éœ€è¦çš„é—®é¢˜çš„æœŸæœ›æ˜¯\n$$ \\frac{1}{2}*1+\\frac{1}{4}*2+\\frac{1}{8}*3+\\frac{1}{8}*3=1.75 $$\nç¬¬ä¸‰ä¸ªä¾‹å­ å‡è®¾è¢‹å­ä¸­å…¨éƒ¨æ˜¯è“è‰²çš„ç¡¬å¸ï¼Œé‚£ä¹ˆè¿™æ—¶å€™éœ€è¦ $0$ ä¸ªé—®é¢˜å°±å¯ä»¥çŒœåˆ°ç¡¬å¸ï¼Œå³ $\\log_{2}{1}=0$ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰å½“çŸ¥é“è¢‹å­ä¸­å…¨éƒ¨æ˜¯è“è‰²çš„ç¡¬å¸çš„æ—¶å€™éœ€è¦çš„é—®é¢˜æ˜¯ $0$ ä¸ªã€‚\næ€»ç»“ä¸Šé¢çš„ä¾‹å­ï¼Œå‡è®¾ä¸€ç§ç¡¬å¸å‡ºç°çš„æ¦‚ç‡æ˜¯ $p$ï¼Œé‚£ä¹ˆçŒœä¸­è¯¥ç¡¬å¸çš„æ‰€éœ€è¦çš„é—®é¢˜æ•°æ˜¯ $\\log_2{\\frac1{P_i}}$ã€‚ä¾‹å¦‚ $p=\\frac{1}{4}ï¼Œ\\log_{2}{4}$ ã€‚\nåœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œé—®é¢˜ä¸ªæ•°çš„æœŸæœ›æ˜¯\n$$ \\sum_i{p_i}*log_2{\\frac{1}{p_i}} $$\nè¿™ä¸ªå¼å­å°±æ˜¯ç†µçš„è¡¨è¾¾å¼ ã€‚ç®€å•æ¥è¯´ï¼Œå…¶æ„ä¹‰å°±æ˜¯åœ¨æœ€ä¼˜åŒ–ç­–ç•¥ä¸‹ï¼ŒçŒœåˆ°é¢œè‰²æ‰€éœ€è¦çš„é—®é¢˜çš„ä¸ªæ•°ã€‚ç†µä»£è¡¨çš„æ˜¯éšæœºå˜é‡æˆ–æ•´ä¸ªç³»ç»Ÿçš„ä¸ç¡®å®šæ€§ï¼Œç†µè¶Šå¤§ï¼Œéšæœºå˜é‡æˆ–ç³»ç»Ÿçš„ä¸ç¡®å®šæ€§å°±è¶Šå¤§ã€‚\nç°åœ¨å·²ç»äº†è§£äº†ç†µæ˜¯ä»€ä¹ˆï¼Œé‚£ä¹ˆï¼Œä¸‹é¢è§£é‡Šäº¤å‰ç†µï¼ˆcross entropyï¼‰ çš„å«ä¹‰.å¯¹äºç¬¬äºŒä¸ªä¾‹å­ï¼Œå¦‚æœä»ç„¶ä½¿ç”¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­çš„ç­–ç•¥ï¼Œå¦‚ä¸‹å›¾:\n$\\frac{1}{8}$ çš„æ¦‚ç‡ï¼Œç¡¬å¸æ˜¯æ©˜è‰²ï¼Œéœ€è¦ä¸¤ä¸ªé—®é¢˜ï¼Œ$\\frac{1}{2}$ çš„æ¦‚ç‡æ˜¯è“è‰²ï¼Œä»ç„¶éœ€è¦ä¸¤ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè®¤ä¸ºå°çƒçš„åˆ†å¸ƒä¸º $(\\frac{1}{4},\\frac{1}{4},\\frac{1}{4},\\frac{1}{4})$ ï¼Œè¿™ä¸ªåˆ†å¸ƒå°±æ˜¯éçœŸå®åˆ†å¸ƒã€‚å¹³å‡æ¥è¯´ï¼Œéœ€è¦çš„é—®é¢˜æ•°æ˜¯ $\\frac{1}{8}*2+\\frac{1}{8}*2+\\frac{1}{4}*2+\\frac{1}{2}*2=2$ ã€‚\nå› æ­¤ï¼Œåœ¨ä¾‹å­äºŒä¸­ä½¿ç”¨ä¾‹å­ä¸€çš„ç­–ç•¥æ˜¯ä¸€ä¸ªæ¯”è¾ƒå·®çš„ç­–ç•¥ã€‚å…¶ä¸­ $2$ æ˜¯è¿™ä¸ªæ–¹æ¡ˆä¸­çš„äº¤å‰ç†µï¼Œè€Œæœ€ä¼˜æ–¹æ¡ˆçš„äº¤å‰ç†µæ˜¯ $1.75$ã€‚\nç»™å®šä¸€ä¸ªç­–ç•¥ï¼Œäº¤å‰ç†µå°±æ˜¯åœ¨è¯¥ç­–ç•¥ä¸‹çŒœä¸­é¢œè‰²æ‰€éœ€è¦çš„é—®é¢˜çš„æœŸæœ›å€¼ã€‚æ›´æ™®éçš„è¯´ï¼Œäº¤å‰ç†µç”¨æ¥è¡¡é‡åœ¨ç»™å®šçš„çœŸå®åˆ†å¸ƒä¸‹ï¼Œä½¿ç”¨éçœŸå®åˆ†å¸ƒæ‰€æŒ‡å®šçš„ç­–ç•¥æ¶ˆé™¤ç³»ç»Ÿçš„ä¸ç¡®å®šæ€§æ‰€éœ€è¦ä»˜å‡ºæˆæœ¬çš„å¤§å°ã€‚äº¤å‰çš„å­—é¢æ„æ€åœ¨äºï¼šçœŸå®åˆ†å¸ƒä¸éçœŸå®åˆ†å¸ƒçš„äº¤å‰ã€‚ç»™å®šä¸€ä¸ªæ–¹æ¡ˆï¼Œè¶Šä¼˜çš„ç­–ç•¥ï¼Œæœ€ç»ˆçš„äº¤å‰ç†µè¶Šä½ã€‚å…·æœ‰æœ€ä½çš„äº¤å‰ç†µçš„ç­–ç•¥å°±æ˜¯æœ€ä¼˜åŒ–ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢å®šä¹‰çš„ç†µã€‚å› æ­¤ï¼Œåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æœ€å°åŒ–äº¤å‰ç†µã€‚\næ•°å­¦ä¸Šæ¥è®² å…¶ä¸­ï¼Œ$p$ æ˜¯çœŸæ­£çš„æ¦‚ç‡ï¼Œä¾‹å¦‚ä¾‹å­äºŒä¸­ï¼Œæ©˜è‰²å’Œç»¿è‰²æ˜¯ $\\frac{1}{8}$ï¼Œçº¢è‰²æ˜¯ $\\frac{1}{4}$ï¼Œè“è‰²æ˜¯ $\\frac{1}{2}$ã€‚$\\hat p$ æ˜¯é”™è¯¯åœ°å‡è®¾äº†çš„æ¦‚ç‡ï¼Œä¾‹å¦‚ï¼Œåœ¨ä¾‹å­äºŒä¸­æˆ‘ä»¬é”™è¯¯åœ°å‡è®¾äº†æ‰€æœ‰çš„é¢œè‰²çš„æ¦‚ç‡éƒ½æ˜¯ $\\frac{1}{4}$ã€‚$p$ å’Œ $\\hat p$ å¯èƒ½æœ‰ç‚¹å®¹æ˜“æ··æ·†ã€‚è®°ä½ä¸€ç‚¹ï¼Œ$log$ æ˜¯ç”¨æ¥è®¡ç®—åœ¨ä½ çš„ç­–ç•¥ä¸‹çŒœä¸­æ‰€éœ€è¦çš„é—®é¢˜æ•°ï¼Œå› æ­¤ï¼Œ$log$ ä¸­éœ€è¦çš„æ˜¯ä½ çš„é¢„æµ‹æ¦‚ç‡ $\\hat p$ ã€‚åœ¨å†³ç­–æ ‘ä¸­ï¼Œå¦‚æœå»ºç«‹çš„æ ‘ä¸æ˜¯æœ€ä¼˜çš„ï¼Œç»“æœå°±æ˜¯å¯¹äºè¾“å‡ºçš„æ¦‚ç‡åˆ†å¸ƒçš„å‡è®¾æ˜¯é”™è¯¯åœ°ï¼Œå¯¼è‡´çš„ç›´æ¥ç»“æœå°±æ˜¯äº¤å‰ç†µå¾ˆé«˜ã€‚äº¤å‰ç†µä¸ä»…ä»…åº”ç”¨åœ¨å†³ç­–æ ‘ä¸­ï¼Œåœ¨å…¶ä»–çš„åˆ†ç±»é—®é¢˜ä¸­ä¹Ÿæœ‰åº”ç”¨ã€‚\nåˆ†ç±»é—®é¢˜ åœ¨äºŒåˆ†ç±»é—®é¢˜ä¸­ï¼Œæ ‡ç­¾ $y$ æ˜¯ $1$ çš„ä¼¼ç„¶æ˜¯å¯¹äºæ ‡ç­¾ $y$ çš„é¢„æµ‹ $\\hat y$ ï¼ŒåŒæ ·çš„ï¼Œæ ‡ç­¾æ˜¯ $0$ çš„ä¼¼ç„¶æ˜¯ $1-\\hat y$ ã€‚æˆ‘ä»¬éœ€è¦æœ€å¤§åŒ–ä¼¼ç„¶å‡½æ•°ï¼Œè€Œä¸”ï¼Œç”±äºäºŒåˆ†ç±»é—®é¢˜çš„ç‰¹æ®Šæ€§ï¼Œæ ¹æ®ä¼¯åŠªåŠ›åˆ†å¸ƒ (Bernoulli distribution)ï¼Œå¯ä»¥æŠŠä¼¼ç„¶å‡½æ•°å†™æˆ\nå½“ $y=1$ çš„æ—¶å€™ï¼Œç¬¬äºŒé¡¹ä¸º $1$ï¼Œå› æ­¤ï¼Œä¼˜åŒ–çš„æ˜¯ $\\hat y$ å½“ $y=0$ çš„æ—¶å€™ï¼Œç¬¬ä¸€é¡¹ä¸º $1$ï¼Œä¼˜åŒ–çš„æ˜¯ $1-\\hat y$ ã€‚ å¯¹ä¸Šé¢çš„ä¼¼ç„¶å‡½æ•°å–å¯¹æ•°ï¼Œç»“æœæ˜¯æœ€å¤§åŒ–ä¼¼ç„¶å‡½æ•°ï¼Œå°±æ˜¯å¯¹ä¸Šé¢è¡¨è¾¾å¼å–è´Ÿç„¶åæœ€å°åŒ–ã€‚ä¹Ÿæ˜¯äº¤å‰ç†µçš„è¡¨è¾¾å¼ã€‚\näº¤å‰ç†µæœ‰æ—¶å€™ä¹Ÿè¢«ç§°ä¸ºå¯¹æ•°æŸå¤±å‡½æ•°ã€‚æ³¨æ„ä¸ä¸Šè¾¹ä¾‹å­åŒºåˆ«æ˜¯å¤šäº†ä¸ªè´Ÿå·ï¼Œä¸Šè¾¹ä¾‹å­æ˜¯æ¶ˆé™¤ä¸ç¡®å®šæ€§éœ€è¦ä»˜å‡ºçš„æˆæœ¬ï¼›è€Œç°åœ¨è¿™ä¸ªåŠ äº†è´Ÿå·çš„äº¤å‰ç†µï¼Œåˆ™æ˜¯æœ€ç»ˆçš„ç›®æ ‡å‡½æ•°ã€‚\nä¸¾ä¾‹æ¥è¯´ï¼Œå‡è®¾æˆ‘æœ‰ $3$ æšç¡¬å¸ï¼Œæ­£æ­£åï¼Œè®°ä¸º $(1,1,0)$ ã€‚é¢„æµ‹ç»“æœæ˜¯ $(0.8,0.9,0.3)$ï¼Œé‚£ä¹ˆï¼Œäº¤å‰ç†µçš„å‡å€¼æ˜¯:\n$$ \\frac13(1Ã—\\log_20.8+1Ã—log_20.9+(1-0)Ã—log_2(1-0.3)) $$\nå‡è®¾æœ‰ä¸€ä¸ªå®Œç¾çš„ç®—æ³•ï¼Œç›´æ¥é¢„æµ‹å‡ºäº† $(1,1,0)$ï¼Œé‚£ä¹ˆäº¤å‰ç†µçš„ç»“æœå°±æ˜¯ $0$ã€‚\n","permalink":"https://WFUing.github.io/posts/tech/algorithm/ai/cross-entropy/","summary":"æ¡ˆä¾‹é©±åŠ¨ é€šè¿‡å‡ ä¸ªç®€å•çš„ä¾‹å­æ¥è§£é‡Šå’Œæ€»ç»“ä»€ä¹ˆæ˜¯äº¤å‰ç†µï¼ˆCross Entropyï¼‰ä»¥åŠæœºå™¨å­¦ä¹ åˆ†ç±»é—®é¢˜ä¸­ä¸ºä»€ä¹ˆä½¿ç”¨äº¤å‰ç†µã€‚\nç¬¬ä¸€ä¸ªä¾‹å­ å‡è®¾éšæœºä»ä¸€ä¸ªå£è¢‹é‡Œå–ç¡¬å¸ï¼Œå£è¢‹é‡Œæœ‰ä¸€ä¸ªè“è‰²çš„ï¼Œä¸€ä¸ªçº¢è‰²çš„ï¼Œä¸€ä¸ªç»¿è‰²çš„ï¼Œä¸€ä¸ªæ©˜è‰²çš„ã€‚å–å‡ºä¸€ä¸ªç¡¬å¸ä¹‹åï¼Œæ¯æ¬¡é—®ä¸€ä¸ªé—®é¢˜ï¼Œç„¶ååšå‡ºåˆ¤æ–­ï¼Œç›®æ ‡æ˜¯ï¼Œé—®æœ€å°‘çš„é—®é¢˜ï¼Œå¾—åˆ°æ­£ç¡®ç­”æ¡ˆã€‚å…¶ä¸­ä¸€ä¸ªæœ€å¥½çš„è®¾è®¡é—®é¢˜çš„ç­–ç•¥å¦‚ä¸‹ï¼š\næ¯ä¸€ä¸ªç¡¬å¸æœ‰ $\\frac{1}{4}$ çš„æ¦‚ç‡è¢«é€‰ä¸­ï¼Œ$\\frac{1}{4}æœºç‡ * 2é“é¢˜ç›® * 4é¢—çƒ = 2$ï¼Œå¹³å‡éœ€è¦é—®ä¸¤é“é¢˜ç›®æ‰èƒ½æ‰¾å‡ºä¸åŒé¢œè‰²çš„çƒï¼Œä¹Ÿå°±æ˜¯è¯´æœŸæœ›å€¼ä¸º $2$ï¼Œå°±æ˜¯ç†µï¼ˆentropyï¼‰ã€‚\nç¬¬äºŒä¸ªä¾‹å­ ä¾‹å­å˜äº†ï¼Œå˜æˆäº†è¢‹å­ä¸­ $\\frac{1}{8}$ çš„ç¡¬å¸æ˜¯ç»¿è‰²çš„ï¼Œ$\\frac{1}{8}$ çš„æ˜¯æ©˜è‰²çš„ï¼Œ$\\frac{1}{4}$ æ˜¯çº¢è‰²çš„ï¼Œ$\\frac{1}{2}$ æ˜¯è“è‰²çš„ï¼Œè¿™æ—¶æœ€ä¼˜çš„é—®é¢˜çš„ç­–ç•¥å¦‚ä¸‹:\n$\\frac{1}{2}$ çš„æ¦‚ç‡æ˜¯è“è‰²ï¼Œåªéœ€è¦ $1$ ä¸ªé—®é¢˜å°±å¯ä»¥çŸ¥é“æ˜¯æˆ–è€…ä¸æ˜¯ï¼Œ$\\frac{1}{4}$ çš„æ¦‚ç‡æ˜¯çº¢è‰²ï¼Œéœ€è¦2ä¸ªé—®é¢˜ï¼ŒæŒ‰ç…§è¿™ä¸ªé€»è¾‘ï¼ŒçŒœä¸­ç¡¬å¸éœ€è¦çš„é—®é¢˜çš„æœŸæœ›æ˜¯\n$$ \\frac{1}{2}*1+\\frac{1}{4}*2+\\frac{1}{8}*3+\\frac{1}{8}*3=1.75 $$\nç¬¬ä¸‰ä¸ªä¾‹å­ å‡è®¾è¢‹å­ä¸­å…¨éƒ¨æ˜¯è“è‰²çš„ç¡¬å¸ï¼Œé‚£ä¹ˆè¿™æ—¶å€™éœ€è¦ $0$ ä¸ªé—®é¢˜å°±å¯ä»¥çŒœåˆ°ç¡¬å¸ï¼Œå³ $\\log_{2}{1}=0$ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰å½“çŸ¥é“è¢‹å­ä¸­å…¨éƒ¨æ˜¯è“è‰²çš„ç¡¬å¸çš„æ—¶å€™éœ€è¦çš„é—®é¢˜æ˜¯ $0$ ä¸ªã€‚\næ€»ç»“ä¸Šé¢çš„ä¾‹å­ï¼Œå‡è®¾ä¸€ç§ç¡¬å¸å‡ºç°çš„æ¦‚ç‡æ˜¯ $p$ï¼Œé‚£ä¹ˆçŒœä¸­è¯¥ç¡¬å¸çš„æ‰€éœ€è¦çš„é—®é¢˜æ•°æ˜¯ $\\log_2{\\frac1{P_i}}$ã€‚ä¾‹å¦‚ $p=\\frac{1}{4}ï¼Œ\\log_{2}{4}$ ã€‚\nåœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œé—®é¢˜ä¸ªæ•°çš„æœŸæœ›æ˜¯\n$$ \\sum_i{p_i}*log_2{\\frac{1}{p_i}} $$\nè¿™ä¸ªå¼å­å°±æ˜¯ç†µçš„è¡¨è¾¾å¼ ã€‚ç®€å•æ¥è¯´ï¼Œå…¶æ„ä¹‰å°±æ˜¯åœ¨æœ€ä¼˜åŒ–ç­–ç•¥ä¸‹ï¼ŒçŒœåˆ°é¢œè‰²æ‰€éœ€è¦çš„é—®é¢˜çš„ä¸ªæ•°ã€‚ç†µä»£è¡¨çš„æ˜¯éšæœºå˜é‡æˆ–æ•´ä¸ªç³»ç»Ÿçš„ä¸ç¡®å®šæ€§ï¼Œç†µè¶Šå¤§ï¼Œéšæœºå˜é‡æˆ–ç³»ç»Ÿçš„ä¸ç¡®å®šæ€§å°±è¶Šå¤§ã€‚\nç°åœ¨å·²ç»äº†è§£äº†ç†µæ˜¯ä»€ä¹ˆï¼Œé‚£ä¹ˆï¼Œä¸‹é¢è§£é‡Šäº¤å‰ç†µï¼ˆcross entropyï¼‰ çš„å«ä¹‰.å¯¹äºç¬¬äºŒä¸ªä¾‹å­ï¼Œå¦‚æœä»ç„¶ä½¿ç”¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­çš„ç­–ç•¥ï¼Œå¦‚ä¸‹å›¾:\n$\\frac{1}{8}$ çš„æ¦‚ç‡ï¼Œç¡¬å¸æ˜¯æ©˜è‰²ï¼Œéœ€è¦ä¸¤ä¸ªé—®é¢˜ï¼Œ$\\frac{1}{2}$ çš„æ¦‚ç‡æ˜¯è“è‰²ï¼Œä»ç„¶éœ€è¦ä¸¤ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè®¤ä¸ºå°çƒçš„åˆ†å¸ƒä¸º $(\\frac{1}{4},\\frac{1}{4},\\frac{1}{4},\\frac{1}{4})$ ï¼Œè¿™ä¸ªåˆ†å¸ƒå°±æ˜¯éçœŸå®åˆ†å¸ƒã€‚å¹³å‡æ¥è¯´ï¼Œéœ€è¦çš„é—®é¢˜æ•°æ˜¯ $\\frac{1}{8}*2+\\frac{1}{8}*2+\\frac{1}{4}*2+\\frac{1}{2}*2=2$ ã€‚\nå› æ­¤ï¼Œåœ¨ä¾‹å­äºŒä¸­ä½¿ç”¨ä¾‹å­ä¸€çš„ç­–ç•¥æ˜¯ä¸€ä¸ªæ¯”è¾ƒå·®çš„ç­–ç•¥ã€‚å…¶ä¸­ $2$ æ˜¯è¿™ä¸ªæ–¹æ¡ˆä¸­çš„äº¤å‰ç†µï¼Œè€Œæœ€ä¼˜æ–¹æ¡ˆçš„äº¤å‰ç†µæ˜¯ $1.75$ã€‚\nç»™å®šä¸€ä¸ªç­–ç•¥ï¼Œäº¤å‰ç†µå°±æ˜¯åœ¨è¯¥ç­–ç•¥ä¸‹çŒœä¸­é¢œè‰²æ‰€éœ€è¦çš„é—®é¢˜çš„æœŸæœ›å€¼ã€‚æ›´æ™®éçš„è¯´ï¼Œäº¤å‰ç†µç”¨æ¥è¡¡é‡åœ¨ç»™å®šçš„çœŸå®åˆ†å¸ƒä¸‹ï¼Œä½¿ç”¨éçœŸå®åˆ†å¸ƒæ‰€æŒ‡å®šçš„ç­–ç•¥æ¶ˆé™¤ç³»ç»Ÿçš„ä¸ç¡®å®šæ€§æ‰€éœ€è¦ä»˜å‡ºæˆæœ¬çš„å¤§å°ã€‚äº¤å‰çš„å­—é¢æ„æ€åœ¨äºï¼šçœŸå®åˆ†å¸ƒä¸éçœŸå®åˆ†å¸ƒçš„äº¤å‰ã€‚ç»™å®šä¸€ä¸ªæ–¹æ¡ˆï¼Œè¶Šä¼˜çš„ç­–ç•¥ï¼Œæœ€ç»ˆçš„äº¤å‰ç†µè¶Šä½ã€‚å…·æœ‰æœ€ä½çš„äº¤å‰ç†µçš„ç­–ç•¥å°±æ˜¯æœ€ä¼˜åŒ–ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢å®šä¹‰çš„ç†µã€‚å› æ­¤ï¼Œåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æœ€å°åŒ–äº¤å‰ç†µã€‚\næ•°å­¦ä¸Šæ¥è®² å…¶ä¸­ï¼Œ$p$ æ˜¯çœŸæ­£çš„æ¦‚ç‡ï¼Œä¾‹å¦‚ä¾‹å­äºŒä¸­ï¼Œæ©˜è‰²å’Œç»¿è‰²æ˜¯ $\\frac{1}{8}$ï¼Œçº¢è‰²æ˜¯ $\\frac{1}{4}$ï¼Œè“è‰²æ˜¯ $\\frac{1}{2}$ã€‚$\\hat p$ æ˜¯é”™è¯¯åœ°å‡è®¾äº†çš„æ¦‚ç‡ï¼Œä¾‹å¦‚ï¼Œåœ¨ä¾‹å­äºŒä¸­æˆ‘ä»¬é”™è¯¯åœ°å‡è®¾äº†æ‰€æœ‰çš„é¢œè‰²çš„æ¦‚ç‡éƒ½æ˜¯ $\\frac{1}{4}$ã€‚$p$ å’Œ $\\hat p$ å¯èƒ½æœ‰ç‚¹å®¹æ˜“æ··æ·†ã€‚è®°ä½ä¸€ç‚¹ï¼Œ$log$ æ˜¯ç”¨æ¥è®¡ç®—åœ¨ä½ çš„ç­–ç•¥ä¸‹çŒœä¸­æ‰€éœ€è¦çš„é—®é¢˜æ•°ï¼Œå› æ­¤ï¼Œ$log$ ä¸­éœ€è¦çš„æ˜¯ä½ çš„é¢„æµ‹æ¦‚ç‡ $\\hat p$ ã€‚åœ¨å†³ç­–æ ‘ä¸­ï¼Œå¦‚æœå»ºç«‹çš„æ ‘ä¸æ˜¯æœ€ä¼˜çš„ï¼Œç»“æœå°±æ˜¯å¯¹äºè¾“å‡ºçš„æ¦‚ç‡åˆ†å¸ƒçš„å‡è®¾æ˜¯é”™è¯¯åœ°ï¼Œå¯¼è‡´çš„ç›´æ¥ç»“æœå°±æ˜¯äº¤å‰ç†µå¾ˆé«˜ã€‚äº¤å‰ç†µä¸ä»…ä»…åº”ç”¨åœ¨å†³ç­–æ ‘ä¸­ï¼Œåœ¨å…¶ä»–çš„åˆ†ç±»é—®é¢˜ä¸­ä¹Ÿæœ‰åº”ç”¨ã€‚","title":"äº¤å‰ç†µ"},{"content":" è‹±æ–‡å: WDS èŒä¸š: ç¨‹åºå‘˜ è¿åŠ¨: è·‘æ­¥ã€ä¹’ä¹“çƒã€çˆ¬å±± ","permalink":"https://WFUing.github.io/about/","summary":" è‹±æ–‡å: WDS èŒä¸š: ç¨‹åºå‘˜ è¿åŠ¨: è·‘æ­¥ã€ä¹’ä¹“çƒã€çˆ¬å±± ","title":"ğŸ™‹ğŸ»â€â™‚ï¸"},{"content":"shell matros\ntmax\nfzf\njournalctl see also\nkeyboard\n","permalink":"https://WFUing.github.io/posts/tech/architecture/jyy/02/","summary":"shell matros\ntmax\nfzf\njournalctl see also\nkeyboard","title":""}]