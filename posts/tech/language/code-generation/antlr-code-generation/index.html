<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Antlr Code Generation | Waiting For You</title>
<meta name="keywords" content="code generation, dsl, antlr">
<meta name="description" content="ANTLR æ˜¯ ANother Tool for Language Recognition çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è§£æå™¨ç”Ÿæˆå™¨æ¡†æ¶ï¼Œç”¨äºä»è¯­æ³•æ–‡ä»¶ä¸­æ„å»ºè¯­è¨€è¯†åˆ«å™¨ã€ç¼–è¯‘å™¨å’Œç¿»è¯‘å™¨ï¼Œè¯­æ³•æ–‡ä»¶ä¸­åŒ…å«ä»æºè¯­è¨€åˆ°ç›®æ ‡è¯­è¨€çš„æ¯ä¸ªè¯­å¥æ‰€è¦æ‰§è¡Œçš„æ“ä½œã€‚">
<meta name="author" content="WFUing">
<link rel="canonical" href="https://WFUing.github.io/posts/tech/language/code-generation/antlr-code-generation/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.e1e2622d88c4c5362fa6e3971c69fa4234d34f7bf5d12451104cb5f810ed1759.css" integrity="sha256-4eJiLYjExTYvpuOXHGn6QjTTT3v10SRREEy1&#43;BDtF1k=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://WFUing.github.io/img/logo.gif">
<link rel="icon" type="image/png" sizes="16x16" href="https://WFUing.github.io/img/logo.gif">
<link rel="icon" type="image/png" sizes="32x32" href="https://WFUing.github.io/img/logo.gif">
<link rel="apple-touch-icon" href="https://WFUing.github.io/logo.gif">
<link rel="mask-icon" href="https://WFUing.github.io/logo.gif">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            },
            "HTML-CSS": {
                availableFonts: ["Arial", "TeX"],
                preferredFont: "TeX",
                webFont: "TeX"
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>

<meta property="og:title" content="Antlr Code Generation" />
<meta property="og:description" content="ANTLR æ˜¯ ANother Tool for Language Recognition çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è§£æå™¨ç”Ÿæˆå™¨æ¡†æ¶ï¼Œç”¨äºä»è¯­æ³•æ–‡ä»¶ä¸­æ„å»ºè¯­è¨€è¯†åˆ«å™¨ã€ç¼–è¯‘å™¨å’Œç¿»è¯‘å™¨ï¼Œè¯­æ³•æ–‡ä»¶ä¸­åŒ…å«ä»æºè¯­è¨€åˆ°ç›®æ ‡è¯­è¨€çš„æ¯ä¸ªè¯­å¥æ‰€è¦æ‰§è¡Œçš„æ“ä½œã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://WFUing.github.io/posts/tech/language/code-generation/antlr-code-generation/" />
<meta property="og:image" content="https://WFUing.github.io/anltr-logo.webp" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-15T09:52:03+08:00" />
<meta property="article:modified_time" content="2023-10-15T09:52:03+08:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://WFUing.github.io/anltr-logo.webp" />
<meta name="twitter:title" content="Antlr Code Generation"/>
<meta name="twitter:description" content="ANTLR æ˜¯ ANother Tool for Language Recognition çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è§£æå™¨ç”Ÿæˆå™¨æ¡†æ¶ï¼Œç”¨äºä»è¯­æ³•æ–‡ä»¶ä¸­æ„å»ºè¯­è¨€è¯†åˆ«å™¨ã€ç¼–è¯‘å™¨å’Œç¿»è¯‘å™¨ï¼Œè¯­æ³•æ–‡ä»¶ä¸­åŒ…å«ä»æºè¯­è¨€åˆ°ç›®æ ‡è¯­è¨€çš„æ¯ä¸ªè¯­å¥æ‰€è¦æ‰§è¡Œçš„æ“ä½œã€‚"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://WFUing.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "ğŸ‘¨ğŸ»â€ğŸ’»æŠ€æœ¯",
      "item": "https://WFUing.github.io/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Language",
      "item": "https://WFUing.github.io/posts/tech/language/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "Code Generation",
      "item": "https://WFUing.github.io/posts/tech/language/code-generation/"
    }, 
    {
      "@type": "ListItem",
      "position":  5 ,
      "name": "Antlr Code Generation",
      "item": "https://WFUing.github.io/posts/tech/language/code-generation/antlr-code-generation/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Antlr Code Generation",
  "name": "Antlr Code Generation",
  "description": "ANTLR æ˜¯ ANother Tool for Language Recognition çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è§£æå™¨ç”Ÿæˆå™¨æ¡†æ¶ï¼Œç”¨äºä»è¯­æ³•æ–‡ä»¶ä¸­æ„å»ºè¯­è¨€è¯†åˆ«å™¨ã€ç¼–è¯‘å™¨å’Œç¿»è¯‘å™¨ï¼Œè¯­æ³•æ–‡ä»¶ä¸­åŒ…å«ä»æºè¯­è¨€åˆ°ç›®æ ‡è¯­è¨€çš„æ¯ä¸ªè¯­å¥æ‰€è¦æ‰§è¡Œçš„æ“ä½œã€‚",
  "keywords": [
    "code generation", "dsl", "antlr"
  ],
  "articleBody": "ç®€ä»‹ ANTLR æ˜¯ ANother Tool for Language Recognition çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è§£æå™¨ç”Ÿæˆå™¨æ¡†æ¶ï¼Œç”¨äºä»è¯­æ³•æ–‡ä»¶ä¸­æ„å»ºè¯­è¨€è¯†åˆ«å™¨ã€ç¼–è¯‘å™¨å’Œç¿»è¯‘å™¨ï¼Œè¯­æ³•æ–‡ä»¶ä¸­åŒ…å«ä»æºè¯­è¨€åˆ°ç›®æ ‡è¯­è¨€çš„æ¯ä¸ªè¯­å¥æ‰€è¦æ‰§è¡Œçš„æ“ä½œã€‚\nä½¿ç”¨ç¼–è¯‘å™¨è®¾è®¡çš„æ¦‚å¿µæ¥å®šä¹‰æ¯ç§ç°ä»£ç¼–ç¨‹è¯­è¨€çš„å†™ä½œé£æ ¼ã€‚è¿™æ˜¯ä¸€å¥—å…¸å‹çš„æ­¥éª¤ï¼Œé¦–å…ˆæ˜¯ Lexical, Syntactical å’Œ Semantic Analysisï¼Œç¡®å®šè¯­è¨€çš„åŸºæœ¬ç¼–å†™æ–¹å¼ï¼Œä»¥ä¾¿è¯†åˆ«ã€‚æ¥ä¸‹æ¥æ˜¯ä¸€ç³»åˆ—éå¸¸æœ‰è¶£çš„æ­¥éª¤ï¼šä¸­é—´ä»£ç ç”Ÿæˆã€ä¼˜åŒ–å’Œç›®æ ‡ä»£ç ç”Ÿæˆã€‚\nç›®å‰çš„ç‰ˆæœ¬ä¸º 4.7ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„ã€å¯¹å¼€å‘äººå‘˜å‹å¥½çš„æ–¹å¼æ¥å®šä¹‰è‡ªå·±çš„è§„åˆ™é›†ï¼ˆåˆç§°è¯­æ³•ï¼‰ï¼Œå®ƒç”±ä¸€ç³»åˆ—æ ‡è®°å’Œæ“ä½œç»„æˆï¼Œè¿™äº›æ ‡è®°å’Œæ“ä½œå®šä¹‰äº†è¯­å¥åœ¨æºè¯­è¨€ä¸­çš„ä¹¦å†™æ–¹å¼ï¼Œä»è€Œå¯ä»¥æ­£ç¡®è¯†åˆ«å’Œè§£æè¯­å¥ã€‚æ›´æœ‰è¶£çš„æ˜¯ï¼Œå®ƒè¿˜èƒ½è®©ç”¨æˆ·å¯¹ä»£ç è¿›è¡Œæ“ä½œï¼Œå¹¶å°†å…¶ç”Ÿæˆç›®æ ‡ä»£ç ï¼Œæ‰€æœ‰è¿™ä¸€åˆ‡éƒ½å¯ä»¥ç”¨æ‚¨é€‰æ‹©çš„è¯­è¨€æ¥å®ç°ã€‚\né‚£ä¹ˆï¼Œè°åœ¨ä½¿ç”¨ ANTLR å‘¢ï¼Ÿ\nç¼–ç¨‹è¯­è¨€ï¼šBooã€Groovyã€Mantraã€Nemerleã€XRuby ç­‰ã€‚ å…¶ä»–å·¥å…·ã€æ¡†æ¶ï¼šApache Sparkã€Hibernateã€Intellij IDEAã€Jazillianã€JBoss Rulesã€Keynote(Apple)ã€WebLogicï¼ˆOracleï¼‰ç­‰ã€‚ The Basics 1 2 def sum(a, b): return a + b è€ƒè™‘åˆ°ä¸Šé¢ Python çš„ä¾‹å­ï¼Œè¿™äº›ç¼–è¯‘å™¨è®¾è®¡æ­¥éª¤ä»è¯†åˆ« Python ä¸­ç¼–å†™çš„æ¯æ¡è¯­å¥ï¼ˆæºä»£ç ï¼‰çš„åŸºæœ¬å•å…ƒå¼€å§‹ï¼Œå¹¶å°†å…¶åˆ†è§£ä¸º a stream of tokensï¼Œæ¯ä¸ªæ ‡è®°éƒ½è¢«è¯†åˆ«æˆ–æ˜ å°„ä¸ºç‰¹å®šç±»å‹ï¼Œä¹Ÿå°±æ˜¯ Lexical Analysisã€‚\nLexical Analysis of the python function yielding a stream of tokens ç„¶åï¼Œæ ¹æ®è¿™äº›æ ‡è®°å‡ºç°çš„é¡ºåºæ¥ç¡®å®šä¹¦é¢è¯­å¥çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶é€šè¿‡è¯­ä¹‰åˆ†ææ„å»ºä¸€æ£µæ ‘ï¼ˆæˆ– Abstract Syntax Treeï¼‰æ¥æ£€æŸ¥å…¶æ­£ç¡®æ€§ï¼ŒåŒæ—¶æä¾›ä½¿ç”¨ç°æœ‰æ ‘éå†æ–¹æ³•ä¹‹ä¸€è¿›è¡Œéå†çš„èƒ½åŠ›ã€‚\nSyntax tree after Semantic analysis TLDR æ¦‚å¿µ Lexer : converts a stream of characters to a stream of tokens. Parser : processes of tokens, possibly creating AST. Abstract Syntax Tree(AST): an intermediate tree representation of the parsed input that is simpler to process than the stream of tokens. Tree Parser: It processes an AST. String Template: a library that supports using templates with placeholders for outputting text (something very specific to ANTLR). ANTLR æ˜¯ä¸€ç§ LL parserï¼ˆLeft-to-right, Leftmost derivationï¼‰ï¼Œæ˜¯ä¸€ç§è‡ªé¡¶å‘ä¸‹çš„å‰–æå™¨ï¼Œé€‚ç”¨äºæ— ä¸Šä¸‹æ–‡è¯­è¨€çš„å­é›†ã€‚å®ƒä»å·¦åˆ°å³è§£æè¾“å…¥ï¼Œå¯¹å¥å­è¿›è¡Œ Leftmost derivationã€‚å®ƒç®€åŒ–äº†è®¸å¤šæ­¥éª¤ï¼Œä½¿åˆ›å»ºè¯­è¨€è¯†åˆ«å™¨å’Œè§£æå™¨å˜å¾—æ›´å®¹æ˜“ã€æ›´æ–¹ä¾¿ã€‚\nSyntax tree after Semantic analysis Example1 ä¸‹é¢æ˜¯æˆ‘ä¸ºè§£æ python å‡½æ•°è€Œç¼–å†™çš„è§£æå™¨çš„ä¸€ä¸ªå¿«é€Ÿç¤ºä¾‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 grammar PythonParserExample; tokens { INDENT, DEDENT, LINE_BREAK } statement : (single_input)? EOF ; single_input : LINE_BREAK | simple_stmt | complex_stmt (LINE_BREAK)? EOF ; complex_stmt: funcdef; simple_stmt : small_stmt (SEMI_COLON small_stmt)* SEMI_COLON? (LINE_BREAK)? EOF ; stmt : simple_stmt | complex_stmt ; funcdef : ASYNC? DEF name OPEN_PAREN typedargslist? CLOSE_PAREN (ARROW name)? COLON '\\n'? funcbody ; typedargslist : (def_parameters COMMA)? (args (COMMA def_parameters)? ) COMMA? | def_parameters COMMA? ; funcbody : simple_stmt | LINE_BREAK INDENT stmt+ DEDENT ; args : STAR name ; def_parameters : def_parameter (COMMA def_parameter)* ; small_stmt : RETURN expression #return_stmt ; def_parameter : name | STAR ; expression: name op=OPERATOR name ; name: NAME; DEF : D E F; SEMI_COLON : ';'; STAR : '*'; OPERATOR : STAR|'+'|'/'|'**'|'-'; RETURN : R E T U R N; ASYNC : A S Y N C; COMMA : ','; OPEN_PAREN : '('; CLOSE_PAREN : ')'; ARROW : '-\u003e'; COLON : ':'; NAME : ID_START ID_CONTINUE*; WS : [ \\t]+ {HandleSpaces();} -\u003e channel(HIDDEN); å®ƒçš„ä¸€ä¸ªä¸»è¦ä¼˜ç‚¹æ˜¯ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ syntax è¿›è¡Œ lexing å’Œ parsingã€‚ç„¶è€Œï¼Œåœ¨è¯­æ³•å±‚é¢ä¸Šï¼Œè¿™é‡Œçš„åŒºåˆ«åœ¨äºå‘½åçº¦å®š:\nä»¥å¤§å†™å­—æ¯å¼€å¤´çš„è§„åˆ™æ˜¯ lexer rules å…¶ä»–çš„éƒ½æ˜¯ parse rules ANTLR plugin (on Intellij IDEA) output for the above python function parsing ä¸€æ—¦å®šä¹‰å®Œæ¯•ï¼Œcomplete ANLTR jar æ–‡ä»¶å°±ä¼šæä¾›ä¸€ä¸ªé€‰é¡¹ï¼Œå°†å…¶ç”Ÿæˆä¸€ç»„æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨æ‚¨å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€ä»£ç ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª parserã€‚\n1 java -Xmx500M -cp ",
  "wordCount" : "1959",
  "inLanguage": "zh",
  "image":"https://WFUing.github.io/anltr-logo.webp","datePublished": "2023-10-15T09:52:03+08:00",
  "dateModified": "2023-10-15T09:52:03+08:00",
  "author":{
    "@type": "Person",
    "name": "WFUing"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://WFUing.github.io/posts/tech/language/code-generation/antlr-code-generation/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Waiting For You",
    "logo": {
      "@type": "ImageObject",
      "url": "https://WFUing.github.io/img/logo.gif"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://WFUing.github.io/" accesskey="h" title="Waiting For You (Alt + H)">Waiting For You</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://WFUing.github.io/search" title="ğŸ” (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”</span>
                </a>
            </li>
            <li>
                <a href="https://WFUing.github.io/" title="HOME">
                    <span>HOME</span>
                </a>
            </li>
            <li>
                <a href="https://WFUing.github.io/posts" title="BLOGS">
                    <span>BLOGS</span>
                </a>
            </li>
            <li>
                <a href="https://WFUing.github.io/archives" title="ARCHIVE">
                    <span>ARCHIVE</span>
                </a>
            </li>
            <li>
                <a href="https://WFUing.github.io/tags" title="TAGS">
                    <span>TAGS</span>
                </a>
            </li>
            <li>
                <a href="https://WFUing.github.io/about" title="ğŸ™‹ğŸ»â€â™‚ï¸">
                    <span>ğŸ™‹ğŸ»â€â™‚ï¸</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://WFUing.github.io/">ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://WFUing.github.io/posts/">Posts</a>&nbsp;Â»&nbsp;<a href="https://WFUing.github.io/posts/tech/">ğŸ‘¨ğŸ»â€ğŸ’»æŠ€æœ¯</a>&nbsp;Â»&nbsp;<a href="https://WFUing.github.io/posts/tech/language/">Language</a>&nbsp;Â»&nbsp;<a href="https://WFUing.github.io/posts/tech/language/code-generation/">Code Generation</a></div>
    <h1 class="post-title">
      Antlr Code Generation
    </h1>
    <div class="post-meta">










åˆ›å»º:&nbsp;<span title='2023-10-15 09:52:03 +0800 +0800'>2023-10-15</span>&nbsp;|&nbsp;æ›´æ–°:&nbsp;2023-10-15&nbsp;|&nbsp;å­—æ•°:&nbsp;1959å­—&nbsp;|&nbsp;æ—¶é•¿: 10åˆ†é’Ÿ&nbsp;|&nbsp;WFUing
        &nbsp;|&nbsp;æ ‡ç­¾: &nbsp;
        <ul class="post-tags-meta">
            <a href="https://WFUing.github.io/tags/code-generation/">code generation</a>
            <a href="https://WFUing.github.io/tags/dsl/">ã€dsl</a>
            <a href="https://WFUing.github.io/tags/antlr/">ã€antlr</a>
        </ul>

        
        
        
        
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <span id="busuanzi_container_page_pv">
            &nbsp;| è®¿é—®: <span id="busuanzi_value_page_pv"></span>
        </span>

</div>
  </header> 
<figure class="entry-cover1">
        <img loading="lazy" src="https://WFUing.github.io/posts/tech/language/code-generation/antlr-code-generation/anltr-logo.webp" alt="">
        
</figure><aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">ç›®å½•</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e7%ae%80%e4%bb%8b" aria-label="ç®€ä»‹">ç®€ä»‹</a></li>
                    <li>
                        <a href="#the-basics" aria-label="The Basics">The Basics</a><ul>
                            
                    <li>
                        <a href="#tldr-%e6%a6%82%e5%bf%b5" aria-label="TLDR æ¦‚å¿µ">TLDR æ¦‚å¿µ</a></li>
                    <li>
                        <a href="#example1" aria-label="Example1">Example1</a></li></ul>
                    </li>
                    <li>
                        <a href="#setting-up-an-antlr-project" aria-label="Setting up an ANTLR Project">Setting up an ANTLR Project</a><ul>
                            
                    <li>
                        <a href="#antlr-plugin-for-vscode" aria-label="ANTLR plugin for VSCode">ANTLR plugin for VSCode</a></li>
                    <li>
                        <a href="#grammar" aria-label="Grammar">Grammar</a></li>
                    <li>
                        <a href="#embedding-actions" aria-label="Embedding Actions">Embedding Actions</a></li>
                    <li>
                        <a href="#basic-building-blocks" aria-label="Basic Building Blocks">Basic Building Blocks</a></li>
                    <li>
                        <a href="#maven-configuration" aria-label="Maven Configuration">Maven Configuration</a></li>
                    <li>
                        <a href="#traversal-patterns" aria-label="Traversal Patterns">Traversal Patterns</a></li>
                    <li>
                        <a href="#generate-code" aria-label="Generate Code">Generate Code</a><ul>
                            
                    <li>
                        <a href="#stringtemplate" aria-label="StringTemplate">StringTemplate</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#resources" aria-label="Resources">Resources</a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h2 id="ç®€ä»‹">ç®€ä»‹<a hidden class="anchor" aria-hidden="true" href="#ç®€ä»‹">#</a></h2>
<p>ANTLR æ˜¯ <strong>AN</strong>other <strong>T</strong>ool for <strong>L</strong>anguage <strong>R</strong>ecognition çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è§£æå™¨ç”Ÿæˆå™¨æ¡†æ¶ï¼Œç”¨äºä»è¯­æ³•æ–‡ä»¶ä¸­æ„å»ºè¯­è¨€è¯†åˆ«å™¨ã€ç¼–è¯‘å™¨å’Œç¿»è¯‘å™¨ï¼Œè¯­æ³•æ–‡ä»¶ä¸­åŒ…å«ä»æºè¯­è¨€åˆ°ç›®æ ‡è¯­è¨€çš„æ¯ä¸ªè¯­å¥æ‰€è¦æ‰§è¡Œçš„æ“ä½œã€‚</p>
<p>ä½¿ç”¨ç¼–è¯‘å™¨è®¾è®¡çš„æ¦‚å¿µæ¥å®šä¹‰æ¯ç§ç°ä»£ç¼–ç¨‹è¯­è¨€çš„å†™ä½œé£æ ¼ã€‚è¿™æ˜¯ä¸€å¥—å…¸å‹çš„æ­¥éª¤ï¼Œé¦–å…ˆæ˜¯ Lexical, Syntactical å’Œ Semantic Analysisï¼Œç¡®å®šè¯­è¨€çš„åŸºæœ¬ç¼–å†™æ–¹å¼ï¼Œä»¥ä¾¿è¯†åˆ«ã€‚æ¥ä¸‹æ¥æ˜¯ä¸€ç³»åˆ—éå¸¸æœ‰è¶£çš„æ­¥éª¤ï¼šä¸­é—´ä»£ç ç”Ÿæˆã€ä¼˜åŒ–å’Œç›®æ ‡ä»£ç ç”Ÿæˆã€‚</p>
<p>ç›®å‰çš„ç‰ˆæœ¬ä¸º 4.7ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„ã€å¯¹å¼€å‘äººå‘˜å‹å¥½çš„æ–¹å¼æ¥å®šä¹‰è‡ªå·±çš„è§„åˆ™é›†ï¼ˆåˆç§°è¯­æ³•ï¼‰ï¼Œå®ƒç”±ä¸€ç³»åˆ—æ ‡è®°å’Œæ“ä½œç»„æˆï¼Œè¿™äº›æ ‡è®°å’Œæ“ä½œå®šä¹‰äº†è¯­å¥åœ¨æºè¯­è¨€ä¸­çš„ä¹¦å†™æ–¹å¼ï¼Œä»è€Œå¯ä»¥æ­£ç¡®è¯†åˆ«å’Œè§£æè¯­å¥ã€‚æ›´æœ‰è¶£çš„æ˜¯ï¼Œå®ƒè¿˜èƒ½è®©ç”¨æˆ·å¯¹ä»£ç è¿›è¡Œæ“ä½œï¼Œå¹¶å°†å…¶ç”Ÿæˆç›®æ ‡ä»£ç ï¼Œæ‰€æœ‰è¿™ä¸€åˆ‡éƒ½å¯ä»¥ç”¨æ‚¨é€‰æ‹©çš„è¯­è¨€æ¥å®ç°ã€‚</p>
<p>é‚£ä¹ˆï¼Œè°åœ¨ä½¿ç”¨ ANTLR å‘¢ï¼Ÿ</p>
<ul>
<li>ç¼–ç¨‹è¯­è¨€ï¼šBooã€Groovyã€Mantraã€Nemerleã€XRuby ç­‰ã€‚</li>
<li>å…¶ä»–å·¥å…·ã€æ¡†æ¶ï¼šApache Sparkã€Hibernateã€Intellij IDEAã€Jazillianã€JBoss Rulesã€Keynote(Apple)ã€WebLogicï¼ˆOracleï¼‰ç­‰ã€‚</li>
</ul>
<h2 id="the-basics">The Basics<a hidden class="anchor" aria-hidden="true" href="#the-basics">#</a></h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è€ƒè™‘åˆ°ä¸Šé¢ Python çš„ä¾‹å­ï¼Œè¿™äº›ç¼–è¯‘å™¨è®¾è®¡æ­¥éª¤ä»è¯†åˆ« Python ä¸­ç¼–å†™çš„æ¯æ¡è¯­å¥ï¼ˆæºä»£ç ï¼‰çš„åŸºæœ¬å•å…ƒå¼€å§‹ï¼Œå¹¶å°†å…¶åˆ†è§£ä¸º a stream of tokensï¼Œæ¯ä¸ªæ ‡è®°éƒ½è¢«è¯†åˆ«æˆ–æ˜ å°„ä¸ºç‰¹å®šç±»å‹ï¼Œä¹Ÿå°±æ˜¯ Lexical Analysisã€‚</p>
<center><figure>
    <img loading="lazy" src="./lexical-analysis.webp" width="55%"/> <figcaption>
            Lexical Analysis of the python function yielding a stream of tokens
        </figcaption>
</figure>
</center>
<p>ç„¶åï¼Œæ ¹æ®è¿™äº›æ ‡è®°å‡ºç°çš„é¡ºåºæ¥ç¡®å®šä¹¦é¢è¯­å¥çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶é€šè¿‡è¯­ä¹‰åˆ†ææ„å»ºä¸€æ£µæ ‘ï¼ˆæˆ– <strong>A</strong>bstract <strong>S</strong>yntax <strong>T</strong>reeï¼‰æ¥æ£€æŸ¥å…¶æ­£ç¡®æ€§ï¼ŒåŒæ—¶æä¾›ä½¿ç”¨ç°æœ‰æ ‘éå†æ–¹æ³•ä¹‹ä¸€è¿›è¡Œéå†çš„èƒ½åŠ›ã€‚</p>
<center><figure>
    <img loading="lazy" src="./syntax-tree.webp" width="100%"/> <figcaption>
            Syntax tree after Semantic analysis
        </figcaption>
</figure>
</center>
<h3 id="tldr-æ¦‚å¿µ">TLDR æ¦‚å¿µ<a hidden class="anchor" aria-hidden="true" href="#tldr-æ¦‚å¿µ">#</a></h3>
<ul>
<li><strong>Lexer</strong> : converts a stream of characters to a stream of tokens.</li>
<li><strong>Parser</strong> : processes of tokens, possibly creating AST.</li>
<li><strong>Abstract Syntax Tree(AST)</strong>: an intermediate tree representation of the parsed input that is simpler to process than the stream of tokens.</li>
<li><strong>Tree Parser</strong>: It processes an AST.</li>
<li><strong>String Template</strong>: a library that supports using templates with placeholders for outputting text (something very specific to ANTLR).</li>
</ul>
<p>ANTLR æ˜¯ä¸€ç§ <strong>LL parser</strong>ï¼ˆLeft-to-right, Leftmost derivationï¼‰ï¼Œæ˜¯ä¸€ç§è‡ªé¡¶å‘ä¸‹çš„å‰–æå™¨ï¼Œé€‚ç”¨äºæ— ä¸Šä¸‹æ–‡è¯­è¨€çš„å­é›†ã€‚å®ƒä»å·¦åˆ°å³è§£æè¾“å…¥ï¼Œå¯¹å¥å­è¿›è¡Œ Leftmost derivationã€‚å®ƒç®€åŒ–äº†è®¸å¤šæ­¥éª¤ï¼Œä½¿åˆ›å»ºè¯­è¨€è¯†åˆ«å™¨å’Œè§£æå™¨å˜å¾—æ›´å®¹æ˜“ã€æ›´æ–¹ä¾¿ã€‚</p>
<center><figure>
    <img loading="lazy" src="./paser-process.webp" width="60%"/> <figcaption>
            Syntax tree after Semantic analysis
        </figcaption>
</figure>
</center>
<h3 id="example1">Example1<a hidden class="anchor" aria-hidden="true" href="#example1">#</a></h3>
<p>ä¸‹é¢æ˜¯æˆ‘ä¸ºè§£æ python å‡½æ•°è€Œç¼–å†™çš„è§£æå™¨çš„ä¸€ä¸ªå¿«é€Ÿç¤ºä¾‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">grammar PythonParserExample;
</span></span><span class="line"><span class="cl">tokens { INDENT, DEDENT, LINE_BREAK }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">statement
</span></span><span class="line"><span class="cl">    : (single_input)? EOF
</span></span><span class="line"><span class="cl">    ;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">single_input
</span></span><span class="line"><span class="cl">    : LINE_BREAK
</span></span><span class="line"><span class="cl">    | simple_stmt
</span></span><span class="line"><span class="cl">    | complex_stmt (LINE_BREAK)? EOF
</span></span><span class="line"><span class="cl">    ;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">complex_stmt: funcdef;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">simple_stmt
</span></span><span class="line"><span class="cl">    : small_stmt (SEMI_COLON small_stmt)* SEMI_COLON? (LINE_BREAK)? EOF
</span></span><span class="line"><span class="cl">    ;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">stmt
</span></span><span class="line"><span class="cl">    : simple_stmt
</span></span><span class="line"><span class="cl">    | complex_stmt
</span></span><span class="line"><span class="cl">    ;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">funcdef
</span></span><span class="line"><span class="cl">    : ASYNC? DEF name OPEN_PAREN typedargslist? CLOSE_PAREN (ARROW name)? COLON &#39;\n&#39;? funcbody
</span></span><span class="line"><span class="cl">    ;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">typedargslist
</span></span><span class="line"><span class="cl">    : (def_parameters COMMA)? (args (COMMA def_parameters)? ) COMMA?
</span></span><span class="line"><span class="cl">    | def_parameters COMMA?
</span></span><span class="line"><span class="cl">    ;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">funcbody
</span></span><span class="line"><span class="cl">    : simple_stmt
</span></span><span class="line"><span class="cl">    | LINE_BREAK INDENT stmt+ DEDENT
</span></span><span class="line"><span class="cl">    ;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">args
</span></span><span class="line"><span class="cl">     : STAR name
</span></span><span class="line"><span class="cl">     ;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def_parameters
</span></span><span class="line"><span class="cl">    : def_parameter (COMMA def_parameter)*
</span></span><span class="line"><span class="cl">    ;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">small_stmt
</span></span><span class="line"><span class="cl">    : RETURN expression                                                                #return_stmt
</span></span><span class="line"><span class="cl">    ;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def_parameter
</span></span><span class="line"><span class="cl">    : name
</span></span><span class="line"><span class="cl">    | STAR
</span></span><span class="line"><span class="cl">    ;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">expression: 
</span></span><span class="line"><span class="cl">    name op=OPERATOR name
</span></span><span class="line"><span class="cl">    ;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">name: NAME;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">DEF : D E F;
</span></span><span class="line"><span class="cl">SEMI_COLON : &#39;;&#39;;
</span></span><span class="line"><span class="cl">STAR : &#39;*&#39;;
</span></span><span class="line"><span class="cl">OPERATOR : STAR|&#39;+&#39;|&#39;/&#39;|&#39;**&#39;|&#39;-&#39;;
</span></span><span class="line"><span class="cl">RETURN : R E T U R N;
</span></span><span class="line"><span class="cl">ASYNC : A S Y N C;
</span></span><span class="line"><span class="cl">COMMA : &#39;,&#39;;
</span></span><span class="line"><span class="cl">OPEN_PAREN : &#39;(&#39;;
</span></span><span class="line"><span class="cl">CLOSE_PAREN : &#39;)&#39;;
</span></span><span class="line"><span class="cl">ARROW : &#39;-&gt;&#39;;
</span></span><span class="line"><span class="cl">COLON : &#39;:&#39;;
</span></span><span class="line"><span class="cl">NAME               : ID_START ID_CONTINUE*;
</span></span><span class="line"><span class="cl">WS                 : [ \t]+            {HandleSpaces();}   -&gt; channel(HIDDEN);
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ƒçš„ä¸€ä¸ªä¸»è¦ä¼˜ç‚¹æ˜¯ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ syntax è¿›è¡Œ lexing å’Œ parsingã€‚ç„¶è€Œï¼Œåœ¨è¯­æ³•å±‚é¢ä¸Šï¼Œè¿™é‡Œçš„åŒºåˆ«åœ¨äºå‘½åçº¦å®š:</p>
<ul>
<li>ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„è§„åˆ™æ˜¯ lexer rules</li>
<li>å…¶ä»–çš„éƒ½æ˜¯ parse rules</li>
</ul>
<center><figure>
    <img loading="lazy" src="./intellij-idea-plugin.webp" width="100%"/> <figcaption>
            ANTLR plugin (on Intellij IDEA) output for the above python function parsing
        </figcaption>
</figure>
</center>
<p>ä¸€æ—¦å®šä¹‰å®Œæ¯•ï¼Œ<a href="https://www.antlr.org/download/antlr-4.8-complete.jar">complete ANLTR jar</a> æ–‡ä»¶å°±ä¼šæä¾›ä¸€ä¸ªé€‰é¡¹ï¼Œå°†å…¶ç”Ÿæˆä¸€ç»„æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨æ‚¨å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€ä»£ç ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª parserã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">java -Xmx500M -cp &lt;path to ANTLR <span class="nb">complete</span> JAR&gt; org.antlr.v4.Tool -Dlanguage<span class="o">=</span>&lt;target_language&gt; PythonParserExample.g4
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”±äºæˆ‘ä½¿ç”¨ Python3 ä½œä¸ºç”Ÿæˆè§£æå™¨çš„ç›®æ ‡ï¼ŒANTLR çš„é…ç½®ä¼šç”Ÿæˆ 3 ä¸ª python æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å¯ä»¥ä½œä¸ºä»£ç ç¿»è¯‘è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå°†ä¸€ç§è¯­è¨€çš„æºä»£ç è½¬æ¢ä¸ºå¦ä¸€ç§è¯­è¨€ã€‚</p>
<center><figure>
    <img loading="lazy" src="./output-files.webp" width="40%"/> <figcaption>
            ANTLR plugin (on Intellij IDEA) output for the above python function parsing
        </figcaption>
</figure>
</center>
<h2 id="setting-up-an-antlr-project">Setting up an ANTLR Project<a hidden class="anchor" aria-hidden="true" href="#setting-up-an-antlr-project">#</a></h2>
<h3 id="antlr-plugin-for-vscode">ANTLR plugin for VSCode<a hidden class="anchor" aria-hidden="true" href="#antlr-plugin-for-vscode">#</a></h3>
<p>è¿™é‡Œä½¿ç”¨çš„è®¾ç½®å°†æ˜¯åœ¨ VSCode ä¸Šåˆ›å»ºçš„ Java-Maven é¡¹ç›®ã€‚</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=mike-lischke.vscode-antlr4">ANTLR plugin for VSCode</a> æä¾›äº†å„ç§é€‰é¡¹ï¼ˆç”šè‡³æ¯” Intellij è¿˜å¤šï¼‰æ¥è°ƒè¯•è¯­æ³•æ–‡ä»¶ï¼Œå¹¶åˆ›å»ºäº†ç¾è§‚çš„ parse treesï¼Œä»¥ä¾¿è½»æ¾è°ƒè¯•ç”¨æˆ·è¾“å…¥è¯­å¥çš„ç‰¹å®šé…ç½®ã€‚</p>
<center><figure>
    <img loading="lazy" src="./vscode-plugin.gif" width="100%"/> <figcaption>
            ANTLR plugin (on Intellij IDEA) output for the above python function parsing
        </figcaption>
</figure>
</center>
<p>è¦ç”Ÿæˆè¿™äº›å¯è§†åŒ–æ•ˆæœï¼Œéœ€è¦ä½¿ç”¨ vscode çš„ ANTLR å¯åŠ¨é…ç½®åœ¨è°ƒè¯•æ¨¡å¼ä¸‹è¿è¡Œè¯­æ³•æ–‡ä»¶ï¼Œå¹¶ä¸ºè¯­æ³•æŒ‡å®šè¾“å…¥æ–‡ä»¶ã€‚ä¸‹é¢æ˜¯ VS Code ä¸Š ANTLR çš„ launch.json é…ç½®æ–‡ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Debug ANTLR4 grammar&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;antlr-debug&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;request&#34;</span><span class="p">:</span> <span class="s2">&#34;launch&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;input&#34;</span><span class="p">:</span> <span class="s2">&#34;input.txt&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;grammar&#34;</span><span class="p">:</span> <span class="s2">&#34;BooleanExprParser.g4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;startRule&#34;</span><span class="p">:</span> <span class="s2">&#34;parse&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;printParseTree&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">&#34;visualParseTree&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="grammar">Grammar<a hidden class="anchor" aria-hidden="true" href="#grammar">#</a></h3>
<p>è®©æˆ‘ä»¬å…ˆä¸ºè§£æå™¨åˆ›å»ºä¸€ä¸ªåŸºæœ¬è¯­æ³•æˆ– BooleanExpr.g4 æ–‡ä»¶ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">grammar</span> <span class="nx">BooleanExpr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="err">@</span><span class="nx">header</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">antlrsource</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯·æ³¨æ„ parser file æ˜¯å¦‚ä½•ä»¥ <code>grammar BooleanExpr;</code> å¼€å§‹çš„ã€‚è¿™å¯ä»¥é€šè¿‡å°† Lexer tokens (å¤§å†™å­—æ¯è¡¨ç¤º) å’Œ parser tokens (æ‰€æœ‰å…¶ä»–æ ‡è®°) ä¿å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶ä¸­æ¥åˆ†è§£ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">lexer</span> <span class="nx">grammar</span> <span class="nx">BooleanExprLexer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="err">@</span><span class="nx">header</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">antlrsource</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">parser</span> <span class="nx">grammar</span> <span class="nx">BooleanExprParser</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="err">@</span><span class="nx">header</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">antlrsource</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸€ä¸ªç”¨äº parserï¼Œå¦ä¸€ä¸ªç”¨äº lexerï¼Œè¿™æ ·æ›´ä¾¿äºç»´æŠ¤ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªå¤´æ–‡ä»¶å’Œè½¯ä»¶åŒ…åç§°ï¼Œæ”¾åœ¨ç”Ÿæˆçš„è§£æå™¨ç±»çš„å¼€å¤´ã€‚è¿™å°†å…è®¸æˆ‘ä»¬æŒ‡å®šä¸€ä¸ªåŒ…ï¼Œä»¥ä¾¿åœ¨ Java ä»£ç ä¸­å¯¼å…¥ã€‚</p>
<p>ä» Lexer å¼€å§‹ï¼Œæˆ‘ä»¬å°† IDENTIFIER å®šä¹‰ä¸º lexer ruleï¼Œå¹¶æä¾›ä¸ä¹‹åŒ¹é…çš„æè¿°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">IDENTIFIER
</span></span><span class="line"><span class="cl">   :   [a-zA-Z_] [a-zA-Z_0-9]*
</span></span><span class="line"><span class="cl">   ;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Lexer rules æ€»æ˜¯ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚è¿™äº›è§„åˆ™æ˜¯ parser çš„åŸºæœ¬æ„ä»¶ï¼Œé‡ç‚¹æ˜¯æ„å»º parser rules çš„åŸºç¡€ã€‚å¯¹æ­£åˆ™è¡¨è¾¾å¼ç¨æœ‰æ¥è§¦çš„äººæ¥è¯´ï¼Œè¿™åº”è¯¥æœ‰ç‚¹ç†Ÿæ‚‰ã€‚</p>
<p>è¿™é‡Œï¼Œ<code>A-Z</code> è¡¨ç¤º <code>A</code> å’Œ <code>Z</code> ä¹‹é—´çš„å­—æ¯ï¼Œè€Œ <code>a-z</code> è¡¨ç¤º <code>a</code> å’Œ <code>z</code> ä¹‹é—´çš„å­—æ¯ã€‚åŒæ ·ï¼Œ<code>0-9</code> è¡¨ç¤ºæ•°å­— <code>0</code> å’Œ <code>9</code> ä¹‹é—´çš„æ•°å­—ã€‚ç”±äºè§„åˆ™å¯èƒ½åŒ…å«ä¹Ÿå¯èƒ½ä¸åŒ…å«è¿™äº›å­—æ¯çš„å¤šæ¬¡å‡ºç°ï¼Œå› æ­¤å¯ä»¥ç”¨ (<code>*</code>/<code>+</code>) è¿ç®—ç¬¦ä½œä¸ºåç¼€ï¼Œè¡¨ç¤ºè¿™äº›å­—æ¯å‡ºç°çš„é¢‘ç‡ã€‚è¿™é‡Œï¼Œ<code>*</code> è¡¨ç¤ºå¯èƒ½å®Œå…¨ä¸å‡ºç°ï¼ˆ0 æ¬¡æˆ–æ›´å¤šæ¬¡ï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬çš„ <code>IDENTIFIER</code> è§„åˆ™å°†åŒ¹é…å¤§å†™å­—æ¯ã€å°å†™å­—æ¯ï¼ˆæ€»æ˜¯ä»¥å¤§å†™/å°å†™å­—æ¯å¼€å¤´ï¼‰å’Œæ•´æ•°å­—ç¬¦çš„ä»»æ„ç»„åˆï¼Œä½†ä¸åŒ¹é…ç©ºå­—ç¬¦ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæ‰€æœ‰ç©ºç™½éƒ½ä¼šè¢«è¯æ³•è¯†åˆ«å™¨æ ‡è®°åŒ–ã€‚å› æ­¤ï¼Œæ‚¨å¿…é¡»åœ¨è§£æå™¨è§„åˆ™ä¸­å®šä¹‰ç©ºæ ¼ä»¥åŠæ‰€æœ‰å¯èƒ½ä½¿ç”¨ç©ºæ ¼çš„åœ°æ–¹ã€‚ä¸è¿‡ï¼Œç”±äºæˆ‘ä»¬çš„æºå¸ƒå°”è¡¨è¾¾å¼åœ¨æŸäº›åœ°æ–¹ä¸éœ€è¦å¯¹ç©ºæ ¼æ•æ„Ÿï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€æ¡è¯æ³•è§„åˆ™æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">WS: [ \r\t\u000C\n]+ -&gt; skip;
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯·æ³¨æ„ç•™ç™½æ ‡è®°çš„å®šä¹‰æ˜¯å¦‚ä½•ç¼–å†™çš„ï¼Œä»¥è¯†åˆ«ä¸€ä¸ªæˆ–å¤šä¸ªç©ºæ ¼ã€åˆ¶è¡¨ç¬¦å’Œæ¢è¡Œç¬¦ï¼Œå¹¶è®© ANTLR è·³è¿‡å®ƒä»¬ã€‚ç®­å¤´ï¼ˆ-&gt;ï¼‰è¿ç®—ç¬¦å®šä¹‰äº†é‡åˆ°æ ‡è®°æ—¶è¦æ‰§è¡Œçš„æ“ä½œï¼ˆæœ¬ä¾‹ä¸­ä¸ºè·³è¿‡æ“ä½œï¼‰ã€‚æ¥ä¸‹æ¥æ˜¯ä¸ºå¸ƒå°”è¡¨è¾¾å¼å®šä¹‰æ ‡è®°ï¼Œå…¶ä¸­åŒ…æ‹¬å¤šä¸ªè¿ç®—ç¬¦å’Œæ“ä½œæ•°ã€‚è¿™åŒ…æ‹¬ä»¥ä¸‹æ ‡è®°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">AND: A N D;
</span></span><span class="line"><span class="cl">OR: O R;
</span></span><span class="line"><span class="cl">NOT: N O T;
</span></span><span class="line"><span class="cl">TRUE: &#39;True&#39;;
</span></span><span class="line"><span class="cl">FALSE: &#39;False&#39;;
</span></span><span class="line"><span class="cl">GT: G T {setText(&#34; &gt; &#34;);};
</span></span><span class="line"><span class="cl">GE: G E {setText(&#34; &gt;= &#34;);};
</span></span><span class="line"><span class="cl">LT: L T {setText(&#34; &lt; &#34;);};
</span></span><span class="line"><span class="cl">LE: L E {setText(&#34; &lt;= &#34;);};
</span></span><span class="line"><span class="cl">EQ: E Q {setText(&#34; == &#34;);};
</span></span><span class="line"><span class="cl">LPARENTHESIS: &#39;(&#39;;
</span></span><span class="line"><span class="cl">RPARENTHESIS: &#39;)&#39;;
</span></span><span class="line"><span class="cl">DECIMAL_NUMBER: &#39;-&#39;? [0-9]+ ( &#39;.&#39; [0-9]+)?;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="embedding-actions">Embedding Actions<a hidden class="anchor" aria-hidden="true" href="#embedding-actions">#</a></h3>
<p>è§„åˆ™ GTã€GEã€LTã€LE å’Œ EQ åŒ…å«ä»£ç å—ï¼Œå…è®¸å®ƒä»¬åœ¨é‡åˆ°å„è‡ªçš„æ ‡è®°æ—¶æ‰§è¡ŒæŸäº›åŠ¨ä½œã€‚è¿™æ ·å°±å¯ä»¥åœ¨è¯­æ³•æ–‡ä»¶ä¸­å®šä¹‰æŸäº›åŠ¨ä½œï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªèƒ½å®šä¹‰ç®€å•çš„å°åŠ¨ä½œï¼Œè€Œä¸èƒ½å®šä¹‰å¤æ‚çš„ä»£ç å—ã€‚</p>
<blockquote>
<p>å¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›äº§ç”Ÿæ„å»ºè§£ææ ‘çš„å¼€é”€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è§£æè¿‡ç¨‹ä¸­å³æ—¶è®¡ç®—å€¼æˆ–æ‰“å°å†…å®¹ã€‚å¦ä¸€æ–¹é¢ï¼Œè¿™æ„å‘³ç€è¦åœ¨è¡¨è¾¾å¼è¯­æ³•ä¸­åµŒå…¥ä»»æ„ä»£ç ï¼Œè¿™å°±æ¯”è¾ƒå›°éš¾ï¼›æˆ‘ä»¬å¿…é¡»äº†è§£è¿™äº›æ“ä½œå¯¹è§£æå™¨çš„å½±å“ï¼Œä»¥åŠè¿™äº›æ“ä½œçš„ä½ç½®ã€‚
<a href="https://media.pragprog.com/titles/tpantlr2/listener.pdf">The Definitive ANTLR 4 Reference</a></p>
</blockquote>
<p>è¯·æ³¨æ„ï¼Œæ¯æ¡è§„åˆ™éƒ½ç”±ç”¨ç©ºæ ¼éš”å¼€çš„å­—æ¯ç»„æˆã€‚è¿™äº›è¢«ç§°ä¸º fragmentsã€‚å®ƒä»¬çš„ä¸»è¦ç›®çš„æ˜¯å‡å°‘æ¯ä¸ªæ ‡è®°çš„æ‚ä¹±å®šä¹‰ï¼Œè¿™åŸºæœ¬ä¸Šéœ€è¦å¤„ç†å¯¹å¤§å°å†™æ•æ„Ÿçš„ç”¨ä¾‹ã€‚è¿™æ ·ï¼Œç”¨æˆ·å°±ä¸å¿…ä¸ºè¯†åˆ«åŒä¸€ä¸ª token è€Œå†™ä¸‹æ‰€æœ‰å¯èƒ½çš„æ–‡æœ¬ç»„åˆã€‚å…¶å®šä¹‰å¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">fragment A : [aA]; // match either an &#39;a&#39; or &#39;A&#39;
</span></span><span class="line"><span class="cl">fragment B : [bB];
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">fragment Z : [zZ];
</span></span></code></pre></td></tr></table>
</div>
</div><p>è™½ç„¶å¤§å¤šæ•°å­—æ¯æ•°å­—ä»¤ç‰Œéƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨ç‰‡æ®µæ¥åˆ›å»ºï¼Œä½†å…¶ä»–ä»¤ç‰Œåˆ™å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰æˆ–ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥çš„çº¯å­—ç¬¦ä¸²ï¼ˆå¦‚ LPARENTHESIS å’Œ DECIMAL_NUMBERï¼‰æ¥åˆ›å»ºã€‚</p>
<p>è€Œ parser rulesï¼ˆæ‰€æœ‰å…¶ä»–è§„åˆ™ï¼‰åˆ™ä»¥å°å†™å­—æ¯å¼€å¤´ã€‚è¿™äº›è§„åˆ™çš„ä¸»è¦ç›®çš„æ˜¯åœ¨ DSL ä¸­å®šä¹‰å¸ƒå°”è¡¨è¾¾å¼çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶å¸®åŠ©ä»ç”Ÿæˆçš„è¯æ³•æ ‡è®°ä¸­æ„å»ºè§£ææ ‘æˆ–æŠ½è±¡è¯­æ³•æ ‘ã€‚</p>
<h3 id="basic-building-blocks">Basic Building Blocks<a hidden class="anchor" aria-hidden="true" href="#basic-building-blocks">#</a></h3>
<p>è®©æˆ‘ä»¬å¼€å§‹å®šä¹‰è§„åˆ™ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰æ ¹èŠ‚ç‚¹ï¼ˆæˆ–é€šå¸¸æ‰€è¯´çš„è§£æèŠ‚ç‚¹ï¼‰ï¼Œå®ƒæœ¬èº«åªèƒ½æŒ‡å‘ä¸€æ¡è§„åˆ™ï¼ˆæ­¤å¤„ä¸º basicBooleanExpressionï¼‰ã€‚é¦–å…ˆæ˜¯ä¸€ä¸ªè¿”å›è¯­å¥ï¼Œå…¶ä¸­åŒ…å«å®ƒåº”è¯¥è¿”å›çš„å˜é‡ï¼ˆå¯é€‰ï¼Œä½†åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯å¿…éœ€çš„ï¼‰åŠå…¶è¿”å›ç±»å‹ã€‚</p>
<p>è¿™æ¡è§„åˆ™æŒ‡å‘å¦ä¸€æ¡åä¸º basicBooleanExpression çš„è§„åˆ™ï¼Œè¯¥è§„åˆ™åè·Ÿæœ‰ EOFï¼ˆæˆ–æ–‡ä»¶ç»“æŸï¼‰å­—ç¬¦ã€‚ä¸åŒ…å«è¯¥å­—ç¬¦å®è´¨ä¸Šæ„å‘³ç€æ‚¨æ­£è¯•å›¾è§£ææ•´ä¸ªè¾“å…¥å†…å®¹ï¼Œè€Œåªè§£æéƒ¨åˆ†è¾“å…¥å†…å®¹æ˜¯å¯ä»¥æ¥å—çš„ï¼Œè¿™å°†é¿å…ä»»ä½•è¯­æ³•é”™è¯¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">parse
</span></span><span class="line"><span class="cl">returns[String str]
</span></span><span class="line"><span class="cl">@init {$str=&#34;&#34;;}: 
</span></span><span class="line"><span class="cl">basicBooleanExpression {$str=$basicBooleanExpression.str;} EOF;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ <code>EOF</code> character çš„åŸå› æ˜¯ï¼Œå¦‚æœåœ¨è§£æ basicbooleanExpression è§„åˆ™æ—¶å‡ºç°è¯­æ³•é”™è¯¯ï¼Œé‚£ä¹ˆè§£æè§„åˆ™å°†å°è¯•æ¢å¤è¯­æ³•é”™è¯¯å¹¶æŠ¥å‘Šæ”¶é›†åˆ°çš„è¯­æ³•é”™è¯¯ï¼Œç„¶åç»§ç»­è§£æï¼Œå› ä¸º <code>EOF</code> æ˜¯å®Œæˆè§„åˆ™æ‰€å¿…éœ€çš„ï¼Œè€Œä¸”è§£æå™¨å°šæœªåˆ°è¾¾ <code>EOF</code>ã€‚</p>
<p>ç”±äºæˆ‘ä»¬å·²ç»å®šä¹‰äº†è¯­æ³•å¹¶å°†å…¶åˆ†æˆäº†ä¸¤ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€‰æ‹©åœ¨è§£æå™¨æ–‡ä»¶ä¸­å°†è¯æ³•ä½œä¸ºå®šä¹‰è§„åˆ™çš„è¯æ±‡:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">options {
</span></span><span class="line"><span class="cl">tokenVocab = BooleanExprLexer;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å›åˆ°æˆ‘ä»¬çš„è§£æå™¨ï¼Œ</p>
<ul>
<li>ç¬¬ä¸€æ¡è§„åˆ™æˆ– basicBooleanExpresion è§„åˆ™å®šä¹‰äº†ä¸‰ä¸ªé€‰é¡¹ï¼Œåœ¨æˆ‘ä»¬çš„ python ç›®æ ‡ä»£ç è¯„ä¼°ä¸­åº”å§‹ç»ˆè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ç¬¬ä¸€ç§æ˜¯åä¸¤ç§è§„åˆ™çš„ç»„åˆï¼Œå³ä¸¤ä¸ªå¸ƒå°”è¡¨è¾¾å¼ä¸ä¸€ä¸ªé€»è¾‘å’Œ/æˆ–è¿ç®—ç¬¦çš„ç»„åˆï¼›</li>
<li>ç¬¬äºŒç§æ˜¯å¦ä¸€ç§ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œå³ä½¿ç”¨æ¯”è¾ƒå™¨ï¼ˆå¦‚ã€å°äºæˆ– LTï¼‰æ¯”è¾ƒä¸¤ä¸ªåŸºæœ¬è¡¨è¾¾å¼å½¼æ­¤è¿”å›çš„æŸä¸ªå€¼ï¼›</li>
<li>æœ€åï¼Œç¬¬ä¸‰ç§æ˜¯å•å…ƒè¡¨è¾¾å¼ï¼ˆåªæœ‰ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚ True æˆ– Falseï¼‰ã€‚</li>
</ul>
<p>è¿™äº›è§„åˆ™ç”±è¿ç®—ç¬¦ <code>|</code> åˆ†éš”ã€‚è¿™æ„å‘³ç€ï¼ŒbasicBooleanExpression åœ¨è¯†åˆ«è¾“å…¥å­—ç¬¦ä¸²æ—¶ï¼Œå¯ä»¥æ ¹æ®ä»å·¦åˆ°å³çš„æ–‡æœ¬è¯†åˆ«ï¼Œé€’å½’åœ°å¼•ç”¨å…¶å­è§„åˆ™ä¸­çš„ä»»ä¸€è§„åˆ™ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">basicBooleanExpression
</span></span><span class="line"><span class="cl">returns[String str]:
</span></span><span class="line"><span class="cl">left = basicBooleanExpression op = logicalOperator right = basicBooleanExpression   {$str=$left.str +&#34; &#34;+$op.text+&#34; &#34;+$right.str;} # logicalExpression
</span></span><span class="line"><span class="cl">| left = expression op = comparator right = expression {$str=&#34;(&#34;+$left.text +&#34; &#34;+$op.text+&#34; &#34;+$right.text+&#34;)&#34;;} # comparisonExpression
</span></span><span class="line"><span class="cl">| bool            {$str=$bool.str;}       # booleanExpression;
</span></span></code></pre></td></tr></table>
</div>
</div><p>basicBooleanExpression ä¸­çš„æ¯æ¡è§„åˆ™éƒ½åˆ†é…ç»™ä¸€ä¸ªå˜é‡åï¼Œå¦‚ leftã€rightï¼ˆè¡¨è¾¾å¼ä¸­çš„å·¦å³æ“ä½œæ•°ï¼‰å’Œ opï¼ˆæ“ä½œæ•°çš„ç¼©å†™ï¼‰ï¼Œæˆ–è€…æ˜¯ä¸€æ¡å•æ ‡è®°è§„åˆ™ã€‚$str å˜é‡ç”¨äºåˆ†é…å½“å‰è¡¨è¾¾å¼è§£æçš„ç»“æœï¼Œå¹¶ä½¿ç”¨è§„åˆ™å¼€å¤´çš„ [String str] è¿”å›å€¼è¿”å›ã€‚</p>
<p><code>#</code> ç”¨äºæ ‡è®°æ¯æ¡è§„åˆ™ï¼Œä½¿å…¶åœ¨ç›®æ ‡è¯­è¨€è§£æå™¨ï¼ˆåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ Java è§£æå™¨ç±»ï¼‰ä¸­æœ‰ä¸“é—¨çš„ç›‘å¬å™¨æ–¹æ³•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">lexer</span> <span class="nx">grammar</span> <span class="nx">BooleanExprLexer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="err">@</span><span class="nx">header</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">antlrsource</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">AND</span><span class="p">:</span> <span class="nx">A</span> <span class="nx">N</span> <span class="nx">D</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">OR</span><span class="p">:</span> <span class="nx">O</span> <span class="nx">R</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">NOT</span><span class="p">:</span> <span class="nx">N</span> <span class="nx">O</span> <span class="nx">T</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">TRUE</span><span class="p">:</span> <span class="err">&#39;</span><span class="nx">True</span><span class="err">&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">FALSE</span><span class="p">:</span> <span class="err">&#39;</span><span class="nx">False</span><span class="err">&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">GT</span><span class="p">:</span> <span class="nx">G</span> <span class="nx">T</span> <span class="p">{</span><span class="nf">setText</span><span class="p">(</span><span class="s">&#34; &gt; &#34;</span><span class="p">);};</span>
</span></span><span class="line"><span class="cl"><span class="nx">GE</span><span class="p">:</span> <span class="nx">G</span> <span class="nx">E</span> <span class="p">{</span><span class="nf">setText</span><span class="p">(</span><span class="s">&#34; &gt;= &#34;</span><span class="p">);};</span>
</span></span><span class="line"><span class="cl"><span class="nx">LT</span><span class="p">:</span> <span class="nx">L</span> <span class="nx">T</span> <span class="p">{</span><span class="nf">setText</span><span class="p">(</span><span class="s">&#34; &lt; &#34;</span><span class="p">);};</span>
</span></span><span class="line"><span class="cl"><span class="nx">LE</span><span class="p">:</span> <span class="nx">L</span> <span class="nx">E</span> <span class="p">{</span><span class="nf">setText</span><span class="p">(</span><span class="s">&#34; &lt;= &#34;</span><span class="p">);};</span>
</span></span><span class="line"><span class="cl"><span class="nx">EQ</span><span class="p">:</span> <span class="nx">E</span> <span class="nx">Q</span> <span class="p">{</span><span class="nf">setText</span><span class="p">(</span><span class="s">&#34; == &#34;</span><span class="p">);};</span>
</span></span><span class="line"><span class="cl"><span class="nx">LPARENTHESIS</span><span class="p">:</span> <span class="sc">&#39;(&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">RPARENTHESIS</span><span class="p">:</span> <span class="sc">&#39;)&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">DECIMAL_NUMBER</span><span class="p">:</span> <span class="sc">&#39;-&#39;</span><span class="err">?</span> <span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">+</span> <span class="p">(</span> <span class="sc">&#39;.&#39;</span> <span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">+</span><span class="p">)</span><span class="err">?</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">IDENTIFIER</span><span class="p">:</span> <span class="p">[</span><span class="nx">a</span><span class="o">-</span><span class="nx">zA</span><span class="o">-</span><span class="nx">Z_</span><span class="p">]</span> <span class="p">[</span><span class="nx">a</span><span class="o">-</span><span class="nx">zA</span><span class="o">-</span><span class="nx">Z_0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">WS</span><span class="p">:</span> <span class="p">[</span> <span class="err">\</span><span class="nx">r</span><span class="err">\</span><span class="nx">t</span><span class="err">\</span><span class="nx">u000C</span><span class="err">\</span><span class="nx">n</span><span class="p">]</span><span class="o">+</span> <span class="o">-</span><span class="p">&gt;</span> <span class="nx">skip</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">A</span> <span class="p">:</span> <span class="p">[</span><span class="nx">aA</span><span class="p">];</span> <span class="c1">// match either an &#39;a&#39; or &#39;A&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fragment</span> <span class="nx">B</span> <span class="p">:</span> <span class="p">[</span><span class="nx">bB</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">C</span> <span class="p">:</span> <span class="p">[</span><span class="nx">cC</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">D</span> <span class="p">:</span> <span class="p">[</span><span class="nx">dD</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">E</span> <span class="p">:</span> <span class="p">[</span><span class="nx">eE</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">F</span> <span class="p">:</span> <span class="p">[</span><span class="nx">fF</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">G</span> <span class="p">:</span> <span class="p">[</span><span class="nx">gG</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">H</span> <span class="p">:</span> <span class="p">[</span><span class="nx">hH</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">I</span> <span class="p">:</span> <span class="p">[</span><span class="nx">iI</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">J</span> <span class="p">:</span> <span class="p">[</span><span class="nx">jJ</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">K</span> <span class="p">:</span> <span class="p">[</span><span class="nx">kK</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">L</span> <span class="p">:</span> <span class="p">[</span><span class="nx">lL</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">M</span> <span class="p">:</span> <span class="p">[</span><span class="nx">mM</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">N</span> <span class="p">:</span> <span class="p">[</span><span class="nx">nN</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">O</span> <span class="p">:</span> <span class="p">[</span><span class="nx">oO</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">P</span> <span class="p">:</span> <span class="p">[</span><span class="nx">pP</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">Q</span> <span class="p">:</span> <span class="p">[</span><span class="nx">qQ</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">R</span> <span class="p">:</span> <span class="p">[</span><span class="nx">rR</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">S</span> <span class="p">:</span> <span class="p">[</span><span class="nx">sS</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">T</span> <span class="p">:</span> <span class="p">[</span><span class="nx">tT</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">U</span> <span class="p">:</span> <span class="p">[</span><span class="nx">uU</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">V</span> <span class="p">:</span> <span class="p">[</span><span class="nx">vV</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">W</span> <span class="p">:</span> <span class="p">[</span><span class="nx">wW</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">X</span> <span class="p">:</span> <span class="p">[</span><span class="nx">xX</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">Y</span> <span class="p">:</span> <span class="p">[</span><span class="nx">yY</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragment</span> <span class="nx">Z</span> <span class="p">:</span> <span class="p">[</span><span class="nx">zZ</span><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>BooleanExprLexer.g4</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">parser</span> <span class="nx">grammar</span> <span class="nx">BooleanExprParser</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="err">@</span><span class="nx">header</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">antlrsource</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">options</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">tokenVocab</span> <span class="p">=</span> <span class="nx">BooleanExprLexer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">parse</span>
</span></span><span class="line"><span class="cl">	<span class="nx">returns</span><span class="p">[</span><span class="nx">String</span> <span class="nx">str</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="err">@</span><span class="nx">init</span> <span class="p">{</span><span class="err">$</span><span class="nx">str</span><span class="p">=</span><span class="s">&#34;&#34;</span><span class="p">;}:</span> <span class="nx">basicBooleanExpression</span> <span class="p">{</span><span class="err">$</span><span class="nx">str</span><span class="p">=</span><span class="err">$</span><span class="nx">basicBooleanExpression</span><span class="p">.</span><span class="nx">str</span><span class="p">;}</span> <span class="nx">EOF</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">basicBooleanExpression</span>
</span></span><span class="line"><span class="cl">	<span class="nx">returns</span><span class="p">[</span><span class="nx">String</span> <span class="nx">str</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">	<span class="nx">left</span> <span class="p">=</span> <span class="nx">basicBooleanExpression</span> <span class="nx">op</span> <span class="p">=</span> <span class="nx">logicalOperator</span> <span class="nx">right</span> <span class="p">=</span> <span class="nx">basicBooleanExpression</span>	<span class="p">{</span><span class="err">$</span><span class="nx">str</span><span class="p">=</span><span class="err">$</span><span class="nx">left</span><span class="p">.</span><span class="nx">str</span> <span class="o">+</span><span class="s">&#34; &#34;</span><span class="o">+</span><span class="err">$</span><span class="nx">op</span><span class="p">.</span><span class="nx">text</span><span class="o">+</span><span class="s">&#34; &#34;</span><span class="o">+</span><span class="err">$</span><span class="nx">right</span><span class="p">.</span><span class="nx">str</span><span class="p">;}</span> <span class="err">#</span> <span class="nx">logicalExpression</span>
</span></span><span class="line"><span class="cl">	<span class="p">|</span> <span class="nx">left</span> <span class="p">=</span> <span class="nx">expression</span> <span class="nx">op</span> <span class="p">=</span> <span class="nx">comparator</span> <span class="nx">right</span> <span class="p">=</span> <span class="nx">expression</span> <span class="p">{</span><span class="err">$</span><span class="nx">str</span><span class="p">=</span><span class="s">&#34;(&#34;</span><span class="o">+</span><span class="err">$</span><span class="nx">left</span><span class="p">.</span><span class="nx">text</span> <span class="o">+</span><span class="s">&#34; &#34;</span><span class="o">+</span><span class="err">$</span><span class="nx">op</span><span class="p">.</span><span class="nx">text</span><span class="o">+</span><span class="s">&#34; &#34;</span><span class="o">+</span><span class="err">$</span><span class="nx">right</span><span class="p">.</span><span class="nx">text</span><span class="o">+</span><span class="s">&#34;)&#34;</span><span class="p">;}</span>	<span class="err">#</span> <span class="nx">comparisonExpression</span>
</span></span><span class="line"><span class="cl">	<span class="p">|</span> <span class="kt">bool</span>											<span class="p">{</span><span class="err">$</span><span class="nx">str</span><span class="p">=</span><span class="err">$</span><span class="kt">bool</span><span class="p">.</span><span class="nx">str</span><span class="p">;}</span>		<span class="err">#</span> <span class="nx">booleanExpression</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">expression</span>
</span></span><span class="line"><span class="cl">	<span class="nx">returns</span><span class="p">[</span><span class="nx">String</span> <span class="nx">str</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">	<span class="nx">LPARENTHESIS</span> <span class="nx">expression</span> <span class="nx">RPARENTHESIS</span>				<span class="err">#</span> <span class="nx">parenthesisExpression</span>
</span></span><span class="line"><span class="cl">	<span class="p">|</span> <span class="nx">NOT</span> <span class="nx">expression</span>									<span class="err">#</span> <span class="nx">notExpression</span>
</span></span><span class="line"><span class="cl">	<span class="p">|</span> <span class="kt">bool</span>												<span class="err">#</span> <span class="nx">unaryboolExpression</span>
</span></span><span class="line"><span class="cl">	<span class="p">|</span> <span class="nx">IDENTIFIER</span>										<span class="err">#</span> <span class="nx">identifierExpression</span>
</span></span><span class="line"><span class="cl">	<span class="p">|</span> <span class="nx">DECIMAL_NUMBER</span>									<span class="err">#</span> <span class="nx">decimalExpression</span>
</span></span><span class="line"><span class="cl">	<span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">comparator</span>
</span></span><span class="line"><span class="cl">	<span class="nx">returns</span><span class="p">[</span><span class="nx">String</span> <span class="nx">str</span><span class="p">]:</span> <span class="nx">GT</span> <span class="p">|</span> <span class="nx">GE</span> <span class="p">|</span> <span class="nx">LT</span> <span class="p">|</span> <span class="nx">LE</span> <span class="p">|</span> <span class="nx">EQ</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">logicalOperator</span>
</span></span><span class="line"><span class="cl">	<span class="nx">returns</span><span class="p">[</span><span class="nx">String</span> <span class="nx">str</span><span class="p">]:</span> <span class="nx">AND</span> <span class="p">|</span> <span class="nx">OR</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">bool</span>
</span></span><span class="line"><span class="cl">	<span class="nx">returns</span><span class="p">[</span><span class="nx">String</span> <span class="nx">str</span><span class="p">]:</span> <span class="nx">TRUE</span> <span class="p">|</span> <span class="nx">FALSE</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>BooleanExprParser.g4</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">a gt b and c gt d
</span></span><span class="line"><span class="cl">a eq b
</span></span></code></pre></td></tr></table>
</div>
</div><p>input demo</p>
<h3 id="maven-configuration">Maven Configuration<a hidden class="anchor" aria-hidden="true" href="#maven-configuration">#</a></h3>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç»§ç»­ç”Ÿæˆè§£æå™¨æ–‡ä»¶ã€‚è¿™æ¬¡ï¼Œæˆ‘å°†ä½¿ç”¨ maven é…ç½®å’Œ VS Code çš„ ANTLR æ’ä»¶æ¥ç”Ÿæˆè¿™äº›æ–‡ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;groupId&gt;</span>org.antlr<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;artifactId&gt;</span>antlr4-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;version&gt;</span>4.8-1<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;executions&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;execution&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;id&gt;</span>antlr<span class="nt">&lt;/id&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;libDirectory&gt;</span>${basedir}/src/main/antlr<span class="nt">&lt;/libDirectory&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;sourceDirectory&gt;</span>${basedir}/src/main/antlr<span class="nt">&lt;/sourceDirectory&gt;&lt;outputDirectory&gt;</span>${basedir}/src/main/java/antlrsource<span class="nt">&lt;/outputDirectory&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;visitor&gt;</span>false<span class="nt">&lt;/visitor&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;listener&gt;</span>true<span class="nt">&lt;/listener&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;/configuration&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;goals&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;goal&gt;</span>antlr4<span class="nt">&lt;/goal&gt;</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&lt;/goals&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/execution&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/executions&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/plugin&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¯ä¸ªæ ‡ç­¾éƒ½å®šä¹‰äº† ANTLR åœ¨ç”Ÿæˆè§£æå™¨ç±»æ—¶åº”ä½¿ç”¨çš„ç›®å½•æˆ–éœ€è¦æˆ–ä¸éœ€è¦ç”Ÿæˆçš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œç›‘å¬å™¨å’Œè®¿é—®è€…æ ‡ç­¾çš„å®šä¹‰éƒ½æ˜¯ä¸ºäº†æ ¹æ®å®ƒä»¬çš„å¸ƒå°”å€¼ç”Ÿæˆç›¸åº”çš„ java classes/interfacesã€‚</p>
<center><figure>
    <img loading="lazy" src="./target-language-file.webp" width="40%"/> <figcaption>
            The set of target language parser files
        </figcaption>
</figure>
</center>
<h3 id="traversal-patterns">Traversal Patterns<a hidden class="anchor" aria-hidden="true" href="#traversal-patterns">#</a></h3>
<p>è®©æˆ‘ä»¬æ·±å…¥äº†è§£ Listener vs Visitor traversal patterns ï¼Œå¹¶æ¢ç´¢ BooleanExprParserBaseListener class çš„åŠŸèƒ½ã€‚</p>
<p>ANTLR4 æä¾›äº†ä¸¤ç§éå†è¯­æ³•æ ‘çš„æ–¹æ³•ï¼š</p>
<ul>
<li>Listener(default)ï¼šlistener pattern æ˜¯ä¸€ç§äº‹ä»¶é©±åŠ¨æ–¹æ³•ï¼Œç”¨äºéå†æ¯ä¸ªè§£æå™¨è§„åˆ™ç±»å‹çš„è¯­æ³•æ ‘ã€‚ä¸ºæ¯ä¸ªè§£æå™¨è§„åˆ™æä¾›ä¸€ä¸ªåŒ…å«è¿›å…¥å’Œé€€å‡ºäº‹ä»¶æ–¹æ³•çš„æ¥å£ã€‚</li>
<li>Visitorï¼šè¿™ä½¿å¾—ç”¨æˆ·ä¹Ÿå¯ä»¥æ§åˆ¶è§£ææ ‘çš„éå†ã€‚è§£ææ ‘ä¸­çš„èŠ‚ç‚¹ï¼ˆè§£æå™¨è§„åˆ™ï¼‰å°†ä½¿ç”¨æä¾›çš„è®¿é—®æ–¹æ³•æ˜ç¡®éå†æˆ–è®¿é—®ã€‚</li>
</ul>
<p>æ ¹æ®ä½¿ç”¨ç¯å¢ƒçš„ä¸åŒï¼Œ<code>Listener</code> å’Œ <code>Visitor</code> æ¨¡å¼å„æœ‰åˆ©å¼Šã€‚</p>
<p><strong>ç›¸åŒç‚¹</strong></p>
<ul>
<li>ä¸¤ç§å®ç°æ–¹å¼çš„è§„åˆ™è¯­æ³•è§„åˆ™å®Œå…¨ç›¸åŒã€‚</li>
<li>ä¸¤ç§å®ç°æ–¹å¼çš„è§£æå™¨è¾“å‡ºä¹Ÿå®Œå…¨ç›¸åŒã€‚</li>
</ul>
<p><strong>ä¸åŒç‚¹</strong></p>
<ul>
<li>ç”±äº Listener pattern ä¾èµ–äºç”¨æˆ·æ¥å®šä¹‰å…¶éå†åºåˆ—ï¼Œå› æ­¤å®ƒä½¿ç”¨è°ƒç”¨å †æ ˆæ¥ç®¡ç†è¿™äº›éå†ï¼Œè¿™æ„å‘³ç€å¤§é‡è¾“å…¥å¯èƒ½ä¼šå¯¼è‡´æº¢å‡ºï¼Œè€Œåœ¨å·²åˆ†é…å †ä¸Šä½¿ç”¨å †æ ˆçš„ç›‘å¬å™¨åˆ™ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚</li>
</ul>
<p>Listener pattern å’Œ Visitor pattern çš„æœ€å¤§åŒºåˆ«åœ¨äºï¼Œç›‘å¬å™¨æ–¹æ³•æ˜¯ç”± ANTLR æä¾›çš„è¡Œèµ°å™¨å¯¹è±¡ç‹¬ç«‹è°ƒç”¨çš„ï¼Œè€Œè®¿é—®è€…æ–¹æ³•å¿…é¡»é€šè¿‡æ˜¾å¼è®¿é—®è°ƒç”¨æ¥è¡Œèµ°å…¶å­èŠ‚ç‚¹ã€‚å¦‚æœå¿˜è®°åœ¨èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸Šè°ƒç”¨è®¿é—®è€…æ–¹æ³•ï¼Œå°±æ„å‘³ç€è¿™äº›å­æ ‘ä¸ä¼šè¢«è®¿é—®ã€‚</p>
<p>è·³å›åˆ°æˆ‘ä»¬ç”Ÿæˆçš„ Listener</p>
<center><figure>
    <img loading="lazy" src="./listener-implementation.webp" width="100%"/> <figcaption>
            Listener Implementation
        </figcaption>
</figure>
</center>
<center><figure>
    <img loading="lazy" src="./listener-interface.webp" width="90%"/> <figcaption>
            Listener Interface
        </figcaption>
</figure>
</center>
<p>æ¥å£ç±»çš„å®ç°åªé’ˆå¯¹æŸäº›è¯­è¨€ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œimplementing class/module æ˜¯åœ¨ç›®æ ‡è¯­è¨€ä¸­å®šä¹‰çš„ã€‚è¯·æ³¨æ„ï¼Œinterface å’Œ implementation ä¸­éƒ½å®šä¹‰äº†æ ¹ï¼ˆæˆ–è§£æï¼‰èŠ‚ç‚¹ç›‘å¬å™¨æ–¹æ³•ã€‚æ‰€æœ‰æ–¹æ³•éƒ½æœ‰ç›¸åº”çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ç”±ç”Ÿæˆçš„è§£æå™¨ç±»æä¾›ã€‚è¿™æ ·å°±å¯ä»¥åœ¨éå†è§£ææ ‘æ—¶å¯¹è¯¥è§„åˆ™çš„ä¸Šä¸‹æ–‡è¿›è¡Œæ“ä½œã€‚</p>
<p>è®©æˆ‘ä»¬åˆ›å»ºä¸è§£æå™¨çš„ç¬¬ä¸€æ¬¡ interaction ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªç®€å•è¡¨è¾¾å¼çš„è¾“å‡ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//  Creates a lexer for the input string to generate the tokens 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">BooleanExprLexer</span> <span class="n">lexer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BooleanExprLexer</span><span class="o">(</span><span class="n">CharStreams</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">&#34;a eq b&#34;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl"><span class="c1">//  Stores the tokens generated by the lexer for the input string
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">CommonTokenStream</span> <span class="n">tokens</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CommonTokenStream</span><span class="o">(</span><span class="n">lexer</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="cm">/** 
</span></span></span><span class="line"><span class="cl"><span class="cm">    Creates a parser for generation of an Abstract Syntax tree from
</span></span></span><span class="line"><span class="cl"><span class="cm">    the stream of tokens to identify context 
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl"><span class="n">BooleanExprParser</span> <span class="n">parser</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BooleanExprParser</span><span class="o">(</span><span class="n">tokens</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="cm">/** 
</span></span></span><span class="line"><span class="cl"><span class="cm">    Creates a parse tree for generating the output string and
</span></span></span><span class="line"><span class="cl"><span class="cm">    manipulation of the parser and lexer tokens in the parse tree.
</span></span></span><span class="line"><span class="cl"><span class="cm">    The tree is create considering the parse rule in the grammar
</span></span></span><span class="line"><span class="cl"><span class="cm">    as the root node. This tree will be used later for listener.
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl"><span class="n">ParseTree</span> <span class="n">tree</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="na">parse</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="cm">/** 
</span></span></span><span class="line"><span class="cl"><span class="cm">    Convert the root node&#39;s output to it&#39;s rule context and use
</span></span></span><span class="line"><span class="cl"><span class="cm">    its attribute for printing the parser&#39;s output string.
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>   
</span></span><span class="line"><span class="cl"><span class="n">ParseContext</span> <span class="n">context</span> <span class="o">=</span> <span class="o">(</span><span class="n">ParseContext</span><span class="o">)</span> <span class="n">tree</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">str</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”±äºæˆ‘ä»¬å·²ç»åœ¨è¯­æ³•æ–‡ä»¶ä¸­æ·»åŠ äº†å°†åŸºæœ¬è¿ç®—ç¬¦è½¬æ¢ä¸º python å¯¹åº”è¿ç®—ç¬¦çš„æ“ä½œï¼Œå› æ­¤è§£æå™¨çš„è¾“å‡ºè¡¨è¾¾å¼å·²ç»æ˜¯è§£æå½¢å¼ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç®€å•çš„æ¯”è¾ƒè¡¨è¾¾å¼ï¼Œå¦‚ <code>a eq b</code>ï¼Œå°†è½¬æ¢ä¸º python è¡¨è¾¾å¼ <code>a == b</code> ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»è½¬æ¢äº†è¡¨è¾¾å¼ï¼Œå¯ä»¥ä½¿ç”¨ç›‘å¬å™¨æ–‡ä»¶ä¸­çš„æŸäº›æ›´æ”¹å°†å…¶è½¬æ¢ä¸ºå‡½æ•°ï¼Œå¹¶ä½¿ç”¨ template å°†è¯¥è¡¨è¾¾å¼æ›¿æ¢ä¸º placeholder function textï¼Œç”¨äºå¤šä¸ªç±»ä¼¼è¡¨è¾¾å¼ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="o">&lt;</span><span class="n">function_name</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">list_of_parameters</span><span class="o">&gt;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>parsed expression å¯ä»¥å¾ˆå®¹æ˜“åœ°æ›¿æ¢æˆä¸Šé¢çš„è¡¨è¾¾å¼ã€‚ä¸ç”¨æ‹…å¿ƒæ›¿æ¢éƒ¨åˆ†ï¼Œæˆ‘ä»¬ç¨åä¼šè®²åˆ°ã€‚ç°åœ¨ï¼Œä¸ºäº†ä»æ¯ä¸ªè¡¨è¾¾å¼ä¸­æå–å‚æ•°åˆ—è¡¨ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªåˆ—è¡¨ï¼Œä»¥ä¾¿åœ¨æ¯æ¬¡è§¦å‘æ ‡è¯†ç¬¦ç±»å‹ï¼ˆè§£æå™¨è§„åˆ™ï¼‰çš„è¾“å…¥äº‹ä»¶ç›‘å¬å™¨æ–¹æ³•æ—¶æ•è·æ¯ä¸ªæ ‡è¯†ç¬¦åç§°ã€‚</p>
<p>è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ä½œä¸ºå®ä¾‹å˜é‡ï¼Œåœ¨æ— å‚æ•°æ„é€ å‡½æ•°ä¸­å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼Œå®šä¹‰å…¶ getter æ–¹æ³•ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæ–¹æ³•æ¥æ¸…é™¤è¯¥åˆ—è¡¨ï¼Œä»¥ä¾¿æ¯æ¬¡è¡¨è¾¾å¼è§£æå’Œæ›¿æ¢å®Œæˆåéƒ½èƒ½æ¸…é™¤è¯¥åˆ—è¡¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BooleanExprParserBaseListener</span> <span class="kd">implements</span> <span class="n">BooleanExprParserListener</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">identifiersList</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">BooleanExprParserBaseListener</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">identifiersList</span><span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è®©æˆ‘ä»¬æŠŠä¸Šä¸‹æ–‡ getText æ–¹æ³•ä¸­çš„æ ‡è¯†ç¬¦åç§°æ·»åŠ åˆ°æˆ‘ä»¬ä¸º identifierExpression æ¯æ¬¡è§¦å‘è¾“å…¥äº‹ä»¶æ—¶åˆ›å»ºçš„åˆ—è¡¨ä¸­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">clearIdentifiers</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">identifiersList</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">getIdentifiersList</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="n">identifiersList</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">enterIdentifierExpression</span><span class="o">(</span><span class="n">BooleanExprParser</span><span class="o">.</span><span class="na">IdentifierExpressionContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">identifiersList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">ctx</span><span class="o">.</span><span class="na">getText</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ ‘ä¸Šéå†ï¼Œä»¥è§¦å‘è¿™äº›äº‹ä»¶ï¼Œä»è€Œæ”¶é›†è¡¨è¾¾å¼çš„æ‰€æœ‰å‚æ•°ã€‚ANTLR ä¸ºæ­¤æä¾›äº† ParseTreeWalker ç±»ã€‚é¡¾åæ€ä¹‰ï¼Œè¯¥ç±»å…è®¸åœ¨èµ°è¿‡è§£ææ ‘æ—¶åŒæ—¶ä½¿ç”¨ç›‘å¬å™¨å’Œè®¿é—®è€…å®ç°ç±»ã€‚è®©æˆ‘ä»¬ä½¿ç”¨ç›‘å¬å™¨æ¥éå†ä¸Šé¢å®šä¹‰çš„è§£ææ ‘ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">BooleanExprParserBaseListener</span> <span class="n">booleanExprBaseListener</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BooleanExprParserBaseListener</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">ParseTreeWalker</span> <span class="n">walker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ParseTreeWalker</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">walker</span><span class="o">.</span><span class="na">walk</span><span class="o">(</span><span class="n">booleanExprBaseListener</span><span class="o">,</span> <span class="n">tree</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">identifiers</span> <span class="o">=</span> <span class="n">booleanExprBaseListener</span><span class="o">.</span><span class="na">getIdentifiersList</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">booleanExprBaseListener</span><span class="o">.</span><span class="na">clearIdentifiers</span><span class="o">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯·æ³¨æ„ï¼Œè¿™é‡Œçš„ walk æ–¹æ³•ä½¿ç”¨ listener æ¥ç›‘å¬åœ¨è§£ææ ‘ä¸Šè¡Œèµ°æ—¶è§¦å‘çš„äº‹ä»¶ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ getter æ–¹æ³•è·å–è§£æè¡¨è¾¾å¼æ—¶è·å–çš„æ‰€æœ‰æ ‡è¯†ç¬¦åç§°åˆ—è¡¨ã€‚</p>
<h3 id="generate-code">Generate Code<a hidden class="anchor" aria-hidden="true" href="#generate-code">#</a></h3>
<center><figure>
    <img loading="lazy" src="./process.webp" width="35%"/> <figcaption>
            A gist of what the process looks like so far
        </figcaption>
</figure>
</center>
<p>å°†ä½¿ç”¨ä¸Šä¸€éƒ¨åˆ† generated expression æˆ– the output of intermediate code generationï¼Œå¹¶å°†å…¶æ›¿æ¢ä¸ºæ¨¡æ¿ç»„æ–‡ä»¶(templating engine ä½¿ç”¨çš„ä¸œè¥¿)ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°†æ¸²æŸ“çš„å‡½æ•°ä¸²å†™å…¥ python æ–‡ä»¶ã€‚</p>
<p>templating engine å°†ä»¥æˆ‘ä»¬çš„ç›®æ ‡è¯­è¨€ï¼ˆå³ Pythonï¼‰ç”Ÿæˆå®é™…å¯ç”¨çš„ä»£ç ï¼Œä»è€Œå®ç°ä»£ç ç”Ÿæˆçš„ç›®æ ‡ã€‚</p>
<p>æåˆ° templating engine ï¼Œä½ é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯ web frameworksã€‚å‡ ä¹æ‰€æœ‰çš„ç°ä»£ web frameworks éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç›®æ ‡ï¼Œé‚£å°±æ˜¯ä½¿ç”¨æ¨¡æ¿å¼•æ“ç”ŸæˆåŠ¨æ€çš„ã€ä¸šåŠ¡å°±ç»ªçš„ç½‘é¡µã€‚æ¯ä¸ªæ¨¡æ¿å¼•æ“çš„æœ€ç»ˆç›®æ ‡éƒ½æ˜¯å°†è·å–çš„è¾“å‡ºç»“æœæ›¿æ¢ä¸ºæ¨¡æ¿æ–‡ä»¶ï¼Œä»¥ä¾¿å³æ—¶æ˜¾ç¤ºç»™æœ€ç»ˆç”¨æˆ·ã€‚</p>
<p><a href="https://airtable.com/appKhTrTnhdxy4nsI/shrSXv4w4Lk8Qz20B/tblTb3BvfsOdcqC0M">templating engines compared side-by-side</a></p>
<h4 id="stringtemplate">StringTemplate<a hidden class="anchor" aria-hidden="true" href="#stringtemplate">#</a></h4>
<p>æˆ‘å°†ä½¿ç”¨ä¸€ä¸ªåä¸º <a href="https://www.stringtemplate.org/">StringTemplate</a> çš„ç±»ä¼¼æ¨¡æ¿å¼•æ“ã€‚å®ƒè¢«å¹¿æ³›ç”¨äºç½‘é¡µæ¨¡æ¿åŒ–ï¼Œä½†ä¹Ÿæ”¯æŒç”¨äºåˆ›å»ºç›®æ ‡è¯­è¨€ä»£ç æ–‡ä»¶çš„åŸºæœ¬æ¨¡æ¿æ“ä½œã€‚</p>
<ul>
<li><code>&lt;attribute&gt;</code> å¦‚æœå­˜åœ¨ï¼Œåˆ™æ±‚å€¼ä¸ºå±æ€§çš„å­—ç¬¦ä¸²å€¼ï¼Œå¦åˆ™ä¸ºç©ºå­—ç¬¦ä¸²ã€‚
<ul>
<li>ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨ Java ä¸­çš„ StringTemplate å¯¹è±¡æ—¶ï¼Œ<code>&lt;expression&gt;</code> å°†ä»¥ key expression è¡¨ç¤ºã€‚å› æ­¤ï¼Œå¦‚æœç”¨æˆ·åœ¨ expression é”®ä¸Šè¾“å…¥ä»»ä½•å€¼ï¼Œå®ƒå°±ä¼šåœ¨æ¨¡æ¿ä¸­è¢«ç§°ä¸º expression å±æ€§ã€‚</li>
</ul>
</li>
<li>å¯¹äºæ¨¡æ¿å†…çš„è‡ªå®šä¹‰æˆ–ç”¨æˆ·å®šä¹‰å¯¹è±¡ï¼Œè¯·ä½¿ç”¨ <code>&lt;attribute.property&gt;</code> ï¼Œå°†å±æ€§ä½œä¸ºå±æ€§æŸ¥æ‰¾ï¼Œç„¶åä½¿ç”¨ <code>getProperty()</code> æˆ– <code>isProperty()</code> æˆ– <code>hasProperty()</code> ç­‰è®¿é—®å™¨æ–¹æ³•ã€‚</li>
<li><code>&lt;attribute:t1(argument-list)ï¼š... :tN(argument-list)&gt;</code> è¿­ä»£åŒä¸€ä¸ªæ¨¡æ¿æ›¿æ¢çš„å¯¹è±¡åˆ—è¡¨ã€‚ä»å·¦åˆ°å³ä¾æ¬¡åº”ç”¨å¤šä¸ªæ¨¡æ¿ã€‚åœ¨å¤šå€¼å±æ€§ä¸Šåº”ç”¨æ¨¡æ¿çš„ç»“æœæ˜¯å¦ä¸€ä¸ªå¤šå€¼å±æ€§ã€‚æ•´ä¸ªè¡¨è¾¾å¼çš„æ±‚å€¼ç»“æœæ˜¯æ‰€æœ‰æ¨¡æ¿å…ƒç´ çš„è¿æ¥ç»“æœ</li>
<li><code>&lt;! comment !&gt;</code> StringTemplate ä¼šå¿½ç•¥å·²å®šä¹‰çš„æ³¨é‡Šã€‚</li>
<li>æ¨¡æ¿å®šä¹‰çœ‹èµ·æ¥å°±åƒå¸¦æœ‰æœªé”®å…¥å‚æ•°çš„å‡½æ•°å®šä¹‰ï¼š
<ul>
<li><code>templateName(arg1, arg2, ..., argN) ::= &quot;single-line template&quot;</code></li>
<li><code>templateName(arg1, arg2, ..., argN) ::= &lt;&lt;multi-line template&gt;&gt;</code></li>
<li><code>templateName(arg1, arg2, ..., argN) ::= &lt;%multi-line template that ignores indentation and newlines%&gt;</code></li>
</ul>
</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ Python <code>StringTemplateExample.stg</code> æ–‡ä»¶çš„ç¤ºä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;! StringTemplateExample.stg !&gt;
</span></span><span class="line"><span class="cl">templateExample(functions) ::= &lt;&lt;
</span></span><span class="line"><span class="cl">&lt;functions :{function |
</span></span><span class="line"><span class="cl">def &lt;function.function_name&gt;(&lt;function.params_list&gt;)
</span></span><span class="line"><span class="cl">return &lt;function.expression&gt;
</span></span><span class="line"><span class="cl">}&gt;
</span></span><span class="line"><span class="cl">&gt;&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯·æ³¨æ„ï¼Œä¸ºäº†ä¿æŒç¼©è¿›å’Œä¸¤è¡Œé—´éš™ï¼Œæˆ‘ä½¿ç”¨äº†ä¸Šé¢åŸºç¡€ç¤ºä¾‹ä¸­çš„ç¬¬äºŒç§æ¨¡æ¿ç±»å‹ï¼Œå› ä¸ºè¿™éœ€è¦éµå¾ª Python PEP8 çš„è§„åˆ™ï¼Œå³åœ¨ Python æ–¹æ³•ä¹‹é—´æœ‰ä¸¤è¡Œé—´éš™ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹è¯¥æ¨¡æ¿åœ¨ Java ä¸­çš„ç”¨æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">lines</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"> <span class="n">String</span> <span class="n">functionName</span> <span class="o">=</span> <span class="s">&#34;generated_function_%1$s&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"> <span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&gt;</span> <span class="n">functions</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl"> <span class="n">Map</span> <span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">function</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"> <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">lines</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">     <span class="n">BooleanExprLexer</span> <span class="n">lexer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BooleanExprLexer</span><span class="o">(</span><span class="n">CharStreams</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="n">lines</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">)));</span>
</span></span><span class="line"><span class="cl">     <span class="n">CommonTokenStream</span> <span class="n">tokens</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CommonTokenStream</span><span class="o">(</span><span class="n">lexer</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="n">BooleanExprParser</span> <span class="n">parser</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BooleanExprParser</span><span class="o">(</span><span class="n">tokens</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">     
</span></span><span class="line"><span class="cl">     <span class="n">ParseTree</span> <span class="n">tree</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="na">parse</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">     <span class="n">ParseContext</span> <span class="n">context</span> <span class="o">=</span> <span class="o">(</span><span class="n">ParseContext</span><span class="o">)</span> <span class="n">tree</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">     <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">str</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">     <span class="n">BooleanExprParserBaseListener</span> <span class="n">booleanExprBaseListener</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BooleanExprParserBaseListener</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">     <span class="n">ParseTreeWalker</span> <span class="n">walker</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ParseTreeWalker</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">     <span class="n">walker</span><span class="o">.</span><span class="na">walk</span><span class="o">(</span><span class="n">booleanExprBaseListener</span><span class="o">,</span> <span class="n">tree</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">     <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">identifiers</span> <span class="o">=</span> <span class="n">booleanExprBaseListener</span><span class="o">.</span><span class="na">getIdentifiersList</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">     <span class="n">function</span> <span class="o">=</span>  <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">     <span class="n">function</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;function_name&#34;</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">functionName</span><span class="o">,</span> <span class="n">i</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">     <span class="n">function</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;expression&#34;</span><span class="o">,</span> <span class="n">context</span><span class="o">.</span><span class="na">str</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">     <span class="n">function</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;params_list&#34;</span><span class="o">,</span> <span class="n">identifiers</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;, &#34;</span><span class="o">)));</span>
</span></span><span class="line"><span class="cl">     <span class="n">functions</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">function</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">     <span class="n">booleanExprBaseListener</span><span class="o">.</span><span class="na">clearIdentifiers</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">     
</span></span><span class="line"><span class="cl"> <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="n">stringTemplateExample</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;functions&#34;</span><span class="o">,</span> <span class="n">functions</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">stringTemplateExample</span><span class="o">.</span><span class="na">render</span><span class="o">());</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>INPUT</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">a gt b and c gt d
</span></span><span class="line"><span class="cl">a eq b
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Output</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">generated_function_0</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="n">a</span>  <span class="o">&gt;</span>  <span class="n">b</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">c</span>  <span class="o">&gt;</span>  <span class="n">d</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">generated_function_1</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="n">a</span>  <span class="o">==</span>  <span class="n">b</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="resources">Resources<a hidden class="anchor" aria-hidden="true" href="#resources">#</a></h2>
<ul>
<li>repo : <a href="https://github.com/WFUing/BooleanParser">https://github.com/WFUing/BooleanParser</a></li>
<li><a href="https://medium.com/analytics-vidhya/antlr-and-code-generation-a71ead442005">https://medium.com/analytics-vidhya/antlr-and-code-generation-a71ead442005</a></li>
<li><a href="https://medium.com/analytics-vidhya/python-from-expressions-the-antlr-series-part-1-3d7696c3a01c">https://medium.com/analytics-vidhya/python-from-expressions-the-antlr-series-part-1-3d7696c3a01c</a></li>
<li><a href="https://medium.com/analytics-vidhya/python-from-expressions-the-antlr-series-part-2-5436ef00bcf">https://medium.com/analytics-vidhya/python-from-expressions-the-antlr-series-part-2-5436ef00bcf</a></li>
<li><a href="https://medium.com/analytics-vidhya/python-from-expressions-the-antlr-series-part-3-7ac541a1d08c">https://medium.com/analytics-vidhya/python-from-expressions-the-antlr-series-part-3-7ac541a1d08c</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://WFUing.github.io/tags/code-generation/">code generation</a></li>
      <li><a href="https://WFUing.github.io/tags/dsl/">dsl</a></li>
      <li><a href="https://WFUing.github.io/tags/antlr/">antlr</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://WFUing.github.io/posts/tech/distributed/iot/state-machine/">
    <span class="title">Â« ä¸Šä¸€é¡µ</span>
    <br>
    <span>State Machine</span>
  </a>
  <a class="next" href="https://WFUing.github.io/posts/tech/language/programming-language-pool/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>Programming Language List</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Antlr Code Generation on twitter"
        href="https://twitter.com/intent/tweet/?text=Antlr%20Code%20Generation&amp;url=https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fantlr-code-generation%2f&amp;hashtags=codegeneration%2cdsl%2cantlr">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Antlr Code Generation on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fantlr-code-generation%2f&amp;title=Antlr%20Code%20Generation&amp;summary=Antlr%20Code%20Generation&amp;source=https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fantlr-code-generation%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Antlr Code Generation on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fantlr-code-generation%2f&title=Antlr%20Code%20Generation">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Antlr Code Generation on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fantlr-code-generation%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Antlr Code Generation on whatsapp"
        href="https://api.whatsapp.com/send?text=Antlr%20Code%20Generation%20-%20https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fantlr-code-generation%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Antlr Code Generation on telegram"
        href="https://telegram.me/share/url?text=Antlr%20Code%20Generation&amp;url=https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fantlr-code-generation%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Antlr Code Generation on ycombinator"
        href="https://news.ycombinator.com/submitlink?t=Antlr%20Code%20Generation&u=https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fantlr-code-generation%2f">
        <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
            xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
            <path
                d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
        </svg>
    </a>
</div>

  </footer>
<div>
    <div class="pagination__title">
        <span class="pagination__title-h" style="font-size: 20px;">ğŸ’¬è¯„è®º</span>
        <hr />
    </div>
    <div id="tcomment"></div>
    <script src="https://cdn.staticfile.org/twikoo/1.4.11/twikoo.all.min.js"></script>
    <script>
        twikoo.init({
            envId: "https://twikoo-api-three-gamma.vercel.app/",  
            el: "#tcomment",
            lang: 'zh-CN',
            region: 'ap-guangzhou',  
            path: window.TWIKOO_MAGIC_PATH||window.location.pathname,
        });
    </script>
</div>

</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://WFUing.github.io/">Waiting For You</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'å¤åˆ¶';

        function copyingDone() {
            copybutton.innerHTML = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
                copybutton.innerHTML = 'å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
