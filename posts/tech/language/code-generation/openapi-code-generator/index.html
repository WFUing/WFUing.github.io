<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Openapi Code Generator | Waiting For You</title>
<meta name="keywords" content="">
<meta name="description" content="OpenAPI Generator å¯æ ¹æ® OpenAPI yaml è§„èŒƒç”Ÿæˆä»£ç ï¼Œå¹¶æ”¯æŒå¤šç§è¯­è¨€ã€‚
å¦‚ä½•ä½¿ç”¨ OpenAPI æœ¬èŠ‚ä»‹ç»å¦‚ä½•åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ OpenAPI yaml è§„èŒƒï¼Œå¹¶ç”¨å®ƒä¸º Spring Boot åº”ç”¨ç¨‹åºç”ŸæˆæœåŠ¡å™¨ç«¯ä»£ç ã€‚
Create OpenAPI spec é¦–å…ˆè¦åšçš„æ˜¯ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºè®¾è®¡ OpenAPI è§„èŒƒã€‚æ‚¨å°†è®¾è®¡ä¸€ä¸ªå®¢æˆ· APIã€‚è¯¥ API å…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªå®¢æˆ·ï¼Œå¹¶æ ¹æ®å…¶ ID æ£€ç´¢è¯¥å®¢æˆ·ã€‚ç°å®ç”Ÿæ´»ä¸­çš„åº”ç”¨ç¨‹åºæ¥å£ä¼šæ›´åŠ å¤æ‚ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯ä¿æŒç®€å•ã€‚
ä½¿ç”¨ Swagger ç¼–è¾‘å™¨ æ˜¯è®¾è®¡ API çš„ç®€ä¾¿æ–¹æ³•ã€‚å®ƒä¼šç«‹å³åé¦ˆæ‚¨çš„è§„èŒƒæ˜¯å¦æœ‰é”™è¯¯ï¼Œå¹¶å³æ—¶ç”Ÿæˆ Swagger æ–‡æ¡£ã€‚
OpenAPI è§„èŒƒçš„ header åŒ…å«ä¸€äº›æœ‰å…³ API çš„å…ƒæ•°æ®ï¼Œå¦‚æ ‡é¢˜ã€ç‰ˆæœ¬ã€API è¿è¡Œçš„æœåŠ¡å™¨ç­‰ã€‚æ ‡ç­¾å¯ç”¨äºå¯¹èµ„æºè¿›è¡Œåˆ†ç»„ï¼Œä»è€Œä¸ºæ‚¨æä¾›æ›´å¤šæ¦‚è§ˆã€‚
1 2 3 4 5 6 7 8 9 openapi: &#34;3.0.2&#34; info: title: API Customer version: &#34;1.0&#34; servers: - url: https://localhost:8080 tags: - name: Customer description: Customer specific data. paths éƒ¨åˆ†åŒ…å«èµ„æºè§„èŒƒã€‚æ‚¨å®šä¹‰çš„ç¬¬ä¸€ä¸ªèµ„æºæ˜¯åˆ›å»º Customer çš„èµ„æºï¼Œå°†é€šè¿‡åŒ…å« JSON ä¸»ä½“çš„ POST æ–¹å¼åˆ›å»ºã€‚ç”Ÿæˆå™¨å°†ä½¿ç”¨ operationId ä¸ºè¯¥èµ„æºåˆ›å»ºæ–¹æ³•åç§°ã€‚ä¸ºç®€å•èµ·è§ï¼Œåªè€ƒè™‘æˆåŠŸå“åº”ã€‚æ¨¡å¼æŒ‡çš„æ˜¯ JSON ä¸»ä½“ï¼Œå°†åœ¨æœ¬èŠ‚åé¢ä»‹ç»ã€‚">
<meta name="author" content="WFUing">
<link rel="canonical" href="https://WFUing.github.io/posts/tech/language/code-generation/openapi-code-generator/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.187ead0206545aa4aedc8069469d6964301ece4665f36668ad87b34b6ca9ba38.css" integrity="sha256-GH6tAgZUWqSu3IBpRp1pZDAezkZl82ZorYezS2ypujg=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
        onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://WFUing.github.io/img/logo.gif">
<link rel="icon" type="image/png" sizes="16x16" href="https://WFUing.github.io/img/logo.gif">
<link rel="icon" type="image/png" sizes="32x32" href="https://WFUing.github.io/img/logo.gif">
<link rel="apple-touch-icon" href="https://WFUing.github.io/logo.gif">
<link rel="mask-icon" href="https://WFUing.github.io/logo.gif">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = ""; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<meta property="og:title" content="Openapi Code Generator" />
<meta property="og:description" content="OpenAPI Generator å¯æ ¹æ® OpenAPI yaml è§„èŒƒç”Ÿæˆä»£ç ï¼Œå¹¶æ”¯æŒå¤šç§è¯­è¨€ã€‚
å¦‚ä½•ä½¿ç”¨ OpenAPI æœ¬èŠ‚ä»‹ç»å¦‚ä½•åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ OpenAPI yaml è§„èŒƒï¼Œå¹¶ç”¨å®ƒä¸º Spring Boot åº”ç”¨ç¨‹åºç”ŸæˆæœåŠ¡å™¨ç«¯ä»£ç ã€‚
Create OpenAPI spec é¦–å…ˆè¦åšçš„æ˜¯ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºè®¾è®¡ OpenAPI è§„èŒƒã€‚æ‚¨å°†è®¾è®¡ä¸€ä¸ªå®¢æˆ· APIã€‚è¯¥ API å…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªå®¢æˆ·ï¼Œå¹¶æ ¹æ®å…¶ ID æ£€ç´¢è¯¥å®¢æˆ·ã€‚ç°å®ç”Ÿæ´»ä¸­çš„åº”ç”¨ç¨‹åºæ¥å£ä¼šæ›´åŠ å¤æ‚ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯ä¿æŒç®€å•ã€‚
ä½¿ç”¨ Swagger ç¼–è¾‘å™¨ æ˜¯è®¾è®¡ API çš„ç®€ä¾¿æ–¹æ³•ã€‚å®ƒä¼šç«‹å³åé¦ˆæ‚¨çš„è§„èŒƒæ˜¯å¦æœ‰é”™è¯¯ï¼Œå¹¶å³æ—¶ç”Ÿæˆ Swagger æ–‡æ¡£ã€‚
OpenAPI è§„èŒƒçš„ header åŒ…å«ä¸€äº›æœ‰å…³ API çš„å…ƒæ•°æ®ï¼Œå¦‚æ ‡é¢˜ã€ç‰ˆæœ¬ã€API è¿è¡Œçš„æœåŠ¡å™¨ç­‰ã€‚æ ‡ç­¾å¯ç”¨äºå¯¹èµ„æºè¿›è¡Œåˆ†ç»„ï¼Œä»è€Œä¸ºæ‚¨æä¾›æ›´å¤šæ¦‚è§ˆã€‚
1 2 3 4 5 6 7 8 9 openapi: &#34;3.0.2&#34; info: title: API Customer version: &#34;1.0&#34; servers: - url: https://localhost:8080 tags: - name: Customer description: Customer specific data. paths éƒ¨åˆ†åŒ…å«èµ„æºè§„èŒƒã€‚æ‚¨å®šä¹‰çš„ç¬¬ä¸€ä¸ªèµ„æºæ˜¯åˆ›å»º Customer çš„èµ„æºï¼Œå°†é€šè¿‡åŒ…å« JSON ä¸»ä½“çš„ POST æ–¹å¼åˆ›å»ºã€‚ç”Ÿæˆå™¨å°†ä½¿ç”¨ operationId ä¸ºè¯¥èµ„æºåˆ›å»ºæ–¹æ³•åç§°ã€‚ä¸ºç®€å•èµ·è§ï¼Œåªè€ƒè™‘æˆåŠŸå“åº”ã€‚æ¨¡å¼æŒ‡çš„æ˜¯ JSON ä¸»ä½“ï¼Œå°†åœ¨æœ¬èŠ‚åé¢ä»‹ç»ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://WFUing.github.io/posts/tech/language/code-generation/openapi-code-generator/" />
<meta property="og:image" content="https://WFUing.github.io/openapi-logo.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-13T16:46:21+08:00" />
<meta property="article:modified_time" content="2023-10-13T16:46:21+08:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://WFUing.github.io/openapi-logo.png" />
<meta name="twitter:title" content="Openapi Code Generator"/>
<meta name="twitter:description" content="OpenAPI Generator å¯æ ¹æ® OpenAPI yaml è§„èŒƒç”Ÿæˆä»£ç ï¼Œå¹¶æ”¯æŒå¤šç§è¯­è¨€ã€‚
å¦‚ä½•ä½¿ç”¨ OpenAPI æœ¬èŠ‚ä»‹ç»å¦‚ä½•åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ OpenAPI yaml è§„èŒƒï¼Œå¹¶ç”¨å®ƒä¸º Spring Boot åº”ç”¨ç¨‹åºç”ŸæˆæœåŠ¡å™¨ç«¯ä»£ç ã€‚
Create OpenAPI spec é¦–å…ˆè¦åšçš„æ˜¯ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºè®¾è®¡ OpenAPI è§„èŒƒã€‚æ‚¨å°†è®¾è®¡ä¸€ä¸ªå®¢æˆ· APIã€‚è¯¥ API å…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªå®¢æˆ·ï¼Œå¹¶æ ¹æ®å…¶ ID æ£€ç´¢è¯¥å®¢æˆ·ã€‚ç°å®ç”Ÿæ´»ä¸­çš„åº”ç”¨ç¨‹åºæ¥å£ä¼šæ›´åŠ å¤æ‚ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯ä¿æŒç®€å•ã€‚
ä½¿ç”¨ Swagger ç¼–è¾‘å™¨ æ˜¯è®¾è®¡ API çš„ç®€ä¾¿æ–¹æ³•ã€‚å®ƒä¼šç«‹å³åé¦ˆæ‚¨çš„è§„èŒƒæ˜¯å¦æœ‰é”™è¯¯ï¼Œå¹¶å³æ—¶ç”Ÿæˆ Swagger æ–‡æ¡£ã€‚
OpenAPI è§„èŒƒçš„ header åŒ…å«ä¸€äº›æœ‰å…³ API çš„å…ƒæ•°æ®ï¼Œå¦‚æ ‡é¢˜ã€ç‰ˆæœ¬ã€API è¿è¡Œçš„æœåŠ¡å™¨ç­‰ã€‚æ ‡ç­¾å¯ç”¨äºå¯¹èµ„æºè¿›è¡Œåˆ†ç»„ï¼Œä»è€Œä¸ºæ‚¨æä¾›æ›´å¤šæ¦‚è§ˆã€‚
1 2 3 4 5 6 7 8 9 openapi: &#34;3.0.2&#34; info: title: API Customer version: &#34;1.0&#34; servers: - url: https://localhost:8080 tags: - name: Customer description: Customer specific data. paths éƒ¨åˆ†åŒ…å«èµ„æºè§„èŒƒã€‚æ‚¨å®šä¹‰çš„ç¬¬ä¸€ä¸ªèµ„æºæ˜¯åˆ›å»º Customer çš„èµ„æºï¼Œå°†é€šè¿‡åŒ…å« JSON ä¸»ä½“çš„ POST æ–¹å¼åˆ›å»ºã€‚ç”Ÿæˆå™¨å°†ä½¿ç”¨ operationId ä¸ºè¯¥èµ„æºåˆ›å»ºæ–¹æ³•åç§°ã€‚ä¸ºç®€å•èµ·è§ï¼Œåªè€ƒè™‘æˆåŠŸå“åº”ã€‚æ¨¡å¼æŒ‡çš„æ˜¯ JSON ä¸»ä½“ï¼Œå°†åœ¨æœ¬èŠ‚åé¢ä»‹ç»ã€‚"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [

        {
          "@type": "ListItem",
          "position":  1 ,
          "name": "Posts",
          "item": "https://WFUing.github.io/posts/"
        },

        {
          "@type": "ListItem",
          "position":  2 ,
          "name": "ğŸ‘¨ğŸ»â€ğŸ’»æŠ€æœ¯",
          "item": "https://WFUing.github.io/posts/tech/"
        },

        {
          "@type": "ListItem",
          "position":  3 ,
          "name": "Language",
          "item": "https://WFUing.github.io/posts/tech/language/"
        },

        {
          "@type": "ListItem",
          "position":  4 ,
          "name": "Code Generation",
          "item": "https://WFUing.github.io/posts/tech/language/code-generation/"
        }, 
    {
      "@type": "ListItem",
      "position":  5 ,
      "name": "Openapi Code Generator",
      "item": "https://WFUing.github.io/posts/tech/language/code-generation/openapi-code-generator/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Openapi Code Generator",
  "name": "Openapi Code Generator",
  "description": "OpenAPI Generator å¯æ ¹æ® OpenAPI yaml è§„èŒƒç”Ÿæˆä»£ç ï¼Œå¹¶æ”¯æŒå¤šç§è¯­è¨€ã€‚\nå¦‚ä½•ä½¿ç”¨ OpenAPI æœ¬èŠ‚ä»‹ç»å¦‚ä½•åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ OpenAPI yaml è§„èŒƒï¼Œå¹¶ç”¨å®ƒä¸º Spring Boot åº”ç”¨ç¨‹åºç”ŸæˆæœåŠ¡å™¨ç«¯ä»£ç ã€‚\nCreate OpenAPI spec é¦–å…ˆè¦åšçš„æ˜¯ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºè®¾è®¡ OpenAPI è§„èŒƒã€‚æ‚¨å°†è®¾è®¡ä¸€ä¸ªå®¢æˆ· APIã€‚è¯¥ API å…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªå®¢æˆ·ï¼Œå¹¶æ ¹æ®å…¶ ID æ£€ç´¢è¯¥å®¢æˆ·ã€‚ç°å®ç”Ÿæ´»ä¸­çš„åº”ç”¨ç¨‹åºæ¥å£ä¼šæ›´åŠ å¤æ‚ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯ä¿æŒç®€å•ã€‚\nä½¿ç”¨ Swagger ç¼–è¾‘å™¨ æ˜¯è®¾è®¡ API çš„ç®€ä¾¿æ–¹æ³•ã€‚å®ƒä¼šç«‹å³åé¦ˆæ‚¨çš„è§„èŒƒæ˜¯å¦æœ‰é”™è¯¯ï¼Œå¹¶å³æ—¶ç”Ÿæˆ Swagger æ–‡æ¡£ã€‚\nOpenAPI è§„èŒƒçš„ header åŒ…å«ä¸€äº›æœ‰å…³ API çš„å…ƒæ•°æ®ï¼Œå¦‚æ ‡é¢˜ã€ç‰ˆæœ¬ã€API è¿è¡Œçš„æœåŠ¡å™¨ç­‰ã€‚æ ‡ç­¾å¯ç”¨äºå¯¹èµ„æºè¿›è¡Œåˆ†ç»„ï¼Œä»è€Œä¸ºæ‚¨æä¾›æ›´å¤šæ¦‚è§ˆã€‚\n1 2 3 4 5 6 7 8 9 openapi: \u0026#34;3.0.2\u0026#34; info: title: API Customer version: \u0026#34;1.0\u0026#34; servers: - url: https://localhost:8080 tags: - name: Customer description: Customer specific data. paths éƒ¨åˆ†åŒ…å«èµ„æºè§„èŒƒã€‚æ‚¨å®šä¹‰çš„ç¬¬ä¸€ä¸ªèµ„æºæ˜¯åˆ›å»º Customer çš„èµ„æºï¼Œå°†é€šè¿‡åŒ…å« JSON ä¸»ä½“çš„ POST æ–¹å¼åˆ›å»ºã€‚ç”Ÿæˆå™¨å°†ä½¿ç”¨ operationId ä¸ºè¯¥èµ„æºåˆ›å»ºæ–¹æ³•åç§°ã€‚ä¸ºç®€å•èµ·è§ï¼Œåªè€ƒè™‘æˆåŠŸå“åº”ã€‚æ¨¡å¼æŒ‡çš„æ˜¯ JSON ä¸»ä½“ï¼Œå°†åœ¨æœ¬èŠ‚åé¢ä»‹ç»ã€‚",
  "keywords": [
    
  ],
  "articleBody": "OpenAPI Generator å¯æ ¹æ® OpenAPI yaml è§„èŒƒç”Ÿæˆä»£ç ï¼Œå¹¶æ”¯æŒå¤šç§è¯­è¨€ã€‚\nå¦‚ä½•ä½¿ç”¨ OpenAPI æœ¬èŠ‚ä»‹ç»å¦‚ä½•åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ OpenAPI yaml è§„èŒƒï¼Œå¹¶ç”¨å®ƒä¸º Spring Boot åº”ç”¨ç¨‹åºç”ŸæˆæœåŠ¡å™¨ç«¯ä»£ç ã€‚\nCreate OpenAPI spec é¦–å…ˆè¦åšçš„æ˜¯ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºè®¾è®¡ OpenAPI è§„èŒƒã€‚æ‚¨å°†è®¾è®¡ä¸€ä¸ªå®¢æˆ· APIã€‚è¯¥ API å…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªå®¢æˆ·ï¼Œå¹¶æ ¹æ®å…¶ ID æ£€ç´¢è¯¥å®¢æˆ·ã€‚ç°å®ç”Ÿæ´»ä¸­çš„åº”ç”¨ç¨‹åºæ¥å£ä¼šæ›´åŠ å¤æ‚ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯ä¿æŒç®€å•ã€‚\nä½¿ç”¨ Swagger ç¼–è¾‘å™¨ æ˜¯è®¾è®¡ API çš„ç®€ä¾¿æ–¹æ³•ã€‚å®ƒä¼šç«‹å³åé¦ˆæ‚¨çš„è§„èŒƒæ˜¯å¦æœ‰é”™è¯¯ï¼Œå¹¶å³æ—¶ç”Ÿæˆ Swagger æ–‡æ¡£ã€‚\nOpenAPI è§„èŒƒçš„ header åŒ…å«ä¸€äº›æœ‰å…³ API çš„å…ƒæ•°æ®ï¼Œå¦‚æ ‡é¢˜ã€ç‰ˆæœ¬ã€API è¿è¡Œçš„æœåŠ¡å™¨ç­‰ã€‚æ ‡ç­¾å¯ç”¨äºå¯¹èµ„æºè¿›è¡Œåˆ†ç»„ï¼Œä»è€Œä¸ºæ‚¨æä¾›æ›´å¤šæ¦‚è§ˆã€‚\n1 2 3 4 5 6 7 8 9 openapi: \"3.0.2\" info: title: API Customer version: \"1.0\" servers: - url: https://localhost:8080 tags: - name: Customer description: Customer specific data. paths éƒ¨åˆ†åŒ…å«èµ„æºè§„èŒƒã€‚æ‚¨å®šä¹‰çš„ç¬¬ä¸€ä¸ªèµ„æºæ˜¯åˆ›å»º Customer çš„èµ„æºï¼Œå°†é€šè¿‡åŒ…å« JSON ä¸»ä½“çš„ POST æ–¹å¼åˆ›å»ºã€‚ç”Ÿæˆå™¨å°†ä½¿ç”¨ operationId ä¸ºè¯¥èµ„æºåˆ›å»ºæ–¹æ³•åç§°ã€‚ä¸ºç®€å•èµ·è§ï¼Œåªè€ƒè™‘æˆåŠŸå“åº”ã€‚æ¨¡å¼æŒ‡çš„æ˜¯ JSON ä¸»ä½“ï¼Œå°†åœ¨æœ¬èŠ‚åé¢ä»‹ç»ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 /customer: post: tags: - Customer summary: Create Customer operationId: createCustomer requestBody: content: application/json: schema: $ref: '#/components/schemas/Customer' responses: '200': description: OK content: 'application/json': schema: $ref: '#/components/schemas/CustomerFullData' ç¬¬äºŒä¸ªèµ„æºå…è®¸æ‚¨æ£€ç´¢å®¢æˆ·ã€‚è¯¥èµ„æºä¹Ÿéœ€è¦ä¸€ä¸ªåŒ…å«è¦æ£€ç´¢çš„ customerId çš„è·¯å¾„å‚æ•°ã€‚å¦‚æœ ID ä¸å­˜åœ¨ï¼Œå°†è¿”å› NOT FOUND çš„å“åº”ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 /customer/{customerId}: get: tags: - Customer summary: Retrieve Customer operationId: getCustomer parameters: - name: customerId in: path required: true schema: type: integer format: int64 responses: '200': description: OK content: 'application/json': schema: $ref: '#/components/schemas/CustomerFullData' '404': description: NOT FOUND æœ€åï¼Œåœ¨ç»„ä»¶éƒ¨åˆ†ï¼Œå®šä¹‰äº†ä½¿ç”¨çš„æ¨¡å¼ã€‚é™¤äº† ID ä¹‹å¤–ï¼ŒCustomer æ¨¡å¼å’Œ CustomerFullData æ¨¡å¼å…±äº«æ‰€æœ‰å±æ€§ã€‚ä¸ºäº†æé«˜å¯ç»´æŠ¤æ€§ï¼Œå¯ä»¥ä½¿ç”¨ allOf å±æ€§ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 components: schemas: Customer: type: object properties: firstName: type: string description: First name of the customer lastName: type: string description: Last name of the customer CustomerFullData: allOf: - $ref: '#/components/schemas/Customer' - type: object properties: customerId: type: integer description: The ID of the customer format: int64 description: Full data of the customer. è¯¥åº”ç”¨ç¨‹åºçš„ OpenAPI è§„èŒƒç°å·²å®Œæˆã€‚\nCreate Spring Boot Application è¦åˆ›å»º Spring Boot åº”ç”¨ç¨‹åºï¼Œè¯·è®¿é—® start.spring.ioï¼Œé€‰æ‹©æœ€æ–°ç¨³å®šçš„ Spring Boot ç‰ˆæœ¬ã€Java 17 å¹¶æ·»åŠ  Spring Web ä¾èµ–å…³ç³»ã€‚ä¸‹è½½ç”Ÿæˆçš„é¡¹ç›®å¹¶å°†å…¶æ‰“å¼€åˆ°æ‚¨å–œæ¬¢çš„é›†æˆå¼€å‘ç¯å¢ƒä¸­ã€‚åœ¨ src/main/resources ç›®å½•ä¸­æ·»åŠ  OpenAPI è§„èŒƒï¼Œåç§°ä¸º customer.ymlã€‚\næ‚¨å°†ä½¿ç”¨ Open API Generator Maven æ’ä»¶ï¼Œå› æ­¤è¯·å°†è¯¥æ’ä»¶æ·»åŠ åˆ° pom æ–‡ä»¶çš„æ„å»ºéƒ¨åˆ†ã€‚ç”±äºæ‚¨ä½¿ç”¨çš„æ˜¯ Spring Boot åº”ç”¨ç¨‹åºï¼Œå› æ­¤ä½¿ç”¨ spring ä½œä¸º generatorNameï¼Œå¹¶ä½¿ç”¨ inputSpec å±æ€§è®¾ç½® customer.yml æ–‡ä»¶çš„è·¯å¾„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 org.openapitools openapi-generator-maven-plugin 5.3.0 generate ${project.basedir}/src/main/resources/customer.yml spring æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆä»£ç ï¼š\n1 $ mvn clean compile ç¼–è¯‘å¤±è´¥ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š\n1 2 3 4 package io.swagger.annotations does not exist package io.swagger.annotations does not exist package org.openapitools.jackson.nullable does not exist cannot find symbol ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œéœ€è¦åœ¨ pom æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 io.swagger swagger-annotations 1.6.3 javax.validation validation-api 2.0.1.Final org.openapitools jackson-databind-nullable 0.2.1 å†æ¬¡è¿è¡Œç¼–è¯‘ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š\n1 2 3 4 5 6 7 8 9 package springfox.documentation.builders does not exist package springfox.documentation.builders does not exist package springfox.documentation.service does not exist package springfox.documentation.service does not exist package springfox.documentation.spi does not exist package springfox.documentation.spring.web.paths does not exist package springfox.documentation.spring.web.paths does not exist package springfox.documentation.spring.web.plugins does not exist package springfox.documentation.swagger2.annotations does not exist åœ¨ pom æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹å¯ä»¥è§£å†³è¿™äº›é”™è¯¯ï¼š\n1 2 3 4 5 6 7 8 9 10 io.springfox springfox-swagger-ui 2.6.0 io.springfox springfox-swagger2 2.6.0 ä»”ç»†çœ‹çœ‹ç”Ÿæˆäº†ä»€ä¹ˆã€‚å¯¼èˆªè‡³ target/generated-sources/open-api ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸­å¯ä»¥æ‰¾åˆ°ç”Ÿæˆçš„æ–‡ä»¶ã€‚ä»¥ä¸‹ç›®å½•åŒ…å«ç”Ÿæˆçš„æ–‡ä»¶ï¼š\nsrc/main/org/openapitools/api : æ˜¯ Spring æ§åˆ¶å™¨çš„ä¸€ä¸ªæ¥å£ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå®ç° src/main/org/openapitools/configuration : æ˜¯ Swagger æ–‡æ¡£çš„æ§åˆ¶å™¨ src/main/org/openapitools/model : åŸºäº API è§„èŒƒçš„ API æ¨¡å‹ src/main/org/openapitools : OpenAPI2SpringBoot æ˜¯ä¸€ä¸ª SpringBootApplication å½“ä½ æƒ³è¿è¡Œ Spring Boot åº”ç”¨ç¨‹åºæ—¶ï¼Œä½ ä¼šé‡åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸º Spring Boot æ— æ³•ç¡®å®šå®ƒéœ€è¦è¿è¡Œå“ªä¸ª SpringBootApplication :\n1 $ mvn spring-boot:run ç”±æ­¤äº§ç”Ÿçš„é”™è¯¯æ˜¯ :\n1 Unable to find a single main class from the following candidates [org.openapitools.OpenAPI2SpringBoot, com.mydeveloperplanet.myopenapiplanet.MyOpenApiPlanetApplication é»˜è®¤æƒ…å†µä¸‹ä¼šç”Ÿæˆå¤§é‡ä»£ç ï¼Œä¹Ÿè®¸æ¯”ä½ éœ€è¦çš„è¿˜è¦å¤šã€‚ä¸‹ä¸€æ®µå°†ä»‹ç»å¦‚ä½•è°ƒæ•´é…ç½®ã€‚\nConfigure OpenAPI plugin é™¤äº† OpenAPI æ’ä»¶çš„ Maven éƒ¨åˆ†è®°å½•çš„æ‰€æœ‰é€‰é¡¹å¤–ï¼Œè¿˜æœ‰è®¸å¤šé¢å¤–çš„é€‰é¡¹å¯åœ¨ OpenAPI æ’ä»¶é…ç½®éƒ¨åˆ†çš„ configOptions éƒ¨åˆ†è¿›è¡Œé…ç½®ã€‚å¯é€šè¿‡åœ¨é…ç½®éƒ¨åˆ†æ·»åŠ  configHelp å±æ€§æ¥æ˜¾ç¤ºå¯ç”¨é€‰é¡¹ã€‚\n1 2 3 4 5 ${project.basedir}/src/main/resources/customer.yml spring true åœ¨æ­¤åˆ—è¡¨ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ interfaceOnly å±æ€§ï¼Œå®ƒåªä¼šä¸ºæ§åˆ¶å™¨å’Œ API æ¨¡å‹ç”Ÿæˆæ¥å£ã€‚\n1 2 3 4 5 6 ... true æ­¤æ—¶ï¼Œè¿˜å¯ä»¥åˆ é™¤ä¹‹å‰æ·»åŠ çš„ Springfox ä¾èµ–é¡¹ã€‚è¿™äº›éƒ½ä¸å†éœ€è¦äº†ã€‚\nä»ç”Ÿæˆçš„ä»£ç ä¸­è¿˜å¯ä»¥çœ‹åˆ°ï¼Œä»£ç æ˜¯åœ¨ org.openapitools åŒ…ä¸­ç”Ÿæˆçš„ã€‚ä½ å¯èƒ½å¸Œæœ›è¿™æ˜¯ä½ è‡ªå·±çš„è½¯ä»¶åŒ…åç§°ï¼Œè¿™å¯ä»¥é€šè¿‡ä¸€äº›åŸºæœ¬å±æ€§æ¥é…ç½®ã€‚é€šè¿‡ packageName å±æ€§ï¼Œæ‚¨å¯ä»¥è®¾ç½®é»˜è®¤çš„è½¯ä»¶åŒ…åç§°ã€‚ä¸è¿‡ï¼Œè¿˜å¿…é¡»è®¾ç½® apiPackage å’Œ modelPackage å±æ€§ï¼Œå¦åˆ™è¿™äº›å±æ€§ä»å°†åœ¨ org.openapitools åŒ…ä¸­ç”Ÿæˆã€‚åœ¨é…ç½®éƒ¨åˆ†æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚\n1 2 3 4 5 6 7 .... com.mydeveloperplanet.myopenapiplanet com.mydeveloperplanet.myopenapiplanet.api com.mydeveloperplanet.myopenapiplanet.model .... ç”Ÿæˆçš„æ§åˆ¶å™¨ç•Œé¢å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 @javax.annotation.Generated(value = \"org.openapitools.codegen.languages.SpringCodegen\", date = \"2022-01-15T12:51:43.809971036+01:00[Europe/Amsterdam]\") @Validated @Api(value = \"customer\", description = \"the customer API\") public interface CustomerApi { default Optional\u003cNativeWebRequest\u003e getRequest() { return Optional.empty(); } /** * POST /customer : Create Customer * * @param customer (optional) * @return OK (status code 200) */ @ApiOperation(value = \"Create Customer\", nickname = \"createCustomer\", notes = \"\", response = CustomerFullData.class, tags={ \"Customer\", }) @ApiResponses(value = { @ApiResponse(code = 200, message = \"OK\", response = CustomerFullData.class) }) @RequestMapping( method = RequestMethod.POST, value = \"/customer\", produces = { \"application/json\" }, consumes = { \"application/json\" } ) default ResponseEntity\u003cCustomerFullData\u003e createCustomer(@ApiParam(value = \"\") @Valid @RequestBody(required = false) Customer customer) { getRequest().ifPresent(request -\u003e { for (MediaType mediaType: MediaType.parseMediaTypes(request.getHeader(\"Accept\"))) { if (mediaType.isCompatibleWith(MediaType.valueOf(\"application/json\"))) { String exampleString = \"null\"; ApiUtil.setExampleResponse(request, \"application/json\", exampleString); break; } } }); return new ResponseEntity\u003c\u003e(HttpStatus.NOT_IMPLEMENTED); } ... Use Generated Code åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œé¦–å…ˆè¦åœ¨åŒ… domain ä¸­åˆ›å»ºä¸€ä¸ª Customer ç±»ã€‚\n1 2 3 4 5 6 public class Customer { private Long customerId; private String firstName; private String lastName; // Getters and setters } åˆ›å»ºä¸€ä¸ª CustomerControllerï¼Œå®ç°ç”Ÿæˆçš„ CustomerApi æ¥å£ã€‚\nåˆ›å»º Customer æ˜¯ä¸€ç§åŸºæœ¬çš„å®ç°æ–¹å¼ï¼Œæ‚¨å¯ä»¥å°† Customer æ·»åŠ åˆ° HashMap ä¸­ï¼šè®¡ç®—ç´¢å¼•æ˜¯é”®ï¼ŒåŸŸå®¢æˆ·å¯¹è±¡æ˜¯å€¼ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ‚¨å°†æŠŠå®¢æˆ·ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚\næ£€ç´¢å®¢æˆ·æ—¶ï¼Œé¦–å…ˆè¦æ£€æŸ¥æ‰€è¯·æ±‚çš„ ID æ˜¯å¦å­˜åœ¨äº HashMap ä¸­ã€‚æ‰¾åˆ° ID åï¼ŒCustomer åŸŸå¯¹è±¡å°†è½¬æ¢ä¸º Customer API æ¨¡å‹å¯¹è±¡å¹¶è¿”å›ç»™è¯·æ±‚è€…ã€‚å¦‚æœæœªæ‰¾åˆ° IDï¼Œåˆ™ä¼šè¿”å› NOT FOUND å“åº”ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 @RestController public class CustomerController implements CustomerApi { private final HashMap\u003cLong, com.mydeveloperplanet.myopenapiplanet.domain.Customer\u003e customers = new HashMap\u003c\u003e(); private Long index = 0L; @Override public ResponseEntity\u003cCustomerFullData\u003e createCustomer(Customer apiCustomer) { com.mydeveloperplanet.myopenapiplanet.domain.Customer customer = new com.mydeveloperplanet.myopenapiplanet.domain.Customer(); customer.setCustomerId(index); customer.setFirstName(apiCustomer.getFirstName()); customer.setLastName(apiCustomer.getLastName()); customers.put(index, customer); index++; return ResponseEntity.ok(domainToApi(customer)); } @Override public ResponseEntity\u003cCustomerFullData\u003e getCustomer(Long customerId) { if (customers.containsKey(customerId)) { return ResponseEntity.ok(domainToApi(customers.get(customerId))); } else { return new ResponseEntity\u003c\u003e(HttpStatus.NOT_FOUND); } } private CustomerFullData domainToApi(com.mydeveloperplanet.myopenapiplanet.domain.Customer customer) { CustomerFullData cfd = new CustomerFullData(); cfd.setCustomerId(customer.getCustomerId()); cfd.setFirstName(customer.getFirstName()); cfd.setLastName(customer.getLastName()); return cfd; } } è¿è¡Œ Spring Boot åº”ç”¨ç¨‹åºï¼š\n1 $ mvn spring-boot:run æ·»åŠ  Consumerï¼Œå¹¶æŸ¥æ‰¾\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 $ curl -i -X 'POST' \\ \u003e 'http://localhost:8080/customer' \\ \u003e -H 'accept: application/json' \\ \u003e -H 'Content-Type: application/json' \\ \u003e -d '{ \u003e \"firstName\": \"Foo\", \u003e \"lastName\": \"Bar\" \u003e }' HTTP/1.1 200 Content-Type: application/json Transfer-Encoding: chunked Date: Sat, 15 Jan 2022 11:42:47 GMT {\"firstName\":\"Foo\",\"lastName\":\"Bar\",\"customerId\":0} $ curl -i -X 'POST' \\ \u003e 'http://localhost:8080/customer' \\ \u003e -H 'accept: application/json' \\ \u003e -H 'Content-Type: application/json' \\ \u003e -d '{ \u003e \"firstName\": \"John\", \u003e \"lastName\": \"Doe\" \u003e }' HTTP/1.1 200 Content-Type: application/json Transfer-Encoding: chunked Date: Sat, 15 Jan 2022 11:43:11 GMT {\"firstName\":\"John\",\"lastName\":\"Doe\",\"customerId\":1} $ curl -i http://localhost:8080/customer/1 HTTP/1.1 200 Content-Type: application/json Transfer-Encoding: chunked Date: Sat, 15 Jan 2022 11:45:21 GMT {\"firstName\":\"John\",\"lastName\":\"Doe\",\"customerId\":1} $ curl -i http://localhost:8080/customer/2 HTTP/1.1 404 Content-Length: 0 Date: Sat, 15 Jan 2022 11:46:18 GMT Add OpenAPI Documentation https://springdoc.org/ 1 2 3 4 5 org.springdoc springdoc-openapi-ui 1.5.12 åœ¨æµè§ˆå™¨ä¸­å¯¼èˆªè‡³ http://localhost:8080/swagger-ui.htmlï¼Œå³å¯æ˜¾ç¤º OpenAPI æ–‡æ¡£ï¼Œå¹¶å¯åœ¨æ­¤å¤„ä¸‹è½½ OpenAPI yaml è§„èŒƒã€‚\nå½“ä½ ä»”ç»†æŸ¥çœ‹æ–‡æ¡£æ—¶ï¼Œä¼šå‘ç°å®ƒä¸ Swagger ç¼–è¾‘å™¨ä¸­æ˜¾ç¤ºçš„æ–‡æ¡£æœ‰æ‰€ä¸åŒã€‚springdoc ä¾èµ–é¡¹é»˜è®¤ä¼šä»æºä»£ç ç”Ÿæˆæ–‡æ¡£ï¼Œå¹¶ä½¿ç”¨ç”Ÿæˆçš„æ–‡æ¡£ã€‚å¦‚ä½•é…ç½® springdoc ä»¥ä½¿ç”¨ customer.yml æ–‡ä»¶ï¼Ÿ\né¦–å…ˆï¼Œæ‚¨éœ€è¦å°† customer.yml æ–‡ä»¶ç§»è‡³ src/main/resources/static/customer.yml ç›®å½•ã€‚è¿™ä¹Ÿæ„å‘³ç€ä½ éœ€è¦æ›´æ”¹ pom ä¸­çš„ Open API ç”Ÿæˆå™¨é…ç½®ã€‚\n1 2 3 4 ${project.basedir}/src/main/resources/static/customer.yml ... åœ¨ application.properties æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å±æ€§\n1 springdoc.swagger-ui.url=/customer.yml URL ç°åœ¨æ˜¾ç¤ºçš„æ˜¯æ‚¨åˆ›å»ºçš„ customer.yml ä¸­å®šä¹‰çš„ API\nResources å®˜æ–¹ OpenAPI Specification v3.1.0 repo Blogs Open API Server Implementation Using OpenAPI Generator Generate Server Code Using OpenAPI Generator ",
  "wordCount" : "1199",
  "inLanguage": "zh",
  "image":"https://WFUing.github.io/openapi-logo.png","datePublished": "2023-10-13T16:46:21+08:00",
  "dateModified": "2023-10-13T16:46:21+08:00",
  "author":{
    "@type": "Person",
    "name": "WFUing"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://WFUing.github.io/posts/tech/language/code-generation/openapi-code-generator/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Waiting For You",
    "logo": {
      "@type": "ImageObject",
      "url": "https://WFUing.github.io/img/logo.gif"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    (function () {
        let  arr,reg = new RegExp("(^| )"+"change-themes"+"=([^;]*)(;|$)");
        if(arr = document.cookie.match(reg)) {
        } else {
            if (new Date().getHours() >= 19 || new Date().getHours() < 6) {
                document.body.classList.add('dark');
                localStorage.setItem("pref-theme", 'dark');
            } else {
                document.body.classList.remove('dark');
                localStorage.setItem("pref-theme", 'light');
            }
        }
    })()

    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://WFUing.github.io/" accesskey="h" title="Waiting For You (Alt + H)">Waiting For You</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://WFUing.github.io/search" title="ğŸ” (Alt &#43; /)" accesskey=/>
                <span>ğŸ”</span>
                </a>
            </li>
            <li>
                <a href="https://WFUing.github.io/" title="HOME">
                <span>HOME</span>
                </a>
            </li>
            <li>
                <a href="https://WFUing.github.io/posts" title="BLOGS">
                <span>BLOGS</span>
                </a>
            </li>
            <li>
                <a href="https://WFUing.github.io/archives" title="ARCHIVE">
                <span>ARCHIVE</span>
                </a>
            </li>
            <li>
                <a href="https://WFUing.github.io/tags" title="TAGS">
                <span>TAGS</span>
                </a>
            </li>
            <li>
                <a href="https://WFUing.github.io/about" title="ğŸ™‹ğŸ»â€â™‚ï¸">
                <span>ğŸ™‹ğŸ»â€â™‚ï¸</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main page">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://WFUing.github.io/">ğŸ  ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://WFUing.github.io/posts/">Posts</a>&nbsp;Â»&nbsp;<a href="https://WFUing.github.io/posts/tech/">ğŸ‘¨ğŸ»â€ğŸ’»æŠ€æœ¯</a>&nbsp;Â»&nbsp;<a href="https://WFUing.github.io/posts/tech/language/">Language</a>&nbsp;Â»&nbsp;<a href="https://WFUing.github.io/posts/tech/language/code-generation/">Code Generation</a></div>
    <h1 class="post-title">
      Openapi Code Generator
    </h1>
    <div class="post-meta">

<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }

    .parent-post-meta {
        display: flex;
        flex-wrap: wrap;
        opacity: 0.8;
    }
</style>

<span class="parent-post-meta">
    <span id="post_meta_style_1">
        <span class="fa fa-calendar-check-o"></span>
        <span>2023-10-13
            &nbsp;&nbsp;
        </span>
    </span>
    
    
    
    
    
    
    
    <span id="post_meta_style_3">
        <span class="fa fa-file-word-o"></span>
        <span>1199å­—
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_4">
        <span class="fa fa-clock-o"></span>
        <span>6åˆ†é’Ÿ
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_5">
        <span class="fa fa-user-o"></span>
        <span>WFUing
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_6">
        <span class="fa fa-tags" style="opacity: 0.8"></span>
        <span>
        </span>
    </span>
</span>

        &nbsp;|&nbsp;æ ‡ç­¾: &nbsp;

        
        
        
        
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <span id="busuanzi_container_page_pv">
            &nbsp;| è®¿é—®: <span id="busuanzi_value_page_pv"></span>
        </span>

</div>
  </header> 
<figure class="entry-cover1">
    <img style="zoom:;" loading="lazy" srcset="https://WFUing.github.io/posts/tech/language/code-generation/openapi-code-generator/openapi-logo.png 200w"
    sizes="(min-width: 768px) 720px, 100vw" src="https://WFUing.github.io/posts/tech/language/code-generation/openapi-code-generator/openapi-logo.png" alt=""
    width="200" height="200">
    
</figure><aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">ç›®å½•</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8-openapi" aria-label="å¦‚ä½•ä½¿ç”¨ OpenAPI">å¦‚ä½•ä½¿ç”¨ OpenAPI</a><ul>
                        
                <li>
                    <a href="#create-openapi-spec" aria-label="Create OpenAPI spec">Create OpenAPI spec</a></li>
                <li>
                    <a href="#create-spring-boot-application" aria-label="Create Spring Boot Application">Create Spring Boot Application</a></li>
                <li>
                    <a href="#configure-openapi-plugin" aria-label="Configure OpenAPI plugin">Configure OpenAPI plugin</a></li>
                <li>
                    <a href="#use-generated-code" aria-label="Use Generated Code">Use Generated Code</a></li>
                <li>
                    <a href="#add-openapi-documentation" aria-label="Add OpenAPI Documentation">Add OpenAPI Documentation</a></li></ul>
                </li>
                <li>
                    <a href="#resources" aria-label="Resources">Resources</a>
                </li>
            </ul>
        </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
        document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        if (elements) {
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                    (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                    return element;
                }
            }) || activeElement

            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                if (element === activeElement){
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
                } else {
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
                }
            })
        }
    }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>
  <div class="post-content"><p><a href="https://github.com/OpenAPITools/openapi-generator">OpenAPI Generator</a> å¯æ ¹æ® OpenAPI yaml è§„èŒƒç”Ÿæˆä»£ç ï¼Œå¹¶æ”¯æŒå¤šç§è¯­è¨€ã€‚</p>
<h2 id="å¦‚ä½•ä½¿ç”¨-openapi">å¦‚ä½•ä½¿ç”¨ OpenAPI<a hidden class="anchor" aria-hidden="true" href="#å¦‚ä½•ä½¿ç”¨-openapi">#</a></h2>
<p>æœ¬èŠ‚ä»‹ç»å¦‚ä½•åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ OpenAPI yaml è§„èŒƒï¼Œå¹¶ç”¨å®ƒä¸º Spring Boot åº”ç”¨ç¨‹åºç”ŸæˆæœåŠ¡å™¨ç«¯ä»£ç ã€‚</p>
<h3 id="create-openapi-spec">Create OpenAPI spec<a hidden class="anchor" aria-hidden="true" href="#create-openapi-spec">#</a></h3>
<p>é¦–å…ˆè¦åšçš„æ˜¯ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºè®¾è®¡ OpenAPI è§„èŒƒã€‚æ‚¨å°†è®¾è®¡ä¸€ä¸ªå®¢æˆ· APIã€‚è¯¥ API å…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªå®¢æˆ·ï¼Œå¹¶æ ¹æ®å…¶ ID æ£€ç´¢è¯¥å®¢æˆ·ã€‚ç°å®ç”Ÿæ´»ä¸­çš„åº”ç”¨ç¨‹åºæ¥å£ä¼šæ›´åŠ å¤æ‚ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯ä¿æŒç®€å•ã€‚</p>
<p>ä½¿ç”¨ <a href="https://editor.swagger.io/">Swagger ç¼–è¾‘å™¨</a> æ˜¯è®¾è®¡ API çš„ç®€ä¾¿æ–¹æ³•ã€‚å®ƒä¼šç«‹å³åé¦ˆæ‚¨çš„è§„èŒƒæ˜¯å¦æœ‰é”™è¯¯ï¼Œå¹¶å³æ—¶ç”Ÿæˆ Swagger æ–‡æ¡£ã€‚</p>
<center>

<div class="box" style="max-width:100%">
<figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
<div class="img">
<img itemprop="thumbnail" src="/openapi-swagger-editor.png" />
</div>
<a href="/openapi-swagger-editor.png" target="_blank" itemprop="contentUrl"></a>
</figure>
</div>
</center>
<p>OpenAPI è§„èŒƒçš„ header åŒ…å«ä¸€äº›æœ‰å…³ API çš„å…ƒæ•°æ®ï¼Œå¦‚æ ‡é¢˜ã€ç‰ˆæœ¬ã€API è¿è¡Œçš„æœåŠ¡å™¨ç­‰ã€‚æ ‡ç­¾å¯ç”¨äºå¯¹èµ„æºè¿›è¡Œåˆ†ç»„ï¼Œä»è€Œä¸ºæ‚¨æä¾›æ›´å¤šæ¦‚è§ˆã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">openapi</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;3.0.2&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">info</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">API Customer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;1.0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">servers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">https://localhost:8080</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">tags</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Customer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">Customer specific data.</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>paths éƒ¨åˆ†åŒ…å«èµ„æºè§„èŒƒã€‚æ‚¨å®šä¹‰çš„ç¬¬ä¸€ä¸ªèµ„æºæ˜¯åˆ›å»º Customer çš„èµ„æºï¼Œå°†é€šè¿‡åŒ…å« JSON ä¸»ä½“çš„ POST æ–¹å¼åˆ›å»ºã€‚ç”Ÿæˆå™¨å°†ä½¿ç”¨ <code>operationId</code> ä¸ºè¯¥èµ„æºåˆ›å»ºæ–¹æ³•åç§°ã€‚ä¸ºç®€å•èµ·è§ï¼Œåªè€ƒè™‘æˆåŠŸå“åº”ã€‚æ¨¡å¼æŒ‡çš„æ˜¯ JSON ä¸»ä½“ï¼Œå°†åœ¨æœ¬èŠ‚åé¢ä»‹ç»ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">/customer</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">post</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">tags</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">Customer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="l">Create Customer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">operationId</span><span class="p">:</span><span class="w"> </span><span class="l">createCustomer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">requestBody</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">content</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">application/json</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">schema</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;#/components/schemas/Customer&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">responses</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">&#39;200&#39;</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">OK</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">content</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">&#39;application/json&#39;</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">schema</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;#/components/schemas/CustomerFullData&#39;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äºŒä¸ªèµ„æºå…è®¸æ‚¨æ£€ç´¢å®¢æˆ·ã€‚è¯¥èµ„æºä¹Ÿéœ€è¦ä¸€ä¸ªåŒ…å«è¦æ£€ç´¢çš„ customerId çš„è·¯å¾„å‚æ•°ã€‚å¦‚æœ ID ä¸å­˜åœ¨ï¼Œå°†è¿”å› <code>NOT FOUND</code>  çš„å“åº”ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="l">/customer/{customerId}:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">get</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">tags</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">Customer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="l">Retrieve Customer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">operationId</span><span class="p">:</span><span class="w"> </span><span class="l">getCustomer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">parameters</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">customerId</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">in</span><span class="p">:</span><span class="w"> </span><span class="l">path</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">schema</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">integer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l">int64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">responses</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">&#39;200&#39;</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">OK</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">content</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">&#39;application/json&#39;</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">schema</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;#/components/schemas/CustomerFullData&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">&#39;404&#39;</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">NOT FOUND</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æœ€åï¼Œåœ¨ç»„ä»¶éƒ¨åˆ†ï¼Œå®šä¹‰äº†ä½¿ç”¨çš„æ¨¡å¼ã€‚é™¤äº† ID ä¹‹å¤–ï¼ŒCustomer æ¨¡å¼å’Œ CustomerFullData æ¨¡å¼å…±äº«æ‰€æœ‰å±æ€§ã€‚ä¸ºäº†æé«˜å¯ç»´æŠ¤æ€§ï¼Œå¯ä»¥ä½¿ç”¨ allOf å±æ€§ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">components</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">schemas</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">Customer</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">object</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">properties</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">firstName</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">First name of the customer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">lastName</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">Last name of the customer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">CustomerFullData</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">allOf</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;#/components/schemas/Customer&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">object</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">properties</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">customerId</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">integer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">The ID of the customer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l">int64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">Full data of the customer.</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¯¥åº”ç”¨ç¨‹åºçš„ OpenAPI è§„èŒƒç°å·²å®Œæˆã€‚</p>
<h3 id="create-spring-boot-application">Create Spring Boot Application<a hidden class="anchor" aria-hidden="true" href="#create-spring-boot-application">#</a></h3>
<p>è¦åˆ›å»º Spring Boot åº”ç”¨ç¨‹åºï¼Œè¯·è®¿é—® start.spring.ioï¼Œé€‰æ‹©æœ€æ–°ç¨³å®šçš„ Spring Boot ç‰ˆæœ¬ã€Java 17 å¹¶æ·»åŠ  Spring Web ä¾èµ–å…³ç³»ã€‚ä¸‹è½½ç”Ÿæˆçš„é¡¹ç›®å¹¶å°†å…¶æ‰“å¼€åˆ°æ‚¨å–œæ¬¢çš„é›†æˆå¼€å‘ç¯å¢ƒä¸­ã€‚åœ¨ src/main/resources ç›®å½•ä¸­æ·»åŠ  OpenAPI è§„èŒƒï¼Œåç§°ä¸º customer.ymlã€‚</p>
<p>æ‚¨å°†ä½¿ç”¨ <a href="https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin">Open API Generator Maven</a> æ’ä»¶ï¼Œå› æ­¤è¯·å°†è¯¥æ’ä»¶æ·»åŠ åˆ° pom æ–‡ä»¶çš„æ„å»ºéƒ¨åˆ†ã€‚ç”±äºæ‚¨ä½¿ç”¨çš„æ˜¯ Spring Boot åº”ç”¨ç¨‹åºï¼Œå› æ­¤ä½¿ç”¨ spring ä½œä¸º generatorNameï¼Œå¹¶ä½¿ç”¨ inputSpec å±æ€§è®¾ç½® customer.yml æ–‡ä»¶çš„è·¯å¾„ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>org.openapitools<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>openapi-generator-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>5.3.0<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;executions&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;execution&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;goals&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;goal&gt;</span>generate<span class="nt">&lt;/goal&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/goals&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;inputSpec&gt;</span>${project.basedir}/src/main/resources/customer.yml<span class="nt">&lt;/inputSpec&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;generatorName&gt;</span>spring<span class="nt">&lt;/generatorName&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/configuration&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/execution&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/executions&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/plugin&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ mvn clean compile
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¼–è¯‘å¤±è´¥ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">package io.swagger.annotations does not exist
</span></span><span class="line"><span class="cl">package io.swagger.annotations does not exist
</span></span><span class="line"><span class="cl">package org.openapitools.jackson.nullable does not exist
</span></span><span class="line"><span class="cl">cannot find symbol
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œéœ€è¦åœ¨ pom æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>io.swagger<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>swagger-annotations<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>1.6.3<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>javax.validation<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>validation-api<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>2.0.1.Final<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>org.openapitools<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>jackson-databind-nullable<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>0.2.1<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†æ¬¡è¿è¡Œç¼–è¯‘ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">package springfox.documentation.builders does not exist
</span></span><span class="line"><span class="cl">package springfox.documentation.builders does not exist
</span></span><span class="line"><span class="cl">package springfox.documentation.service does not exist
</span></span><span class="line"><span class="cl">package springfox.documentation.service does not exist
</span></span><span class="line"><span class="cl">package springfox.documentation.spi does not exist
</span></span><span class="line"><span class="cl">package springfox.documentation.spring.web.paths does not exist
</span></span><span class="line"><span class="cl">package springfox.documentation.spring.web.paths does not exist
</span></span><span class="line"><span class="cl">package springfox.documentation.spring.web.plugins does not exist
</span></span><span class="line"><span class="cl">package springfox.documentation.swagger2.annotations does not exist
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ pom æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹å¯ä»¥è§£å†³è¿™äº›é”™è¯¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>io.springfox<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>springfox-swagger-ui<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>2.6.0<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>io.springfox<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>springfox-swagger2<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>2.6.0<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»”ç»†çœ‹çœ‹ç”Ÿæˆäº†ä»€ä¹ˆã€‚å¯¼èˆªè‡³ <code>target/generated-sources/open-api</code> ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸­å¯ä»¥æ‰¾åˆ°ç”Ÿæˆçš„æ–‡ä»¶ã€‚ä»¥ä¸‹ç›®å½•åŒ…å«ç”Ÿæˆçš„æ–‡ä»¶ï¼š</p>
<ul>
<li><code>src/main/org/openapitools/api</code> : æ˜¯ Spring æ§åˆ¶å™¨çš„ä¸€ä¸ªæ¥å£ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå®ç°</li>
<li><code>src/main/org/openapitools/configuration</code> : æ˜¯ Swagger æ–‡æ¡£çš„æ§åˆ¶å™¨</li>
<li><code>src/main/org/openapitools/model</code> : åŸºäº API è§„èŒƒçš„ API æ¨¡å‹</li>
<li><code>src/main/org/openapitools</code> : <code>OpenAPI2SpringBoot</code> æ˜¯ä¸€ä¸ª SpringBootApplication</li>
</ul>
<p>å½“ä½ æƒ³è¿è¡Œ Spring Boot åº”ç”¨ç¨‹åºæ—¶ï¼Œä½ ä¼šé‡åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸º Spring Boot æ— æ³•ç¡®å®šå®ƒéœ€è¦è¿è¡Œå“ªä¸ª SpringBootApplication :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ mvn spring-boot:run
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”±æ­¤äº§ç”Ÿçš„é”™è¯¯æ˜¯ :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Unable to find a single main class from the following candidates <span class="o">[</span>org.openapitools.OpenAPI2SpringBoot, com.mydeveloperplanet.myopenapiplanet.MyOpenApiPlanetApplication
</span></span></code></pre></td></tr></table>
</div>
</div><p>é»˜è®¤æƒ…å†µä¸‹ä¼šç”Ÿæˆå¤§é‡ä»£ç ï¼Œä¹Ÿè®¸æ¯”ä½ éœ€è¦çš„è¿˜è¦å¤šã€‚ä¸‹ä¸€æ®µå°†ä»‹ç»å¦‚ä½•è°ƒæ•´é…ç½®ã€‚</p>
<h3 id="configure-openapi-plugin">Configure OpenAPI plugin<a hidden class="anchor" aria-hidden="true" href="#configure-openapi-plugin">#</a></h3>
<p>é™¤äº† OpenAPI æ’ä»¶çš„ Maven éƒ¨åˆ†è®°å½•çš„æ‰€æœ‰é€‰é¡¹å¤–ï¼Œè¿˜æœ‰è®¸å¤šé¢å¤–çš„é€‰é¡¹å¯åœ¨ OpenAPI æ’ä»¶é…ç½®éƒ¨åˆ†çš„ configOptions éƒ¨åˆ†è¿›è¡Œé…ç½®ã€‚å¯é€šè¿‡åœ¨é…ç½®éƒ¨åˆ†æ·»åŠ  configHelp å±æ€§æ¥æ˜¾ç¤ºå¯ç”¨é€‰é¡¹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;inputSpec&gt;</span>${project.basedir}/src/main/resources/customer.yml<span class="nt">&lt;/inputSpec&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;generatorName&gt;</span>spring<span class="nt">&lt;/generatorName&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;configHelp&gt;</span>true<span class="nt">&lt;/configHelp&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨æ­¤åˆ—è¡¨ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ interfaceOnly å±æ€§ï¼Œå®ƒåªä¼šä¸ºæ§åˆ¶å™¨å’Œ API æ¨¡å‹ç”Ÿæˆæ¥å£ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">    ...
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;configOptions&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;interfaceOnly&gt;</span>true<span class="nt">&lt;/interfaceOnly&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/configOptions&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­¤æ—¶ï¼Œè¿˜å¯ä»¥åˆ é™¤ä¹‹å‰æ·»åŠ çš„ Springfox ä¾èµ–é¡¹ã€‚è¿™äº›éƒ½ä¸å†éœ€è¦äº†ã€‚</p>
<p>ä»ç”Ÿæˆçš„ä»£ç ä¸­è¿˜å¯ä»¥çœ‹åˆ°ï¼Œä»£ç æ˜¯åœ¨ org.openapitools åŒ…ä¸­ç”Ÿæˆçš„ã€‚ä½ å¯èƒ½å¸Œæœ›è¿™æ˜¯ä½ è‡ªå·±çš„è½¯ä»¶åŒ…åç§°ï¼Œè¿™å¯ä»¥é€šè¿‡ä¸€äº›åŸºæœ¬å±æ€§æ¥é…ç½®ã€‚é€šè¿‡ packageName å±æ€§ï¼Œæ‚¨å¯ä»¥è®¾ç½®é»˜è®¤çš„è½¯ä»¶åŒ…åç§°ã€‚ä¸è¿‡ï¼Œè¿˜å¿…é¡»è®¾ç½® apiPackage å’Œ modelPackage å±æ€§ï¼Œå¦åˆ™è¿™äº›å±æ€§ä»å°†åœ¨ org.openapitools åŒ…ä¸­ç”Ÿæˆã€‚åœ¨é…ç½®éƒ¨åˆ†æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">    ....
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;packageName&gt;</span>com.mydeveloperplanet.myopenapiplanet<span class="nt">&lt;/packageName&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;apiPackage&gt;</span>com.mydeveloperplanet.myopenapiplanet.api<span class="nt">&lt;/apiPackage&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;modelPackage&gt;</span>com.mydeveloperplanet.myopenapiplanet.model<span class="nt">&lt;/modelPackage&gt;</span>
</span></span><span class="line"><span class="cl">    ....
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”Ÿæˆçš„æ§åˆ¶å™¨ç•Œé¢å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@javax.annotation.Generated</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;org.openapitools.codegen.languages.SpringCodegen&#34;</span><span class="o">,</span> <span class="n">date</span> <span class="o">=</span> <span class="s">&#34;2022-01-15T12:51:43.809971036+01:00[Europe/Amsterdam]&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Validated</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Api</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;customer&#34;</span><span class="o">,</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&#34;the customer API&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CustomerApi</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="k">default</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">NativeWebRequest</span><span class="o">&gt;</span> <span class="nf">getRequest</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">empty</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * POST /customer : Create Customer
</span></span></span><span class="line"><span class="cl"><span class="cm">     *
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param customer  (optional)
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @return OK (status code 200)
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@ApiOperation</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;Create Customer&#34;</span><span class="o">,</span> <span class="n">nickname</span> <span class="o">=</span> <span class="s">&#34;createCustomer&#34;</span><span class="o">,</span> <span class="n">notes</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="o">,</span> <span class="n">response</span> <span class="o">=</span> <span class="n">CustomerFullData</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">tags</span><span class="o">={</span> <span class="s">&#34;Customer&#34;</span><span class="o">,</span> <span class="o">})</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@ApiResponses</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">        <span class="nd">@ApiResponse</span><span class="o">(</span><span class="n">code</span> <span class="o">=</span> <span class="mi">200</span><span class="o">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&#34;OK&#34;</span><span class="o">,</span> <span class="n">response</span> <span class="o">=</span> <span class="n">CustomerFullData</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">})</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@RequestMapping</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">value</span> <span class="o">=</span> <span class="s">&#34;/customer&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">produces</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&#34;application/json&#34;</span> <span class="o">},</span>
</span></span><span class="line"><span class="cl">        <span class="n">consumes</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&#34;application/json&#34;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">default</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">CustomerFullData</span><span class="o">&gt;</span> <span class="nf">createCustomer</span><span class="o">(</span><span class="nd">@ApiParam</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="o">)</span> <span class="nd">@Valid</span> <span class="nd">@RequestBody</span><span class="o">(</span><span class="n">required</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span> <span class="n">Customer</span> <span class="n">customer</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">getRequest</span><span class="o">().</span><span class="na">ifPresent</span><span class="o">(</span><span class="n">request</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="o">(</span><span class="n">MediaType</span> <span class="n">mediaType</span><span class="o">:</span> <span class="n">MediaType</span><span class="o">.</span><span class="na">parseMediaTypes</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getHeader</span><span class="o">(</span><span class="s">&#34;Accept&#34;</span><span class="o">)))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">(</span><span class="n">mediaType</span><span class="o">.</span><span class="na">isCompatibleWith</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="s">&#34;application/json&#34;</span><span class="o">)))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">String</span> <span class="n">exampleString</span> <span class="o">=</span> <span class="s">&#34;null&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">ApiUtil</span><span class="o">.</span><span class="na">setExampleResponse</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="s">&#34;application/json&#34;</span><span class="o">,</span> <span class="n">exampleString</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">});</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">NOT_IMPLEMENTED</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="use-generated-code">Use Generated Code<a hidden class="anchor" aria-hidden="true" href="#use-generated-code">#</a></h3>
<p>åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œé¦–å…ˆè¦åœ¨åŒ… domain ä¸­åˆ›å»ºä¸€ä¸ª Customer ç±»ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Customer</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">Long</span> <span class="n">customerId</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Getters and setters
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ›å»ºä¸€ä¸ª CustomerControllerï¼Œå®ç°ç”Ÿæˆçš„ CustomerApi æ¥å£ã€‚</p>
<p>åˆ›å»º Customer æ˜¯ä¸€ç§åŸºæœ¬çš„å®ç°æ–¹å¼ï¼Œæ‚¨å¯ä»¥å°† Customer æ·»åŠ åˆ° HashMap ä¸­ï¼šè®¡ç®—ç´¢å¼•æ˜¯é”®ï¼ŒåŸŸå®¢æˆ·å¯¹è±¡æ˜¯å€¼ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ‚¨å°†æŠŠå®¢æˆ·ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚</p>
<p>æ£€ç´¢å®¢æˆ·æ—¶ï¼Œé¦–å…ˆè¦æ£€æŸ¥æ‰€è¯·æ±‚çš„ ID æ˜¯å¦å­˜åœ¨äº HashMap ä¸­ã€‚æ‰¾åˆ° ID åï¼ŒCustomer åŸŸå¯¹è±¡å°†è½¬æ¢ä¸º Customer API æ¨¡å‹å¯¹è±¡å¹¶è¿”å›ç»™è¯·æ±‚è€…ã€‚å¦‚æœæœªæ‰¾åˆ° IDï¼Œåˆ™ä¼šè¿”å› NOT FOUND å“åº”ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@RestController</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomerController</span> <span class="kd">implements</span> <span class="n">CustomerApi</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">final</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">,</span> <span class="n">com</span><span class="o">.</span><span class="na">mydeveloperplanet</span><span class="o">.</span><span class="na">myopenapiplanet</span><span class="o">.</span><span class="na">domain</span><span class="o">.</span><span class="na">Customer</span><span class="o">&gt;</span> <span class="n">customers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">Long</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">CustomerFullData</span><span class="o">&gt;</span> <span class="nf">createCustomer</span><span class="o">(</span><span class="n">Customer</span> <span class="n">apiCustomer</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">com</span><span class="o">.</span><span class="na">mydeveloperplanet</span><span class="o">.</span><span class="na">myopenapiplanet</span><span class="o">.</span><span class="na">domain</span><span class="o">.</span><span class="na">Customer</span> <span class="n">customer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">com</span><span class="o">.</span><span class="na">mydeveloperplanet</span><span class="o">.</span><span class="na">myopenapiplanet</span><span class="o">.</span><span class="na">domain</span><span class="o">.</span><span class="na">Customer</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">customer</span><span class="o">.</span><span class="na">setCustomerId</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">customer</span><span class="o">.</span><span class="na">setFirstName</span><span class="o">(</span><span class="n">apiCustomer</span><span class="o">.</span><span class="na">getFirstName</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">customer</span><span class="o">.</span><span class="na">setLastName</span><span class="o">(</span><span class="n">apiCustomer</span><span class="o">.</span><span class="na">getLastName</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">        <span class="n">customers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">index</span><span class="o">,</span> <span class="n">customer</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">index</span><span class="o">++;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ResponseEntity</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="n">domainToApi</span><span class="o">(</span><span class="n">customer</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">CustomerFullData</span><span class="o">&gt;</span> <span class="nf">getCustomer</span><span class="o">(</span><span class="n">Long</span> <span class="n">customerId</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">customers</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">customerId</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">ResponseEntity</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="n">domainToApi</span><span class="o">(</span><span class="n">customers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">customerId</span><span class="o">)));</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="k">new</span> <span class="n">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">NOT_FOUND</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">CustomerFullData</span> <span class="nf">domainToApi</span><span class="o">(</span><span class="n">com</span><span class="o">.</span><span class="na">mydeveloperplanet</span><span class="o">.</span><span class="na">myopenapiplanet</span><span class="o">.</span><span class="na">domain</span><span class="o">.</span><span class="na">Customer</span> <span class="n">customer</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">CustomerFullData</span> <span class="n">cfd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomerFullData</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">cfd</span><span class="o">.</span><span class="na">setCustomerId</span><span class="o">(</span><span class="n">customer</span><span class="o">.</span><span class="na">getCustomerId</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">cfd</span><span class="o">.</span><span class="na">setFirstName</span><span class="o">(</span><span class="n">customer</span><span class="o">.</span><span class="na">getFirstName</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">cfd</span><span class="o">.</span><span class="na">setLastName</span><span class="o">(</span><span class="n">customer</span><span class="o">.</span><span class="na">getLastName</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">cfd</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œ Spring Boot åº”ç”¨ç¨‹åºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ mvn spring-boot:run
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ·»åŠ  Consumerï¼Œå¹¶æŸ¥æ‰¾</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ curl -i -X <span class="s1">&#39;POST&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;   <span class="s1">&#39;http://localhost:8080/customer&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;   -H <span class="s1">&#39;accept: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;   -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;   -d <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">&gt;   &#34;firstName&#34;: &#34;Foo&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">&gt;   &#34;lastName&#34;: &#34;Bar&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">&gt; }&#39;</span>
</span></span><span class="line"><span class="cl">HTTP/1.1 <span class="m">200</span> 
</span></span><span class="line"><span class="cl">Content-Type: application/json
</span></span><span class="line"><span class="cl">Transfer-Encoding: chunked
</span></span><span class="line"><span class="cl">Date: Sat, <span class="m">15</span> Jan <span class="m">2022</span> 11:42:47 GMT
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;firstName&#34;</span>:<span class="s2">&#34;Foo&#34;</span>,<span class="s2">&#34;lastName&#34;</span>:<span class="s2">&#34;Bar&#34;</span>,<span class="s2">&#34;customerId&#34;</span>:0<span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ curl -i -X <span class="s1">&#39;POST&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;   <span class="s1">&#39;http://localhost:8080/customer&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;   -H <span class="s1">&#39;accept: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;   -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>&gt;   -d <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">&gt;   &#34;firstName&#34;: &#34;John&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">&gt;   &#34;lastName&#34;: &#34;Doe&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">&gt; }&#39;</span>
</span></span><span class="line"><span class="cl">HTTP/1.1 <span class="m">200</span> 
</span></span><span class="line"><span class="cl">Content-Type: application/json
</span></span><span class="line"><span class="cl">Transfer-Encoding: chunked
</span></span><span class="line"><span class="cl">Date: Sat, <span class="m">15</span> Jan <span class="m">2022</span> 11:43:11 GMT
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;firstName&#34;</span>:<span class="s2">&#34;John&#34;</span>,<span class="s2">&#34;lastName&#34;</span>:<span class="s2">&#34;Doe&#34;</span>,<span class="s2">&#34;customerId&#34;</span>:1<span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ curl -i http://localhost:8080/customer/1
</span></span><span class="line"><span class="cl">HTTP/1.1 <span class="m">200</span> 
</span></span><span class="line"><span class="cl">Content-Type: application/json
</span></span><span class="line"><span class="cl">Transfer-Encoding: chunked
</span></span><span class="line"><span class="cl">Date: Sat, <span class="m">15</span> Jan <span class="m">2022</span> 11:45:21 GMT
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;firstName&#34;</span>:<span class="s2">&#34;John&#34;</span>,<span class="s2">&#34;lastName&#34;</span>:<span class="s2">&#34;Doe&#34;</span>,<span class="s2">&#34;customerId&#34;</span>:1<span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ curl -i http://localhost:8080/customer/2
</span></span><span class="line"><span class="cl">HTTP/1.1 <span class="m">404</span> 
</span></span><span class="line"><span class="cl">Content-Length: <span class="m">0</span>
</span></span><span class="line"><span class="cl">Date: Sat, <span class="m">15</span> Jan <span class="m">2022</span> 11:46:18 GMT
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="add-openapi-documentation">Add OpenAPI Documentation<a hidden class="anchor" aria-hidden="true" href="#add-openapi-documentation">#</a></h3>
<ul>
<li><a href="https://springdoc.org/">https://springdoc.org/</a></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>org.springdoc<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>springdoc-openapi-ui<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>1.5.12<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨æµè§ˆå™¨ä¸­å¯¼èˆªè‡³ http://localhost:8080/swagger-ui.htmlï¼Œå³å¯æ˜¾ç¤º OpenAPI æ–‡æ¡£ï¼Œå¹¶å¯åœ¨æ­¤å¤„ä¸‹è½½ OpenAPI yaml è§„èŒƒã€‚</p>
<center>

<div class="box" style="max-width:100%">
<figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
<div class="img">
<img itemprop="thumbnail" src="/openapi-swagger-doc.png" />
</div>
<a href="/openapi-swagger-doc.png" target="_blank" itemprop="contentUrl"></a>
</figure>
</div>
</center>
<p>å½“ä½ ä»”ç»†æŸ¥çœ‹æ–‡æ¡£æ—¶ï¼Œä¼šå‘ç°å®ƒä¸ Swagger ç¼–è¾‘å™¨ä¸­æ˜¾ç¤ºçš„æ–‡æ¡£æœ‰æ‰€ä¸åŒã€‚springdoc ä¾èµ–é¡¹é»˜è®¤ä¼šä»æºä»£ç ç”Ÿæˆæ–‡æ¡£ï¼Œå¹¶ä½¿ç”¨ç”Ÿæˆçš„æ–‡æ¡£ã€‚å¦‚ä½•é…ç½® springdoc ä»¥ä½¿ç”¨ customer.yml æ–‡ä»¶ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œæ‚¨éœ€è¦å°† customer.yml æ–‡ä»¶ç§»è‡³ src/main/resources/static/customer.yml ç›®å½•ã€‚è¿™ä¹Ÿæ„å‘³ç€ä½ éœ€è¦æ›´æ”¹ pom ä¸­çš„ Open API ç”Ÿæˆå™¨é…ç½®ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;inputSpec&gt;</span>${project.basedir}/src/main/resources/static/customer.yml<span class="nt">&lt;/inputSpec&gt;</span>
</span></span><span class="line"><span class="cl">    ...
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ application.properties æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å±æ€§</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-properties" data-lang="properties"><span class="line"><span class="cl"><span class="na">springdoc.swagger-ui.url</span><span class="o">=</span><span class="s">/customer.yml</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>URL ç°åœ¨æ˜¾ç¤ºçš„æ˜¯æ‚¨åˆ›å»ºçš„ customer.yml ä¸­å®šä¹‰çš„ API</p>
<h2 id="resources">Resources<a hidden class="anchor" aria-hidden="true" href="#resources">#</a></h2>
<ul>
<li>å®˜æ–¹
<ul>
<li><a href="https://spec.openapis.org/oas/v3.1.0">OpenAPI Specification v3.1.0</a></li>
<li><a href="https://github.com/OpenAPITools/openapi-generator">repo</a></li>
</ul>
</li>
<li>Blogs
<ul>
<li><a href="https://www.baeldung.com/java-openapi-generator-server">Open API Server Implementation Using OpenAPI Generator</a></li>
<li><a href="https://mydeveloperplanet.com/2022/02/08/generate-server-code-using-openapi-generator/">Generate Server Code Using OpenAPI Generator</a></li>
</ul>
</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://WFUing.github.io/posts/tech/language/code-generation/asyncapi-code-generator/">
    <span class="title">Â« ä¸Šä¸€é¡µ</span>
    <br>
    <span>A Modeling Editor and Code Generator for message-driven architectures with AsyncAPI</span>
  </a>
  <a class="next" href="https://WFUing.github.io/posts/tech/network/restful/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>Restful API Tutorial</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Openapi Code Generator on twitter"
       href="https://twitter.com/intent/tweet/?text=Openapi%20Code%20Generator&amp;url=https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fopenapi-code-generator%2f&amp;hashtags=">
    <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Openapi Code Generator on linkedin"
       href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fopenapi-code-generator%2f&amp;title=Openapi%20Code%20Generator&amp;summary=Openapi%20Code%20Generator&amp;source=https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fopenapi-code-generator%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Openapi Code Generator on reddit"
       href="https://reddit.com/submit?url=https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fopenapi-code-generator%2f&title=Openapi%20Code%20Generator">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Openapi Code Generator on facebook"
       href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fopenapi-code-generator%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Openapi Code Generator on whatsapp"
       href="https://api.whatsapp.com/send?text=Openapi%20Code%20Generator%20-%20https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fopenapi-code-generator%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Openapi Code Generator on telegram"
       href="https://telegram.me/share/url?text=Openapi%20Code%20Generator&amp;url=https%3a%2f%2fWFUing.github.io%2fposts%2ftech%2flanguage%2fcode-generation%2fopenapi-code-generator%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>

<style>
    .comments_details summary::marker {
        font-size: 20px;
        content: 'ğŸ‘‰å±•å¼€è¯„è®º';
        color: var(--content);
    }
    .comments_details[open] summary::marker{
        font-size: 20px;
        content: 'ğŸ‘‡å…³é—­è¯„è®º';
        color: var(--content);
    }
</style>


<div>
    <details class="comments_details">
        <summary style="cursor: pointer; margin: 50px 0 20px 0;width: 130px;">
            <span style="font-size: 20px;color: var(--content);">...</span>
        </summary>
        <div id="tcomment"></div>
    </details>
    <script src="https://cdn.staticfile.org/twikoo/1.4.11/twikoo.all.min.js">
    </script>
    <script>
        twikoo.init({
            envId:  null ,
        el: "#tcomment",
            lang: 'zh-CN',
            region:  null ,
        path: window.TWIKOO_MAGIC_PATH||window.location.pathname,
        })
    </script>
</div>
</article>
</main>

<footer class="footer">
    <span>&copy; 2023 <a href="https://WFUing.github.io/">Waiting For You</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z"/>
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
    document.addEventListener('scroll', function (e) {
        const readProgress = document.getElementById("read_progress");
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
    })
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
</script>
<script>
    let mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        (function() {
            document.cookie = "change-themes" + "="+ escape ("false");
        })()

        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    });
</script>

<script>
    document.body.addEventListener('copy', function (e) {
        if (window.getSelection().toString() && window.getSelection().toString().length > 50) {
            let clipboardData = e.clipboardData || window.clipboardData;
            if (clipboardData) {
                e.preventDefault();
                let htmlData = window.getSelection().toString() +
                    '\r\n\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r\n' +
                    'ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œ'+"Waiting For You"+'ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚' +
                '\r\nåŸæ–‡é“¾æ¥ï¼š' + location.href;
                let textData = window.getSelection().toString() +
                    '\r\n\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r\n' +
                    'ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œ'+"Waiting For You"+'ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚' +
                '\r\nåŸæ–‡é“¾æ¥ï¼š' + location.href;
                clipboardData.setData('text/html', htmlData);
                clipboardData.setData('text/plain', textData);
            }
        }
    });
</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;
        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'å¤åˆ¶';

        function copyingDone() {
            copybutton.innerText = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
                copybutton.innerText = 'å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                let text = codeblock.textContent +
                    '\r\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r\n' +
                    'ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œ'+"Waiting For You"+'ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚' +
                '\r\nåŸæ–‡é“¾æ¥ï¼š' + location.href;
                navigator.clipboard.writeText(text);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {}
            selection.removeRange(range);
        });

        let language = codeblock.className.replaceAll("language-", "")
        let macTool = document.createElement("div")
        let macTool1 = document.createElement("div")
        let macTool2 = document.createElement("div")
        let macTool3 = document.createElement("div")
        let languageType = document.createElement("div")
        languageType.innerText = language
        macTool.setAttribute('class', 'mac-tool')
        macTool1.setAttribute('class', 'mac bb1')
        macTool2.setAttribute('class', 'mac bb2')
        macTool3.setAttribute('class', 'mac bb3')
        languageType.setAttribute('class', 'language-type')
        macTool.appendChild(macTool1)
        macTool.appendChild(macTool2)
        macTool.appendChild(macTool3)
        macTool.appendChild(languageType)

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
            container.appendChild(macTool)
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        }
    });
</script>
</body>

</html>
