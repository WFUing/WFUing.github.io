<!DOCTYPE html>
<html lang="en" dir="ltr" class="scroll-smooth" data-default-appearance="light"
  data-auto-appearance="true"><head>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Hadoop-HDFS &middot; WFUing&#39;s Blog</title>
  <meta name="title" content="Hadoop-HDFS &middot; WFUing&#39;s Blog" />
  
  <meta name="description" content="HDFS是Hadoop Distribute File System 的简称，意为Hadoop分布式文件系统。是Hadoop核心组件之一，作为最底层的分布式存储服务而存在。分布式文件系统解决的问题就是大数据存储。它们是横跨在多台计算机上的存储系统。分布式文件系统在大数据时代有着广泛的应用前景，它们为存储和处理超大规模数据提供所需的扩展能力。" />
  <meta name="keywords" content="hadoop, hdfs, " />
  
  
  <link rel="canonical" href="https://WFUing.github.io/posts/architecture/distributed/hadoop/hdfs/" />
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.fc89c3235e8aa9100f2ce90dd986f02fc2460e94acd5d39daa975d7b5f2576aa17189b93a5b350f879d24557e15a66ff555dcd36bfeda109a1c5df5eefbd497a.css"
    integrity="sha512-/InDI16KqRAPLOkN2YbwL8JGDpSs1dOdqpdde18ldqoXGJuTpbNQ&#43;HnSRVfhWmb/VV3NNr/toQmhxd9e771Jeg==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.1271c22a557a15f10b5d38d2c87e49503604cfeffebadc1e7c267934e4b9f3ba1b74d81371219f9681dab2141482fc4ed2a8b462b179f0ef43a5f76d0575e85b.js"
    integrity="sha512-EnHCKlV6FfELXTjSyH5JUDYEz&#43;/&#43;utwefCZ5NOS587obdNgTcSGfloHashQUgvxO0qi0YrF58O9DpfdtBXXoWw==" data-copy="" data-copied=""></script>
  
  
  <script src="/js/zoom.min.js"></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:title" content="Hadoop-HDFS" />
<meta property="og:description" content="HDFS是Hadoop Distribute File System 的简称，意为Hadoop分布式文件系统。是Hadoop核心组件之一，作为最底层的分布式存储服务而存在。分布式文件系统解决的问题就是大数据存储。它们是横跨在多台计算机上的存储系统。分布式文件系统在大数据时代有着广泛的应用前景，它们为存储和处理超大规模数据提供所需的扩展能力。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://WFUing.github.io/posts/architecture/distributed/hadoop/hdfs/" /><meta property="og:image" content="https://WFUing.github.io/posts/architecture/distributed/hadoop/hdfs/featured.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-25T09:46:05+08:00" />
<meta property="article:modified_time" content="2024-02-25T09:46:05+08:00" />


  <meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://WFUing.github.io/posts/architecture/distributed/hadoop/hdfs/featured.png" /><meta name="twitter:title" content="Hadoop-HDFS"/>
<meta name="twitter:description" content="HDFS是Hadoop Distribute File System 的简称，意为Hadoop分布式文件系统。是Hadoop核心组件之一，作为最底层的分布式存储服务而存在。分布式文件系统解决的问题就是大数据存储。它们是横跨在多台计算机上的存储系统。分布式文件系统在大数据时代有着广泛的应用前景，它们为存储和处理超大规模数据提供所需的扩展能力。"/>

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "博客",
    "name": "Hadoop-HDFS",
    "headline": "Hadoop-HDFS",
    
    "abstract": "HDFS是Hadoop Distribute File System 的简称，意为Hadoop分布式文件系统。是Hadoop核心组件之一，作为最底层的分布式存储服务而存在。分布式文件系统解决的问题就是大数据存储。它们是横跨在多台计算机上的存储系统。分布式文件系统在大数据时代有着广泛的应用前景，它们为存储和处理超大规模数据提供所需的扩展能力。",
    "inLanguage": "en",
    "url" : "https:\/\/WFUing.github.io\/posts\/architecture\/distributed\/hadoop\/hdfs\/",
    "author" : {
      "@type": "Person",
      "name": "WFUing"
    },
    "copyrightYear": "2024",
    "dateCreated": "2024-02-25T09:46:05\u002b08:00",
    "datePublished": "2024-02-25T09:46:05\u002b08:00",
    
    "dateModified": "2024-02-25T09:46:05\u002b08:00",
    
    "keywords": ["hadoop","hdfs"],
    
    "mainEntityOfPage": "true",
    "wordCount": "845"
  }]
  </script>


  
  
  <meta name="author" content="WFUing" />
  
  
  
  <link href="mailto:522023320072@smail.nju.edu.cn" rel="me" />
  
  
  <link href="https://github.com/WFUing" rel="me" />
  
  
  <link href="img/qq.jpg" rel="me" />
  
  
  <link href="img/wx.jpg" rel="me" />
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.js" integrity=""></script>


















  
  

  
  
  <meta name="theme-color"/>
  
  
</head>


<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
    processEscapes: true,
    processEnvironments: true,
    autoload: {
      color: [],
      colorv2: ['color']
    },
    packages: {'[+]': ['noerrors']}
  },
  options: {
    skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  },
  loader: {
    load: ['[tex]/noerrors']
  }
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script"></script><body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a>
  </div>
  
  
  <div class="min-h-[148px]"></div>
<div class="fixed inset-x-0 pl-[24px] pr-[24px]" style="z-index:100">
  <div id="menu-blur" class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div>
  <div class="relative max-w-[64rem] ml-auto mr-auto">
    <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">WFUing&rsquo;s Blog</a>
            

        </nav>
        <nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12">

            
            
             
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a  href="/posts/"   class="text-base font-medium text-gray-500 hover:text-gray-900" title="">
      Blogs
    </a>
    <span>
      

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/posts/reviews/%E7%AE%97%E6%B3%95%E6%8A%80%E5%B7%A7/"  class="flex items-center">
          
          <p class="text-sm font-sm text-gray-500 hover:text-gray-900" title="">
            Algorithm
          </p>
        </a>
        
        <a href=""  class="flex items-center">
          
          <p class="text-sm font-sm text-gray-500 hover:text-gray-900" title="">
            Internship Reviews
          </p>
        </a>
        
        <a href="/posts/design-pattern/"  class="flex items-center">
          
          <p class="text-sm font-sm text-gray-500 hover:text-gray-900" title="">
            Design Pattern
          </p>
        </a>
        
        <a href="/posts/skills/"  class="flex items-center">
          
          <p class="text-sm font-sm text-gray-500 hover:text-gray-900" title="">
            Skills
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
             
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a  href="/posts/architecture/"   class="text-base font-medium text-gray-500 hover:text-gray-900" title="">
      Architecture
    </a>
    <span>
      

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/posts/architecture/distributed/"  class="flex items-center">
          
          <p class="text-sm font-sm text-gray-500 hover:text-gray-900" title="">
            Distributed
          </p>
        </a>
        
        <a href="/posts/architecture/iac/"  class="flex items-center">
          
          <p class="text-sm font-sm text-gray-500 hover:text-gray-900" title="">
            IAC
          </p>
        </a>
        
        <a href="/posts/architecture/iot/"  class="flex items-center">
          
          <p class="text-sm font-sm text-gray-500 hover:text-gray-900" title="">
            IoT
          </p>
        </a>
        
        <a href="/posts/architecture/serverless/"  class="flex items-center">
          
          <p class="text-sm font-sm text-gray-500 hover:text-gray-900" title="">
            Serverless
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
             
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a  href="/posts/language/"   class="text-base font-medium text-gray-500 hover:text-gray-900" title="">
      Language
    </a>
    <span>
      

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/posts/language/java/"  class="flex items-center">
          
          <p class="text-sm font-sm text-gray-500 hover:text-gray-900" title="">
            Java
          </p>
        </a>
        
        <a href="/posts/language/dsl/"  class="flex items-center">
          
          <p class="text-sm font-sm text-gray-500 hover:text-gray-900" title="">
            DSL
          </p>
        </a>
        
        <a href="/posts/language/code-generation/"  class="flex items-center">
          
          <p class="text-sm font-sm text-gray-500 hover:text-gray-900" title="">
            Code Generation
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
            
  <a href="/read/"  class="flex items-center">
    
    <p class="text-base font-medium text-gray-500 hover:text-gray-900" title="">
        Books
    </p>
</a>


            
            

            


            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400 h-12"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            
            <div
                class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400">
                <button id="appearance-switcher" aria-label="Dark mode switcher" type="button">
                    <div class="flex items-center justify-center h-12 dark:hidden">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                    </div>
                    <div class="items-center justify-center hidden h-12 dark:flex">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                    </div>
                </button>
            </div>
            

        </nav>
        <div class="flex md:hidden items-center space-x-5 md:ml-12">

            <span></span>

            


            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            
            <button id="appearance-switcher-mobile" aria-label="Dark mode switcher" type="button" style="margin-right:5px">
                <div class="flex items-center justify-center h-12 dark:hidden">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                </div>
                <div class="items-center justify-center hidden h-12 dark:flex">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                </div>
            </button>
            

        </div>
    </div>
    <div class="-my-2 -mr-2 md:hidden">

        <label id="menu-button" for="menu-controller" class="block">
            <input type="checkbox" id="menu-controller" class="hidden" />
            
            <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


            </div>
            <div id="menu-wrapper" style="padding-top:5px;"
                class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
                <ul
                    class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl">

                    <li>
                        <span
                            class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>

</span>
                    </li>

                    

                     
  <li class="mt-1">
    <a class="flex items-center">
        
        <p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="">
            Blogs
        </p>
        <span>
            

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


        </span>
    </a>
</li>

<li class="mt-1">
    <a href="/posts/reviews/%E7%AE%97%E6%B3%95%E6%8A%80%E5%B7%A7/"  class="flex items-center">
        
        <p class="text-sm font-small text-gray-500 hover:text-gray-900" title="">
            Algorithm
        </p>
    </a>
</li>

<li class="mt-1">
    <a href=""  class="flex items-center">
        
        <p class="text-sm font-small text-gray-500 hover:text-gray-900" title="">
            Internship Reviews
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/posts/design-pattern/"  class="flex items-center">
        
        <p class="text-sm font-small text-gray-500 hover:text-gray-900" title="">
            Design Pattern
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/posts/skills/"  class="flex items-center">
        
        <p class="text-sm font-small text-gray-500 hover:text-gray-900" title="">
            Skills
        </p>
    </a>
</li>

<li class="mb-2"></li>



                    

                     
  <li class="mt-1">
    <a class="flex items-center">
        
        <p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="">
            Architecture
        </p>
        <span>
            

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


        </span>
    </a>
</li>

<li class="mt-1">
    <a href="/posts/architecture/distributed/"  class="flex items-center">
        
        <p class="text-sm font-small text-gray-500 hover:text-gray-900" title="">
            Distributed
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/posts/architecture/iac/"  class="flex items-center">
        
        <p class="text-sm font-small text-gray-500 hover:text-gray-900" title="">
            IAC
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/posts/architecture/iot/"  class="flex items-center">
        
        <p class="text-sm font-small text-gray-500 hover:text-gray-900" title="">
            IoT
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/posts/architecture/serverless/"  class="flex items-center">
        
        <p class="text-sm font-small text-gray-500 hover:text-gray-900" title="">
            Serverless
        </p>
    </a>
</li>

<li class="mb-2"></li>



                    

                     
  <li class="mt-1">
    <a class="flex items-center">
        
        <p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="">
            Language
        </p>
        <span>
            

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


        </span>
    </a>
</li>

<li class="mt-1">
    <a href="/posts/language/java/"  class="flex items-center">
        
        <p class="text-sm font-small text-gray-500 hover:text-gray-900" title="">
            Java
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/posts/language/dsl/"  class="flex items-center">
        
        <p class="text-sm font-small text-gray-500 hover:text-gray-900" title="">
            DSL
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/posts/language/code-generation/"  class="flex items-center">
        
        <p class="text-sm font-small text-gray-500 hover:text-gray-900" title="">
            Code Generation
        </p>
    </a>
</li>

<li class="mb-2"></li>



                    

                    
  <li class="mt-1">
    <a href="/read/"  class="flex items-center">
        
        <p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="">
            Books
        </p>
    </a>
</li>



                    

                </ul>
                
                

            </div>
        </label>
    </div>
</div>




<script>
    (function () {
        var $mainmenu = $('.main-menu');
        var path = window.location.pathname;
        $mainmenu.find('a[href="' + path + '"]').each(function (i, e) {
            $(e).children('p').addClass('active');
        });
    })();
</script>


  </div>
</div>
<script>
  window.addEventListener('scroll', function (e) {
    var scroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
    var background_blur = document.getElementById('menu-blur');
    background_blur.style.opacity = (scroll / 300);
  });
</script>

  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  
  
  
  
  
  


<div id="hero" class="h-[150px] md:h-[200px]"></div>


    
    <div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom"
    style="background-image:url(/posts/architecture/distributed/hadoop/hdfs/featured.png);">
    


    <div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal">
    </div>
    <div
        class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal">
    </div>
</div>

<div id="background-blur" class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div>
<script>
    window.addEventListener('scroll', function (e) {
        var scroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
        var background_blur = document.getElementById('background-blur');
        background_blur.style.opacity = (scroll / 300)
    });
</script>

  
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      Hadoop-HDFS
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  





  



  













<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-02-25 09:46:05 &#43;0800 &#43;0800">25 February 2024</time><span class="px-2 text-primary-500">&middot;</span><span>845 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">4 mins</span>
  

  
  
</div>







    </div>

    
    
    
    
    

    
      
      
<div class="flex author">
  
  
  
  
  <img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width="96" height="96"
    alt="WFUing" src="/img/author.png" />
  
  
  <div class="place-self-center">
    
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      Author
    </div>
    <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      WFUing
    </div>
    
    
    <div class="text-sm text-neutral-700 dark:text-neutral-400">A graduate who loves coding.</div>
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="mailto:522023320072@smail.nju.edu.cn"
          target="_blank"
          aria-label="Email"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/WFUing"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="img/qq.jpg"
          target="_blank"
          aria-label="Qq"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg height="2500" viewBox="-1.94 0 124.879 145.085" width="2101" xmlns="http://www.w3.org/2000/svg"><path d="m60.503 142.237c-12.533 0-24.038-4.195-31.445-10.46-3.762 1.124-8.574 2.932-11.61 5.175-2.6 1.918-2.275 3.874-1.807 4.663 2.056 3.47 35.273 2.216 44.862 1.136zm0 0c12.535 0 24.039-4.195 31.447-10.46 3.76 1.124 8.573 2.932 11.61 5.175 2.598 1.918 2.274 3.874 1.805 4.663-2.056 3.47-35.272 2.216-44.862 1.136zm0 0" fill="#faab07"/><path d="m60.576 67.119c20.698-.14 37.286-4.147 42.907-5.683 1.34-.367 2.056-1.024 2.056-1.024.005-.189.085-3.37.085-5.01 0-27.634-13.044-55.401-45.124-55.402-32.08.001-45.125 27.769-45.125 55.401 0 1.642.08 4.822.086 5.01 0 0 .583.615 1.65.913 5.19 1.444 22.09 5.65 43.312 5.795zm56.245 23.02c-1.283-4.129-3.034-8.944-4.808-13.568 0 0-1.02-.126-1.537.023-15.913 4.623-35.202 7.57-49.9 7.392h-.153c-14.616.175-33.774-2.737-49.634-7.315-.606-.175-1.802-.1-1.802-.1-1.774 4.624-3.525 9.44-4.808 13.568-6.119 19.69-4.136 27.838-2.627 28.02 3.239.392 12.606-14.821 12.606-14.821 0 15.459 13.957 39.195 45.918 39.413h.848c31.96-.218 45.917-23.954 45.917-39.413 0 0 9.368 15.213 12.607 14.822 1.508-.183 3.491-8.332-2.627-28.021"/><path d="m49.085 40.824c-4.352.197-8.07-4.76-8.304-11.063-.236-6.305 3.098-11.576 7.45-11.773 4.347-.195 8.064 4.76 8.3 11.065.238 6.306-3.097 11.577-7.446 11.771m31.133-11.063c-.233 6.302-3.951 11.26-8.303 11.063-4.35-.195-7.684-5.465-7.446-11.77.236-6.305 3.952-11.26 8.3-11.066 4.352.197 7.686 5.468 7.449 11.773" fill="#fff"/><path d="m87.952 49.725c-1.162-2.575-12.875-5.445-27.374-5.445h-.156c-14.5 0-26.212 2.87-27.375 5.446a.863.863 0 0 0 -.085.367c0 .186.063.352.16.496.98 1.427 13.985 8.487 27.3 8.487h.156c13.314 0 26.319-7.058 27.299-8.487a.873.873 0 0 0 .16-.498.856.856 0 0 0 -.085-.365" fill="#faab07"/><path d="m54.434 29.854c.199 2.49-1.167 4.702-3.046 4.943-1.883.242-3.568-1.58-3.768-4.07-.197-2.492 1.167-4.704 3.043-4.944 1.886-.244 3.574 1.58 3.771 4.07m11.956.833c.385-.689 3.004-4.312 8.427-2.993 1.425.347 2.084.857 2.223 1.057.205.296.262.718.053 1.286-.412 1.126-1.263 1.095-1.734.875-.305-.142-4.082-2.66-7.562 1.097-.24.257-.668.346-1.073.04-.407-.308-.574-.93-.334-1.362"/><path d="m60.576 83.08h-.153c-9.996.12-22.116-1.204-33.854-3.518-1.004 5.818-1.61 13.132-1.09 21.853 1.316 22.043 14.407 35.9 34.614 36.1h.82c20.208-.2 33.298-14.057 34.616-36.1.52-8.723-.087-16.035-1.092-21.854-11.739 2.315-23.862 3.64-33.86 3.518" fill="#fff"/><g fill="#eb1923"><path d="m32.102 81.235v21.693s9.937 2.004 19.893.616v-20.009c-6.307-.357-13.109-1.152-19.893-2.3"/><path d="m105.539 60.412s-19.33 6.102-44.963 6.275h-.153c-25.591-.172-44.896-6.255-44.962-6.275l-6.474 16.158c16.193 4.882 36.261 8.028 51.436 7.845h.153c15.175.183 35.242-2.963 51.437-7.845zm0 0"/></g></svg>
  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="img/wx.jpg"
          target="_blank"
          aria-label="Wechat"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg height="2009" width="2500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 111.36600000000001 90"><linearGradient id="a" x1="50.056%" x2="50.056%" y1="94.15%" y2=".437%"><stop offset="0" stop-color="#05cd66"/><stop offset="1" stop-color="#61f380"/><stop offset="1" stop-color="#9eee69"/></linearGradient><linearGradient id="b" x1="50.089%" x2="50.089%" y1="93.535%" y2="-.036%"><stop offset="0" stop-color="#e4e6e6"/><stop offset="1" stop-color="#f0f0f0"/></linearGradient><g fill="none" fill-rule="evenodd"><path d="M0 33.466c0 10.04 5.474 19.213 13.933 25.286.746.496 1.12 1.24 1.12 2.231 0 .248-.125.62-.125.868-.622 2.479-1.742 6.57-1.866 6.693-.124.372-.249.62-.249.992 0 .744.622 1.363 1.369 1.363.248 0 .497-.124.746-.248l8.832-5.082c.622-.371 1.369-.62 2.115-.62.374 0 .871 0 1.244.125 4.106 1.24 8.584 1.859 13.187 1.859 22.267 0 40.306-14.998 40.306-33.467S62.573 0 40.306 0C18.038 0 0 14.998 0 33.466" fill="url(#a)"/><path d="M77.86 86.628c3.847 0 7.57-.5 10.92-1.498.249-.125.621-.125.993-.125.62 0 1.241.25 1.738.5l7.322 4.245c.248.125.372.25.62.25.62 0 1.117-.5 1.117-1.124 0-.25-.124-.5-.124-.874 0-.125-.993-3.497-1.49-5.62-.123-.25-.123-.5-.123-.749 0-.75.372-1.374.993-1.873 7.073-5.12 11.54-12.738 11.54-21.23 0-15.485-15.015-28.098-33.506-28.098S44.353 42.92 44.353 58.53c0 15.485 15.016 28.098 33.507 28.098z" fill="url(#b)"/><path d="M32.05 22.662c0 2.891-2.288 5.18-5.18 5.18s-5.18-2.289-5.18-5.18 2.29-5.18 5.18-5.18 5.18 2.289 5.18 5.18M58.92 22.662c0 2.891-2.288 5.18-5.179 5.18s-5.18-2.289-5.18-5.18 2.289-5.18 5.18-5.18 5.18 2.289 5.18 5.18" fill="#168743"/><g fill="#919191"><path d="M84.82 49.856c0 2.518 2.015 4.532 4.533 4.532s4.532-2.014 4.532-4.532-2.014-4.532-4.532-4.532-4.533 2.014-4.533 4.532M62.482 49.856c0 2.518 2.014 4.532 4.532 4.532s4.533-2.014 4.533-4.532-2.015-4.532-4.533-4.532-4.532 2.014-4.532 4.532"/></g></g></svg>
  </span>

</span></a
        >
      
    
  </div>

</div>
  </div>
</div>
    

    

    

    
    <div class="mb-5"></div>
    
  
  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
     <div
      class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8">
      <div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]">

         <details open class="toc-right mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#学习目标">学习目标</a></li>
    <li><a href="#什么是分布式文件系统">什么是分布式文件系统</a></li>
    <li><a href="#hdfs设计目标">HDFS设计目标</a></li>
    <li><a href="#hdfs重要特性">HDFS重要特性</a>
      <ul>
        <li><a href="#masterslave架构一主多从架构">master/slave架构（一主多从架构）</a></li>
        <li><a href="#分块存储面试题切片机制">分块存储（面试题：切片机制）</a></li>
        <li><a href="#命令空间">命令空间</a></li>
        <li><a href="#namenode元数据管理">Namenode元数据管理</a></li>
        <li><a href="#datanode数据存储">Datanode数据存储</a></li>
        <li><a href="#副本机制面试题副本机制">副本机制（面试题：副本机制）</a></li>
        <li><a href="#一次写入多次读出">一次写入，多次读出</a></li>
      </ul>
    </li>
    <li><a href="#hdfs基本操作">HDFS基本操作</a>
      <ul>
        <li><a href="#shell命令行客户端">Shell命令行客户端</a></li>
        <li><a href="#shell命令选项">Shell命令选项</a></li>
        <li><a href="#shell常用命令介绍">Shell常用命令介绍</a>
          <ul>
            <li><a href="#-ls重点"><strong>-ls</strong>（重点）</a></li>
            <li><a href="#-mkdir重点"><strong>-mkdir（重点）</strong></a></li>
            <li><a href="#-put上传重点"><strong>-put：上传</strong>（重点）</a></li>
            <li><a href="#-get下载重点"><strong>-get：下载（重点）</strong></a></li>
            <li><a href="#-appendtofile"><strong>-appendToFile</strong></a></li>
            <li><a href="#-cat重点"><strong>-cat</strong>（重点）</a></li>
            <li><a href="#-tail重点"><strong>-tail</strong>（重点）</a></li>
            <li><a href="#-chgrpgroup简写更改文件所属组"><strong>-chgrp：group简写，更改文件所属组</strong></a></li>
            <li><a href="#-chmod更改权限重点"><strong>-chmod：更改权限</strong>（重点）</a></li>
            <li><a href="#-chown更改文件拥有者"><strong>-chown：更改文件拥有者</strong></a></li>
            <li><a href="#-cp重点"><strong>-cp</strong>（重点）</a></li>
            <li><a href="#-mv重点"><strong>-mv</strong>（重点）</a></li>
            <li><a href="#-getmerge"><strong>-getmerge</strong></a></li>
            <li><a href="#-rm重点"><strong>-rm</strong>（重点）</a></li>
            <li><a href="#-df重点"><strong>-df</strong>（重点）</a></li>
            <li><a href="#-du重点"><strong>-du（重点）</strong></a></li>
            <li><a href="#-setrep"><strong>-setrep</strong></a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#hdfs基本原理">HDFS基本原理</a>
      <ul>
        <li><a href="#namenode概述">NameNode概述</a></li>
        <li><a href="#datanode概述">DataNode概述</a></li>
        <li><a href="#hdfs写数据流程简化为十步走">HDFS写数据流程（简化为十步走）</a></li>
        <li><a href="#hdfs读数据流程简化为五步走">HDFS读数据流程（简化为五步走）</a></li>
        <li><a href="#hdfs其他功能">HDFS其他功能</a>
          <ul>
            <li><a href="#1不同集群之间的数据复制">1、不同集群之间的数据复制</a></li>
            <li><a href="#2集群内部文件拷贝scp">2、集群内部文件拷贝scp</a></li>
            <li><a href="#3跨集群之间的数据拷贝distcp">3、跨集群之间的数据拷贝distcp</a></li>
            <li><a href="#4archive档案的使用hadoop归档模式">4、Archive档案的使用(Hadoop归档模式)</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#hdfs元数据管理机制">HDFS元数据管理机制</a>
      <ul>
        <li><a href="#元数据管理概述">元数据管理概述</a></li>
      </ul>
    </li>
    <li><a href="#secondary-namenode">secondary namenode</a>
      <ul>
        <li><a href="#checkpoint2nn合并元数据文件过程">Checkpoint（2NN合并元数据文件过程）</a></li>
      </ul>
    </li>
    <li><a href="#hdfs安全模式">HDFS安全模式</a>
      <ul>
        <li><a href="#安全模式概述">安全模式概述</a></li>
        <li><a href="#安全模式配置">安全模式配置</a></li>
        <li><a href="#安全模式命令">安全模式命令</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#学习目标">学习目标</a></li>
    <li><a href="#什么是分布式文件系统">什么是分布式文件系统</a></li>
    <li><a href="#hdfs设计目标">HDFS设计目标</a></li>
    <li><a href="#hdfs重要特性">HDFS重要特性</a>
      <ul>
        <li><a href="#masterslave架构一主多从架构">master/slave架构（一主多从架构）</a></li>
        <li><a href="#分块存储面试题切片机制">分块存储（面试题：切片机制）</a></li>
        <li><a href="#命令空间">命令空间</a></li>
        <li><a href="#namenode元数据管理">Namenode元数据管理</a></li>
        <li><a href="#datanode数据存储">Datanode数据存储</a></li>
        <li><a href="#副本机制面试题副本机制">副本机制（面试题：副本机制）</a></li>
        <li><a href="#一次写入多次读出">一次写入，多次读出</a></li>
      </ul>
    </li>
    <li><a href="#hdfs基本操作">HDFS基本操作</a>
      <ul>
        <li><a href="#shell命令行客户端">Shell命令行客户端</a></li>
        <li><a href="#shell命令选项">Shell命令选项</a></li>
        <li><a href="#shell常用命令介绍">Shell常用命令介绍</a>
          <ul>
            <li><a href="#-ls重点"><strong>-ls</strong>（重点）</a></li>
            <li><a href="#-mkdir重点"><strong>-mkdir（重点）</strong></a></li>
            <li><a href="#-put上传重点"><strong>-put：上传</strong>（重点）</a></li>
            <li><a href="#-get下载重点"><strong>-get：下载（重点）</strong></a></li>
            <li><a href="#-appendtofile"><strong>-appendToFile</strong></a></li>
            <li><a href="#-cat重点"><strong>-cat</strong>（重点）</a></li>
            <li><a href="#-tail重点"><strong>-tail</strong>（重点）</a></li>
            <li><a href="#-chgrpgroup简写更改文件所属组"><strong>-chgrp：group简写，更改文件所属组</strong></a></li>
            <li><a href="#-chmod更改权限重点"><strong>-chmod：更改权限</strong>（重点）</a></li>
            <li><a href="#-chown更改文件拥有者"><strong>-chown：更改文件拥有者</strong></a></li>
            <li><a href="#-cp重点"><strong>-cp</strong>（重点）</a></li>
            <li><a href="#-mv重点"><strong>-mv</strong>（重点）</a></li>
            <li><a href="#-getmerge"><strong>-getmerge</strong></a></li>
            <li><a href="#-rm重点"><strong>-rm</strong>（重点）</a></li>
            <li><a href="#-df重点"><strong>-df</strong>（重点）</a></li>
            <li><a href="#-du重点"><strong>-du（重点）</strong></a></li>
            <li><a href="#-setrep"><strong>-setrep</strong></a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#hdfs基本原理">HDFS基本原理</a>
      <ul>
        <li><a href="#namenode概述">NameNode概述</a></li>
        <li><a href="#datanode概述">DataNode概述</a></li>
        <li><a href="#hdfs写数据流程简化为十步走">HDFS写数据流程（简化为十步走）</a></li>
        <li><a href="#hdfs读数据流程简化为五步走">HDFS读数据流程（简化为五步走）</a></li>
        <li><a href="#hdfs其他功能">HDFS其他功能</a>
          <ul>
            <li><a href="#1不同集群之间的数据复制">1、不同集群之间的数据复制</a></li>
            <li><a href="#2集群内部文件拷贝scp">2、集群内部文件拷贝scp</a></li>
            <li><a href="#3跨集群之间的数据拷贝distcp">3、跨集群之间的数据拷贝distcp</a></li>
            <li><a href="#4archive档案的使用hadoop归档模式">4、Archive档案的使用(Hadoop归档模式)</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#hdfs元数据管理机制">HDFS元数据管理机制</a>
      <ul>
        <li><a href="#元数据管理概述">元数据管理概述</a></li>
      </ul>
    </li>
    <li><a href="#secondary-namenode">secondary namenode</a>
      <ul>
        <li><a href="#checkpoint2nn合并元数据文件过程">Checkpoint（2NN合并元数据文件过程）</a></li>
      </ul>
    </li>
    <li><a href="#hdfs安全模式">HDFS安全模式</a>
      <ul>
        <li><a href="#安全模式概述">安全模式概述</a></li>
        <li><a href="#安全模式配置">安全模式配置</a></li>
        <li><a href="#安全模式命令">安全模式命令</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>

 
<script>
  (function () {
    var $toc = $('#TableOfContents');
    if ($toc.length > 0) {
      var $window = $(window);

      function onScroll() {
        var currentScroll = $window.scrollTop();
        var h = $('.anchor');
        var id = "";
        h.each(function (i, e) {
          e = $(e);
          if (e.offset().top - $(window).height()/3 <= currentScroll) {
            id = e.attr('id');
          }
        });
        var active = $toc.find('a.active');      
        if (active.length == 1 && active.eq(0).attr('href') == '#' + id) return true;

        active.each(function (i, e) {
           
            $(e).removeClass('active').siblings('ul').hide();
          
        });
        $toc.find('a[href="#' + id + '"]').addClass('active')
        $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
          $(e).children('a').parents('ul').show();          
        });
      }

      $window.on('scroll', onScroll);
      $(document).ready(function () {
         
          $toc.find('a').parent('li').find('ul').hide();
        
        onScroll();
      });
    }
  })();
</script>
   </div>
      </div>
      

      <div class="min-w-0 min-h-0 max-w-fit">
        
        


        <div class="article-content max-w-prose mb-20">
          <h2 class="relative group">学习目标 
    <div id="学习目标" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%ad%a6%e4%b9%a0%e7%9b%ae%e6%a0%87" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<ol>
<li>了解什么是分布式文件系统，即大文件如何存储在集群中？</li>
<li>掌握HDFS常见面试题（切片机制、心跳检测、负载均衡、副本机制）</li>
<li>了解HDFS中的常见命令（上传、下载、复制、剪切、删除）</li>
<li>HDFS读文件流程</li>
<li>HDFS写文件流程</li>
<li>了解HDFS小文件归档模式</li>
</ol>
<h2 class="relative group">什么是分布式文件系统 
    <div id="什么是分布式文件系统" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e4%bb%80%e4%b9%88%e6%98%af%e5%88%86%e5%b8%83%e5%bc%8f%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<ul>
<li>大白话：你出5毛，我出5毛，一起凑成1块的过程</li>
<li>专业版：相当于把多个机器的磁盘给打通，然后对外提供<strong>统一的访问端口</strong>，从而实现<strong>跨机存储</strong>。</li>
</ul>
<p>HDFS存储数据的时候，会对文件进行切块（Block数据块，hadoop2.x 中<em>128Mb</em>为一块）</p>
<ul>
<li>namenode：元数据</li>
<li>datanode：实际数据</li>
</ul>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/fs.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<ul>
<li>问题1：分布式存储优点是什么？
<ul>
<li>答案：无限扩展支撑海量数据存储（横向扩容）</li>
</ul>
</li>
<li>问题2：元数据记录的功能是什么？
<ul>
<li>答案：整个集群的文件信息，每个文件Block块存储的位置，快速定位文件位置遍历查找</li>
</ul>
</li>
<li>问题3：文件分块存储的好处是什么？
<ul>
<li>答案：针对块并行操作提高效率</li>
</ul>
</li>
<li>问题4：设置副本备份的作用是什么？
<ul>
<li>答案：冗余存储保障数据安全</li>
</ul>
</li>
</ul>
<h2 class="relative group">HDFS设计目标 
    <div id="hdfs设计目标" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#hdfs%e8%ae%be%e8%ae%a1%e7%9b%ae%e6%a0%87" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<ol>
<li>硬件故障是常态，HDFS将有成百上干的服务器组成，每一个组成部分都有可能出现故障。因此<strong>故障的检测和自动快速恢复</strong>是HDFS的核心架构目标。</li>
<li>HDFS上的应用与一般的应用（主要是以流式读取数据）不同。HDFS被设计成适合批量处理，而不是用户交互式的。相较于数据访问的反应时间，更<strong>注重数据访问的高吞吐量</strong>。</li>
</ol>
<pre tabindex="0"><code>流式读取 =＞ 把数据像水流一样进行读取，HDFS侧重于数据的读写，HDFS无法做到低延迟。
有时，读一个数据可能需要很长的时间。
</code></pre><ol start="3">
<li>典型的HDFS文件大小是GB到TB的级别。所以，HDFS被调整成<strong>支持大文件</strong>。它应该提供很高的聚合数据带宽，一个集群中支持数百个节点，一个集群中还应该支持干万级别的文件。</li>
</ol>
<pre tabindex="0"><code>HDFS适合存储GB级别及以上大小文件
</code></pre><ol start="4">
<li>大部分HDFS应用对文件要求的是 <strong>write-one-read-many</strong> 访问模型。一个文件一旦创建、写入、关闭之后就 不需要修改了。这一假设简化了数据一致性问题，使高吞吐量的数据访问成为可能。</li>
</ol>
<pre tabindex="0"><code>HDFS不支持文件的修改操作，所以其设计理念：一次写入，多次读取
</code></pre><ol start="5">
<li><strong>移动计算的代价比之移动数据的代价低</strong>。一个应用请求的计算，离它操作的数据越近就越高效，这在数据达到海量级别的时候更是如此。将计算移动到数据附近，比之将数据移动到应用所在显然更好。</li>
</ol>
<pre tabindex="0"><code>网络拓扑+机架感知原理：把数据放置在离计算最近的地方
</code></pre><ol start="6">
<li>在异构的硬件和软件平台上的 可移植性。这将推动需要大数据集的应用更广泛地采用HDFS作为平台。</li>
</ol>
<h2 class="relative group">HDFS重要特性 
    <div id="hdfs重要特性" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#hdfs%e9%87%8d%e8%a6%81%e7%89%b9%e6%80%a7" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<ul>
<li>首先，它是一个文件系统，用于存储文件，通过统一的命名空间目录树来定位文件；</li>
<li>其次，它是分布式的，由很多服务器联合起来实现其功能，集群中的服务器有各自的角色。</li>
</ul>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/arch1.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<ul>
<li>HDFS: namenode节点（存放元数据）</li>
<li>datanode节点（存放具体数据块）</li>
<li>secondarynamenode（2nn）辅助管理元数据</li>
</ul>
<h3 class="relative group">master/slave架构（一主多从架构） 
    <div id="masterslave架构一主多从架构" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#masterslave%e6%9e%b6%e6%9e%84%e4%b8%80%e4%b8%bb%e5%a4%9a%e4%bb%8e%e6%9e%b6%e6%9e%84" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>HDFS采用master/slave架构。一般一个HDFS集群是有一个Namenode和一定数目的Datanode组成。Namenode是HDFS集群主节点，Datanode是HDFS集群从节点，两种角色各司其职，共同协调完成分布式的文件存储服务。</p>
<h3 class="relative group">分块存储（面试题：切片机制） 
    <div id="分块存储面试题切片机制" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%88%86%e5%9d%97%e5%ad%98%e5%82%a8%e9%9d%a2%e8%af%95%e9%a2%98%e5%88%87%e7%89%87%e6%9c%ba%e5%88%b6" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>HDFS中的文件在物理上是分块存储（block）的，块的大小可以通过配置参数来规定，默认大小在hadoop2.x版本中是128M。</p>
<blockquote>
<ul>
<li>hadoop1.x版本中，客户端切片大小，每64MB为一片（Block）</li>
<li>hadoop2.x/hadoop3.x版本中，客户端切片大小，每128MB为一片（Block）</li>
</ul>
</blockquote>
<p>问题：Hadoop切片大小为什么设置为128MB，此大小是否可以调整？</p>
<ul>
<li>这个参数与硬盘文件寻址有关，可以调整，但是很少有调整的需求.由于目前位置大多数的硬盘，平均速率大概时候100MB/S。</li>
</ul>
<h3 class="relative group">命令空间 
    <div id="命令空间" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%91%bd%e4%bb%a4%e7%a9%ba%e9%97%b4" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>HDFS支持传统的<strong>层次型文件组织结构（树状结构）</strong>。用户或者应用程序可以创建目录，然后将文件保存在这些目录里。文件系统名字空间的层次结构和大多数现有的文件系统类似：用户可以创建、删除、移动或重命名文件。</p>
<p>Namenode负责维护文件系统的名字空间，任何对文件系统名字空间或属性的修改都将被Namenode记录下来。</p>
<p>HDFS会给客户端提供一个统一的抽象目录树，客户端通过路径来访问文件，形如：<code>hdfs://namenode:port/dir-a/dir-b/dir-c/file.data</code>。</p>
<p>举个例子：<code>hdfs://node1:8020/itheima.txt</code>。</p>
<center>

  
  
  
  
  
  
  
    
    
    
      <figure>
        <img class="my-0 rounded-md" src="./node3.png" alt="" />
        
      </figure>
    
  

</center>
<h3 class="relative group">Namenode元数据管理 
    <div id="namenode元数据管理" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#namenode%e5%85%83%e6%95%b0%e6%8d%ae%e7%ae%a1%e7%90%86" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>我们把目录结构及文件分块位置信息叫做元数据。Namenode负责维护整个hdfs文件系统的目录树结构，以及每一个文件所对应的block块信息（block的id，及所在的datanode服务器）。</p>
<h3 class="relative group">Datanode数据存储 
    <div id="datanode数据存储" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#datanode%e6%95%b0%e6%8d%ae%e5%ad%98%e5%82%a8" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>文件的各个block的具体存储管理由datanode节点承担。每一个block都可以在多个datanode上。Datanode需要定时向Namenode汇报自己持有的block信息。</p>
<p><strong>面试题1. 心跳检测机制</strong></p>
<p>namenode与datanode是如何通信的，如果datanode宕机了，namenode是如何知晓并转移数据的？</p>
<ul>
<li><strong>心跳检测机制</strong>：了解namenode运行状态，即datanode要定时（3秒）给namenode发送自己的心跳消息，这样做的目的是：
<ol>
<li>让namenode知道datanode还活着，如果超时（如果某一次心跳数据没有接收，datanode还会频繁发送，发送10次=&gt;30s）未发送心跳消息，namenode会认为datanode进入到<em>假死</em>的状态。如果超过最大间隔时间（10分钟）还未发送心跳消息，则认为该datanode宕机了。10分钟+30s =&gt;（namenode =&gt; datanode宕机了）</li>
<li>当检测到某个datanode宕机后，namenode会将该datanode存储的所有数据重新找新机器（活跃的）备份。</li>
</ol>
</li>
<li><strong>汇报机制</strong>：元数据的块信息是存储在namenode的内存中的。
<ul>
<li>当HDFS集群重新启动的时候，所有的datanode都要向namenode汇报自己的节点信息，每个datanode重启也会主动汇报自己保存的文件块信息。</li>
<li>当集群在正常工作的时候，间隔一定的时间（6小时），datanode也会向namenode汇报一次自己的块信息。</li>
</ul>
</li>
</ul>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/arch3.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p><strong>面试题2：负载均衡机制</strong></p>
<p>即让集群中所有的节点（服务器）的利用率及副本数尽量都保持一致或者在同一个水平线上，从而使利用率均衡，降低单台压力，每个节点利用率以及副本数量尽量平均（保障整个集群平稳运行）</p>
<h3 class="relative group">副本机制（面试题：副本机制） 
    <div id="副本机制面试题副本机制" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%89%af%e6%9c%ac%e6%9c%ba%e5%88%b6%e9%9d%a2%e8%af%95%e9%a2%98%e5%89%af%e6%9c%ac%e6%9c%ba%e5%88%b6" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>为了容错，文件的所有block都会有副本。每个文件的block大小和副本系数都是可配置的。应用程序可以指定某个文件的副本数目。副本系数可以在文件创建的时候指定，也可以在之后改变。</p>
<p>副本数量也可以通过参数设置 <code>dfs.replication</code>，默认是3。</p>
<ul>
<li>当某个块的副本不够3份的时候，namenode会新增副本；</li>
<li>当某个块的副本超过3份的时候，namenode会删除副本；</li>
<li>当某个块的副本数不够3份且无法新增的时候，此时集群就会强制进入安全模式，只能读，不能写。</li>
</ul>
<blockquote>
<p>hadoop-hdfs配置文件：https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml</p>
</blockquote>
<p><strong>面试题3：机架感知原理＋网络拓扑结构实现副本摆放</strong></p>
<ul>
<li>第1副本：优先本机，否则就近随机</li>
<li>第2副本：就近不同机架的某一个服务器上</li>
<li>第3副本：和第2副本同一个机架的不同服务器上</li>
</ul>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/jijia.png"
        alt="机架感知原理"
      />
      
      
    </figure>
  

</p>
<h3 class="relative group">一次写入，多次读出 
    <div id="一次写入多次读出" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e4%b8%80%e6%ac%a1%e5%86%99%e5%85%a5%e5%a4%9a%e6%ac%a1%e8%af%bb%e5%87%ba" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>HDFS是设计成适应一次写入，多次读出的场景，且不支持文件的修改。</p>
<p>正因为如此，HDFS适合用来做大数据分析的底层存储服务，并不适合用来做网盘等应用，因为，修改不方便，延迟大，网络开销大，成本太高。</p>
<h2 class="relative group">HDFS基本操作 
    <div id="hdfs基本操作" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#hdfs%e5%9f%ba%e6%9c%ac%e6%93%8d%e4%bd%9c" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>官方文档：https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-common/FileSystemShell.html</p>
<h3 class="relative group">Shell命令行客户端 
    <div id="shell命令行客户端" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#shell%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%ae%a2%e6%88%b7%e7%ab%af" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>Hadoop提供了文件系统的shell命令行客户端，使用方法如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hadoop</span> <span class="n">fs</span> <span class="p">&lt;</span><span class="n">args</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>文件系统shell包括与Hadoop分布式文件系统（HDFS）以及Hadoop支持的其他文件系统（如本地FS，HFTP FS，S3 FS等）直接交互的各种类似shell的命令。所有FS shell命令都将路径URI作为参数。</p>
<p>URI格式为scheme://authority/path。对于HDFS，该scheme是hdfs，对于本地FS，该scheme是file。scheme和authority是可选的。<strong>如果未指定，则使用配置中指定的默认方案。</strong></p>
<p>对于HDFS，命令示例如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hadoop</span> <span class="n">fs</span> <span class="n">-ls</span> <span class="n">hdfs</span><span class="err">:</span><span class="p">//</span><span class="n">namenode</span><span class="err">:</span><span class="n">host</span><span class="p">/</span><span class="n">parent</span><span class="p">/</span><span class="n">child</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hadoop</span> <span class="n">fs</span> <span class="n">-ls</span> <span class="p">/</span><span class="n">parent</span><span class="p">/</span><span class="n">child</span>
</span></span></code></pre></div><p>注：fs.defaultFS中有配置</p>
<p>对于本地文件系统，命令示例如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hadoop</span> <span class="n">fs</span> <span class="n">-ls</span> <span class="n">file</span><span class="err">:</span><span class="p">///</span><span class="n">root</span><span class="p">/</span> 
</span></span></code></pre></div><p>如果使用的文件系统是HDFS，则使用hdfs dfs也是可以的，此时</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hadoop</span> <span class="n">fs</span> <span class="p">&lt;</span><span class="n">args</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">hdfs</span> <span class="n">dfs</span> <span class="p">&lt;</span><span class="n">args</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>特别说明：关于HDFS的Shell操作，前缀写法有两种形式：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hadoop</span> <span class="n">fs</span>  <span class="c"># 适用于所有的文件系统，hdfs://node1:8020/  file:///</span>
</span></span><span class="line"><span class="cl"><span class="n">hdfs</span> <span class="n">dfs</span>   <span class="c"># 更适用于HDFS分布式文件系统</span>
</span></span></code></pre></div><h3 class="relative group">Shell命令选项 
    <div id="shell命令选项" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#shell%e5%91%bd%e4%bb%a4%e9%80%89%e9%a1%b9" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<table>
<thead>
<tr>
<th>选项名称</th>
<th>使用格式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-ls</td>
<td>-ls &lt;路径&gt;</td>
<td>查看指定路径的当前目录结构</td>
</tr>
<tr>
<td>-lsr</td>
<td>-lsr &lt;路径&gt;</td>
<td>递归查看指定路径的目录结构</td>
</tr>
<tr>
<td>-du</td>
<td>-du &lt;路径&gt;，统计文件夹需要添加-s</td>
<td>统计目录下个文件大小</td>
</tr>
<tr>
<td>-dus</td>
<td>-dus &lt;路径&gt;</td>
<td>汇总统计目录下文件(夹)大小</td>
</tr>
<tr>
<td>-count</td>
<td>-count [-q] &lt;路径&gt;</td>
<td>统计文件(夹)数量</td>
</tr>
<tr>
<td>-mv</td>
<td>-mv &lt;源路径&gt; &lt;目的路径&gt;</td>
<td>移动</td>
</tr>
<tr>
<td>-cp</td>
<td>-cp &lt;源路径&gt; &lt;目的路径&gt;</td>
<td>复制</td>
</tr>
<tr>
<td>-rm</td>
<td>-rm [-skipTrash] &lt;路径&gt;</td>
<td>删除文件/空白文件夹</td>
</tr>
<tr>
<td>-rmr</td>
<td>-rmr [-skipTrash] &lt;路径&gt;</td>
<td>递归删除</td>
</tr>
<tr>
<td>-put</td>
<td>-put &lt;多个linux上的文件&gt; &lt;hdfs路径&gt;</td>
<td>上传文件</td>
</tr>
<tr>
<td>-copyFromLocal</td>
<td>-copyFromLocal &lt;多个linux上的文件&gt; &lt;hdfs路径&gt;</td>
<td>从本地复制</td>
</tr>
<tr>
<td>-moveFromLocal</td>
<td>-moveFromLocal &lt;多个linux上的文件&gt; &lt;hdfs路径&gt;</td>
<td>从本地移动</td>
</tr>
<tr>
<td>-getmerge</td>
<td>-getmerge &lt;源路径&gt; &lt;linux路径&gt;</td>
<td>合并到本地</td>
</tr>
<tr>
<td>-cat</td>
<td>-cat &lt;hdfs路径&gt;</td>
<td>查看文件内容</td>
</tr>
<tr>
<td>-text</td>
<td>-text &lt;hdfs路径&gt;</td>
<td>查看文件内容</td>
</tr>
<tr>
<td>-copyToLocal</td>
<td>-copyToLocal [-ignoreCrc] [-crc] [hdfs源路径] [linux目的路径]</td>
<td>从本地复制</td>
</tr>
<tr>
<td>-moveToLocal</td>
<td>-moveToLocal [-crc] &lt;hdfs源路径&gt; &lt;linux目的路径&gt;</td>
<td>从本地移动</td>
</tr>
<tr>
<td>-mkdir</td>
<td>-mkdir &lt;hdfs路径&gt;</td>
<td>创建空白文件夹</td>
</tr>
<tr>
<td>-setrep</td>
<td>-setrep [-R] [-w] &lt;副本数&gt; &lt;路径&gt;</td>
<td>修改副本数量</td>
</tr>
<tr>
<td>-touchz</td>
<td>-touchz &lt;文件路径&gt;</td>
<td>创建空白文件</td>
</tr>
<tr>
<td>-stat</td>
<td>-stat [format] &lt;路径&gt;</td>
<td>显示文件统计信息</td>
</tr>
<tr>
<td>-tail</td>
<td>-tail [-f] &lt;文件&gt;</td>
<td>查看文件尾部信息</td>
</tr>
<tr>
<td>-chmod</td>
<td>-chmod [-R] &lt;权限模式&gt; [路径]</td>
<td>修改权限</td>
</tr>
<tr>
<td>-chown</td>
<td>-chown [-R] [属主][:[属组]] 路径</td>
<td>修改属主</td>
</tr>
<tr>
<td>-chgrp</td>
<td>-chgrp [-R] 属组名称 路径</td>
<td>修改属组</td>
</tr>
<tr>
<td>-help</td>
<td>-help [命令选项]</td>
<td>帮助</td>
</tr>
</tbody>
</table>
<h3 class="relative group">Shell常用命令介绍 
    <div id="shell常用命令介绍" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#shell%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4%e4%bb%8b%e7%bb%8d" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<h4 class="relative group"><strong>-ls</strong>（重点） 
    <div id="-ls重点" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-ls%e9%87%8d%e7%82%b9" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>使用方法：hadoop fs -ls [-h] [-R] <args></p>
<p>功能：显示文件、目录信息。</p>
<p>示例：hadoop fs -ls /user/hadoop/file1</p>
<h4 class="relative group"><strong>-mkdir（重点）</strong> 
    <div id="-mkdir重点" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-mkdir%e9%87%8d%e7%82%b9" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>使用方法：hadoop fs -mkdir [-p] <paths></p>
<p>功能：在hdfs上创建目录，-p表示会创建路径中的各级父目录。</p>
<p>示例：hadoop fs -mkdir –p /user/hadoop/dir1</p>
<h4 class="relative group"><strong>-put：上传</strong>（重点） 
    <div id="-put上传重点" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-put%e4%b8%8a%e4%bc%a0%e9%87%8d%e7%82%b9" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>使用方法：hadoop fs -put [-f] [-p] [ -|<localsrc1> .. ]. <dst></p>
<p>功能：将单个src或多个srcs从本地文件系统复制到目标文件系统。</p>
<p>-p：保留访问和修改时间，所有权和权限。</p>
<p>-f：覆盖目的地（如果已经存在）</p>
<p>示例：hadoop fs -put -f localfile1 localfile2 /user/hadoop/hadoopdir</p>
<h4 class="relative group"><strong>-get：下载（重点）</strong> 
    <div id="-get下载重点" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-get%e4%b8%8b%e8%bd%bd%e9%87%8d%e7%82%b9" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>使用方法：hadoop fs -get [-ignorecrc] [-crc] [-p] [-f] <src> <localdst></p>
<p>-ignorecrc：跳过对下载文件的CRC检查。</p>
<p>-crc：为下载的文件写CRC校验和。</p>
<p>功能：将文件复制到本地文件系统。</p>
<p>示例：hadoop fs -get hdfs://host:port/user/hadoop/file localfile</p>
<h4 class="relative group"><strong>-appendToFile</strong> 
    <div id="-appendtofile" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-appendtofile" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>使用方法：hadoop fs -appendToFile <localsrc> &hellip; <dst></p>
<p>功能：追加一个文件到已经存在的文件末尾（两个文件内容合并）</p>
<p>示例：hadoop fs -appendToFile localfile  /hadoop/hadoopfile</p>
<blockquote>
<p>HDFS强调一次写入，多次读取。数据一旦写入成功，就不建议修改了！</p>
</blockquote>
<blockquote>
<p>如果想对数据修改有没有办法？答：目前官方提供了一个唯一方案，不是修改方案，是追加文件</p>
</blockquote>
<h4 class="relative group"><strong>-cat</strong>（重点） 
    <div id="-cat重点" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-cat%e9%87%8d%e7%82%b9" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>使用方法：hadoop fs -cat [-ignoreCrc] URI [URI &hellip;]</p>
<p>功能：显示文件内容到stdout</p>
<p>示例：hadoop fs -cat /hadoop/hadoopfile</p>
<h4 class="relative group"><strong>-tail</strong>（重点） 
    <div id="-tail重点" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-tail%e9%87%8d%e7%82%b9" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>使用方法：hadoop fs -tail [-f] URI</p>
<p>功能：将文件的最后一千字节内容显示到stdout。</p>
<p>-f选项将在文件增长时输出附加数据。</p>
<p>示例：hadoop fs -tail /hadoop/hadoopfile</p>
<h4 class="relative group"><strong>-chgrp：group简写，更改文件所属组</strong> 
    <div id="-chgrpgroup简写更改文件所属组" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-chgrpgroup%e7%ae%80%e5%86%99%e6%9b%b4%e6%94%b9%e6%96%87%e4%bb%b6%e6%89%80%e5%b1%9e%e7%bb%84" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>使用方法：hadoop fs -chgrp [-R] GROUP URI [URI &hellip;]</p>
<p>功能：更改文件组的关联。用户必须是文件的所有者，否则是超级用户。</p>
<p>-R将使改变在目录结构下递归进行。</p>
<p>示例：hadoop fs -chgrp othergroup /hadoop/hadoopfile</p>
<h4 class="relative group"><strong>-chmod：更改权限</strong>（重点） 
    <div id="-chmod更改权限重点" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-chmod%e6%9b%b4%e6%94%b9%e6%9d%83%e9%99%90%e9%87%8d%e7%82%b9" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>功能：改变文件的权限。使用-R将使改变在目录结构下递归进行。</p>
<p>示例：hadoop fs -chmod 666 /hadoop/hadoopfile</p>
<h4 class="relative group"><strong>-chown：更改文件拥有者</strong> 
    <div id="-chown更改文件拥有者" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-chown%e6%9b%b4%e6%94%b9%e6%96%87%e4%bb%b6%e6%8b%a5%e6%9c%89%e8%80%85" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>功能：改变文件的拥有者。使用-R将使改变在目录结构下递归进行。</p>
<p>示例：hadoop fs -chown someuser:somegrp  /hadoop/hadoopfile</p>
<h4 class="relative group"><strong>-cp</strong>（重点） 
    <div id="-cp重点" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-cp%e9%87%8d%e7%82%b9" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>功能：从hdfs的一个路径拷贝hdfs的另一个路径</p>
<p>示例： hadoop fs -cp /aaa/jdk.tar.gz /bbb/jdk.tar.gz.2</p>
<h4 class="relative group"><strong>-mv</strong>（重点） 
    <div id="-mv重点" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-mv%e9%87%8d%e7%82%b9" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>功能：在hdfs目录中移动文件</p>
<p>示例： hadoop fs -mv /aaa/jdk.tar.gz /</p>
<h4 class="relative group"><strong>-getmerge</strong> 
    <div id="-getmerge" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-getmerge" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>功能：合并下载多个文件</p>
<p>示例：比如hdfs的目录 /aaa/下有多个文件:log.1, log.2,log.3,&hellip;</p>
<p>hadoop fs -getmerge /aaa/log.*  ./log.sum</p>
<h4 class="relative group"><strong>-rm</strong>（重点） 
    <div id="-rm重点" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-rm%e9%87%8d%e7%82%b9" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>功能：删除指定的文件。只删除非空目录和文件。-r 递归删除。</p>
<p>示例：hadoop fs -rm -r /aaa/bbb/</p>
<h4 class="relative group"><strong>-df</strong>（重点） 
    <div id="-df重点" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-df%e9%87%8d%e7%82%b9" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>功能：统计文件系统的可用空间信息</p>
<p>示例：hadoop fs -df -h /</p>
<h4 class="relative group"><strong>-du（重点）</strong> 
    <div id="-du重点" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-du%e9%87%8d%e7%82%b9" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>功能：显示目录中所有文件大小，当只指定一个文件时，显示此文件的大小。</p>
<p>示例：hadoop fs -du /user/hadoop/dir1</p>
<h4 class="relative group"><strong>-setrep</strong> 
    <div id="-setrep" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-setrep" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>功能：改变一个文件的副本系数。-R选项用于递归改变目录下所有文件的副本系数。</p>
<p>示例：hadoop fs -setrep -w 3 -R /user/hadoop/dir1</p>
<blockquote>
<p>实际工作中，一般不会使用此命令，而是通过配置文件设置副本数</p>
</blockquote>
<p>特别说明：<strong>-touch</strong></p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<h2 class="relative group">HDFS基本原理 
    <div id="hdfs基本原理" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#hdfs%e5%9f%ba%e6%9c%ac%e5%8e%9f%e7%90%86" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<h3 class="relative group">NameNode概述 
    <div id="namenode概述" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#namenode%e6%a6%82%e8%bf%b0" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<ul>
<li>NameNode是HDFS的核心。</li>
<li>NameNode也称为Master。</li>
<li>NameNode仅存储HDFS的元数据（<strong>文件系统中所有文件的目录树</strong>），<strong>并跟踪整个集群中的文件</strong>。</li>
<li>NameNode不存储实际数据或数据集。数据本身实际存储在DataNodes中。</li>
<li>NameNode知道HDFS中任何给定文件的<strong>块列表及其位置</strong>。使用此信息NameNode知道如何从块中构建文件。</li>
<li>NameNode并不持久化存储每个文件中各个块所在的DataNode的位置信息，这些信息会在系统启动时从数据节点重建。</li>
<li>NameNode对于HDFS至关重要，当NameNode关闭时，HDFS/ Hadoop集群无法访问。</li>
<li>NameNode是Hadoop集群中的单点故障。</li>
<li>NameNode所在机器<strong>通常会配置有大量内存（RAM）</strong>。</li>
</ul>
<p>元数据存放在内存中，默认情况下，每个文件的元数据大概有150B字节。</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/node1.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<h3 class="relative group">DataNode概述 
    <div id="datanode概述" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#datanode%e6%a6%82%e8%bf%b0" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<ul>
<li>DataNode负责将实际数据存储在HDFS中。</li>
<li>DataNode也称为Slave。</li>
<li>NameNode和DataNode会保持不断通信（心跳机制）。</li>
<li>DataNode启动时，它将自己发布到NameNode并汇报自己负责持有的块列表。</li>
<li>当某个DataNode关闭时，它不会影响数据或群集的可用性。NameNode将安排由其他DataNode管理的块进行副本复制。</li>
<li>DataNode所在机器通常<strong>配置有大量的硬盘空间</strong>。因为实际数据存储在DataNode中。</li>
<li>DataNode会定期（<code>dfs.heartbeat.interval</code>配置项配置，默认是3秒）向NameNode发送心跳，如果NameNode长时间没有接受到DataNode发送的心跳，NameNode就会认为该DataNode失效（10分钟+30s）。</li>
<li>block汇报时间间隔取参数<code>dfs.blockreport.intervalMsec</code>，参数未配置的话默认为6小时。</li>
</ul>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/data.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>小结：</p>
<ol>
<li>namenode =&gt; HDFS核心组件=&gt;负责管理整个HDFS集群不保存具体数据，主要保存元数据=&gt;放置在内存，所以在配置时需要大量的内存</li>
<li>datanode =&gt; HDFS组件=&gt;负责具体数据/数据集存储，需要占用大量磁盘空间，某个机器故障并不影响整个集群的使用，datanode需要每个3s发送一次心跳信息。
<ul>
<li>datanode启动时会自动向namenode汇报1次本节点的块文件信息。</li>
<li>datanode实现数据冗余存储（副本机制）。</li>
</ul>
</li>
</ol>
<h3 class="relative group">HDFS写数据流程（简化为十步走） 
    <div id="hdfs写数据流程简化为十步走" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#hdfs%e5%86%99%e6%95%b0%e6%8d%ae%e6%b5%81%e7%a8%8b%e7%ae%80%e5%8c%96%e4%b8%ba%e5%8d%81%e6%ad%a5%e8%b5%b0" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/write.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<h3 class="relative group">HDFS读数据流程（简化为五步走） 
    <div id="hdfs读数据流程简化为五步走" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#hdfs%e8%af%bb%e6%95%b0%e6%8d%ae%e6%b5%81%e7%a8%8b%e7%ae%80%e5%8c%96%e4%b8%ba%e4%ba%94%e6%ad%a5%e8%b5%b0" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/read.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<h3 class="relative group">HDFS其他功能 
    <div id="hdfs其他功能" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#hdfs%e5%85%b6%e4%bb%96%e5%8a%9f%e8%83%bd" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<h4 class="relative group">1、不同集群之间的数据复制 
    <div id="1不同集群之间的数据复制" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1%e4%b8%8d%e5%90%8c%e9%9b%86%e7%be%a4%e4%b9%8b%e9%97%b4%e7%9a%84%e6%95%b0%e6%8d%ae%e5%a4%8d%e5%88%b6" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>cluster1 =&gt; hadoop集群（测试环境）</p>
<p>cluster2 =&gt; hadoop集群（生产环境）</p>
<p>在我们实际工作当中，极有可能会遇到将测试集群的数据拷贝到生产环境集群，或者将生产环境集群的数据拷贝到测试集群，那么就需要我们在多个集群之间进行数据的远程拷贝，hadoop自带也有命令可以帮我们实现这个功能。</p>
<h4 class="relative group">2、集群内部文件拷贝scp 
    <div id="2集群内部文件拷贝scp" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2%e9%9b%86%e7%be%a4%e5%86%85%e9%83%a8%e6%96%87%e4%bb%b6%e6%8b%b7%e8%b4%9dscp" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">上传</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="n">scp</span>  <span class="n">本地文件</span>  <span class="n">用户名</span><span class="nv">@主机名称</span><span class="err">:</span><span class="n">拷贝路径</span>
</span></span><span class="line"><span class="cl"><span class="n">scp</span> <span class="n">-r</span> <span class="n">本地文件夹</span> <span class="n">用户名</span><span class="nv">@主机名称</span><span class="err">:</span><span class="n">拷贝路径</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">下载</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="n">scp</span> <span class="n">用户名</span><span class="nv">@主机名称</span><span class="err">:</span><span class="n">远程文件路径</span> <span class="n">本地路径</span>
</span></span><span class="line"><span class="cl"><span class="n">scp</span> <span class="n">-r</span> <span class="n">用户名</span><span class="nv">@主机名称</span><span class="err">:</span><span class="n">远程文件夹路径</span> <span class="n">本地路径</span>
</span></span></code></pre></div><h4 class="relative group">3、跨集群之间的数据拷贝distcp 
    <div id="3跨集群之间的数据拷贝distcp" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3%e8%b7%a8%e9%9b%86%e7%be%a4%e4%b9%8b%e9%97%b4%e7%9a%84%e6%95%b0%e6%8d%ae%e6%8b%b7%e8%b4%9ddistcp" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="nv">@cluster1</span> <span class="p">~]</span> <span class="c"># hadoop distcp hdfs://cluster1:8020/jdk-8u141-linux-x64.tar.gz  hdfs://cluster2:8020/</span>
</span></span></code></pre></div><h4 class="relative group">4、Archive档案的使用(Hadoop归档模式) 
    <div id="4archive档案的使用hadoop归档模式" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#4archive%e6%a1%a3%e6%a1%88%e7%9a%84%e4%bd%bf%e7%94%a8hadoop%e5%bd%92%e6%a1%a3%e6%a8%a1%e5%bc%8f" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>HDFS并不擅长存储小文件，因为每个文件最少一个block，每个block的元数据都会在NameNode占用内存，如果存在大量的小文件，它们会吃掉NameNode节点的大量内存。</p>
<p>Hadoop Archives可以有效的处理以上问题，它可以把多个文件归档成为一个文件，归档成一个文件后还可以透明的访问每一个文件。</p>
<p><strong>1 如何创建Archive</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">Usage</span><span class="err">:</span> <span class="n">hadoop</span> <span class="n">archive</span> <span class="n">-archiveName</span> <span class="n">name</span> <span class="n">-p</span> <span class="p">&lt;</span><span class="n">parent</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="n">src</span><span class="p">&gt;*</span> <span class="p">&lt;</span><span class="n">dest</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">-archiveName</span><span class="err">：</span><span class="n">归档后的文件名称</span>
</span></span><span class="line"><span class="cl"><span class="n">-p</span><span class="err">：</span><span class="n">指定要归档父文件夹</span><span class="err">，</span><span class="n">所有需要归档的文件都在此目录</span>
</span></span></code></pre></div><p>其中-archiveName是指要创建的存档的名称。比如test.har，<em><em>archive的名字的扩展名应该是</em>.har</em>*。 -p参数指定文件存档文件（src）的相对路径。</p>
<p>举个例子：<strong>-p /foo/bar a/b/c e/f/g</strong></p>
<p>这里的<code>/foo/bar</code>是<code>a/b/c</code>与<code>e/f/g</code>的父路径，</p>
<p>所以完整路径为<code>/foo/bar/a/b/c</code>与<code>/foo/bar/e/f/g</code></p>
<p>例如：如果你只想存档一个目录/input下的所有文件:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hadoop</span> <span class="n">archive</span> <span class="n">-archiveName</span> <span class="n">test</span><span class="p">.</span><span class="py">har</span> <span class="n">-p</span> <span class="p">/</span><span class="n">input</span> <span class="p">/</span><span class="n">outputdir</span>
</span></span></code></pre></div><p>这样就会在/outputdir目录下创建一个名为test.har的存档文件。</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-1.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-2.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p><strong>2 如何查看Archive</strong></p>
<p>首先我们来看下创建好的har文件。使用如下的命令：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hadoop</span> <span class="n">fs</span> <span class="n">-ls</span> <span class="p">/</span><span class="n">outputdir</span><span class="p">/</span><span class="n">test</span><span class="p">.</span><span class="py">har</span>
</span></span></code></pre></div><p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-3.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>这里可以看到har文件包括：两个索引文件，多个part文件（本例只有一个）以及一个标识成功与否的文件。part文件是多个原文件的集合，根据index文件去找到原文件。</p>
<p>例如上述的三个小文件1.txt 2.txt 3.txt内容分别为1，2，3。进行archive操作之后，三个小文件就归档到test.har里的part-0一个文件里。</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-4.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-5.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>archive作为文件系统层暴露给外界。所以所有的fs shell命令都能在archive上运行，但是要使用不同的URI。</p>
<p>Hadoop Archives的URI是：</p>
<p><code>har://scheme-hostname:port/archivepath/fileinarchive</code></p>
<p>scheme-hostname格式为hdfs-域名:端口，如果没有提供scheme-hostname，它会使用默认的文件系统。这种情况下URI是这种形式：</p>
<p><code>har:///archivepath/fileinarchive</code></p>
<p>如果用har uri去访问的话，索引、标识等文件就会隐藏起来，只显示创建档案之前的原文件：</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-6.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-7.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-8.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>案例：把/test目录下的1.txt、2.txt、3.txt进行归档操作</p>
<p>数据集准备：</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-9.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>归档：</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-10.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>查看归档包内容：har://hdfs-集群名称</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-11.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>查看归档包中文件的内容：</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-12.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>解压归档包</p>
<p>① 删除1.txt/2.txt/3.txt</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-13.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>② 解压归档包</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-14.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p><strong>3 如何解压Archive</strong></p>
<p>按顺序解压存档（串行）：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">Hadoop</span> <span class="n">fs</span> <span class="n">-cp</span> <span class="n">har</span><span class="err">:</span><span class="p">///</span><span class="n">user</span><span class="p">/</span><span class="n">zoo</span><span class="p">/</span><span class="n">foo</span><span class="p">.</span><span class="n">har</span><span class="p">/</span><span class="n">dir1</span> <span class="n">hdfs</span><span class="err">:</span><span class="p">/</span><span class="n">user</span><span class="p">/</span><span class="n">zoo</span><span class="p">/</span><span class="n">newdir</span>
</span></span></code></pre></div><p>要并行解压存档，请使用DistCp：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hadoop</span> <span class="n">distcp</span> <span class="n">har</span><span class="err">:</span><span class="p">///</span><span class="n">user</span><span class="p">/</span><span class="n">zoo</span><span class="p">/</span><span class="n">foo</span><span class="p">.</span><span class="n">har</span><span class="p">/</span><span class="n">dir1</span> <span class="n">hdfs</span><span class="err">:</span><span class="p">/</span><span class="n">user</span><span class="p">/</span><span class="n">zoo</span><span class="p">/</span><span class="n">newdir</span>
</span></span></code></pre></div><p><strong>4 Archive注意事项</strong></p>
<ol>
<li>Hadoop archives是特殊的档案格式。一个Hadoop archive对应一个文件系统目录。Hadoop archive的扩展名是*.har；</li>
<li>创建archives本质是<strong>运行一个Map/Reduce任务</strong>，所以应该在Hadoop集群上运行创建档案的命令；</li>
<li>创建archive文件要消耗和原文件一样多的硬盘空间（<strong>归档并没有压缩</strong>）；</li>
<li>archive文件不支持压缩，尽管archive文件看起来像已经被压缩过；</li>
<li>archive文件一旦创建就无法改变，要修改的话，需要创建新的archive文件。事实上，一般不会再对存档后的文件进行修改，因为它们是<strong>定期存档的，比如每周或每日</strong>；</li>
<li>当创建archive时，源文件不会被更改或删除；</li>
</ol>
<h2 class="relative group">HDFS元数据管理机制 
    <div id="hdfs元数据管理机制" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#hdfs%e5%85%83%e6%95%b0%e6%8d%ae%e7%ae%a1%e7%90%86%e6%9c%ba%e5%88%b6" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<ul>
<li>namenode：管理元数据</li>
<li>datanode：管理实际数据</li>
<li>secondarynamenode：辅助namenode管理元数据</li>
</ul>
<h3 class="relative group">元数据管理概述 
    <div id="元数据管理概述" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%85%83%e6%95%b0%e6%8d%ae%e7%ae%a1%e7%90%86%e6%a6%82%e8%bf%b0" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p><strong>HDFS元数据</strong>，按<em>类型</em>分，主要包括以下几个部分：</p>
<ul>
<li>
<p>持久化存储（HDFS集群中的文件的元数据信息）：</p>
<ol>
<li>文件、目录自身的属性信息，例如文件名，目录名，修改信息等。</li>
<li>文件记录的信息的存储相关的信息，例如存储块信息，分块情况，副本个数等。</li>
</ol>
</li>
<li>
<p>非持久化存储：</p>
<ol start="3">
<li>记录HDFS的Datanode的信息，用于DataNode的管理。</li>
</ol>
</li>
</ul>
<p>按<em>形式</em>分为<strong>内存元数据</strong>和<strong>元数据文件</strong>两种，分别存在内存和磁盘上。</p>
<p>HDFS磁盘上元数据文件分为两类，用于持久化存储（① 文件自身属性 ② 文件存储相关信息）：</p>
<ul>
<li><strong>fsimage 镜像文件</strong>：是元数据的一个持久化的检查点，包含Hadoop文件系统中的所有目录和文件元数据信息，<strong>但不包含文件块位置的信息</strong>。文件块位置信息只存储在内存中，是在 datanode加入集群的时候，namenode询问datanode得到的，并且间断的更新。</li>
</ul>
<blockquote>
<p>fsimage镜像文件：保存整个HDFS集群的元数据信息，不包含datanode节点信息。因为datanode数据都是放在内存元数据。</p>
</blockquote>
<ul>
<li><strong>edits 编辑日志</strong>：存放的是Hadoop文件系统的所有更改操作（文件创建，删除或修改）的日志，文件系统客户端执行的更改操作首先会被记录到edits文件中。</li>
</ul>
<blockquote>
<p>edits编辑日志：我们客户端向Hadoop的所有更改（增、删、改），都会被记录下来</p>
</blockquote>
<p>fsimage和edits文件都是经过序列化的，在NameNode启动的时候，它会将fsimage文件中的内容加载到内存中，之后再执行edits文件中的各项操作，使得内存中的元数据和实际的同步，存在<strong>内存中的元数据支持客户端的读操作，也是最完整的元数据</strong>。</p>
<p>例子：</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/namenode1.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>上面两者内容合并得到下面的最新数据：</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/next.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>当客户端对HDFS中的文件进行新增或者修改操作，操作记录首先被记入edits日志文件中，当客户端操作成功后，相应的元数据会更新到内存元数据中。因为fsimage文件一般都很大（GB级别的很常见），如果所有的更新操作都往fsimage文件中添加，这样会导致系统运行的十分缓慢。</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/namenode.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>HDFS这种设计实现着手于：一是内存中数据更新、查询快，极大缩短了操作响应时间；二是内存中元数据丢失风险颇高（断电等），因此辅佐元数据镜像文件（fsimage）+编辑日志文件（edits）的备份机制进行确保元数据的安全。</p>
<p><strong>NameNode维护整个文件系统元数据</strong>。因此，元数据的准确管理，影响着HDFS提供文件存储服务的能力。</p>
<p>在Hadoop的HDFS首次部署好配置文件之后，并不能马上启动使用，而是先要对文件系统进行格式化。需要在NameNode（NN）节点上进行如下的操作：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nv">$HADOOP_HOME</span><span class="p">/</span><span class="n">bin</span><span class="p">/</span><span class="n">hdfs</span> <span class="n">namenode</span> <span class="n">-format</span>
</span></span></code></pre></div><p>在这里要注意两个概念，一个是文件系统，此时的文件系统在物理上还不存在；二就是此处的格式化并不是指传统意义上的本地磁盘格式化，而是一些清除与准备工作。</p>
<p>格式化完成之后，将会在<code>$dfs.namenode.name.dir/current</code>目录下创建如下的文件结构，这个目录也正是namenode元数据相关的文件目录：</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-15.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p>其中的<code>dfs.namenode.name.dir</code>是在hdfs-site.xml文件中配置的，默认值如下：</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-16.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p><code>namespaceID/clusterID/blockpoolID</code> 这些都是HDFS集群的唯一标识符。标识符被用来防止DataNodes意外注册到另一个集群中的namenode上。这些标识在联邦（federation）部署中特别重要。联邦模式下，会有多个NameNode独立工作。每个的NameNode提供唯一的命名空间（namespaceID），并管理一组唯一的文件块池（blockpoolID）。clusterID将整个集群结合在一起作为单个逻辑单元，在集群中的所有节点上都是一样的。</p>
<p><code>storageType</code>说明这个文件存储的是什么进程的数据结构信息（如果是DataNode，storageType=DATA_NODE）；</p>
<p><code>cTime</code> NameNode存储系统创建时间，首次格式化文件系统这个属性是0，当文件系统升级之后，该值会更新到升级之后的时间戳；</p>
<p><code>layoutVersion</code>表示HDFS永久性数据结构的版本信息，是一个负整数。</p>
<p>补充说明：</p>
<p><em>格式化集群的时候，可以指定集群的cluster_id，但是不能与环境中其他集群有冲突。如果没有提供cluster_id，则会自动生成一个唯一的ClusterID。</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nv">$HADOOP_HOME</span><span class="p">/</span><span class="n">bin</span><span class="p">/</span><span class="n">hdfs</span> <span class="n">namenode</span> <span class="n">-format</span> <span class="n">-clusterId</span> <span class="p">&lt;</span><span class="n">cluster_id</span><span class="p">&gt;</span>
</span></span></code></pre></div><p><code>seen_txid</code></p>
<p>$dfs.namenode.name.dir/current/seen_txid非常重要，是存放transactionId的文件，format之后是0，<code>它代表的是namenode里面的edits_*文件的尾数</code>，namenode重启的时候，会按照seen_txid的数字，循序从头跑edits_0000001~到seen_txid的数字。所以当你的hdfs发生异常重启的时候，一定要比对seen_txid内的数字是不是你edits最后的尾数。</p>
<p><code>Fsimage &amp; edits</code></p>
<p>$dfs.namenode.name.dir/current目录下在format的同时也会生成fsimage和edits文件，及其对应的md5校验文件。</p>
<p><strong>面试题-fsimage是干什么的？里面保存的哪些数据？是否可以直接查看？</strong></p>
<p><code>fsimage</code>文件其实是Hadoop文件系统元数据的一个永久性的检查点，其中包含Hadoop文件系统中的所有目录和文件idnode的序列化信息；</p>
<p>fsimage包含Hadoop文件系统中的所有目录和文件idnode的序列化信息；对于文件来说，包含的信息有修改时间、访问时间、块大小和组成一个文件块信息等；而对于目录来说，包含的信息主要有修改时间、访问控制权限等信息。</p>
<p><strong>面试题-edits是干什么的？里面保存的哪些数据？是否可以直接查看？</strong></p>
<p><code>edits</code>文件存放的是Hadoop文件系统的所有更新操作的路径，文件系统客户端执行的所以写操作首先会被记录到edits文件中。</p>
<p><strong>面试题-为什么要对两者之间进行合并操作呢？</strong></p>
<p>答：为了得到最新的元数据</p>
<p>NameNode起来之后，HDFS中的更新操作会重新写到edits文件中，因为fsimage文件一般都很大（GB级别的很常见），如果所有的更新操作都往fsimage文件中添加，这样会导致系统运行的十分缓慢，但是如果往edits文件里面写就不会这样，每次执行写操作之后，且在向客户端发送成功代码之前，edits文件都需要同步更新。如果一个文件比较大，使得写操作需要向多台机器进行操作，只有当所有的写操作都执行完成之后，写操作才会返回成功，这样的好处是任何的操作都不会因为机器的故障而导致元数据的不同步。</p>
<p><strong>内容查看</strong></p>
<blockquote>
<p>元数据存储位置：/export/data/hadoop-3.3.0/dfs/name/current</p>
</blockquote>
<p>fsimage、edits两个文件中的内容使用普通文本编辑器是无法直接查看的，幸运的是hadoop为此准备了专门的工具用于查看文件的内容，这些工具分别为<code>oev</code>和<code>oiv</code>，可以使用hdfs调用执行。</p>
<p><code>oev是offline edits viewer（离线edits查看器）的缩写</code>，该工具只操作文件因而并不需要hadoop集群处于运行状态。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hdfs</span> <span class="n">oev</span> <span class="n">-i</span> <span class="n">edits_0000000000000000081</span><span class="p">-</span><span class="mf">0000000000000000089</span> <span class="n">-o</span> <span class="n">edits</span><span class="p">.</span><span class="py">xml</span>
</span></span><span class="line"><span class="cl"><span class="n">-i</span><span class="p">,-</span><span class="n">-inputFile</span> <span class="p">&lt;</span><span class="n">arg</span><span class="p">&gt;</span>   
</span></span><span class="line"><span class="cl"><span class="n">-o</span><span class="p">,-</span><span class="n">-outputFile</span> <span class="p">&lt;</span><span class="n">arg</span><span class="p">&gt;</span>  <span class="n">Name</span> <span class="n">of</span> <span class="n">output</span> <span class="n">file</span>
</span></span></code></pre></div><p>在输出文件中，每个RECORD记录了一次操作，示例如下：</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-17.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<p><code>oiv是offline image viewer的缩写</code>，用于将fsimage文件的内容转储到指定文件中以便于阅读，该工具还提供了只读的WebHDFS API以允许离线分析和检查hadoop集群的命名空间。oiv在处理非常大的fsimage文件时是相当快的，如果该工具不能够处理fsimage，它会直接退出。该工具不具备向后兼容性，比如使用hadoop-2.4版本的oiv不能处理hadoop-2.3版本的fsimage，只能使用hadoop-2.3版本的oiv。同oev一样，就像它的名称所提示的（offline），oiv也不需要hadoop集群处于运行状态。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hdfs</span> <span class="n">oiv</span> <span class="n">-i</span> <span class="n">fsimage_0000000000000000115</span> <span class="n">-p</span> <span class="n">XML</span> <span class="n">-o</span> <span class="n">fsimage</span><span class="p">.</span><span class="py">xml</span>
</span></span></code></pre></div><p>示例如下：</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/imge19.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<h2 class="relative group">secondary namenode 
    <div id="secondary-namenode" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#secondary-namenode" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>NameNode职责是管理元数据信息，DataNode的职责是负责数据具体存储，那么SecondaryNameNode的作用是什么？对很多初学者来说是非常迷惑的。它为什么会出现在HDFS中。从它的名字上看，它给人的感觉就像是NameNode的备份。但它实际上却不是。</p>
<p>大家猜想一下，当HDFS集群运行一段事件后，就会出现下面一些问题：</p>
<ul>
<li>edit logs文件会变的很大，怎么去管理这个文件是一个挑战。</li>
<li>NameNode重启会花费很长时间，因为有很多改动要合并到fsimage文件上。</li>
<li>如果NameNode挂掉了，那就丢失了一些改动。因为此时的fsimage文件非常旧。</li>
</ul>
<p>因此为了克服这个问题，我们需要一个易于管理的机制来帮助我们减小edit logs文件的大小和得到一个最新的fsimage文件，这样也会减小在NameNode上的压力。这跟Windows的恢复点是非常像的，Windows的恢复点机制允许我们对OS进行快照，这样当系统发生问题时，我们能够回滚到最新的一次恢复点上。</p>
<p>SecondaryNameNode就是来帮助解决上述问题的，它的职责是<strong>合并NameNode的edit logs到fsimage文件中</strong>。</p>
<h3 class="relative group">Checkpoint（2NN合并元数据文件过程） 
    <div id="checkpoint2nn合并元数据文件过程" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#checkpoint2nn%e5%90%88%e5%b9%b6%e5%85%83%e6%95%b0%e6%8d%ae%e6%96%87%e4%bb%b6%e8%bf%87%e7%a8%8b" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>每达到触发条件，会由secondary namenode将namenode上积累的所有edits和一个最新的fsimage下载到本地，并加载到内存进行merge（这个过程称为checkpoint），如下图所示：</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        src="/posts/architecture/distributed/hadoop/hdfs/image-19.png"
        alt=""
      />
      
      
    </figure>
  

</p>
<ul>
<li>NameNode管理着元数据信息，其中有两类持久化元数据文件：edits操作日志文件和fsimage元数据镜像文件。新的操作日志不会立即与fsimage进行合并，也不会刷到NameNode的内存中，而是会先写到edits中(因为合并需要消耗大量的资源)，操作成功之后更新至内存。</li>
<li>有dfs.namenode.checkpoint.period和dfs.namenode.checkpoint.txns 两个配置，只要达到这两个条件任何一个，secondarynamenode就会执行checkpoint的操作。</li>
<li>当触发checkpoint操作时，NameNode会生成一个新的edits即上图中的edits.new文件，同时SecondaryNameNode会将edits文件和fsimage复制到本地（HTTP GET方式）。</li>
<li>secondarynamenode将下载下来的fsimage载入到内存，然后一条一条地执行edits文件中的各项更新操作，使得内存中的fsimage保存最新，这个过程就是edits和fsimage文件合并，生成一个新的fsimage文件即上图中的Fsimage.ckpt文件。</li>
<li>secondarynamenode将新生成的Fsimage.ckpt文件复制到NameNode节点。</li>
<li>在NameNode节点的edits.new文件和Fsimage.ckpt文件会替换掉原来的edits文件和fsimage文件，至此刚好是一个轮回，即在NameNode中又是edits和fsimage文件。</li>
<li>等待下一次checkpoint触发SecondaryNameNode进行工作，一直这样循环操作。</li>
</ul>
<p><strong>Checkpoint触发条件</strong></p>
<p>Checkpoint操作受两个参数控制，可以通过core-site.xml进行配置：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="n">property</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">   	<span class="p">&lt;</span><span class="n">name</span><span class="p">&gt;</span><span class="n">dfs</span><span class="p">.</span><span class="py">namenode</span><span class="p">.</span><span class="py">checkpoint</span><span class="p">.</span><span class="n">period</span><span class="p">&lt;/</span><span class="n">name</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">   	<span class="p">&lt;</span><span class="n">value</span><span class="p">&gt;</span><span class="mf">3600</span><span class="p">&lt;/</span><span class="n">value</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="n">description</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="n">两次连续的checkpoint之间的时间间隔</span><span class="err">。</span><span class="n">默认1小时</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;/</span><span class="n">description</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="n">property</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="n">property</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  	<span class="p">&lt;</span><span class="n">name</span><span class="p">&gt;</span><span class="n">dfs</span><span class="p">.</span><span class="py">namenode</span><span class="p">.</span><span class="py">checkpoint</span><span class="p">.</span><span class="n">txns</span><span class="p">&lt;/</span><span class="n">name</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  	<span class="p">&lt;</span><span class="n">value</span><span class="p">&gt;</span><span class="mf">1000000</span><span class="p">&lt;/</span><span class="n">value</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  	<span class="p">&lt;</span><span class="n">description</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="n">最大的没有执行checkpoint事务的数量</span><span class="err">，</span><span class="n">满足将强制执行紧急checkpoint</span><span class="err">，</span><span class="n">即使尚未达到检查点周期</span><span class="err">。</span><span class="n">默认设置为100万</span><span class="err">。</span>  
</span></span><span class="line"><span class="cl">	<span class="p">&lt;/</span><span class="n">description</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="n">property</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>从上面的描述我们可以看出，SecondaryNamenode根本就不是Namenode的一个热备，其只是将fsimage和edits合并。其拥有的fsimage不是最新的，因为在他从NameNode下载fsimage和edits文件时候，新的更新操作已经写到edit.new文件中去了。而这些更新在SecondaryNamenode是没有同步到的！当然，<strong>如果NameNode中的fsimage真的出问题了，还是可以用SecondaryNamenode中的fsimage替换一下NameNode上的fsimage，虽然已经不是最新的fsimage，但是我们可以将损失减小到最少！</strong></p>
<h2 class="relative group">HDFS安全模式 
    <div id="hdfs安全模式" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#hdfs%e5%ae%89%e5%85%a8%e6%a8%a1%e5%bc%8f" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<h3 class="relative group">安全模式概述 
    <div id="安全模式概述" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%ae%89%e5%85%a8%e6%a8%a1%e5%bc%8f%e6%a6%82%e8%bf%b0" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p><code>安全模式</code>是HDFS所处的一种特殊状态，在这种状态下，<code>文件系统只接受读数据请求，而不接受删除、修改等变更请求</code>，是一种<code>保护机制</code>，用于保证集群中的数据块的安全性。</p>
<p>1个Block块会产生3个副本 =&gt; 必须保证有充足datanode节点进行存储。</p>
<p>在NameNode主节点启动时，HDFS首先进入安全模式，集群会开始检查数据块的完整性。DataNode在启动的时候会向Namenode汇报可用的block信息，当整个系统达到安全标准时，HDFS自动离开安全模式。</p>
<p>假设我们设置的副本数（即参数dfs.replication）是5，那么在Datanode上就应该有5个副本存在，假设只存在3个副本，那么比例就是3/5=0.6。在<code>配置文件hdfs-default.xml中定义了一个最小的副本的副本率（即参数dfs.namenode.safemode.threshold-pct）0.999</code>。</p>
<blockquote>
<p>hdfs-default.xml官方默认配置，我们本地配置hdfs-site.xml</p>
</blockquote>
<p>我们的副本率0.6明显小于0.99，因此系统会自动的复制副本到其他的DataNode,使得副本率不小于0.999.如果系统中有8个副本，超过我们设定的5个副本，那么系统也会删除多余的3个副本。</p>
<p>如果HDFS处于<code>安全模式下，不允许HDFS客户端进行任何修改文件的操作</code>,包括上传文件，删除文件，重命名，创建文件夹，修改副本数等操作。</p>
<h3 class="relative group">安全模式配置 
    <div id="安全模式配置" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%ae%89%e5%85%a8%e6%a8%a1%e5%bc%8f%e9%85%8d%e7%bd%ae" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>与安全模式相关主要配置在hdfs-site.xml文件中，主要有下面几个属性:</p>
<p>dfs.namenode.replication.min: 每个数据块最小副本数量，默认为1。在上传文件时，达到最小副本数，就认为上传是成功的。</p>
<p>dfs.namenode.safemode.threshold-pct: 达到最小副本数的数据块的百分比。默认为0.999f。当小于这个比例，那就将系统切换成安全模式，对数据块进行复制；当大于该比例时，就离开安全模式，说明系统有足够的数据块副本数，可以对外提供服务。</p>
<p>0.999f/1(1:1)，3个副本=3个datanode节点</p>
<blockquote>
<p>所以dfs.namenode.safemode.threshold-pct此参数必须是大于0且小于1，如果值&lt;=0，不进入安全模式；值=1，一直处于安全模式之间，临界值（特殊值），0代表不进入安全模式，=1代表直接进入安全模式！</p>
</blockquote>
<p>dfs.namenode.safemode.min.datanodes: 离开安全模式的最小可用datanode数量要求，默认为0。也就是即使所有datanode都不可用，仍然可以离开安全模式。</p>
<p>dfs.namenode.safemode.extension: 当集群可用block比例，可用datanode都达到要求之后，如果在extension配置的时间段之后依然能满足要求，此时集群才离开安全模式。单位为毫秒，默认为30000.也就是当满足条件并且能够维持30秒之后，离开安全模式。 这个配置主要是对集群稳定程度做进一步的确认。避免达到要求后马上又不符合安全标准。</p>
<p>总结一下，要离开安全模式，需要满足以下条件：</p>
<p>1）达到副本数量要求的block比例满足要求；</p>
<p>2）可用的datanode节点数满足配置的数量要求；</p>
<p>3）1、2 两个条件满足后维持的时间达到配置的要求</p>
<h3 class="relative group">安全模式命令 
    <div id="安全模式命令" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%ae%89%e5%85%a8%e6%a8%a1%e5%bc%8f%e5%91%bd%e4%bb%a4" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>手动进入安全模式</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hdfs</span> <span class="n">dfsadmin</span> <span class="n">-safemode</span> <span class="n">enter</span>  
</span></span></code></pre></div><p>手动进入安全模式对于集群维护或者升级的时候非常有用，因为这时候HDFS上的数据是只读的。手动退出安全模式可以用下面命令：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hdfs</span> <span class="n">dfsadmin</span> <span class="n">-safemode</span> <span class="n">leave</span>
</span></span></code></pre></div><p>如果你想获取到集群是否处于安全模式，可以用下面的命令获取：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">hdfs</span> <span class="n">dfsadmin</span> <span class="n">-safemode</span> <span class="n">get</span>
</span></span></code></pre></div>
        </div>
                
        

        

          
      </div>
     
    
     <script>
        var oid = "views_posts\/architecture\/distributed\/hadoop\/hdfs\/index.md"
        var oid_likes = "likes_posts\/architecture\/distributed\/hadoop\/hdfs\/index.md"
      </script>
      
      
      
      <script type="text/javascript" src="/js/page.min.5b1bad196a6075a1e11bae1dc95f24f67b610948a00525e347566c5a62338ea78f1c7224ab9a53873dcdb2a1a7d7d391b8a8ef45561297f68806c01315b0c4f6.js" integrity="sha512-WxutGWpgdaHhG64dyV8k9nthCUigBSXjR1ZsWmIzjqePHHIkq5pThz3NsqGn19ORuKjvRVYSl/aIBsATFbDE9g=="></script>
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  


    
    
    <div class="pt-3">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="pt-3">
        
<div>
    <div class="pagination__title">
        <span class="pagination__title-h" style="font-size: 20px;">💬评论</span>
        <hr />
    </div>
    <div id="tcomment"></div>
    <script src="https://cdn.staticfile.org/twikoo/1.4.11/twikoo.all.min.js"></script>
    <script>
        twikoo.init({
            envId: "https://twikoo-api-three-gamma.vercel.app/",  
            el: "#tcomment",
            lang: 'zh-CN',
            region: 'ap-guangzhou',  
            path: window.TWIKOO_MAGIC_PATH||window.location.pathname,
        });
    </script>
</div>
      </div>
    </div>
    
    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top" title="Scroll to top">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
    <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
      <ul class="flex flex-col list-none sm:flex-row">
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/todo/"
            title="">
            
            TODO
          </a>
        </li>
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/leetcode/"
            title="">
            
            Leetcode
          </a>
        </li>
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/tags/"
            title="">
            
            Tags
          </a>
        </li>
        
      </ul>
    </nav>
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      &copy;
      2024
      WFUing
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; WFUing
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.62060bb247f4de2b6dde45903668fefb68d792f365587605177b1227c0cf43588701edaca0cb40e2c8e2789bd5ce67c1d2a215b9fb258c3496a7cd25e7cb5fdf.js" integrity="sha512-YgYLskf03itt3kWQNmj&#43;&#43;2jXkvNlWHYFF3sSJ8DPQ1iHAe2soMtA4sjieJvVzmfB0qIVufsljDSWp80l58tf3w=="></script>
  
  
  <a rel="me" href="https://masto.ai/@blowfish"></a>
  
</footer><div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="https://WFUing.github.io/"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

  </div>
</body>

</html>
